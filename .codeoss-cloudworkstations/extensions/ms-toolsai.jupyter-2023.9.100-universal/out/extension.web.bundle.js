/*! For license information please see extension.web.bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={68295:(e,t,n)=>{"use strict";function r(e){return{formatNow:()=>{try{return e.toLocaleString()}catch{return`${e}`}},format:()=>{try{return e.toLocaleTimeString()}catch{return`${e}`}}}}n.r(t),n.d(t,{default:()=>r})},47542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityMonitor=void 0;const r=n(4016);t.ActivityMonitor=class{constructor(e){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new r.Signal(this),e.signal.connect(this._onSignalFired,this),this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,r.Signal.clearData(this))}_onSignalFired(e,t){clearTimeout(this._timer),this._sender=e,this._args=t,this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}},79622:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(47542),t),i(n(92086),t),i(n(47390),t),i(n(99458),t),i(n(20176),t),i(n(47846),t),i(n(32533),t),i(n(57319),t)},92086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},47390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownCodeBlocks=void 0,function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class n{constructor(e){this.startLine=e,this.code="",this.endLine=-1}}e.MarkdownCodeBlock=n,e.isMarkdown=function(e){return t.indexOf(e)>-1},e.findMarkdownCodeBlocks=function(t){if(!t||""===t)return[];const r=t.split("\n"),i=[];let o=null;for(let t=0;t<r.length;t++){const s=r[t],a=0===s.indexOf(e.CODE_BLOCK_MARKER),c=null!=o;if(a||c)if(c)o&&(a?(o.endLine=t-1,i.push(o),o=null):o.code+=s+"\n");else{o=new n(t);const r=s.indexOf(e.CODE_BLOCK_MARKER),a=s.lastIndexOf(e.CODE_BLOCK_MARKER);r!==a&&(o.code=s.substring(r+e.CODE_BLOCK_MARKER.length,a),o.endLine=t,i.push(o),o=null)}}return i}}(t.MarkdownCodeBlocks||(t.MarkdownCodeBlocks={}))},99458:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var process=__webpack_require__(34155),__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageConfig=void 0;const coreutils_1=__webpack_require__(95082),minimist_1=__importDefault(__webpack_require__(96562)),url_1=__webpack_require__(57319);var PageConfig;(function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=Object.create(null);let found=!1;if("undefined"!=typeof document&&document){const e=document.getElementById("jupyter-config-data");e&&(configData=JSON.parse(e.textContent||""),found=!0)}if(!found&&process.argv)try{const cli=minimist_1.default(process.argv.slice(2)),path=__webpack_require__(26470);let fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in process.env&&(fullPath=path.resolve(process.env.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(e){console.error(e)}if(coreutils_1.JSONExt.isObject(configData))for(const e in configData)"string"!=typeof configData[e]&&(configData[e]=JSON.stringify(configData[e]));else configData=Object.create(null);return configData[name]||getBodyData(name)}function setOption(e,t){const n=getOption(e);return configData[e]=t,n}function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}function getUrl(e){var t,n,r;let i=getOption("baseUrl")||"/";const o=null!==(t=e.mode)&&void 0!==t?t:getOption("mode"),s=null!==(n=e.workspace)&&void 0!==n?n:getOption("workspace"),a="multiple-document"===o?"lab":"doc";i=url_1.URLExt.join(i,a),s!==PageConfig.defaultWorkspace&&(i=url_1.URLExt.join(i,"workspaces",encodeURIComponent(getOption("workspace"))));const c=null!==(r=e.treePath)&&void 0!==r?r:getOption("treePath");return c&&(i=url_1.URLExt.join(i,"tree",url_1.URLExt.encodeParts(c))),i}function getWsUrl(e){let t=getOption("wsUrl");if(!t){if(0!==(e=e?url_1.URLExt.normalize(e):getBaseUrl()).indexOf("http"))return"";t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}function getNBConvertURL({path:e,format:t,download:n}){const r=url_1.URLExt.encodeParts(e),i=url_1.URLExt.join(getBaseUrl(),"nbconvert",t,r);return n?i+"?download=true":i}function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}function getNotebookVersion(){const e=getOption("notebookVersion");return""===e?[0,0,0]:JSON.parse(e)}PageConfig.getOption=getOption,PageConfig.setOption=setOption,PageConfig.getBaseUrl=getBaseUrl,PageConfig.getTreeUrl=getTreeUrl,PageConfig.getShareUrl=getShareUrl,PageConfig.getTreeShareUrl=getTreeShareUrl,PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default",PageConfig.getWsUrl=getWsUrl,PageConfig.getNBConvertURL=getNBConvertURL,PageConfig.getToken=getToken,PageConfig.getNotebookVersion=getNotebookVersion;let configData=null,Extension;function getBodyData(e){if("undefined"==typeof document||!document.body)return"";const t=document.body.dataset[e];return void 0===t?"":decodeURIComponent(t)}!function(e){function t(e){try{const t=getOption(e);if(t)return JSON.parse(t)}catch(t){console.warn(`Unable to parse ${e}.`,t)}return[]}e.deferred=t("deferredExtensions"),e.disabled=t("disabledExtensions"),e.isDeferred=function(t){const n=t.indexOf(":");let r="";return-1!==n&&(r=t.slice(0,n)),e.deferred.some((e=>e===t||r&&e===r))},e.isDisabled=function(t){const n=t.indexOf(":");let r="";return-1!==n&&(r=t.slice(0,n)),e.disabled.some((e=>e===t||r&&e===r))}}(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig=exports.PageConfig||(exports.PageConfig={}))},20176:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathExt=void 0;const r=n(26470);!function(e){function t(e){return 0===e.indexOf("/")&&(e=e.slice(1)),e}e.join=function(...e){const n=r.posix.join(...e);return"."===n?"":t(n)},e.basename=function(e,t){return r.posix.basename(e,t)},e.dirname=function(e){const n=t(r.posix.dirname(e));return"."===n?"":n},e.extname=function(e){return r.posix.extname(e)},e.normalize=function(e){return""===e?"":t(r.posix.normalize(e))},e.resolve=function(...e){return t(r.posix.resolve(...e))},e.relative=function(e,n){return t(r.posix.relative(e,n))},e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e},e.removeSlash=t}(t.PathExt||(t.PathExt={}))},47846:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0,(n=t.Text||(t.Text={})).jsIndexToCharIndex=function(e,t){return e},n.charIndexToJsIndex=function(e,t){return e},n.camelCase=function(e,t=!1){return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,r){return r?r.toUpperCase():t?n.toUpperCase():n.toLowerCase()}))},n.titleCase=function(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}},32533:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;const i=r(n(68295));var o;(o=t.Time||(t.Time={})).formatHuman=function(e){i.default.locale(document.documentElement.lang);let t=i.default(e).fromNow();return t="a few seconds ago"===t?"seconds ago":t,t},o.format=function(e,t="YYYY-MM-DD HH:mm"){return i.default(e).format(t)}},57319:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.URLExt=void 0;const i=n(26470),o=r(n(84564));!function(e){function t(e){if("undefined"!=typeof document&&document){const t=document.createElement("a");return t.href=e,t}return o.default(e)}function n(...e){const t=o.default(e[0],{}),n=`${t.protocol}${t.slashes?"//":""}${t.auth}${t.auth?"@":""}${t.host}`,r=i.posix.join(`${n&&"/"!==t.pathname[0]?"/":""}${t.pathname}`,...e.slice(1));return`${n}${"."===r?"":r}`}e.parse=t,e.getHostName=function(e){return o.default(e).hostname},e.normalize=function(e){return e&&t(e).toString()},e.join=n,e.encodeParts=function(e){return n(...e.split("/").map(encodeURIComponent))},e.objectToQueryString=function(e){const t=Object.keys(e).filter((e=>e.length>0));return t.length?"?"+t.map((t=>{const n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&"):""},e.queryStringToObject=function(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{const[n,r]=t.split("=");return n.length>0&&(e[n]=decodeURIComponent(r||"")),e}),{})},e.isLocal=function(e){const{protocol:n}=t(e);return(!n||0!==e.toLowerCase().indexOf(n))&&0!==e.indexOf("/")}}(t.URLExt||(t.URLExt={}))},50591:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseManager=void 0;const r=n(4016),i=n(28477);t.BaseManager=class{constructor(e){var t;this._isDisposed=!1,this._disposed=new r.Signal(this),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._disposed.emit(void 0),r.Signal.clearData(this))}}},33227:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildManager=void 0;const r=n(79622),i=n(28477);t.BuildManager=class{constructor(e={}){var t;this._url="",this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings();const{baseUrl:n,appUrl:o}=this.serverSettings;this._url=r.URLExt.join(n,o,"api/build")}get isAvailable(){return"true"===r.PageConfig.getOption("buildAvailable").toLowerCase()}get shouldCheck(){return"true"===r.PageConfig.getOption("buildCheck").toLowerCase()}getStatus(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{},t).then((e=>{if(200!==e.status)throw new i.ServerConnection.ResponseError(e);return e.json()})).then((e=>{if("string"!=typeof e.status)throw new Error("Invalid data");if("string"!=typeof e.message)throw new Error("Invalid data");return e}))}build(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{method:"POST"},t).then((e=>{if(400===e.status)throw new i.ServerConnection.ResponseError(e,"Build aborted");if(200!==e.status){const t=`Build failed with ${e.status}, please run 'jupyter lab build' on the server for full output`;throw new i.ServerConnection.ResponseError(e,t)}}))}cancel(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{method:"DELETE"},t).then((e=>{if(204!==e.status)throw new i.ServerConnection.ResponseError(e)}))}}},95077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigWithDefaults=t.ConfigSection=void 0;const r=n(79622),i=n(76240);(t.ConfigSection||(t.ConfigSection={})).create=function(e){const t=new o(e);return t.load().then((()=>t))};class o{constructor(e){var t;this._url="unknown";const n=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings();this._url=r.URLExt.join(n.baseUrl,"api/config",encodeURIComponent(e.name))}get data(){return this._data}async load(){const e=await i.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(200!==e.status)throw await i.ServerConnection.ResponseError.create(e);this._data=await e.json()}async update(e){this._data=Object.assign(Object.assign({},this._data),e);const t={method:"PATCH",body:JSON.stringify(e)},n=await i.ServerConnection.makeRequest(this._url,t,this.serverSettings);if(200!==n.status)throw await i.ServerConnection.ResponseError.create(n);return this._data=await n.json(),this._data}}t.ConfigWithDefaults=class{constructor(e){var t,n;this._className="",this._section=e.section,this._defaults=null!==(t=e.defaults)&&void 0!==t?t:{},this._className=null!==(n=e.className)&&void 0!==n?n:""}get(e){const t=this._classData();return e in t?t[e]:this._defaults[e]}set(e,t){const n={};if(n[e]=t,this._className){const e={};return e[this._className]=n,this._section.update(e)}return this._section.update(n)}_classData(){const e=this._section.data;return this._className&&this._className in e?e[this._className]:e}}},63644:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Drive=t.ContentsManager=t.Contents=void 0;const s=n(79622),a=n(35259),c=n(4016),l=n(76240),u=o(n(65460));var d,h;(h=t.Contents||(t.Contents={})).validateContentsModel=function(e){u.validateContentsModel(e)},h.validateCheckpointModel=function(e){u.validateCheckpointModel(e)},t.ContentsManager=class{constructor(e={}){var t,n;this._isDisposed=!1,this._additionalDrives=new Map,this._fileChanged=new c.Signal(this);const r=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:l.ServerConnection.makeSettings();this._defaultDrive=null!==(n=e.defaultDrive)&&void 0!==n?n:new p({serverSettings:r}),this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,c.Signal.clearData(this))}addDrive(e){this._additionalDrives.set(e.name,e),e.fileChanged.connect(this._onFileChanged,this)}getModelDBFactory(e){var t;const[n]=this._driveForPath(e);return null!==(t=null==n?void 0:n.modelDBFactory)&&void 0!==t?t:null}localPath(e){const t=e.split("/"),n=t[0].split(":");return 1!==n.length&&this._additionalDrives.has(n[0])?s.PathExt.join(n.slice(1).join(":"),...t.slice(1)):s.PathExt.removeSlash(e)}normalize(e){const t=e.split(":");return 1===t.length?s.PathExt.normalize(e):`${t[0]}:${s.PathExt.normalize(t.slice(1).join(":"))}`}resolvePath(e,t){const n=this.driveName(e),r=this.localPath(e),i=s.PathExt.resolve("/",r,t);return n?`${n}:${i}`:i}driveName(e){const t=e.split("/")[0].split(":");return 1===t.length?"":this._additionalDrives.has(t[0])?t[0]:""}get(e,t){const[n,r]=this._driveForPath(e);return n.get(r,t).then((e=>{const t=[];return"directory"===e.type&&e.content?(a.each(e.content,(e=>{t.push(Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)}))})),Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,r),content:t})):Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,r)})}))}getDownloadUrl(e){const[t,n]=this._driveForPath(e);return t.getDownloadUrl(n)}newUntitled(e={}){if(e.path){const t=this.normalize(e.path),[n,r]=this._driveForPath(t);return n.newUntitled(Object.assign(Object.assign({},e),{path:r})).then((e=>Object.assign(Object.assign({},e),{path:s.PathExt.join(t,e.name)})))}return this._defaultDrive.newUntitled(e)}delete(e){const[t,n]=this._driveForPath(e);return t.delete(n)}rename(e,t){const[n,r]=this._driveForPath(e),[i,o]=this._driveForPath(t);if(n!==i)throw Error("ContentsManager: renaming files must occur within a Drive");return n.rename(r,o).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,o)})))}save(e,t={}){const n=this.normalize(e),[r,i]=this._driveForPath(e);return r.save(i,Object.assign(Object.assign({},t),{path:i})).then((e=>Object.assign(Object.assign({},e),{path:n})))}copy(e,t){const[n,r]=this._driveForPath(e),[i,o]=this._driveForPath(t);if(n===i)return n.copy(r,o).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)})));throw Error("Copying files between drives is not currently implemented")}createCheckpoint(e){const[t,n]=this._driveForPath(e);return t.createCheckpoint(n)}listCheckpoints(e){const[t,n]=this._driveForPath(e);return t.listCheckpoints(n)}restoreCheckpoint(e,t){const[n,r]=this._driveForPath(e);return n.restoreCheckpoint(r,t)}deleteCheckpoint(e,t){const[n,r]=this._driveForPath(e);return n.deleteCheckpoint(r,t)}_toGlobalPath(e,t){return e===this._defaultDrive?s.PathExt.removeSlash(t):`${e.name}:${s.PathExt.removeSlash(t)}`}_driveForPath(e){const t=this.driveName(e),n=this.localPath(e);return t?[this._additionalDrives.get(t),n]:[this._defaultDrive,n]}_onFileChanged(e,t){var n,r;if(e===this._defaultDrive)this._fileChanged.emit(t);else{let i=null,o=null;(null===(n=t.newValue)||void 0===n?void 0:n.path)&&(i=Object.assign(Object.assign({},t.newValue),{path:this._toGlobalPath(e,t.newValue.path)})),(null===(r=t.oldValue)||void 0===r?void 0:r.path)&&(o=Object.assign(Object.assign({},t.oldValue),{path:this._toGlobalPath(e,t.oldValue.path)})),this._fileChanged.emit({type:t.type,newValue:i,oldValue:o})}}};class p{constructor(e={}){var t,n,r;this._isDisposed=!1,this._fileChanged=new c.Signal(this),this.name=null!==(t=e.name)&&void 0!==t?t:"Default",this._apiEndpoint=null!==(n=e.apiEndpoint)&&void 0!==n?n:"api/contents",this.serverSettings=null!==(r=e.serverSettings)&&void 0!==r?r:l.ServerConnection.makeSettings()}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,c.Signal.clearData(this))}async get(e,t){let n=this._getUrl(e);if(t){"notebook"===t.type&&delete t.format;const e=t.content?"1":"0",r=Object.assign(Object.assign({},t),{content:e});n+=s.URLExt.objectToQueryString(r)}const r=this.serverSettings,i=await l.ServerConnection.makeRequest(n,{},r);if(200!==i.status)throw await l.ServerConnection.ResponseError.create(i);const o=await i.json();return u.validateContentsModel(o),o}getDownloadUrl(e){const t=this.serverSettings.baseUrl;let n=s.URLExt.join(t,"files",s.URLExt.encodeParts(e));const r=document.cookie.match("\\b_xsrf=([^;]*)\\b");if(r){const e=new URL(n);e.searchParams.append("_xsrf",r[1]),n=e.toString()}return Promise.resolve(n)}async newUntitled(e={}){var t;let n="{}";e&&(e.ext&&(e.ext=d.normalizeExtension(e.ext)),n=JSON.stringify(e));const r=this.serverSettings,i=this._getUrl(null!==(t=e.path)&&void 0!==t?t:""),o={method:"POST",body:n},s=await l.ServerConnection.makeRequest(i,o,r);if(201!==s.status)throw await l.ServerConnection.ResponseError.create(s);const a=await s.json();return u.validateContentsModel(a),this._fileChanged.emit({type:"new",oldValue:null,newValue:a}),a}async delete(e){const t=this._getUrl(e),n=this.serverSettings,r=await l.ServerConnection.makeRequest(t,{method:"DELETE"},n);if(204!==r.status)throw await l.ServerConnection.ResponseError.create(r);this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t){const n=this.serverSettings,r=this._getUrl(e),i={method:"PATCH",body:JSON.stringify({path:t})},o=await l.ServerConnection.makeRequest(r,i,n);if(200!==o.status)throw await l.ServerConnection.ResponseError.create(o);const s=await o.json();return u.validateContentsModel(s),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:s}),s}async save(e,t={}){const n=this.serverSettings,r=this._getUrl(e),i={method:"PUT",body:JSON.stringify(t)},o=await l.ServerConnection.makeRequest(r,i,n);if(200!==o.status&&201!==o.status)throw await l.ServerConnection.ResponseError.create(o);const s=await o.json();return u.validateContentsModel(s),this._fileChanged.emit({type:"save",oldValue:null,newValue:s}),s}async copy(e,t){const n=this.serverSettings,r=this._getUrl(t),i={method:"POST",body:JSON.stringify({copy_from:e})},o=await l.ServerConnection.makeRequest(r,i,n);if(201!==o.status)throw await l.ServerConnection.ResponseError.create(o);const s=await o.json();return u.validateContentsModel(s),this._fileChanged.emit({type:"new",oldValue:null,newValue:s}),s}async createCheckpoint(e){const t=this._getUrl(e,"checkpoints"),n=await l.ServerConnection.makeRequest(t,{method:"POST"},this.serverSettings);if(201!==n.status)throw await l.ServerConnection.ResponseError.create(n);const r=await n.json();return u.validateCheckpointModel(r),r}async listCheckpoints(e){const t=this._getUrl(e,"checkpoints"),n=await l.ServerConnection.makeRequest(t,{},this.serverSettings);if(200!==n.status)throw await l.ServerConnection.ResponseError.create(n);const r=await n.json();if(!Array.isArray(r))throw new Error("Invalid Checkpoint list");for(let e=0;e<r.length;e++)u.validateCheckpointModel(r[e]);return r}async restoreCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),r=await l.ServerConnection.makeRequest(n,{method:"POST"},this.serverSettings);if(204!==r.status)throw await l.ServerConnection.ResponseError.create(r)}async deleteCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),r=await l.ServerConnection.makeRequest(n,{method:"DELETE"},this.serverSettings);if(204!==r.status)throw await l.ServerConnection.ResponseError.create(r)}_getUrl(...e){const t=e.map((e=>s.URLExt.encodeParts(e))),n=this.serverSettings.baseUrl;return s.URLExt.join(n,this._apiEndpoint,...t)}}t.Drive=p,function(e){e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e}}(d||(d={}))},65460:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateCheckpointModel=t.validateContentsModel=void 0;const r=n(46901);t.validateContentsModel=function(e){r.validateProperty(e,"name","string"),r.validateProperty(e,"path","string"),r.validateProperty(e,"type","string"),r.validateProperty(e,"created","string"),r.validateProperty(e,"last_modified","string"),r.validateProperty(e,"mimetype","object"),r.validateProperty(e,"content","object"),r.validateProperty(e,"format","object")},t.validateCheckpointModel=function(e){r.validateProperty(e,"id","string"),r.validateProperty(e,"last_modified","string")}},76240:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(95077),t),i(n(63644),t),i(n(62604),t),i(n(12902),t),i(n(93079),t),i(n(28477),t),i(n(41874),t),i(n(92726),t),i(n(93247),t),i(n(45399),t),i(n(4574),t)},54500:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CommHandler=void 0;const s=n(70725),a=o(n(75253));class c extends s.DisposableDelegate{constructor(e,t,n,r){super(r),this._target="",this._id="",this._id=t,this._target=e,this._kernel=n}get commId(){return this._id}get targetName(){return this._target}get onClose(){return this._onClose}set onClose(e){this._onClose=e}get onMsg(){return this._onMsg}set onMsg(e){this._onMsg=e}open(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot open");const r=a.createMessage({msgType:"comm_open",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,target_name:this._target,data:null!=e?e:{}},metadata:t,buffers:n});return this._kernel.sendShellMessage(r,!1,!0)}send(e,t,n=[],r=!0){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot send");const i=a.createMessage({msgType:"comm_msg",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e},metadata:t,buffers:n});return this._kernel.sendShellMessage(i,!1,r)}close(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot close");const r=a.createMessage({msgType:"comm_close",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n}),i=this._kernel.sendShellMessage(r,!1,!0),o=this._onClose;return o&&o(a.createMessage({msgType:"comm_close",channel:"iopub",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:n})),this.dispose(),i}}t.CommHandler=c},19883:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnection=void 0;const s=n(79622),a=n(95082),c=n(4016),l=n(76240),u=n(54500),d=o(n(75253)),h=n(38707),p=o(n(86002)),f=o(n(96512)),g=n(12902),m=o(n(2183)),v="_RESTARTING_";class y{constructor(e){var t,n,r,i;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this.serverSettings,t=s.URLExt.join(e.wsUrl,m.KERNEL_SERVICE_URL,encodeURIComponent(this._id));t.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1");let n=s.URLExt.join(t,"channels?session_id="+encodeURIComponent(this._clientId));const r=e.token;e.appendToken&&""!==r&&(n+=`&token=${encodeURIComponent(r)}`),this._ws=new e.WebSocket(n),this._ws.binaryType="arraybuffer",this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSOpen=e=>{this._updateConnectionStatus("connected")},this._onWSMessage=e=>{let t;try{t=p.deserialize(e.data),f.validateMessage(t)}catch(e){throw e.message=`Kernel message validation error: ${e.message}`,e}this._kernelSession=t.header.session,this._msgChain=this._msgChain.then((()=>this._handleMessage(t))).catch((e=>{e.message.startsWith("Canceled future for ")&&console.error(e)})),this._anyMessage.emit({msg:t,direction:"recv"})},this._onWSClose=e=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new a.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new c.Signal(this),this._connectionStatusChanged=new c.Signal(this),this._disposed=new c.Signal(this),this._iopubMessage=new c.Signal(this),this._anyMessage=new c.Signal(this),this._unhandledMessage=new c.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._noOp=()=>{},this._name=e.model.name,this._id=e.model.id,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:l.ServerConnection.makeSettings(),this._clientId=null!==(n=e.clientId)&&void 0!==n?n:a.UUID.uuid4(),this._username=null!==(r=e.username)&&void 0!==r?r:"",this.handleComms=null===(i=e.handleComms)||void 0===i||i,this._createSocket()}get disposed(){return this._disposed}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return{id:this.id,name:this.name}}get anyMessage(){return this._anyMessage}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise||(this._specPromise=g.KernelSpecAPI.getSpecs(this.serverSettings).then((e=>e.kernelspecs[this._name]))),this._specPromise}clone(e={}){return new y(Object.assign({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1},e))}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),c.Signal.clearData(this))}sendShellMessage(e,t=!1,n=!0){return this._sendKernelShellControl(h.KernelShellFutureHandler,e,t,n)}sendControlMessage(e,t=!1,n=!0){return this._sendKernelShellControl(h.KernelControlFutureHandler,e,t,n)}_sendKernelShellControl(e,t,n=!1,r=!0){this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});const i=new e((()=>{const e=t.header.msg_id;this._futures.delete(e);const n=this._msgIdToDisplayIds.get(e);n&&(n.forEach((t=>{const n=this._displayIdToParentIds.get(t);if(n){const r=n.indexOf(e);if(-1===r)return;1===n.length?this._displayIdToParentIds.delete(t):(n.splice(r,1),this._displayIdToParentIds.set(t,n))}})),this._msgIdToDisplayIds.delete(e))}),t,n,r,this);return this._futures.set(t.header.msg_id,i),i}_sendMessage(e,t=!0){if("dead"===this.status)throw new Error("Kernel is dead");if((""===this._kernelSession||this._kernelSession===v)&&d.isInfoRequestMsg(e)){if("connected"===this.connectionStatus)return void this._ws.send(p.serialize(e));throw new Error("Could not send message: status is not connected")}if(t&&this._pendingMessages.length>0)this._pendingMessages.push(e);else if("connected"===this.connectionStatus&&this._kernelSession!==v)this._ws.send(p.serialize(e));else{if(!t)throw new Error("Could not send message");this._pendingMessages.push(e)}}async interrupt(){if("dead"===this.status)throw new Error("Kernel is dead");return m.interruptKernel(this.id,this.serverSettings)}async restart(){if("dead"===this.status)throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=v,await m.restartKernel(this.id,this.serverSettings),await this.reconnect()}reconnect(){this._errorIfDisposed();const e=new a.PromiseDelegate,t=(n,r)=>{"connected"===r?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===r&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){"dead"!==this.status&&await m.shutdownKernel(this.id,this.serverSettings),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){const e=d.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,content:{}});let t;try{t=await b.handleShellMessage(this,e)}catch(e){if(this.isDisposed)return;throw e}if(this._errorIfDisposed(),t)return void 0===t.content.status&&(t.content.status="ok"),"ok"!==t.content.status?(this._info.reject("Kernel info reply errored"),t):(this._info.resolve(t.content),this._kernelSession=t.header.session,t)}requestComplete(e){const t=d.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestInspect(e){const t=d.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestHistory(e){const t=d.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestExecute(e,t=!0,n){const r=d.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,content:Object.assign(Object.assign({},{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1}),e),metadata:n});return this.sendShellMessage(r,!0,t)}requestDebug(e,t=!0){const n=d.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestIsComplete(e){const t=d.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}requestCommInfo(e){const t=d.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,content:e});return b.handleShellMessage(this,t)}sendInputReply(e){const t=d.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"})}createComm(e,t=a.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");const n=new u.CommHandler(e,t,this,(()=>{this._unregisterComm(t)}));return this._comms.set(t,n),n}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&(this.isDisposed||this._targetRegistry[e]!==t||delete this._targetRegistry[e])}registerMessageHook(e,t){var n;const r=null===(n=this._futures)||void 0===n?void 0:n.get(e);r&&r.registerMessageHook(t)}removeMessageHook(e,t){var n;const r=null===(n=this._futures)||void 0===n?void 0:n.get(e);r&&r.removeMessageHook(t)}async _handleDisplayId(e,t){var n,r;const i=t.parent_header.msg_id;let o=this._displayIdToParentIds.get(e);if(o){const e={header:a.JSONExt.deepCopy(t.header),parent_header:a.JSONExt.deepCopy(t.parent_header),metadata:a.JSONExt.deepCopy(t.metadata),content:a.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};e.header.msg_type="update_display_data",await Promise.all(o.map((async t=>{const n=this._futures&&this._futures.get(t);n&&await n.handleMsg(e)})))}if("update_display_data"===t.header.msg_type)return!0;o=null!==(n=this._displayIdToParentIds.get(e))&&void 0!==n?n:[],-1===o.indexOf(i)&&o.push(i),this._displayIdToParentIds.set(e,o);const s=null!==(r=this._msgIdToDisplayIds.get(i))&&void 0!==r?r:[];return-1===s.indexOf(i)&&s.push(i),this._msgIdToDisplayIds.set(i,s),!1}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status!==e&&"dead"!==this._status&&(this._status=e,b.logKernelStatus(this),this._statusChanged.emit(e),"dead"===e&&this.dispose())}_sendPending(){for(;"connected"===this.connectionStatus&&this._kernelSession!==v&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach((e=>{e.dispose()})),this._comms.forEach((e=>{e.dispose()})),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);const t=e.content,n=new u.CommHandler(t.target_name,t.comm_id,this,(()=>{this._unregisterComm(t.comm_id)}));this._comms.set(t.comm_id,n);try{const r=await b.loadObject(t.target_name,t.target_module,this._targetRegistry);await r(n,e)}catch(e){throw n.close(),console.error("Exception opening new comm"),e}}async _handleCommClose(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return void console.error("Comm not found for comm id "+t.comm_id);this._unregisterComm(n.commId);const r=n.onClose;r&&await r(e),n.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return;const r=n.onMsg;r&&await r(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"dead"!==this.status)if("connected"===e){let e=this._kernelSession===v,t=this.requestKernelInfo(),n=!1,r=()=>{n||(n=!0,e&&this._kernelSession===v&&(this._kernelSession=""),clearTimeout(i),this._pendingMessages.length>0&&this._sendPending())};t.then(r);let i=setTimeout(r,3e3)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,n;let r=!1;if(e.parent_header&&"iopub"===e.channel&&(d.isDisplayDataMsg(e)||d.isUpdateDisplayDataMsg(e)||d.isExecuteResultMsg(e))){const n=(null!==(t=e.content.transient)&&void 0!==t?t:{}).display_id;n&&(r=await this._handleDisplayId(n,e),this._assertCurrentMessage(e))}if(!r&&e.parent_header){const t=e.parent_header,r=null===(n=this._futures)||void 0===n?void 0:n.get(t.msg_id);if(r)await r.handleMsg(e),this._assertCurrentMessage(e);else{const n=t.session===this.clientId;"iopub"!==e.channel&&n&&this._unhandledMessage.emit(e)}}if("iopub"===e.channel){switch(e.header.msg_type){case"status":{const t=e.content.execution_state;"restarting"===t&&Promise.resolve().then((async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()})),this._updateStatus(t);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e)}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=b.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}}var b;t.KernelConnection=y,function(e){e.logKernelStatus=function(e){switch(e.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${e.status} (${e.id})`)}},e.handleShellMessage=async function(e,t){return e.sendShellMessage(t,!0).done},e.loadObject=function(e,t,n){return new Promise(((r,i)=>{if(t){if("undefined"==typeof requirejs)throw new Error("requirejs not found");requirejs([t],(n=>{void 0===n[e]?i(new Error(`Object '${e}' not found in module '${t}'`)):r(n[e])}),i)}else(null==n?void 0:n[e])?r(n[e]):i(new Error(`Object '${e}' not found in registry`))}))},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(b||(b={}))},38707:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelShellFutureHandler=t.KernelControlFutureHandler=t.KernelFutureHandler=void 0;const s=n(95082),a=n(70725),c=o(n(75253));class l extends a.DisposableDelegate{constructor(e,t,n,r,i){super(e),this._status=0,this._stdin=u.noOp,this._iopub=u.noOp,this._reply=u.noOp,this._done=new s.PromiseDelegate,this._hooks=new u.HookList,this._disposeOnDone=!0,this._msg=t,n||this._setFlag(u.KernelFutureFlag.GotReply),this._disposeOnDone=r,this._kernel=i}get msg(){return this._msg}get done(){return this._done.promise}get onReply(){return this._reply}set onReply(e){this._reply=e}get onIOPub(){return this._iopub}set onIOPub(e){this._iopub=e}get onStdin(){return this._stdin}set onStdin(e){this._stdin=e}registerMessageHook(e){if(this.isDisposed)throw new Error("Kernel future is disposed");this._hooks.add(e)}removeMessageHook(e){this.isDisposed||this._hooks.remove(e)}sendInputReply(e){this._kernel.sendInputReply(e)}dispose(){this._stdin=u.noOp,this._iopub=u.noOp,this._reply=u.noOp,this._hooks=null,this._testFlag(u.KernelFutureFlag.IsDone)||(this._done.promise.catch((()=>{})),this._done.reject(new Error(`Canceled future for ${this.msg.header.msg_type} message before replies were done`))),super.dispose()}async handleMsg(e){switch(e.channel){case"control":case"shell":e.channel===this.msg.channel&&e.parent_header.msg_id===this.msg.header.msg_id&&await this._handleReply(e);break;case"stdin":await this._handleStdin(e);break;case"iopub":await this._handleIOPub(e)}}async _handleReply(e){const t=this._reply;t&&await t(e),this._replyMsg=e,this._setFlag(u.KernelFutureFlag.GotReply),this._testFlag(u.KernelFutureFlag.GotIdle)&&this._handleDone()}async _handleStdin(e){const t=this._stdin;t&&await t(e)}async _handleIOPub(e){const t=await this._hooks.process(e),n=this._iopub;t&&n&&await n(e),c.isStatusMsg(e)&&"idle"===e.content.execution_state&&(this._setFlag(u.KernelFutureFlag.GotIdle),this._testFlag(u.KernelFutureFlag.GotReply)&&this._handleDone())}_handleDone(){this._testFlag(u.KernelFutureFlag.IsDone)||(this._setFlag(u.KernelFutureFlag.IsDone),this._done.resolve(this._replyMsg),this._disposeOnDone&&this.dispose())}_testFlag(e){return 0!=(this._status&e)}_setFlag(e){this._status|=e}}var u;t.KernelFutureHandler=l,t.KernelControlFutureHandler=class extends l{},t.KernelShellFutureHandler=class extends l{},function(e){e.noOp=()=>{};const t="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;let n;e.HookList=class{constructor(){this._hooks=[]}add(e){this.remove(e),this._hooks.push(e)}remove(e){const t=this._hooks.indexOf(e);t>=0&&(this._hooks[t]=null,this._scheduleCompact())}async process(e){await this._processing;const t=new s.PromiseDelegate;let n;this._processing=t.promise;for(let r=this._hooks.length-1;r>=0;r--){const i=this._hooks[r];if(null!==i){try{n=await i(e)}catch(e){n=!0,console.error(e)}if(!1===n)return t.resolve(void 0),!1}}return t.resolve(void 0),!0}_scheduleCompact(){this._compactScheduled||(this._compactScheduled=!0,t((()=>{this._processing=this._processing.then((()=>{this._compactScheduled=!1,this._compact()}))})))}_compact(){let e=0;for(let t=0,n=this._hooks.length;t<n;t++){const n=this._hooks[t];null===this._hooks[t]?e++:this._hooks[t-e]=n}this._hooks.length-=e}},function(e){e[e.GotReply=1]="GotReply",e[e.GotIdle=2]="GotIdle",e[e.IsDone=4]="IsDone",e[e.DisposeOnDone=8]="DisposeOnDone"}(n=e.KernelFutureFlag||(e.KernelFutureFlag={}))}(u||(u={}))},62604:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelAPI=t.KernelMessage=t.Kernel=void 0;const a=o(n(38868));t.Kernel=a;const c=o(n(75253));t.KernelMessage=c;const l=o(n(2183));t.KernelAPI=l,s(n(71825),t)},38868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71825:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelManager=void 0;const r=n(35259),i=n(23114),o=n(4016),s=n(76240),a=n(50591),c=n(2183),l=n(19883);class u extends a.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._kernelConnections=new Set,this._models=new Map,this._runningChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._kernelConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){var t;const{id:n}=e.model;let r=null===(t=e.handleComms)||void 0===t||t;if(void 0===e.handleComms)for(const e of this._kernelConnections)if(e.id===n&&e.handleComms){r=!1;break}const i=new l.KernelConnection(Object.assign(Object.assign({handleComms:r},e),{serverSettings:this.serverSettings}));return this._onStarted(i),this._models.has(n)||this.refreshRunning().catch((()=>{})),i}running(){return r.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e={},t={}){const n=await c.startNew(e,this.serverSettings);return this.connectTo(Object.assign(Object.assign({},t),{model:n}))}async shutdown(e){await c.shutdownKernel(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>c.shutdownKernel(e,this.serverSettings)))),await this.refreshRunning()}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async requestRunning(){var e,t;let n;try{n=await c.listRunning(this.serverSettings)}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&r.every(n,(e=>{const t=this._models.get(e.id);return!!t&&t.name===e.name}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._kernelConnections.forEach((e=>{this._models.has(e.id)||e.handleShutdown()})),this._runningChanged.emit(n))}_onStarted(e){this._kernelConnections.add(e),e.statusChanged.connect(this._onStatusChanged,this),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._kernelConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onStatusChanged(e,t){"dead"===t&&this.refreshRunning().catch((()=>{}))}}t.KernelManager=u},75253:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInputReplyMsg=t.isInputRequestMsg=t.isDebugReplyMsg=t.isDebugRequestMsg=t.isExecuteReplyMsg=t.isInfoRequestMsg=t.isCommMsgMsg=t.isCommCloseMsg=t.isCommOpenMsg=t.isDebugEventMsg=t.isClearOutputMsg=t.isStatusMsg=t.isErrorMsg=t.isExecuteResultMsg=t.isExecuteInputMsg=t.isUpdateDisplayDataMsg=t.isDisplayDataMsg=t.isStreamMsg=t.createMessage=void 0;const r=n(95082);t.createMessage=function(e){var t,n,i,o,s;return{buffers:null!==(t=e.buffers)&&void 0!==t?t:[],channel:e.channel,content:e.content,header:{date:(new Date).toISOString(),msg_id:null!==(n=e.msgId)&&void 0!==n?n:r.UUID.uuid4(),msg_type:e.msgType,session:e.session,username:null!==(i=e.username)&&void 0!==i?i:"",version:"5.2"},metadata:null!==(o=e.metadata)&&void 0!==o?o:{},parent_header:null!==(s=e.parentHeader)&&void 0!==s?s:{}}},t.isStreamMsg=function(e){return"stream"===e.header.msg_type},t.isDisplayDataMsg=function(e){return"display_data"===e.header.msg_type},t.isUpdateDisplayDataMsg=function(e){return"update_display_data"===e.header.msg_type},t.isExecuteInputMsg=function(e){return"execute_input"===e.header.msg_type},t.isExecuteResultMsg=function(e){return"execute_result"===e.header.msg_type},t.isErrorMsg=function(e){return"error"===e.header.msg_type},t.isStatusMsg=function(e){return"status"===e.header.msg_type},t.isClearOutputMsg=function(e){return"clear_output"===e.header.msg_type},t.isDebugEventMsg=function(e){return"debug_event"===e.header.msg_type},t.isCommOpenMsg=function(e){return"comm_open"===e.header.msg_type},t.isCommCloseMsg=function(e){return"comm_close"===e.header.msg_type},t.isCommMsgMsg=function(e){return"comm_msg"===e.header.msg_type},t.isInfoRequestMsg=function(e){return"kernel_info_request"===e.header.msg_type},t.isExecuteReplyMsg=function(e){return"execute_reply"===e.header.msg_type},t.isDebugRequestMsg=function(e){return"debug_request"===e.header.msg_type},t.isDebugReplyMsg=function(e){return"debug_reply"===e.header.msg_type},t.isInputRequestMsg=function(e){return"input_request"===e.header.msg_type},t.isInputReplyMsg=function(e){return"input_reply"===e.header.msg_type}},2183:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKernelModel=t.shutdownKernel=t.interruptKernel=t.restartKernel=t.startNew=t.listRunning=t.KERNEL_SERVICE_URL=void 0;const r=n(28477),i=n(79622),o=n(96512);t.KERNEL_SERVICE_URL="api/kernels",t.listRunning=async function(e=r.ServerConnection.makeSettings()){const n=i.URLExt.join(e.baseUrl,t.KERNEL_SERVICE_URL),s=await r.ServerConnection.makeRequest(n,{},e);if(200!==s.status)throw await r.ServerConnection.ResponseError.create(s);const a=await s.json();return o.validateModels(a),a},t.startNew=async function(e={},n=r.ServerConnection.makeSettings()){const s=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},c=await r.ServerConnection.makeRequest(s,a,n);if(201!==c.status)throw await r.ServerConnection.ResponseError.create(c);const l=await c.json();return o.validateModel(l),l},t.restartKernel=async function(e,n=r.ServerConnection.makeSettings()){const s=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"restart"),a=await r.ServerConnection.makeRequest(s,{method:"POST"},n);if(200!==a.status)throw await r.ServerConnection.ResponseError.create(a);const c=await a.json();o.validateModel(c)},t.interruptKernel=async function(e,n=r.ServerConnection.makeSettings()){const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"interrupt"),s=await r.ServerConnection.makeRequest(o,{method:"POST"},n);if(204!==s.status)throw await r.ServerConnection.ResponseError.create(s)},t.shutdownKernel=async function(e,n=r.ServerConnection.makeSettings()){const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),s=await r.ServerConnection.makeRequest(o,{method:"DELETE"},n);if(404===s.status){const t=`The kernel "${e}" does not exist on the server`;console.warn(t)}else if(204!==s.status)throw await r.ServerConnection.ResponseError.create(s)},t.getKernelModel=async function(e,n=r.ServerConnection.makeSettings()){const s=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),a=await r.ServerConnection.makeRequest(s,{},n);if(404===a.status)return;if(200!==a.status)throw await r.ServerConnection.ResponseError.create(a);const c=await a.json();return o.validateModel(c),c}},86002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.deserialize=void 0,t.deserialize=function(e){let t;return t="string"==typeof e?JSON.parse(e):function(e){const t=new DataView(e),n=t.getUint32(0),r=[];if(n<2)throw new Error("Invalid incoming Kernel Message");for(let e=1;e<=n;e++)r.push(t.getUint32(4*e));const i=new Uint8Array(e.slice(r[0],r[1])),o=JSON.parse(new TextDecoder("utf8").decode(i));o.buffers=[];for(let t=1;t<n;t++){const n=r[t],i=r[t+1]||e.byteLength;o.buffers.push(new DataView(e.slice(n,i)))}return o}(e),t},t.serialize=function(e){var t;let n;return n=(null===(t=e.buffers)||void 0===t?void 0:t.length)?function(e){const t=[],n=[],r=new TextEncoder;let i=[];void 0!==e.buffers&&(i=e.buffers,delete e.buffers);const o=r.encode(JSON.stringify(e));n.push(o.buffer);for(let e=0;e<i.length;e++){const t=i[e];n.push(ArrayBuffer.isView(t)?t.buffer:t)}const s=n.length;t.push(4*(s+1));for(let e=0;e+1<n.length;e++)t.push(t[t.length-1]+n[e].byteLength);const a=new Uint8Array(t[t.length-1]+n[n.length-1].byteLength),c=new DataView(a.buffer);c.setUint32(0,s);for(let e=0;e<t.length;e++)c.setUint32(4*(e+1),t[e]);for(let e=0;e<n.length;e++)a.set(new Uint8Array(n[e]),t[e]);return a.buffer}(e):JSON.stringify(e),n}},96512:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.validateModel=t.validateMessage=void 0;const r=n(46901),i=["username","version","session","msg_id","msg_type"],o={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};function s(e){r.validateProperty(e,"name","string"),r.validateProperty(e,"id","string")}t.validateMessage=function(e){r.validateProperty(e,"metadata","object"),r.validateProperty(e,"content","object"),r.validateProperty(e,"channel","string"),function(e){for(let t=0;t<i.length;t++)r.validateProperty(e,i[t],"string")}(e.header),"iopub"===e.channel&&function(e){if("iopub"===e.channel){const t=o[e.header.msg_type];if(void 0===t)return;const n=Object.keys(t),i=e.content;for(let e=0;e<n.length;e++){let o=t[n[e]];Array.isArray(o)||(o=[o]),r.validateProperty(i,n[e],...o)}}}(e)},t.validateModel=s,t.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid kernel list");e.forEach((e=>s(e)))}},12902:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecAPI=t.KernelSpec=void 0;const a=o(n(79453));t.KernelSpec=a;const c=o(n(33415));t.KernelSpecAPI=c,s(n(54936),t)},79453:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},54936:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecManager=void 0;const s=n(95082),a=n(23114),c=n(4016),l=o(n(33415)),u=n(50591);class d extends u.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._connectionFailure=new c.Signal(this),this._specs=null,this._specsChanged=new c.Signal(this),this._ready=Promise.all([this.requestSpecs()]).then((e=>{})).catch((e=>{})).then((()=>{this.isDisposed||(this._isReady=!0)})),this._pollSpecs=new a.Poll({auto:!1,factory:()=>this.requestSpecs(),frequency:{interval:61e3,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelSpecManager#specs",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this.ready.then((()=>{this._pollSpecs.start()}))}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshSpecs(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestSpecs(){const e=await l.getSpecs(this.serverSettings);this.isDisposed||s.JSONExt.deepEqual(e,this._specs)||(this._specs=e,this._specsChanged.emit(e))}}t.KernelSpecManager=d},33415:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecs=void 0;const r=n(28477),i=n(73103),o=n(79622);t.getSpecs=async function(e=r.ServerConnection.makeSettings()){const t=o.URLExt.join(e.baseUrl,"api/kernelspecs"),n=await r.ServerConnection.makeRequest(t,{},e);if(200!==n.status)throw await r.ServerConnection.ResponseError.create(n);const s=await n.json();return i.validateSpecModels(s)}},73103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSpecModels=t.validateSpecModel=void 0;const r=n(46901);function i(e){const t=e.spec;if(!t)throw new Error("Invalid kernel spec");r.validateProperty(e,"name","string"),r.validateProperty(e,"resources","object"),r.validateProperty(t,"language","string"),r.validateProperty(t,"display_name","string"),r.validateProperty(t,"argv","array");let n=null;t.hasOwnProperty("metadata")&&(r.validateProperty(t,"metadata","object"),n=t.metadata);let i=null;return t.hasOwnProperty("env")&&(r.validateProperty(t,"env","object"),i=t.env),{name:e.name,resources:e.resources,language:t.language,display_name:t.display_name,argv:t.argv,metadata:n,env:i}}t.validateSpecModel=i,t.validateSpecModels=function(e){if(!e.hasOwnProperty("kernelspecs"))throw new Error("No kernelspecs found");let t=Object.keys(e.kernelspecs);const n=Object.create(null);let r=e.default;for(let r=0;r<t.length;r++){const o=e.kernelspecs[t[r]];try{n[t[r]]=i(o)}catch(e){console.warn(`Removing errant kernel spec: ${t[r]}`)}}if(t=Object.keys(n),!t.length)throw new Error("No valid kernelspecs found");return r&&"string"==typeof r&&r in n||(r=t[0],console.warn(`Default kernel not found, using '${t[0]}'`)),{default:r,kernelspecs:n}}},93079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const r=n(4016),i=n(33227),o=n(4574),s=n(63644),a=n(12902),c=n(41874),l=n(92726),u=n(93247),d=n(28477),h=n(45399),p=n(62604);t.ServiceManager=class{constructor(e={}){var t,n;this._isDisposed=!1,this._connectionFailure=new r.Signal(this),this._isReady=!1;const f=e.defaultDrive,g=null!==(t=e.serverSettings)&&void 0!==t?t:d.ServerConnection.makeSettings(),m={defaultDrive:f,serverSettings:g,standby:null!==(n=e.standby)&&void 0!==n?n:"when-hidden"},v=new p.KernelManager(m);this.serverSettings=g,this.contents=new s.ContentsManager(m),this.sessions=new c.SessionManager(Object.assign(Object.assign({},m),{kernelManager:v})),this.settings=new l.SettingManager(m),this.terminals=new u.TerminalManager(m),this.builder=new i.BuildManager(m),this.workspaces=new h.WorkspaceManager(m),this.nbconvert=new o.NbConvertManager(m),this.kernelspecs=new a.KernelSpecManager(m),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this.terminals.connectionFailure.connect(this._onConnectionFailure,this);const y=[this.sessions.ready,this.kernelspecs.ready];this.terminals.isAvailable()&&y.push(this.terminals.ready),this._readyPromise=Promise.all(y).then((()=>{this._isReady=!0}))}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,r.Signal.clearData(this),this.contents.dispose(),this.sessions.dispose(),this.terminals.dispose())}get isReady(){return this._isReady}get ready(){return this._readyPromise}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}}},4574:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NbConvertManager=void 0;const r=n(79622),i=n(28477);t.NbConvertManager=class{constructor(e={}){var t;this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}async getExportFormats(){const e=this.serverSettings.baseUrl,t=r.URLExt.join(e,"api/nbconvert"),{serverSettings:n}=this,o=await i.ServerConnection.makeRequest(t,{},n);if(200!==o.status)throw await i.ServerConnection.ResponseError.create(o);const s=await o.json(),a={};return Object.keys(s).forEach((function(e){const t=s[e].output_mimetype;a[e]={output_mimetype:t}})),a}}},28477:(e,t,n)=>{"use strict";var r,i,o,s=n(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.ServerConnection=void 0;const a=n(79622);let c,l,u,d;if("undefined"==typeof window){const e=n(21763);c=null!==(r=n.g.fetch)&&void 0!==r?r:e,u=null!==(i=n.g.Request)&&void 0!==i?i:e.Request,l=null!==(o=n.g.Headers)&&void 0!==o?o:e.Headers,d=n(12447)}else c=fetch,u=Request,l=Headers,d=WebSocket;var h,p;!function(e){e.makeSettings=function(e){return p.makeSettings(e)},e.makeRequest=function(e,t,n){return p.handleRequest(e,t,n)};class t extends Error{constructor(e,t=`Invalid response: ${e.status} ${e.statusText}`,n=""){super(t),this.response=e,this.traceback=n}static async create(e){try{const n=await e.json();return n.traceback&&console.error(n.traceback),n.message?new t(e,n.message):new t(e)}catch(n){return console.debug(n),new t(e)}}}e.ResponseError=t;class n extends TypeError{constructor(e){super(e.message),this.stack=e.stack}}e.NetworkError=n}(h=t.ServerConnection||(t.ServerConnection={})),function(e){e.makeSettings=function(e={}){const t=a.PageConfig.getBaseUrl(),n=a.PageConfig.getWsUrl(),r=a.URLExt.normalize(e.baseUrl)||t;let i=e.wsUrl;return i||r!==t||(i=n),i||0!==r.indexOf("http")||(i="ws"+r.slice(4)),i=null!=i?i:n,Object.assign(Object.assign({init:{cache:"no-store",credentials:"same-origin"},fetch:c,Headers:l,Request:u,WebSocket:d,token:a.PageConfig.getToken(),appUrl:a.PageConfig.getOption("appUrl"),appendToken:"undefined"==typeof window||void 0!==s.env.JEST_WORKER_ID||a.URLExt.getHostName(t)!==a.URLExt.getHostName(i)},e),{baseUrl:r,wsUrl:i})},e.handleRequest=function(e,t,n){var r;if(0!==e.indexOf(n.baseUrl))throw new Error("Can only be used for notebook server requests");"no-store"===(null!==(r=t.cache)&&void 0!==r?r:n.init.cache)&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());const i=new n.Request(e,Object.assign(Object.assign({},n.init),t));let o=!1;if(n.token&&(o=!0,i.headers.append("Authorization",`token ${n.token}`)),"undefined"!=typeof document&&(null===document||void 0===document?void 0:document.cookie)){const e=function(e){const t=document.cookie.match("\\b_xsrf=([^;]*)\\b");return null==t?void 0:t[1]}();void 0!==e&&(o=!0,i.headers.append("X-XSRFToken",e))}return!i.headers.has("Content-Type")&&o&&i.headers.set("Content-Type","application/json"),n.fetch.call(null,i).catch((e=>{throw new h.NetworkError(e)}))}}(p||(p={}))},35410:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionConnection=void 0;const r=n(4016),i=n(76240),o=n(56807),s=n(95082);t.SessionConnection=class{constructor(e){var t,n,o,a;this._id="",this._path="",this._name="",this._type="",this._kernel=null,this._isDisposed=!1,this._disposed=new r.Signal(this),this._kernelChanged=new r.Signal(this),this._statusChanged=new r.Signal(this),this._connectionStatusChanged=new r.Signal(this),this._iopubMessage=new r.Signal(this),this._unhandledMessage=new r.Signal(this),this._anyMessage=new r.Signal(this),this._propertyChanged=new r.Signal(this),this._id=e.model.id,this._name=e.model.name,this._path=e.model.path,this._type=e.model.type,this._username=null!==(t=e.username)&&void 0!==t?t:"",this._clientId=null!==(n=e.clientId)&&void 0!==n?n:s.UUID.uuid4(),this._connectToKernel=e.connectToKernel,this._kernelConnectionOptions=null!==(o=e.kernelConnectionOptions)&&void 0!==o?o:{},this.serverSettings=null!==(a=e.serverSettings)&&void 0!==a?a:i.ServerConnection.makeSettings(),this.setupKernel(e.model.kernel)}get disposed(){return this._disposed}get kernelChanged(){return this._kernelChanged}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get propertyChanged(){return this._propertyChanged}get id(){return this._id}get kernel(){return this._kernel}get path(){return this._path}get type(){return this._type}get name(){return this._name}get model(){return{id:this.id,kernel:this.kernel&&{id:this.kernel.id,name:this.kernel.name},path:this._path,type:this._type,name:this._name}}get isDisposed(){return this._isDisposed}update(e){const t=this.model;if(this._path=e.path,this._name=e.name,this._type=e.type,null===this._kernel&&null!==e.kernel||null!==this._kernel&&null===e.kernel||null!==this._kernel&&null!==e.kernel&&this._kernel.id!==e.kernel.id){null!==this._kernel&&this._kernel.dispose();const t=this._kernel||null;this.setupKernel(e.kernel);const n=this._kernel||null;this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:n})}this._handleModelChange(t)}dispose(){if(!this.isDisposed){if(this._isDisposed=!0,this._disposed.emit(),this._kernel){this._kernel.dispose();const e=this._kernel;this._kernel=null;const t=this._kernel;this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:t})}r.Signal.clearData(this)}}async setPath(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({path:e})}async setName(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({name:e})}async setType(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({type:e})}async changeKernel(e){if(this.isDisposed)throw new Error("Session is disposed");return await this._patch({kernel:e}),this.kernel}async shutdown(){if(this.isDisposed)throw new Error("Session is disposed");await o.shutdownSession(this.id,this.serverSettings),this.dispose()}setupKernel(e){if(null===e)return void(this._kernel=null);const t=this._connectToKernel(Object.assign(Object.assign({},this._kernelConnectionOptions),{model:e,username:this._username,clientId:this._clientId,serverSettings:this.serverSettings}));this._kernel=t,t.statusChanged.connect(this.onKernelStatus,this),t.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.anyMessage.connect(this.onAnyMessage,this)}onKernelStatus(e,t){this._statusChanged.emit(t)}onKernelConnectionStatus(e,t){this._connectionStatusChanged.emit(t)}onIOPubMessage(e,t){this._iopubMessage.emit(t)}onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}onAnyMessage(e,t){this._anyMessage.emit(t)}async _patch(e){const t=await o.updateSession(Object.assign(Object.assign({},e),{id:this._id}),this.serverSettings);return this.update(t),t}_handleModelChange(e){e.name!==this._name&&this._propertyChanged.emit("name"),e.type!==this._type&&this._propertyChanged.emit("type"),e.path!==this._path&&this._propertyChanged.emit("path")}}},41874:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionAPI=t.Session=void 0;const a=o(n(11372));t.Session=a;const c=o(n(56807));t.SessionAPI=c,s(n(57847),t)},57847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionManager=void 0;const r=n(35259),i=n(23114),o=n(4016),s=n(28477),a=n(50591),c=n(35410),l=n(56807);class u extends a.BaseManager{constructor(e){var t;super(e),this._isReady=!1,this._sessionConnections=new Set,this._models=new Map,this._runningChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),this._connectToKernel=e=>this._kernelManager.connectTo(e),this._kernelManager=e.kernelManager,this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:SessionManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,await this._kernelManager.ready,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._sessionConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){const t=new c.SessionConnection(Object.assign(Object.assign({},e),{connectToKernel:this._connectToKernel,serverSettings:this.serverSettings}));return this._onStarted(t),this._models.has(e.model.id)||this.refreshRunning().catch((()=>{})),t}running(){return r.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e,t={}){const n=await l.startSession(e,this.serverSettings);return await this.refreshRunning(),this.connectTo(Object.assign(Object.assign({},t),{model:n}))}async shutdown(e){await l.shutdownSession(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>l.shutdownSession(e,this.serverSettings)))),await this.refreshRunning()}async stopIfNeeded(e){try{const t=(await l.listRunning(this.serverSettings)).filter((t=>t.path===e));if(1===t.length){const e=t[0].id;await this.shutdown(e)}}catch(e){}}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async findByPath(e){for(const t of this._models.values())if(t.path===e)return t;await this.refreshRunning();for(const t of this._models.values())if(t.path===e)return t}async requestRunning(){var e,t;let n;try{n=await l.listRunning(this.serverSettings)}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===n.length&&r.every(n,(e=>{var t,n,r,i;const o=this._models.get(e.id);return!!o&&(null===(t=o.kernel)||void 0===t?void 0:t.id)===(null===(n=e.kernel)||void 0===n?void 0:n.id)&&(null===(r=o.kernel)||void 0===r?void 0:r.name)===(null===(i=e.kernel)||void 0===i?void 0:i.name)&&o.name===e.name&&o.path===e.path&&o.type===e.type}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._sessionConnections.forEach((e=>{this._models.has(e.id)?e.update(this._models.get(e.id)):e.dispose()})),this._runningChanged.emit(n))}_onStarted(e){this._sessionConnections.add(e),e.disposed.connect(this._onDisposed,this),e.propertyChanged.connect(this._onChanged,this),e.kernelChanged.connect(this._onChanged,this)}_onDisposed(e){this._sessionConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onChanged(){this.refreshRunning().catch((()=>{}))}}t.SessionManager=u},56807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSession=t.startSession=t.getSessionModel=t.shutdownSession=t.getSessionUrl=t.listRunning=t.SESSION_SERVICE_URL=void 0;const r=n(28477),i=n(79622),o=n(29145);function s(e,n){return i.URLExt.join(e,t.SESSION_SERVICE_URL,n)}t.SESSION_SERVICE_URL="api/sessions",t.listRunning=async function(e=r.ServerConnection.makeSettings()){const n=i.URLExt.join(e.baseUrl,t.SESSION_SERVICE_URL),s=await r.ServerConnection.makeRequest(n,{},e);if(200!==s.status)throw await r.ServerConnection.ResponseError.create(s);const a=await s.json();if(!Array.isArray(a))throw new Error("Invalid Session list");return a.forEach((e=>{o.updateLegacySessionModel(e),o.validateModel(e)})),a},t.getSessionUrl=s,t.shutdownSession=async function(e,t=r.ServerConnection.makeSettings()){var n;const i=s(t.baseUrl,e),o=await r.ServerConnection.makeRequest(i,{method:"DELETE"},t);if(404===o.status){const t=null!==(n=(await o.json()).message)&&void 0!==n?n:`The session "${e}"" does not exist on the server`;console.warn(t)}else{if(410===o.status)throw new r.ServerConnection.ResponseError(o,"The kernel was deleted but the session was not");if(204!==o.status)throw await r.ServerConnection.ResponseError.create(o)}},t.getSessionModel=async function(e,t=r.ServerConnection.makeSettings()){const n=s(t.baseUrl,e),i=await r.ServerConnection.makeRequest(n,{},t);if(200!==i.status)throw await r.ServerConnection.ResponseError.create(i);const a=await i.json();return o.updateLegacySessionModel(a),o.validateModel(a),a},t.startSession=async function(e,n=r.ServerConnection.makeSettings()){const s=i.URLExt.join(n.baseUrl,t.SESSION_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},c=await r.ServerConnection.makeRequest(s,a,n);if(201!==c.status)throw await r.ServerConnection.ResponseError.create(c);const l=await c.json();return o.updateLegacySessionModel(l),o.validateModel(l),l},t.updateSession=async function(e,t=r.ServerConnection.makeSettings()){const n=s(t.baseUrl,e.id),i={method:"PATCH",body:JSON.stringify(e)},a=await r.ServerConnection.makeRequest(n,i,t);if(200!==a.status)throw await r.ServerConnection.ResponseError.create(a);const c=await a.json();return o.updateLegacySessionModel(c),o.validateModel(c),c}},11372:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.updateLegacySessionModel=t.validateModel=void 0;const r=n(96512),i=n(46901);function o(e){i.validateProperty(e,"id","string"),i.validateProperty(e,"type","string"),i.validateProperty(e,"name","string"),i.validateProperty(e,"path","string"),i.validateProperty(e,"kernel","object"),r.validateModel(e.kernel)}t.validateModel=o,t.updateLegacySessionModel=function(e){void 0===e.path&&void 0!==e.notebook&&(e.path=e.notebook.path,e.type="notebook",e.name="")},t.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid session list");e.forEach((e=>o(e)))}},92726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingManager=void 0;const r=n(79622),i=n(17266),o=n(28477);class s extends i.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings()}async fetch(e){if(!e)throw new Error("Plugin `id` parameter is required for settings fetch.");const{serverSettings:t}=this,{baseUrl:n,appUrl:r}=t,{makeRequest:i,ResponseError:s}=o.ServerConnection,c=n+r,l=a.url(c,e),u=await i(l,{},t);if(200!==u.status)throw await s.create(u);return u.json()}async list(){var e,t;const{serverSettings:n}=this,{baseUrl:r,appUrl:i}=n,{makeRequest:s,ResponseError:c}=o.ServerConnection,l=r+i,u=a.url(l,""),d=await s(u,{},n);if(200!==d.status)throw new c(d);const h=await d.json(),p=null!==(t=null===(e=null==h?void 0:h.settings)||void 0===e?void 0:e.map((e=>(e.data={composite:{},user:{}},e))))&&void 0!==t?t:[];return{ids:p.map((e=>e.id)),values:p}}async save(e,t){const{serverSettings:n}=this,{baseUrl:r,appUrl:i}=n,{makeRequest:s,ResponseError:c}=o.ServerConnection,l=r+i,u=a.url(l,e),d={body:JSON.stringify({raw:t}),method:"PUT"},h=await s(u,d,n);if(204!==h.status)throw new c(h)}}var a;t.SettingManager=s,function(e){e.url=function(e,t){return r.URLExt.join(e,"api/settings",t)}}(a||(a={}))},12447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=WebSocket},71146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalConnection=void 0;const r=n(79622),i=n(95082),o=n(4016),s=n(76240),a=n(43286);class c{constructor(e){var t;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this._name,t=this.serverSettings;let n=r.URLExt.join(t.wsUrl,"terminals","websocket",encodeURIComponent(e));const i=t.token;t.appendToken&&""!==i&&(n+=`?token=${encodeURIComponent(i)}`),this._ws=new t.WebSocket(n),this._ws.onmessage=this._onWSMessage,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSMessage=e=>{if(this._isDisposed)return;const t=JSON.parse(e.data);"disconnect"===t[0]&&this.dispose(),"connecting"!==this._connectionStatus?this._messageReceived.emit({type:t[0],content:t.slice(1)}):"setup"===t[0]&&this._updateConnectionStatus("connected")},this._onWSClose=e=>{console.warn(`Terminal websocket closed: ${e.code}`),this.isDisposed||this._reconnect()},this._connectionStatus="connecting",this._connectionStatusChanged=new o.Signal(this),this._isDisposed=!1,this._disposed=new o.Signal(this),this._messageReceived=new o.Signal(this),this._reconnectTimeout=null,this._ws=null,this._noOp=()=>{},this._reconnectLimit=7,this._reconnectAttempt=0,this._pendingMessages=[],this._name=e.model.name,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:s.ServerConnection.makeSettings(),this._createSocket()}get disposed(){return this._disposed}get messageReceived(){return this._messageReceived}get name(){return this._name}get model(){return{name:this._name}}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearSocket(),o.Signal.clearData(this))}send(e){this._sendMessage(e)}_sendMessage(e,t=!0){if(!this._isDisposed&&e.content)if("connected"===this.connectionStatus&&this._ws){const t=[e.type,...e.content];this._ws.send(JSON.stringify(t))}else{if(!t)throw new Error(`Could not send message: ${JSON.stringify(e)}`);this._pendingMessages.push(e)}}_sendPending(){for(;"connected"===this.connectionStatus&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}reconnect(){this._errorIfDisposed();const e=new i.PromiseDelegate,t=(n,r)=>{"connected"===r?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===r&&(e.reject(new Error("Terminal connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=l.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.error(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}async shutdown(){await a.shutdownTerminal(this.name,this.serverSettings),this.dispose()}clone(){return new c(this)}_updateConnectionStatus(e){this._connectionStatus!==e&&(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"connected"===e&&this._sendPending(),this._connectionStatusChanged.emit(e))}_errorIfDisposed(){if(this.isDisposed)throw new Error("Terminal connection is disposed")}get connectionStatusChanged(){return this._connectionStatusChanged}get connectionStatus(){return this._connectionStatus}}var l;t.TerminalConnection=c,function(e){e.getTermUrl=function(e,t){return r.URLExt.join(e,a.TERMINAL_SERVICE_URL,encodeURIComponent(t))},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(l||(l={}))},93247:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalAPI=t.Terminal=void 0;const a=o(n(58353));t.Terminal=a;const c=o(n(43286));t.TerminalAPI=c,s(n(61546),t)},61546:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManager=void 0;const r=n(35259),i=n(23114),o=n(4016),s=n(76240),a=n(50591),c=n(43286),l=n(71146);class u extends a.BaseManager{constructor(e={}){var t;if(super(e),this._isReady=!1,this._names=[],this._terminalConnections=new Set,this._runningChanged=new o.Signal(this),this._connectionFailure=new o.Signal(this),!this.isAvailable())return this._ready=Promise.reject("Terminals unavailable"),void this._ready.catch((e=>{}));this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:TerminalManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._names.length=0,this._terminalConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}isAvailable(){return c.isAvailable()}connectTo(e){const t=new l.TerminalConnection(Object.assign(Object.assign({},e),{serverSettings:this.serverSettings}));return this._onStarted(t),this._names.includes(e.model.name)||this.refreshRunning().catch((()=>{})),t}running(){return r.iter(this._models)}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(){const e=await c.startNew(this.serverSettings);return await this.refreshRunning(),this.connectTo({model:e})}async shutdown(e){await c.shutdownTerminal(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all(this._names.map((e=>c.shutdownTerminal(e,this.serverSettings)))),await this.refreshRunning()}async requestRunning(){var e,t;let n;try{n=await c.listRunning(this.serverSettings)}catch(n){throw(n instanceof s.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}if(this.isDisposed)return;const r=n.map((({name:e})=>e)).sort();r!==this._names&&(this._names=r,this._terminalConnections.forEach((e=>{r.includes(e.name)||e.dispose()})),this._runningChanged.emit(this._models))}_onStarted(e){this._terminalConnections.add(e),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._terminalConnections.delete(e),this.refreshRunning().catch((()=>{}))}get _models(){return this._names.map((e=>({name:e})))}}t.TerminalManager=u},43286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shutdownTerminal=t.listRunning=t.startNew=t.isAvailable=t.TERMINAL_SERVICE_URL=void 0;const r=n(79622),i=n(28477);function o(){return"true"===String(r.PageConfig.getOption("terminalsAvailable")).toLowerCase()}var s;t.TERMINAL_SERVICE_URL="api/terminals",t.isAvailable=o,t.startNew=async function(e=i.ServerConnection.makeSettings()){s.errorIfNotAvailable();const n=r.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),o=await i.ServerConnection.makeRequest(n,{method:"POST"},e);if(200!==o.status)throw await i.ServerConnection.ResponseError.create(o);return await o.json()},t.listRunning=async function(e=i.ServerConnection.makeSettings()){s.errorIfNotAvailable();const n=r.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),o=await i.ServerConnection.makeRequest(n,{},e);if(200!==o.status)throw await i.ServerConnection.ResponseError.create(o);const a=await o.json();if(!Array.isArray(a))throw new Error("Invalid terminal list");return a},t.shutdownTerminal=async function(e,n=i.ServerConnection.makeSettings()){var o;s.errorIfNotAvailable();const a=r.URLExt.join(n.baseUrl,t.TERMINAL_SERVICE_URL,e),c=await i.ServerConnection.makeRequest(a,{method:"DELETE"},n);if(404===c.status){const t=null!==(o=(await c.json()).message)&&void 0!==o?o:`The terminal session "${e}"" does not exist on the server`;console.warn(t)}else if(204!==c.status)throw await i.ServerConnection.ResponseError.create(c)},function(e){e.errorIfNotAvailable=function(){if(!o())throw new Error("Terminals Unavailable")}}(s||(s={}))},58353:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAvailable=void 0;const r=n(43286);Object.defineProperty(t,"isAvailable",{enumerable:!0,get:function(){return r.isAvailable}})},46901:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateProperty=void 0,t.validateProperty=function(e,t,n,r=[]){if(!e.hasOwnProperty(t))throw Error(`Missing property '${t}'`);const i=e[t];if(void 0!==n){let e=!0;switch(n){case"array":e=Array.isArray(i);break;case"object":e=void 0!==i;break;default:e=typeof i===n}if(!e)throw new Error(`Property '${t}' is not of type '${n}'`);if(r.length>0){let e=!0;switch(n){case"string":case"number":case"boolean":e=r.includes(i);break;default:e=r.findIndex((e=>e===i))>=0}if(!e)throw new Error(`Property '${t}' is not one of the valid values ${JSON.stringify(r)}`)}}}},45399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceManager=void 0;const r=n(79622),i=n(17266),o=n(28477);class s extends i.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings()}async fetch(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:r}=t,{makeRequest:i,ResponseError:s}=o.ServerConnection,c=n+r,l=a.url(c,e),u=await i(l,{},t);if(200!==u.status)throw await s.create(u);return u.json()}async list(){const{serverSettings:e}=this,{baseUrl:t,appUrl:n}=e,{makeRequest:r,ResponseError:i}=o.ServerConnection,s=t+n,c=a.url(s,""),l=await r(c,{},e);if(200!==l.status)throw await i.create(l);return(await l.json()).workspaces}async remove(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:r}=t,{makeRequest:i,ResponseError:s}=o.ServerConnection,c=n+r,l=a.url(c,e),u=await i(l,{method:"DELETE"},t);if(204!==u.status)throw await s.create(u)}async save(e,t){const{serverSettings:n}=this,{baseUrl:r,appUrl:i}=n,{makeRequest:s,ResponseError:c}=o.ServerConnection,l=r+i,u=a.url(l,e),d={body:JSON.stringify(t),method:"PUT"},h=await s(u,d,n);if(204!==h.status)throw await c.create(h)}}var a;t.WorkspaceManager=s,function(e){e.url=function(e,t){return r.URLExt.join(e,"api/workspaces",t)}}(a||(a={}))},89525:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataConnector=void 0,t.DataConnector=class{async list(e){throw new Error("DataConnector#list method has not been implemented.")}async remove(e){throw new Error("DataConnector#remove method has not been implemented.")}async save(e,t){throw new Error("DataConnector#save method has not been implemented.")}}},17266:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(89525),t),i(n(14623),t),i(n(51156),t),i(n(64962),t),i(n(7263),t)},14623:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51156:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestorablePool=void 0;const r=n(95082),i=n(39770),o=n(4016);var s;t.RestorablePool=class{constructor(e){this._added=new o.Signal(this),this._current=null,this._currentChanged=new o.Signal(this),this._hasRestored=!1,this._isDisposed=!1,this._objects=new Set,this._restore=null,this._restored=new r.PromiseDelegate,this._updated=new o.Signal(this),this.namespace=e.namespace}get added(){return this._added}get current(){return this._current}set current(e){this._current!==e&&null!==e&&this._objects.has(e)&&(this._current=e,this._currentChanged.emit(this._current))}get currentChanged(){return this._currentChanged}get isDisposed(){return this._isDisposed}get restored(){return this._restored.promise}get size(){return this._objects.size}get updated(){return this._updated}async add(e){var t,n;if(e.isDisposed){const t="A disposed object cannot be added.";throw console.warn(t,e),new Error(t)}if(this._objects.has(e)){const t="This object already exists in the pool.";throw console.warn(t,e),new Error(t)}if(this._objects.add(e),e.disposed.connect(this._onInstanceDisposed,this),!s.injectedProperty.get(e)){if(this._restore){const{connector:r}=this._restore,i=this._restore.name(e);if(i){const o=`${this.namespace}:${i}`,a=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);s.nameProperty.set(e,o),await r.save(o,{data:a})}}this._added.emit(e)}}dispose(){this.isDisposed||(this._current=null,this._isDisposed=!0,this._objects.clear(),o.Signal.clearData(this))}find(e){const t=this._objects.values();for(const n of t)if(e(n))return n}forEach(e){this._objects.forEach(e)}filter(e){const t=[];return this.forEach((n=>{e(n)&&t.push(n)})),t}inject(e){return s.injectedProperty.set(e,!0),this.add(e)}has(e){return this._objects.has(e)}async restore(e){if(this._hasRestored)throw new Error("This pool has already been restored.");this._hasRestored=!0;const{command:t,connector:n,registry:r,when:i}=e,o=this.namespace,s=i?[n.list(o)].concat(i):[n.list(o)];this._restore=e;const[a]=await Promise.all(s),c=await Promise.all(a.ids.map((async(e,i)=>{const o=a.values[i],s=o&&o.data;return void 0===s?n.remove(e):r.execute(t,s).catch((()=>n.remove(e)))})));return this._restored.resolve(),c}async save(e){var t,n;const r=s.injectedProperty.get(e);if(!this._restore||!this.has(e)||r)return;const{connector:i}=this._restore,o=this._restore.name(e),a=s.nameProperty.get(e),c=o?`${this.namespace}:${o}`:"";if(a&&a!==c&&await i.remove(a),s.nameProperty.set(e,c),c){const r=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);await i.save(c,{data:r})}a!==c&&this._updated.emit(e)}_onInstanceDisposed(e){if(this._objects.delete(e),e===this._current&&(this._current=null,this._currentChanged.emit(this._current)),s.injectedProperty.get(e))return;if(!this._restore)return;const{connector:t}=this._restore,n=s.nameProperty.get(e);n&&t.remove(n)}},function(e){e.injectedProperty=new i.AttachedProperty({name:"injected",create:()=>!1}),e.nameProperty=new i.AttachedProperty({name:"name",create:()=>""})}(s||(s={}))},64962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateDB=void 0;const r=n(4016);class i{constructor(e={}){this._changed=new r.Signal(this);const{connector:t,transform:n}=e;this._connector=t||new i.Connector,this._ready=n?n.then((e=>{const{contents:t,type:n}=e;switch(n){case"cancel":default:return;case"clear":return this._clear();case"merge":return this._merge(t||{});case"overwrite":return this._overwrite(t||{})}})):Promise.resolve(void 0)}get changed(){return this._changed}async clear(){await this._ready,await this._clear()}async fetch(e){return await this._ready,this._fetch(e)}async list(e){return await this._ready,this._list(e)}async remove(e){await this._ready,await this._remove(e),this._changed.emit({id:e,type:"remove"})}async save(e,t){await this._ready,await this._save(e,t),this._changed.emit({id:e,type:"save"})}async toJSON(){await this._ready;const{ids:e,values:t}=await this._list();return t.reduce(((t,n,r)=>(t[e[r]]=n,t)),{})}async _clear(){await Promise.all((await this._list()).ids.map((e=>this._remove(e))))}async _fetch(e){const t=await this._connector.fetch(e);if(t)return JSON.parse(t).v}async _list(e=""){const{ids:t,values:n}=await this._connector.list(e);return{ids:t,values:n.map((e=>JSON.parse(e).v))}}async _merge(e){await Promise.all(Object.keys(e).map((t=>e[t]&&this._save(t,e[t]))))}async _overwrite(e){await this._clear(),await this._merge(e)}async _remove(e){return this._connector.remove(e)}async _save(e,t){return this._connector.save(e,JSON.stringify({v:t}))}}t.StateDB=i,function(e){e.Connector=class{constructor(){this._storage={}}async fetch(e){return this._storage[e]}async list(e=""){return Object.keys(this._storage).reduce(((t,n)=>(""!==e&&e!==n.split(":")[0]||(t.ids.push(n),t.values.push(this._storage[n])),t)),{ids:[],values:[]})}async remove(e){delete this._storage[e]}async save(e,t){this._storage[e]=t}}}(i=t.StateDB||(t.StateDB={}))},7263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IStateDB=void 0;const r=n(95082);t.IStateDB=new r.Token("@jupyterlab/coreutils:IStateDB")},35259:(e,t,n)=>{"use strict";var r;function i(e){return"function"==typeof e.iter?e.iter():new f(e)}function o(e){return new g(e)}function s(e){return new m(e)}function a(e){return new v(e)}function c(e){return new y(e)}function l(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(!1===t(n,r++))return}function u(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(!t(n,r++))return!1;return!0}function d(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(t(n,r++))return!0;return!1}function h(e){for(var t,n=0,r=[],o=i(e);void 0!==(t=o.next());)r[n++]=t;return r}function p(e){for(var t,n=i(e),r={};void 0!==(t=n.next());)r[t[0]]=t[1];return r}n.r(t),n.d(t,{ArrayExt:()=>r,ArrayIterator:()=>f,ChainIterator:()=>w,EmptyIterator:()=>C,EnumerateIterator:()=>P,FilterIterator:()=>k,FnIterator:()=>y,ItemIterator:()=>v,KeyIterator:()=>g,MapIterator:()=>M,RangeIterator:()=>j,RepeatIterator:()=>U,RetroArrayIterator:()=>V,StrideIterator:()=>J,StringExt:()=>q,TakeIterator:()=>G,ValueIterator:()=>m,ZipIterator:()=>Y,chain:()=>b,each:()=>l,empty:()=>S,enumerate:()=>_,every:()=>u,filter:()=>E,find:()=>I,findIndex:()=>D,iter:()=>i,iterFn:()=>c,iterItems:()=>a,iterKeys:()=>o,iterValues:()=>s,map:()=>R,max:()=>x,min:()=>T,minmax:()=>O,once:()=>K,range:()=>A,reduce:()=>F,repeat:()=>L,retro:()=>W,some:()=>d,stride:()=>B,take:()=>$,toArray:()=>h,toObject:()=>p,topologicSort:()=>H,zip:()=>z}),function(e){function t(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i,o=e.length;if(0===o)return-1;n=n<0?Math.max(0,n+o):Math.min(n,o-1),i=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))<n?r+1+(o-n):r-n+1;for(var s=0;s<i;++s){var a=(n+s)%o;if(e[a]===t)return a}return-1}function n(e,t,n,r){void 0===n&&(n=-1),void 0===r&&(r=0);var i,o=e.length;if(0===o)return-1;i=(n=n<0?Math.max(0,n+o):Math.min(n,o-1))<(r=r<0?Math.max(0,r+o):Math.min(r,o-1))?n+1+(o-r):n-r+1;for(var s=0;s<i;++s){var a=(n-s+o)%o;if(e[a]===t)return a}return-1}function r(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i,o=e.length;if(0===o)return-1;n=n<0?Math.max(0,n+o):Math.min(n,o-1),i=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))<n?r+1+(o-n):r-n+1;for(var s=0;s<i;++s){var a=(n+s)%o;if(t(e[a],a))return a}return-1}function i(e,t,n,r){void 0===n&&(n=-1),void 0===r&&(r=0);var i,o=e.length;if(0===o)return-1;i=(n=n<0?Math.max(0,n+o):Math.min(n,o-1))<(r=r<0?Math.max(0,r+o):Math.min(r,o-1))?n+1+(o-r):n-r+1;for(var s=0;s<i;++s){var a=(n-s+o)%o;if(t(e[a],a))return a}return-1}function o(e,t,n){void 0===t&&(t=0),void 0===n&&(n=-1);var r=e.length;if(!(r<=1))for(t=t<0?Math.max(0,t+r):Math.min(t,r-1),n=n<0?Math.max(0,n+r):Math.min(n,r-1);t<n;){var i=e[t],o=e[n];e[t++]=o,e[n--]=i}}function s(e,t){var n=e.length;if(t<0&&(t+=n),!(t<0||t>=n)){for(var r=e[t],i=t+1;i<n;++i)e[i-1]=e[i];return e.length=n-1,r}}e.firstIndexOf=t,e.lastIndexOf=n,e.findFirstIndex=r,e.findLastIndex=i,e.findFirstValue=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var o=r(e,t,n,i);return-1!==o?e[o]:void 0},e.findLastValue=function(e,t,n,r){void 0===n&&(n=-1),void 0===r&&(r=0);var o=i(e,t,n,r);return-1!==o?e[o]:void 0},e.lowerBound=function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o=e.length;if(0===o)return 0;for(var s=r=r<0?Math.max(0,r+o):Math.min(r,o-1),a=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))-r+1;a>0;){var c=a>>1,l=s+c;n(e[l],t)<0?(s=l+1,a-=c+1):a=c}return s},e.upperBound=function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o=e.length;if(0===o)return 0;for(var s=r=r<0?Math.max(0,r+o):Math.min(r,o-1),a=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))-r+1;a>0;){var c=a>>1,l=s+c;n(e[l],t)>0?a=c:(s=l+1,a-=c+1)}return s},e.shallowEqual=function(e,t,n){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;++r)if(n?!n(e[r],t[r]):e[r]!==t[r])return!1;return!0},e.slice=function(e,t){void 0===t&&(t={});var n=t.start,r=t.stop,i=t.step;if(void 0===i&&(i=1),0===i)throw new Error("Slice `step` cannot be zero.");var o,s=e.length;void 0===n?n=i<0?s-1:0:n<0?n=Math.max(n+s,i<0?-1:0):n>=s&&(n=i<0?s-1:s),void 0===r?r=i<0?-1:s:r<0?r=Math.max(r+s,i<0?-1:0):r>=s&&(r=i<0?s-1:s),o=i<0&&r>=n||i>0&&n>=r?0:i<0?Math.floor((r-n+1)/i+1):Math.floor((r-n-1)/i+1);for(var a=[],c=0;c<o;++c)a[c]=e[n+c*i];return a},e.move=function(e,t,n){var r=e.length;if(!(r<=1)&&(t=t<0?Math.max(0,t+r):Math.min(t,r-1))!==(n=n<0?Math.max(0,n+r):Math.min(n,r-1))){for(var i=e[t],o=t<n?1:-1,s=t;s!==n;s+=o)e[s]=e[s+o];e[n]=i}},e.reverse=o,e.rotate=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(!(i<=1||(n=n<0?Math.max(0,n+i):Math.min(n,i-1))>=(r=r<0?Math.max(0,r+i):Math.min(r,i-1)))){var s=r-n+1;if(t>0?t%=s:t<0&&(t=(t%s+s)%s),0!==t){var a=n+t;o(e,n,a-1),o(e,a,r),o(e,n,r)}}},e.fill=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(0!==i){var o;n=n<0?Math.max(0,n+i):Math.min(n,i-1),o=(r=r<0?Math.max(0,r+i):Math.min(r,i-1))<n?r+1+(i-n):r-n+1;for(var s=0;s<o;++s)e[(n+s)%i]=t}},e.insert=function(e,t,n){var r=e.length;t=t<0?Math.max(0,t+r):Math.min(t,r);for(var i=r;i>t;--i)e[i]=e[i-1];e[t]=n},e.removeAt=s,e.removeFirstOf=function(e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=-1);var o=t(e,n,r,i);return-1!==o&&s(e,o),o},e.removeLastOf=function(e,t,r,i){void 0===r&&(r=-1),void 0===i&&(i=0);var o=n(e,t,r,i);return-1!==o&&s(e,o),o},e.removeAllOf=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(0===i)return 0;n=n<0?Math.max(0,n+i):Math.min(n,i-1),r=r<0?Math.max(0,r+i):Math.min(r,i-1);for(var o=0,s=0;s<i;++s)n<=r&&s>=n&&s<=r&&e[s]===t||r<n&&(s<=r||s>=n)&&e[s]===t?o++:o>0&&(e[s-o]=e[s]);return o>0&&(e.length=i-o),o},e.removeFirstWhere=function(e,t,n,i){var o;void 0===n&&(n=0),void 0===i&&(i=-1);var a=r(e,t,n,i);return-1!==a&&(o=s(e,a)),{index:a,value:o}},e.removeLastWhere=function(e,t,n,r){var o;void 0===n&&(n=-1),void 0===r&&(r=0);var a=i(e,t,n,r);return-1!==a&&(o=s(e,a)),{index:a,value:o}},e.removeAllWhere=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var i=e.length;if(0===i)return 0;n=n<0?Math.max(0,n+i):Math.min(n,i-1),r=r<0?Math.max(0,r+i):Math.min(r,i-1);for(var o=0,s=0;s<i;++s)n<=r&&s>=n&&s<=r&&t(e[s],s)||r<n&&(s<=r||s>=n)&&t(e[s],s)?o++:o>0&&(e[s-o]=e[s]);return o>0&&(e.length=i-o),o}}(r||(r={}));var f=function(){function e(e){this._index=0,this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),g=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},e}(),m=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},e}(),v=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},e}(),y=function(){function e(e){this._fn=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();function b(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new w(i(e.map(i)))}var w=function(){function e(e){this._cloned=!1,this._source=e,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(void 0===this._active){var e=this._source.next();if(void 0===e)return;this._active=this._cloned?e.clone():e}var t=this._active.next();return void 0!==t?t:(this._active=void 0,this.next())},e}();function S(){return new C}var C=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();function _(e,t){return void 0===t&&(t=0),new P(i(e),t)}var P=function(){function e(e,t){this._source=e,this._index=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return[this._index++,e]},e}();function E(e,t){return new k(i(e),t)}var k=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var e,t=this._fn,n=this._source;void 0!==(e=n.next());)if(t(e,this._index++))return e},e}();function I(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(t(n,r++))return n}function D(e,t){for(var n,r=0,o=i(e);void 0!==(n=o.next());)if(t(n,r++))return r-1;return-1}function T(e,t){var n=i(e),r=n.next();if(void 0!==r){for(var o=r;void 0!==(r=n.next());)t(r,o)<0&&(o=r);return o}}function x(e,t){var n=i(e),r=n.next();if(void 0!==r){for(var o=r;void 0!==(r=n.next());)t(r,o)>0&&(o=r);return o}}function O(e,t){var n=i(e),r=n.next();if(void 0!==r){for(var o=r,s=r;void 0!==(r=n.next());)t(r,o)<0?o=r:t(r,s)>0&&(s=r);return[o,s]}}function R(e,t){return new M(i(e),t)}var M=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return this._fn.call(void 0,e,this._index++)},e}();function A(e,t,n){return void 0===t?new j(0,e,1):new j(e,t,void 0===n?1:n)}var N,j=function(){function e(e,t,n){this._index=0,this._start=e,this._stop=t,this._step=n,this._length=N.rangeLength(e,t,n)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}();function F(e,t,n){var r=0,o=i(e),s=o.next();if(void 0===s&&void 0===n)throw new TypeError("Reduce of empty iterable with no initial value.");if(void 0===s)return n;var a,c,l=o.next();if(void 0===l&&void 0===n)return s;if(void 0===l)return t(n,s,r++);for(a=t(void 0===n?s:t(n,s,r++),l,r++);void 0!==(c=o.next());)a=t(a,c,r++);return a}function L(e,t){return new U(e,t)}function K(e){return new U(e,1)}!function(e){e.rangeLength=function(e,t,n){return 0===n?1/0:e>t&&n>0||e<t&&n<0?0:Math.ceil((t-e)/n)}}(N||(N={}));var U=function(){function e(e,t){this._value=e,this._count=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();function W(e){return"function"==typeof e.retro?e.retro():new V(e)}var V=function(){function e(e){this._source=e,this._index=e.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();function H(e){var t=[],n=new Set,r=new Map;return l(e,(function(e){var t=e[0],n=e[1],i=r.get(n);i?i.push(t):r.set(n,[t])})),r.forEach((function(e,t){i(t)})),t;function i(e){if(!n.has(e)){n.add(e);var o=r.get(e);o&&o.forEach(i),t.push(e)}}}function B(e,t){return new J(i(e),t)}var q,J=function(){function e(e,t){this._source=e,this._step=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var e=this._source.next(),t=this._step-1;t>0;--t)this._source.next();return e},e}();function $(e,t){return new G(i(e),t)}!function(e){function t(e,t,n){void 0===n&&(n=0);for(var r=new Array(t.length),i=0,o=n,s=t.length;i<s;++i,++o){if(-1===(o=e.indexOf(t[i],o)))return null;r[i]=o}return r}e.findIndices=t,e.matchSumOfSquares=function(e,n,r){void 0===r&&(r=0);var i=t(e,n,r);if(!i)return null;for(var o=0,s=0,a=i.length;s<a;++s){var c=i[s]-r;o+=c*c}return{score:o,indices:i}},e.matchSumOfDeltas=function(e,n,r){void 0===r&&(r=0);var i=t(e,n,r);if(!i)return null;for(var o=0,s=r-1,a=0,c=i.length;a<c;++a){var l=i[a];o+=l-s-1,s=l}return{score:o,indices:i}},e.highlight=function(e,t,n){for(var r=[],i=0,o=0,s=t.length;i<s;){for(var a=t[i],c=t[i];++i<s&&t[i]===c+1;)c++;o<a&&r.push(e.slice(o,a)),a<c+1&&r.push(n(e.slice(a,c+1))),o=c+1}return o<e.length&&r.push(e.slice(o)),r},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(q||(q={}));var G=function(){function e(e,t){this._source=e,this._count=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(void 0!==e)return this._count--,e}},e}();function z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Y(e.map(i))}var Y=function(){function e(e){this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map((function(e){return e.clone()})))},e.prototype.next=function(){for(var e=new Array(this._source.length),t=0,n=this._source.length;t<n;++t){var r=this._source[t].next();if(void 0===r)return;e[t]=r}return e},e}()},95082:function(e,t){!function(e){"use strict";e.JSONExt=void 0,function(e){function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function n(e){return Array.isArray(e)}function r(e,i){if(e===i)return!0;if(t(e)||t(i))return!1;var o=n(e),s=n(i);return o===s&&(o&&s?function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;++n)if(!r(e[n],t[n]))return!1;return!0}(e,i):function(e,t){if(e===t)return!0;for(var n in e)if(void 0!==e[n]&&!(n in t))return!1;for(var n in t)if(void 0!==t[n]&&!(n in e))return!1;for(var n in e){var i=e[n],o=t[n];if(void 0!==i||void 0!==o){if(void 0===i||void 0===o)return!1;if(!r(i,o))return!1}}return!0}(e,i))}function i(e){return t(e)?e:n(e)?function(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=i(e[n]);return t}(e):function(e){var t={};for(var n in e){var r=e[n];void 0!==r&&(t[n]=i(r))}return t}(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=function(e){return!t(e)&&!n(e)},e.deepEqual=r,e.deepCopy=i}(e.JSONExt||(e.JSONExt={}));var t=function(){function e(){this._types=[],this._values=[]}return e.prototype.types=function(){return this._types.slice()},e.prototype.hasData=function(e){return-1!==this._types.indexOf(e)},e.prototype.getData=function(e){var t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0},e.prototype.setData=function(e,t){this.clearData(e),this._types.push(e),this._values.push(t)},e.prototype.clearData=function(e){var t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))},e.prototype.clear=function(){this._types.length=0,this._values.length=0},e}(),n=function(){function e(){var e=this;this.promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return e.prototype.resolve=function(e){(0,this._resolve)(e)},e.prototype.reject=function(e){(0,this._reject)(e)},e}(),r=function(e){this.name=e,this._tokenStructuralPropertyT=null};function i(e){for(var t=0,n=0,r=e.length;n<r;++n)n%4==0&&(t=4294967295*Math.random()>>>0),e[n]=255&t,t>>>=8}e.Random=void 0,(e.Random||(e.Random={})).getRandomValues=function(){var e="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"==typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:i}(),e.UUID=void 0,(e.UUID||(e.UUID={})).uuid4=function(e){for(var t=new Uint8Array(16),n=new Array(256),r=0;r<16;++r)n[r]="0"+r.toString(16);for(r=16;r<256;++r)n[r]=r.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],n[t[0]]+n[t[1]]+n[t[2]]+n[t[3]]+"-"+n[t[4]]+n[t[5]]+"-"+n[t[6]]+n[t[7]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]}}(e.Random.getRandomValues),e.MimeData=t,e.PromiseDelegate=n,e.Token=r,Object.defineProperty(e,"__esModule",{value:!0})}(t)},70725:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DisposableDelegate:()=>a,DisposableSet:()=>l,ObservableDisposableDelegate:()=>c,ObservableDisposableSet:()=>u});var r=n(35259),i=n(4016),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){function e(e){this._fn=e}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(this._fn){var e=this._fn;this._fn=null,e()}},e}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new i.Signal(t),t}return s(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),i.Signal.clearData(this))},t}(a),l=function(){function e(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach((function(e){e.dispose()})),this._items.clear())},e.prototype.contains=function(e){return this._items.has(e)},e.prototype.add=function(e){this._items.add(e)},e.prototype.remove=function(e){this._items.delete(e)},e.prototype.clear=function(){this._items.clear()},e}();!function(e){e.from=function(t){var n=new e;return(0,r.each)(t,(function(e){n.add(e)})),n}}(l||(l={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new i.Signal(t),t}return s(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),i.Signal.clearData(this))},t}(l);!function(e){e.from=function(t){var n=new e;return(0,r.each)(t,(function(e){n.add(e)})),n}}(u||(u={}))},23114:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Debouncer:()=>g,Poll:()=>p,RateLimiter:()=>f,Throttler:()=>m});var r=n(95082),i=n(4016),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var u,d="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate,h="function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearImmediate,p=function(){function e(e){var t=this;this._disposed=new i.Signal(this),this._tick=new r.PromiseDelegate,this._ticked=new i.Signal(this),this._timeout=-1,this._factory=e.factory,this._standby=e.standby||u.DEFAULT_STANDBY,this._state=a(a({},u.DEFAULT_STATE),{timestamp:(new Date).getTime()});var n=e.frequency||{},o=Math.max(n.interval||0,n.max||0,u.DEFAULT_FREQUENCY.max);this.frequency=a(a(a({},u.DEFAULT_FREQUENCY),n),{max:o}),this.name=e.name||u.DEFAULT_NAME,"auto"in e&&!e.auto||d((function(){t.start()}))}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},set:function(t){if(!this.isDisposed&&!r.JSONExt.deepEqual(t,this.frequency||{})){var n=t.backoff,i=t.interval,o=t.max;if(i=Math.round(i),o=Math.round(o),"number"==typeof n&&n<1)throw new Error("Poll backoff growth factor must be at least 1");if((i<0||i>o)&&i!==e.NEVER)throw new Error("Poll interval must be between 0 and max");if(o>e.MAX_INTERVAL&&o!==e.NEVER)throw new Error("Max interval must be less than "+e.MAX_INTERVAL);this._frequency={backoff:n,interval:i,max:o}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return"disposed"===this.state.phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"standby",{get:function(){return this._standby},set:function(e){this.isDisposed||this.standby===e||(this._standby=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){return this._tick.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticked",{get:function(){return this._ticked},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this._state=a(a({},u.DISPOSED_STATE),{timestamp:(new Date).getTime()}),this._tick.promise.catch((function(e){})),this._tick.reject(new Error("Poll ("+this.name+") is disposed.")),this._disposed.emit(void 0),i.Signal.clearData(this))},e.prototype.refresh=function(){return this.schedule({cancel:function(e){return"refreshed"===e.phase},interval:e.IMMEDIATE,phase:"refreshed"})},e.prototype.schedule=function(t){return void 0===t&&(t={}),c(this,void 0,void 0,(function(){var n,i,o,s,c,u=this;return l(this,(function(l){switch(l.label){case 0:return this.isDisposed||t.cancel&&t.cancel(this.state)?[2]:(n=this.state,i=this._tick,o=new r.PromiseDelegate,s=a({interval:this.frequency.interval,payload:null,phase:"standby",timestamp:(new Date).getTime()},t),this._state=s,this._tick=o,n.interval===e.IMMEDIATE?h(this._timeout):clearTimeout(this._timeout),this._ticked.emit(this.state),i.resolve(this),[4,i.promise]);case 1:return l.sent(),c=function(){u.isDisposed||u.tick!==o.promise||u._execute()},this._timeout=s.interval===e.IMMEDIATE?d(c):s.interval===e.NEVER?-1:setTimeout(c,s.interval),[2]}}))}))},e.prototype.start=function(){return this.schedule({cancel:function(e){var t=e.phase;return"constructed"!==t&&"standby"!==t&&"stopped"!==t},interval:e.IMMEDIATE,phase:"started"})},e.prototype.stop=function(){return this.schedule({cancel:function(e){return"stopped"===e.phase},interval:e.NEVER,phase:"stopped"})},e.prototype._execute=function(){var e=this,t="function"==typeof this.standby?this.standby():this.standby;if(t="never"!==t&&("when-hidden"===t?!("undefined"==typeof document||!document||!document.hidden):t))this.schedule();else{var n=this.tick;this._factory(this.state).then((function(t){e.isDisposed||e.tick!==n||e.schedule({payload:t,phase:"rejected"===e.state.phase?"reconnected":"resolved"})})).catch((function(t){e.isDisposed||e.tick!==n||e.schedule({interval:u.sleep(e.frequency,e.state),payload:t,phase:"rejected"})}))}},e}();!function(e){e.IMMEDIATE=0,e.MAX_INTERVAL=2147483647,e.NEVER=1/0}(p||(p={})),function(e){e.DEFAULT_BACKOFF=3,e.DEFAULT_FREQUENCY={backoff:!0,interval:1e3,max:3e4},e.DEFAULT_NAME="unknown",e.DEFAULT_STANDBY="when-hidden",e.DEFAULT_STATE={interval:p.NEVER,payload:null,phase:"constructed",timestamp:new Date(0).getTime()},e.DISPOSED_STATE={interval:p.NEVER,payload:null,phase:"disposed",timestamp:new Date(0).getTime()},e.sleep=function(t,n){var r=t.backoff,i=t.interval,o=t.max;if(i===p.NEVER)return i;var s=!0===r?e.DEFAULT_BACKOFF:!1===r?1:r,a=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}(i,n.interval*s);return Math.min(o,a)}}(u||(u={}));var f=function(){function e(e,t){var n=this;void 0===t&&(t=500),this.payload=null,this.limit=t,this.poll=new p({auto:!1,factory:function(){return c(n,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,e()];case 1:return[2,t.sent()]}}))}))},frequency:{backoff:!1,interval:p.NEVER,max:p.NEVER},standby:"never"}),this.payload=new r.PromiseDelegate,this.poll.ticked.connect((function(e,t){var i=n.payload;return"resolved"===t.phase?(n.payload=new r.PromiseDelegate,void i.resolve(t.payload)):"rejected"===t.phase||"stopped"===t.phase?(n.payload=new r.PromiseDelegate,i.promise.catch((function(e){})),void i.reject(t.payload)):void 0}),this)}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return null===this.payload},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this.payload=null,this.poll.dispose())},e.prototype.stop=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){return[2,this.poll.stop()]}))}))},e}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.invoke=function(){return this.poll.schedule({interval:this.limit,phase:"invoked"}),this.payload.promise},t}(f),m=function(e){function t(t,n){var r=e.call(this,t,"number"==typeof n?n:n&&n.limit)||this,i="leading";return"number"!=typeof n&&(i="edge"in(n=n||{})?n.edge:i),r._interval="trailing"===i?r.limit:p.IMMEDIATE,r}return s(t,e),t.prototype.invoke=function(){return"invoked"!==this.poll.state.phase&&this.poll.schedule({interval:this._interval,phase:"invoked"}),this.payload.promise},t}(f)},39770:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AttachedProperty:()=>i});var r,i=function(){function e(e){this._pid=r.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}return e.prototype.get=function(e){var t=r.ensureMap(e);return this._pid in t?t[this._pid]:t[this._pid]=this._createValue(e)},e.prototype.set=function(e,t){var n,i=r.ensureMap(e);n=this._pid in i?i[this._pid]:i[this._pid]=this._createValue(e);var o=this._coerceValue(e,t);this._maybeNotify(e,n,i[this._pid]=o)},e.prototype.coerce=function(e){var t,n=r.ensureMap(e);t=this._pid in n?n[this._pid]:n[this._pid]=this._createValue(e);var i=this._coerceValue(e,t);this._maybeNotify(e,t,n[this._pid]=i)},e.prototype._createValue=function(e){return(0,this._create)(e)},e.prototype._coerceValue=function(e,t){var n=this._coerce;return n?n(e,t):t},e.prototype._compareValue=function(e,t){var n=this._compare;return n?n(e,t):e===t},e.prototype._maybeNotify=function(e,t,n){var r=this._changed;r&&!this._compareValue(t,n)&&r(e,t,n)},e}();!function(e){e.clearData=function(e){r.ownerData.delete(e)}}(i||(i={})),function(e){var t;e.ownerData=new WeakMap,e.nextPID=(t=0,function(){return"pid-"+(""+Math.random()).slice(2)+"-"+t++}),e.ensureMap=function(t){var n=e.ownerData.get(t);return n||(n=Object.create(null),e.ownerData.set(t,n),n)}}(r||(r={}))},4016:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Signal:()=>s});var r,i=n(35259),o=n(39770),s=function(){function e(e){this._blockedCount=0,this.sender=e}return e.prototype.block=function(e){this._blockedCount++;try{e()}finally{this._blockedCount--}},e.prototype.connect=function(e,t){return r.connect(this,e,t)},e.prototype.disconnect=function(e,t){return r.disconnect(this,e,t)},e.prototype.emit=function(e){this._blockedCount||r.emit(this,e)},e}();!function(e){e.blockAll=function(e,t){var n=r.blockedProperty;n.set(e,n.get(e)+1);try{t()}finally{n.set(e,n.get(e)-1)}},e.disconnectBetween=function(e,t){r.disconnectBetween(e,t)},e.disconnectSender=function(e){r.disconnectSender(e)},e.disconnectReceiver=function(e){r.disconnectReceiver(e)},e.disconnectAll=function(e){r.disconnectAll(e)},e.clearData=function(e){r.disconnectAll(e)},e.getExceptionHandler=function(){return r.exceptionHandler},e.setExceptionHandler=function(e){var t=r.exceptionHandler;return r.exceptionHandler=e,t}}(s||(s={})),function(e){function t(e){var t=r.get(e);t&&0!==t.length&&((0,i.each)(t,(function(e){if(e.signal){var t=e.thisArg||e.slot;e.signal=null,d(s.get(t))}})),d(t))}function n(e){var t=s.get(e);t&&0!==t.length&&((0,i.each)(t,(function(e){if(e.signal){var t=e.signal.sender;e.signal=null,d(r.get(t))}})),d(t))}e.exceptionHandler=function(e){console.error(e)},e.connect=function(e,t,n){n=n||void 0;var i=r.get(e.sender);if(i||(i=[],r.set(e.sender,i)),l(i,e,t,n))return!1;var o=n||t,a=s.get(o);a||(a=[],s.set(o,a));var c={signal:e,slot:t,thisArg:n};return i.push(c),a.push(c),!0},e.disconnect=function(e,t,n){n=n||void 0;var i=r.get(e.sender);if(!i||0===i.length)return!1;var o=l(i,e,t,n);if(!o)return!1;var a=n||t,c=s.get(a);return o.signal=null,d(i),d(c),!0},e.disconnectBetween=function(e,t){var n=r.get(e);if(n&&0!==n.length){var o=s.get(t);o&&0!==o.length&&((0,i.each)(o,(function(t){t.signal&&t.signal.sender===e&&(t.signal=null)})),d(n),d(o))}},e.disconnectSender=t,e.disconnectReceiver=n,e.disconnectAll=function(e){t(e),n(e)},e.emit=function(t,n){if(!(e.blockedProperty.get(t.sender)>0)){var i=r.get(t.sender);if(i&&0!==i.length)for(var o=0,s=i.length;o<s;++o){var a=i[o];a.signal===t&&u(a,n)}}};var r=new WeakMap,s=new WeakMap,a=new Set,c="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function l(e,t,n,r){return(0,i.find)(e,(function(e){return e.signal===t&&e.slot===n&&e.thisArg===r}))}function u(t,n){var r=t.signal,i=t.slot,o=t.thisArg;try{i.call(o,r.sender,n)}catch(t){e.exceptionHandler(t)}}function d(e){0===a.size&&c(h),a.add(e)}function h(){a.forEach(p),a.clear()}function p(e){i.ArrayExt.removeAllWhere(e,f)}function f(e){return null===e.signal}e.blockedProperty=new o.AttachedProperty({name:"blocked",create:function(){return 0}})}(r||(r={}))},67164:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>se,BaseCore:()=>ce,BaseTelemetryPlugin:()=>B.i,CoreUtils:()=>ie.Tr,DiagnosticLogger:()=>O.AQ,ESPromise:()=>de,ESPromiseScheduler:()=>ve,EventHelper:()=>Se.zB,EventLatency:()=>E,EventPersistence:()=>I,EventPropertyType:()=>k,EventsDiscardedReason:()=>we.h,FullVersionString:()=>ie.vs,InternalAppInsightsCore:()=>ne,InternalBaseCore:()=>Z,LoggingSeverity:()=>C,MinChannelPriorty:()=>be,NotificationManager:()=>te,PerfEvent:()=>R.zn,PerfManager:()=>R.Jk,ProcessTelemetryContext:()=>F.Vi,TraceLevel:()=>D,Undefined:()=>Pe.jA,Utils:()=>ie.cQ,ValueKind:()=>P,ValueSanitizer:()=>ye,Version:()=>ie.Gf,_ExtendedInternalMessageId:()=>T,_InternalLogMessage:()=>O.lQ,_InternalMessageId:()=>_,__getRegisteredEvents:()=>Ce.um,_logInternalMessage:()=>O.L4,_throwInternal:()=>O.kP,_warnToConsole:()=>O.jV,addEventHandler:()=>Ce.Ib,addEventListeners:()=>Ce.yw,addPageHideEventListener:()=>Ce.TJ,addPageShowEventListener:()=>Ce.nD,addPageUnloadEventListener:()=>Ce.c9,areCookiesSupported:()=>W.p7,arrForEach:()=>s.tO,arrIndexOf:()=>s.UA,arrMap:()=>s.Mr,arrReduce:()=>s.Xz,attachEvent:()=>Ce.pZ,cookieAvailable:()=>W.p7,createCookieMgr:()=>W.Nz,createEnumStyle:()=>o.By,createGuid:()=>ie.cm,createProcessTelemetryContext:()=>F.CD,createTraceParent:()=>Ee.SU,createUniqueNamespace:()=>V.J,createUnloadHandlerContainer:()=>J.Y,dateNow:()=>s.m6,deleteCookie:()=>ie.kT,detachEvent:()=>Ce.pD,disableCookies:()=>ie.oF,disallowsSameSiteNone:()=>W.UY,doPerf:()=>R.Lm,dumpObj:()=>M.eU,eventOff:()=>Ce.QY,eventOn:()=>Ce.XO,extend:()=>ie.l7,findW3cTraceParent:()=>Ee.lq,formatTraceParent:()=>Ee.aR,generateW3CId:()=>Se.DO,getCommonSchemaMetaData:()=>ie.Vv,getConsole:()=>M.dr,getCookie:()=>ie.ej,getCookieValue:()=>ie.Do,getCrypto:()=>M.MX,getDocument:()=>M.Me,getExceptionName:()=>s.jj,getFieldValueType:()=>ie.Sy,getGlobal:()=>N.Rd,getGlobalInst:()=>M.a8,getHistory:()=>M.s1,getIEVersion:()=>M.sA,getISOString:()=>s.Y6,getJSON:()=>M.xA,getLocation:()=>M.k$,getMsCrypto:()=>M.gz,getNavigator:()=>M.jW,getPerformance:()=>M.r,getSetValue:()=>s.qK,getTenantId:()=>ie.jM,getTime:()=>ie.hK,getWindow:()=>M.Jj,hasDocument:()=>M.Nv,hasHistory:()=>M.fE,hasJSON:()=>M.nS,hasNavigator:()=>M.d6,hasOwnProperty:()=>s.nr,hasWindow:()=>M.Ym,isArray:()=>s.kJ,isArrayValid:()=>ie.JT,isBeaconsSupported:()=>M.MF,isBoolean:()=>s.jn,isChromium:()=>ie.mJ,isDate:()=>s.J_,isDocumentObjectAvailable:()=>ie.x9,isError:()=>s.VZ,isFetchSupported:()=>M.JO,isFunction:()=>s.mf,isIE:()=>M.w1,isLatency:()=>ie.r7,isNotTruthy:()=>s.F,isNullOrUndefined:()=>s.le,isNumber:()=>s.hj,isObject:()=>s.Kn,isReactNative:()=>M.b$,isSampledFlag:()=>Ee.Pn,isString:()=>s.HD,isTruthy:()=>s.fQ,isTypeof:()=>s.Ym,isUint8ArrayAvailable:()=>ie.IZ,isUndefined:()=>s.o8,isValidSpanId:()=>Ee.Lc,isValidTraceId:()=>Ee.jN,isValidTraceParent:()=>Ee.J6,isValueAssigned:()=>ie.Sn,isValueKind:()=>ie.oS,isWindowObjectAvailable:()=>ie.dH,isXhrSupported:()=>M.Z3,mergeEvtNamespace:()=>Ce.jU,newGuid:()=>Se.GW,newId:()=>_e.pZ,normalizeJsName:()=>s.Gf,objCreate:()=>N.pu,objDefineAccessors:()=>s.l_,objForEachKey:()=>s.rW,objFreeze:()=>s.FL,objKeys:()=>s.FY,objSeal:()=>s.Xi,openXhr:()=>ie.ot,optimizeObject:()=>s.Ax,parseTraceParent:()=>Ee.j_,perfNow:()=>Se.Jj,proxyAssign:()=>s.cf,proxyFunctionAs:()=>s.Oi,proxyFunctions:()=>s.Vb,random32:()=>_e._l,randomValue:()=>_e.az,removeEventHandler:()=>Ce.C1,removeEventListeners:()=>Ce.nJ,removePageHideEventListener:()=>Ce.C9,removePageShowEventListener:()=>Ce.Yl,removePageUnloadEventListener:()=>Ce.JA,safeGetCookieMgr:()=>W.JP,safeGetLogger:()=>O.vH,sanitizeProperty:()=>ie.yj,setCookie:()=>ie.d8,setEnableEnvMocks:()=>M.dI,setProcessTelemetryTimings:()=>ie.if,setValue:()=>s.sO,strContains:()=>s._Q,strEndsWith:()=>s.Id,strFunction:()=>Pe.cb,strObject:()=>Pe.fK,strPrototype:()=>Pe.hB,strStartsWith:()=>s.xe,strTrim:()=>s.nd,strUndefined:()=>Pe.jA,throwError:()=>s._y,toISOString:()=>s.Y6,useXDomainRequest:()=>M.cp});var r,i=n(27421),o=n(50951),s=n(24869),a="Failed",c=a+"MonitorAjax",l="Track",u="Start",d="Stop",h="Event",p="AuthContext",f="Exception",g="Local",m="Session",v="Storage",y="Browser",b="Cannot",w="Buffer",S="InstrumentationKey",C=(0,o.By)({CRITICAL:1,WARNING:2}),_=(0,o.By)(((r={})[y+"DoesNotSupport"+g+v]=0,r[y+b+"Read"+g+v]=1,r[y+b+"Read"+m+v]=2,r[y+b+"Write"+g+v]=3,r[y+b+"Write"+m+v]=4,r[y+a+"RemovalFrom"+g+v]=5,r[y+a+"RemovalFrom"+m+v]=6,r[b+"SendEmptyTelemetry"]=7,r.ClientPerformanceMathError=8,r["ErrorParsingAI"+m+"Cookie"]=9,r.ErrorPVCalc=10,r[f+"WhileLoggingError"]=11,r[a+"AddingTelemetryTo"+w]=12,r[c+"Abort"]=13,r[c+"Dur"]=14,r[c+"Open"]=15,r[c+"RSC"]=16,r[c+"Send"]=17,r[c+"GetCorrelationHeader"]=18,r[a+"ToAddHandlerForOnBeforeUnload"]=19,r[a+"ToSendQueuedTelemetry"]=20,r[a+"ToReportDataLoss"]=21,r["Flush"+a]=22,r.MessageLimitPerPVExceeded=23,r.MissingRequiredFieldSpecification=24,r.NavigationTimingNotSupported=25,r.OnError=26,r[m+"RenewalDateIsZero"]=27,r.SenderNotInitialized=28,r[u+l+h+a]=29,r[d+l+h+a]=30,r[u+l+a]=31,r[d+l+a]=32,r.TelemetrySampledAndNotSent=33,r[l+h+a]=34,r[l+f+a]=35,r[l+"Metric"+a]=36,r[l+"PV"+a]=37,r[l+"PV"+a+"Calc"]=38,r[l+"Trace"+a]=39,r["Transmission"+a]=40,r[a+"ToSet"+v+w]=41,r[a+"ToRestore"+v+w]=42,r.InvalidBackendResponse=43,r[a+"ToFixDepricatedValues"]=44,r.InvalidDurationValue=45,r.TelemetryEnvelopeInvalid=46,r.CreateEnvelopeError=47,r[b+"SerializeObject"]=48,r[b+"SerializeObjectNonSerializable"]=49,r.CircularReferenceDetected=50,r["Clear"+p+a]=51,r[f+"Truncated"]=52,r.IllegalCharsInName=53,r.ItemNotInArray=54,r.MaxAjaxPerPVExceeded=55,r.MessageTruncated=56,r.NameTooLong=57,r.SampleRateOutOfRange=58,r["Set"+p+a]=59,r["Set"+p+a+"AccountName"]=60,r.StringValueTooLong=61,r.StartCalledMoreThanOnce=62,r.StopCalledWithoutStart=63,r["TelemetryInitializer"+a]=64,r.TrackArgumentsNotSpecified=65,r.UrlTooLong=66,r[m+v+w+"Full"]=67,r[b+"AccessCookie"]=68,r.IdTooLong=69,r.InvalidEvent=70,r[c+"SetRequestHeader"]=71,r["Send"+y+"InfoOnUserInit"]=72,r["Plugin"+f]=73,r["Notification"+f]=74,r.SnippetScriptLoadFailure=99,r["Invalid"+S]=100,r[b+"ParseAiBlobValue"]=101,r.InvalidContentBlob=102,r[l+"PageAction"+h+a]=103,r[a+"AddingCustomDefinedRequestContext"]=104,r["InMemory"+v+w+"Full"]=105,r[S+"Deprecation"]=106,r)),P=(0,o.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),E=(0,o.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),k=(0,o.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),I=(0,o.By)({Normal:1,Critical:2}),D=(0,o.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),T=(0,s.FL)((0,i.uc)((0,i.uc)({},_),(0,o.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),x=n(29141),O=n(29339),R=n(81782),M=n(49251),A=n(98145),N=n(30175),j=n(96335),F=n(31030),L=n(69031),K=500;function U(e,t,n){t&&(0,s.kJ)(t)&&t[A.R5]>0&&(t=t.sort((function(e,t){return e[j.yi]-t[j.yi]})),(0,s.tO)(t,(function(e){e[j.yi]<K&&(0,s._y)("Channel has invalid priority - "+e[A.pZ])})),e[A.MW]({queue:(0,s.FL)(t),chain:(0,F.jV)(t,n[A.TC],n)}))}var W=n(88140),V=n(87624),H=n(28341),B=n(87951),q=function(e){function t(){var n,r,i=e.call(this)||this;function o(){n=0,r=[]}return i.identifier="TelemetryInitializerPlugin",i.priority=199,o(),(0,x.Z)(t,i,(function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return r[A.MW](t),{remove:function(){(0,s.tO)(r,(function(e,n){if(e.id===t.id)return r[A.cb](n,1),-1}))}}},e[j.hL]=function(t,n){for(var i=!1,o=r[A.R5],a=0;a<o;++a){var c=r[a];if(c)try{if(!1===c.fn[A.ZV](null,[t])){i=!0;break}}catch(e){(0,O.kP)(n[A.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,s.jj)(e),{exception:(0,M.eU)(e)},!0)}}i||e[A.uL](t,n)},e[A.F3]=function(){o()}})),i}return(0,i.ne)(t,e),t.__ieDyn=1,t}(B.i),J=n(38593),$="Plugins must provide initialize method",G="_notificationManager",z="SDK is still unloading...",Y={loggingLevelConsole:1};function Q(e,t){return new R.Jk(t)}function X(e,t){var n=!1;return(0,s.tO)(t,(function(t){if(t===e)return n=!0,-1})),n}var Z=function(){function e(){var t,n,r,o,a,c,l,u,d,h,p,f,g,m,v,y,b,w,S,C,_=0;(0,x.Z)(e,this,(function(e){function P(){n=!1,t=(0,s.mm)(!0,{},Y),e[A.TC]=t,e[A.eZ]=new O.AQ(t),e[A.iC]=[],v=new q,r=[],o=null,a=null,c=null,l=null,u=null,h=null,d=[],p=null,f=null,g=null,m=!1,y=null,b=(0,V.J)("AIBaseCore",!0),w=(0,J.Y)(),C=null}function E(){return(0,F.CD)(D(),t,e)}function k(n){var r=function(e,t,n){var r,i=[],o={};return(0,s.tO)(n,(function(t){((0,s.le)(t)||(0,s.le)(t[A.VL]))&&(0,s._y)($);var n=t[j.yi],r=t[A.pZ];t&&n&&((0,s.le)(o[n])?o[n]=r:(0,O.jV)(e,"Two extensions have same priority #"+n+" - "+o[n]+", "+r)),(!n||n<500)&&i[A.MW](t)})),(r={all:n})[j.oV]=i,r}(e[A.eZ],0,d);h=r[j.oV],u=null;var i=r.all;if(g=(0,s.FL)(function(e,t,n){var r=[];if(e&&(0,s.tO)(e,(function(e){return U(r,e,n)})),t){var i=[];(0,s.tO)(t,(function(e){e[j.yi]>K&&i[A.MW](e)})),U(r,i,n)}return r}(f,i,e)),p){var o=(0,s.UA)(i,p);-1!==o&&i[A.cb](o,1),-1!==(o=(0,s.UA)(h,p))&&h[A.cb](o,1),p._setQueue(g)}else p=function(e,t){function n(){return(0,F.CD)(null,t[A.TC],t,null)}function r(e,t,n,r){var i=e?e[A.R5]+1:1;function o(){0==--i&&(r&&r(),r=null)}i>0&&(0,s.tO)(e,(function(e){if(e&&e.queue[A.R5]>0){var r=e.chain,s=t[A.zV](r);s[A.Fc](o),n(s)}else i--})),o()}var i=!1,o={identifier:"ChannelControllerPlugin",priority:K,initialize:function(t,n,r,o){i=!0,(0,s.tO)(e,(function(e){e&&e.queue[A.R5]>0&&(0,L.bP)((0,F.CD)(e.chain,t,n),r)}))},isInitialized:function(){return i},processTelemetry:function(t,i){r(e,i||n(),(function(e){e[A.uL](t)}),(function(){i[A.uL](t)}))},update:function(t,n){var i=n||{reason:0};return r(e,t,(function(e){e[A.uL](i)}),(function(){t[A.uL](i)})),!0},pause:function(){r(e,n(),(function(e){e.iterate((function(e){e.pause&&e.pause()}))}),null)},resume:function(){r(e,n(),(function(e){e.iterate((function(e){e.resume&&e.resume()}))}),null)},teardown:function(t,n){var o=n||{reason:0,isAsync:!1};return r(e,t,(function(e){e[A.uL](o)}),(function(){t[A.uL](o),i=!1})),!0},getChannel:function(t){var n=null;return e&&e[A.R5]>0&&(0,s.tO)(e,(function(e){if(e&&e.queue[A.R5]>0&&((0,s.tO)(e.queue,(function(e){if(e[A.pZ]===t)return n=e,-1})),n))return-1})),n},flush:function(t,i,o,s){var a=1,c=!1,l=null;function u(){a--,c&&0===a&&(l&&(clearTimeout(l),l=null),i&&i(c),i=null)}return s=s||5e3,r(e,n(),(function(e){e.iterate((function(e){if(e[A.kL]){a++;var n=!1;e[A.kL](t,(function(){n=!0,u()}),o)||n||(t&&null==l?l=setTimeout((function(){l=null,u()}),s):u())}}))}),(function(){c=!0,u()})),!0},_setQueue:function(t){e=t}};return o}(g,e);i[A.MW](p),h[A.MW](p),e[A.iC]=(0,L.AA)(i),p[A.VL](t,e,i),(0,L.bP)(E(),i),e[A.iC]=(0,s.FL)((0,L.AA)(h||[])).slice(),n&&function(t){var n=(0,F.xy)(D(),e);e._updateHook&&!0===e._updateHook(n,t)||n[A.uL](t)}(n)}function I(t){var n,r=null,i=null;return(0,s.tO)(e[A.iC],(function(e){if(e[A.pZ]===t&&e!==p&&e!==v)return i=e,-1})),!i&&p&&(i=p.getChannel(t)),i&&((n={plugin:i})[A.$h]=function(e){(0,L.OY)(i)[j.mE]=!e},n.isEnabled=function(){var e=(0,L.OY)(i);return!e[A.fi]&&!e[j.mE]},n.remove=function(e,t){var n;void 0===e&&(e=!0);var r=[i],o=((n={reason:1})[A.d]=e,n);T(r,o,(function(e){e&&k({reason:32,removed:r}),t&&t(e)}))},r=n),r}function D(){if(!u){var n=(h||[]).slice();-1===(0,s.UA)(n,v)&&n[A.MW](v),u=(0,F.jV)((0,L.AA)(n),t,e)}return u}function T(n,r,i){if(n&&n[A.R5]>0){var o=(0,F.jV)(n,t,e),a=(0,F.Bt)(o,e);a[A.Fc]((function(){var e=!1,t=[];(0,s.tO)(d,(function(r,i){X(r,n)?e=!0:t[A.MW](r)})),d=t;var r=[];f&&((0,s.tO)(f,(function(t,i){var o=[];(0,s.tO)(t,(function(t){X(t,n)?e=!0:o[A.MW](t)})),r[A.MW](o)})),f=r),i&&i(e)})),a[A.uL](r)}else i(!1)}function x(){var n=e[A.eZ]?e[A.eZ].queue:[];n&&((0,s.tO)(n,(function(n){var r,i=((r={})[A.I]=y||"InternalMessageId: "+n[A.Gc],r.iKey=(0,s.v4)(t[A.p$]),r.time=(0,s.Y6)(new Date),r.baseType=O.lQ.dataType,r.baseData={message:n[A.gU]},r);e.track(i)})),n[A.R5]=0)}function M(e,t,n,r){return p?p[A.kL](e,t,n||6,r):(t&&t(!1),!0)}function B(t){var n=e[A.eZ];n?(0,O.kP)(n,2,73,t):(0,s._y)(t)}P(),e[A.yl]=function(){return n},e[A.VL]=function(r,a,l,u){var h,p;m&&(0,s._y)(z),e[A.yl]()&&(0,s._y)("Core should not be initialized more than once"),t=r||{},e[A.TC]=t,(0,s.le)(r[A.p$])&&(0,s._y)("Please provide instrumentation key"),o=u,e[G]=u,!0===(p=(0,s.v4)(t.disableDbgExt))&&S&&(o[A.n7](S),S=null),o&&!S&&!0!==p&&(S=(0,H.p)(t),o[A.g](S)),!(h=(0,s.v4)(t.enablePerfMgr))&&c&&(c=null),h&&(0,s.qK)(t,j.DN,Q),(0,s.qK)(t,j.Zh,{}).NotificationManager=o,l&&(e[A.eZ]=l);var v=(0,s.qK)(t,j.js,[]);(d=[])[A.MW].apply(d,(0,i.$h)((0,i.$h)([],a,!1),v,!1)),f=(0,s.qK)(t,j.Z,[]),k(null),g&&0!==g[A.R5]||(0,s._y)("No "+j.Z+" available"),n=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return g&&(0,s.tO)(g,(function(t){e[A.MW](t.queue)})),(0,s.FL)(e)},e.track=function(n){n.iKey=n.iKey||t[A.p$],n[A.Z_]=n[A.Z_]||(0,s.Y6)(new Date),n.ver=n.ver||"4.0",!m&&e[A.yl]()?E()[A.uL](n):r[A.MW](n)},e[A.SD]=E,e[A.tb]=function(){return o||(o=function(){var e;return(0,N.pu)(((e={})[A.g]=function(e){},e[A.n7]=function(e){},e[j.uC]=function(e){},e[j.$F]=function(e,t){},e[j.f_]=function(e,t){},e))}(),e[G]=o),o},e[A.g]=function(e){o&&o[A.g](e)},e[A.n7]=function(e){o&&o[A.n7](e)},e.getCookieMgr=function(){return l||(l=(0,W.Nz)(t,e[A.eZ])),l},e.setCookieMgr=function(e){l=e},e[j.kl]=function(){if(!a&&!c&&(0,s.v4)(t.enablePerfMgr)){var n=(0,s.v4)(t[j.DN]);(0,s.mf)(n)&&(c=n(e,e[A.tb]()))}return a||c||(0,R.j5)()},e.setPerfMgr=function(e){a=e},e.eventCnt=function(){return r[A.R5]},e.releaseQueue=function(){if(n&&r[A.R5]>0){var e=r;r=[],(0,s.tO)(e,(function(e){E()[A.uL](e)}))}},e.pollInternalLogs=function(e){y=e||null;var n=(0,s.v4)(t.diagnosticLogInterval);return n&&n>0||(n=1e4),_&&clearInterval(_),_=setInterval((function(){x()}),n)},e[A.LS]=function(){_&&(clearInterval(_),_=0,x())},(0,s.Vb)(e,(function(){return v}),["addTelemetryInitializer"]),e.unload=function(t,r,i){var o;void 0===t&&(t=!0),n||(0,s._y)("SDK is not initialized"),m&&(0,s._y)(z);var a=((o={reason:50})[A.d]=t,o.flushComplete=!1,o),c=(0,F.Bt)(D(),e);function l(t){a.flushComplete=t,m=!0,w.run(c,a),e[A.LS](),c[A.uL](a)}c[A.Fc]((function(){P(),r&&r(a)}),e),M(t,l,6,i)||l(!1)},e[A.TO]=I,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void B($);var i=I(e[A.pZ]);if(i&&!t)return r&&r(!1),void B("Plugin ["+e[A.pZ]+"] is already loaded!");var o={reason:16};function s(t){d[A.MW](e),o.added=[e],k(o),r&&r(!0)}if(i){var a=[i.plugin];T(a,{reason:2,isAsync:!!n},(function(e){e?(o.removed=a,o.reason|=32,s()):r&&r(!1)}))}else s()},e.evtNamespace=function(){return b},e[A.kL]=M,e.getTraceCtx=function(e){return C||(C=(0,L.Yn)()),C},e.setTraceCtx=function(e){C=e||null},(0,s.Oi)(e,"addUnloadCb",(function(){return w}),"add")}))}return e.__ieDyn=1,e}();function ee(e,t,n,r){(0,s.tO)(e,(function(e){if(e&&e[t])if(n)setTimeout((function(){return r(e)}),0);else try{r(e)}catch(e){}}))}var te=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;(0,x.Z)(e,this,(function(e){e[A.g]=function(t){e.listeners[A.MW](t)},e[A.n7]=function(t){for(var n=(0,s.UA)(e[A.dE],t);n>-1;)e.listeners[A.cb](n,1),n=(0,s.UA)(e[A.dE],t)},e[j.uC]=function(t){ee(e[A.dE],j.uC,!0,(function(e){e[j.uC](t)}))},e[j.$F]=function(t,n){ee(e[A.dE],j.$F,!0,(function(e){e[j.$F](t,n)}))},e[j.f_]=function(t,n){ee(e[A.dE],j.f_,n,(function(e){e[j.f_](t,n)}))},e[j.C$]=function(t){t&&(!n&&t[A.PL]()||ee(e[A.dE],j.C$,!1,(function(e){t[A.d]?setTimeout((function(){return e[j.C$](t)}),0):e[j.C$](t)})))}}))}return e.__ieDyn=1,e}(),ne=function(e){function t(){var n=e.call(this)||this;return(0,x.Z)(t,n,(function(e,t){function n(t){var n=e[A.tb]();n&&n[j.$F]([t],2)}e[A.VL]=function(e,n,r,i){t[A.VL](e,n,r||new O.AQ(e),i||new te(e))},e.track=function(r){(0,R.Lm)(e[j.kl](),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),(0,s._y)("Invalid telemetry item")),function(e){(0,s.le)(e[A.I])&&(n(e),(0,s._y)("telemetry name required"))}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)}})),n}return(0,i.ne)(t,e),t.__ieDyn=1,t}(Z),re=n(51539),ie=n(65705),oe=function(e){function t(){var n=e.call(this)||this;return n.pluginVersionStringArr=[],(0,x.Z)(t,n,(function(e,t){e.logger&&e.logger.queue||(e.logger=new O.AQ({loggingLevelConsole:1})),e.initialize=function(n,r,i,o){(0,R.Lm)(e,(function(){return"AppInsightsCore.initialize"}),(function(){var a=e.pluginVersionStringArr;if(n){n.endpointUrl||(n.endpointUrl=re.YT);var c=n.propertyStorageOverride;!c||c.getProperty&&c.setProperty||(0,s._y)("Invalid property storage override passed."),n.channels&&(0,s.tO)(n.channels,(function(e){e&&(0,s.tO)(e,(function(e){if(e.identifier&&e.version){var t=e.identifier+"="+e.version;a.push(t)}}))}))}e.getWParam=function(){return"undefined"!=typeof document||n.enableWParam?0:-1},r&&(0,s.tO)(r,(function(e){if(e&&e.identifier&&e.version){var t=e.identifier+"="+e.version;a.push(t)}})),e.pluginVersionString=a.join(";"),e.pluginVersionStringArr=a;try{t.initialize(n,r,i,o),e.pollInternalLogs("InternalLog")}catch(t){var l=e.logger,u=(0,M.eU)(t);-1!==u.indexOf("channels")&&(u+="\n - Channels must be provided through config.channels only!"),(0,O.kP)(l,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}}),(function(){return{config:n,extensions:r,logger:i,notificationManager:o}}))},e.track=function(n){(0,R.Lm)(e,(function(){return"AppInsightsCore.track"}),(function(){var r=n;if(r){r.timings=r.timings||{},r.timings.trackStart=(0,ie.hK)(),(0,ie.r7)(r.latency)||(r.latency=1);var i=r.ext=r.ext||{};i.sdk=i.sdk||{},i.sdk.ver=ie.vs;var o=r.baseData=r.baseData||{};o[re.o6]=o[re.o6]||{};var s=o[re.o6];s[re.p8]=s[re.p8]||e.pluginVersionString||re.qS}t.track(r)}),(function(){return{item:n}}),!n.sync)}})),n}return(0,i.ne)(t,e),t.__ieDyn=1,t}(ne);const se=oe;var ae=function(e){function t(){var n=e.call(this)||this;return(0,x.Z)(t,n,(function(e,t){e.initialize=function(n,r,i,o){n&&!n.endpointUrl&&(n.endpointUrl=re.YT),e.getWParam=function(){return ie.x9||n.enableWParam?0:-1};try{t.initialize(n,r,i,o)}catch(t){(0,O.kP)(e.logger,1,514,"Initialization Failed: "+(0,M.eU)(t)+"\n - Note: Channels must be provided through config.channels only")}},e.track=function(e){var n=e;if(n){var r=n.ext=n.ext||{};r.sdk=r.sdk||{},r.sdk.ver=ie.vs}t.track(n)}})),n}return(0,i.ne)(t,e),t.__ieDyn=1,t}(Z);const ce=ae;var le=s.mf;function ue(e,t,n){return function(r){e[t]=r,n()}}const de=function(){function e(t){var n=0,r=null,i=[];function o(){if(i.length>0){var e=i.slice();i=[],setTimeout((function(){for(var t=0,n=e.length;t<n;++t)try{e[t]()}catch(e){}}),0)}}function s(e){0===n&&(r=e,n=1,o())}function a(e){0===n&&(r=e,n=2,o())}(0,x.Z)(e,this,(function(t){t.then=function(t,s){return new e((function(a,c){!function(t,s,a,c){i.push((function(){var i;try{(i=1===n?le(t)?t(r):r:le(s)?s(r):r)instanceof e?i.then(a,c):2!==n||le(s)?a(i):c(i)}catch(e){return void c(e)}})),0!==n&&o()}(t,s,a,c)}))},t.catch=function(e){return t.then(null,e)}})),function(){if(!le(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(s,a)}catch(e){a(e)}}()}return e.resolve=function(t){return t instanceof e?t:t&&le(t.then)?new e((function(e,n){try{t.then(e,n)}catch(e){n(e)}})):new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){if(t&&t.length)return new e((function(e,n){try{for(var r=[],i=0,o=0;o<t.length;o++){var s=t[o];s&&le(s.then)?(i++,s.then(ue(r,o,(function(){0==--i&&e(r)})),n)):r[o]=s}0===i&&setTimeout((function(){e(r)}),0)}catch(e){n(e)}}))},e.race=function(t){return new e((function(e,n){if(t&&t.length)try{for(var r=function(r){var i=t[r];i&&le(i.then)?i.then(e,n):setTimeout((function(){e(i)}),0)},i=0;i<t.length;i++)r(i)}catch(e){n(e)}}))},e}();var he=0,pe=[],fe=[],ge=[];function me(){return(new Date).getTime()}const ve=function(){function e(t,n){var r=0,i=(t||"<unnamed>")+"."+he;function o(e){var t=(0,N.Rd)();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+i+"] "+e)}function s(e){(0,O.jV)(n,"ESPromiseScheduler["+i+"] "+e)}he++,(0,x.Z)(e,this,(function(e){var t=null,n=0;function a(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e.splice(n,1)[0];return null}e.scheduleEvent=function(e,c,l){var u=i+"."+n;n++,c&&(u+="-("+c+")");var d=u+"{"+r+"}";r++;var h,p,f,g={evt:null,tm:me(),id:d,isRunning:!1,isAborted:!1};return g.evt=t?(h=g,p=t,f=new de((function(e,t){var n=me()-p.tm,r=p.id;o("["+u+"] is waiting for ["+r+":"+n+" ms] to complete before starting -- ["+fe.length+"] waiting and ["+pe.length+"] running"),h.abort=function(e){h.abort=null,a(fe,u),h.isAborted=!0,t(new Error(e))},p.evt.then((function(n){a(fe,u),S(h).then(e,t)}),(function(n){a(fe,u),S(h).then(e,t)}))})),fe.push(h),f):S(g),(t=g).evt._schId=d,g.evt;function m(e){for(var t=me(),n=t-6e5,r=e.length,i=0;i<r;){var o=e[i];if(o&&o.tm<n){var a=null;o.abort?(a="Aborting ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",o.abort(a)):a="Removing ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",s(a),e.splice(i,1),r--}else i++}}function v(e,n){var r=!1,i=a(pe,e);if(i||(i=a(ge,e),r=!0),i){i.to&&(clearTimeout(i.to),i.to=null);var c=me()-i.tm;n?r?s("Timed out event ["+e+"] finally complete -- "+c+" ms"):o("Promise ["+e+"] Complete -- "+c+" ms"):(ge.push(i),s("Event ["+e+"] Timed out and removed -- "+c+" ms"))}else o("Failed to remove ["+e+"] from running queue");t&&t.id===e&&(t=null),m(pe),m(fe),m(ge)}function y(e,t){return function(n){return v(e,!0),t&&t(n),n}}function b(e,t,n,r){t.then((function(t){return t instanceof de?(o("Event ["+e+"] returned a promise -- waiting"),b(e,t,n,r),t):y(e,n)(t)}),y(e,r))}function w(e,t){var n=e.id;return new de((function(r,i){o("Event ["+n+"] Starting -- waited for "+(e.wTm||"--")+" ms"),e.isRunning=!0,e.abort=function(t){e.abort=null,e.isAborted=!0,v(n,!1),i(new Error(t))};var s=t(n);s instanceof de?(l&&(e.to=setTimeout((function(){v(n,!1),i(new Error("Timed out after ["+l+"] ms"))}),l)),b(n,s,(function(t){o("Event ["+n+"] Resolving after "+(me()-e.tm)+" ms"),r(t)}),i)):(o("Promise ["+n+"] Auto completed as the start action did not return a promise"),r())}))}function S(t){var n=me();return t.wTm=n-t.tm,t.tm=n,t.isAborted?de.reject(new Error("["+u+"] was aborted")):(pe.push(t),w(t,e))}}}))}return e.incomplete=function(){return pe},e.waitingToStart=function(){return fe},e}();var ye=function(){function e(e){var t=this,n={},r=[],i=[];function o(e,t){var o,a=n[e];if(a&&(o=a[t]),!o&&null!==o){if((0,s.HD)(e)&&(0,s.HD)(t))if(i.length>0){for(var c=0;c<i.length;c++)if(i[c].handleField(e,t)){o={canHandle:!0,fieldHandler:i[c]};break}}else 0===r.length&&(o={canHandle:!0});if(!o&&null!==o)for(o=null,c=0;c<r.length;c++)if(r[c].handleField(e,t)){o={canHandle:!0,handler:r[c],fieldHandler:null};break}a||(a=n[e]={}),a[t]=o}return o}function a(e,t,n,r,i,o){if(e.handler)return e.handler.property(t,n,i,o);if(!(0,s.le)(i.kind)){if(4096==(4096&r)||!(0,ie.oS)(i.kind))return null;i.value=i.value.toString()}return l(e.fieldHandler,t,n,r,i)}function c(e,t,n){return(0,ie.Sn)(n)?{value:n}:null}function l(e,n,r,i,o){if(o&&e){var a=e.getSanitizer(n,r,i,o.kind,o.propertyType);if(a)if(4===i){var u={},d=o.value;(0,s.rW)(d,(function(t,i){var o=n+"."+r;if((0,ie.Sn)(i)){var s=c(0,0,i);(s=l(e,o,t,(0,ie.Sy)(i),s))&&(u[t]=s.value)}})),o.value=u}else{var h={path:n,name:r,type:i,prop:o,sanitizer:t};o=a.call(t,h)}}return o}e&&i.push(e),t.addSanitizer=function(e){e&&(r.push(e),n={})},t.addFieldSanitizer=function(e){e&&(i.push(e),n={})},t.handleField=function(e,t){var n=o(e,t);return!!n&&n.canHandle},t.value=function(e,t,n,r){var i=o(e,t);if(i&&i.canHandle){if(!i||!i.canHandle)return null;if(i.handler)return i.handler.value(e,t,n,r);if(!(0,s.HD)(t)||(0,s.le)(n)||n===re.qS)return null;var l=null,u=(0,ie.Sy)(n);if(8192==(8192&u)){var d=-8193&u;if(l=n,!(0,ie.Sn)(l.value)||1!==d&&2!==d&&3!==d&&4096!=(4096&d))return null}else 1===u||2===u||3===u||4096==(4096&u)?l=c(0,0,n):4===u&&(l=c(0,0,r?JSON.stringify(n):n));if(l)return a(i,e,t,u,l,r)}return null},t.property=function(e,t,n,r){var i=o(e,t);if(!i||!i.canHandle)return null;if(!(0,s.HD)(t)||(0,s.le)(n)||!(0,ie.Sn)(n.value))return null;var c=(0,ie.Sy)(n.value);return 0===c?null:a(i,e,t,c,n,r)}}return e.getFieldType=ie.Sy,e}(),be=100,we=n(28452),Se=n(28956),Ce=n(47954),_e=n(19406),Pe=n(1550),Ee=n(56207)},51539:(e,t,n)=>{"use strict";n.d(t,{YT:()=>i,o6:()=>s,p8:()=>o,qS:()=>r});var r="",i="https://browser.events.data.microsoft.com/OneCollector/1.0/",o="version",s="properties"},65705:(e,t,n)=>{"use strict";n.d(t,{Do:()=>R,Gf:()=>p,IZ:()=>P,JT:()=>F,Sn:()=>C,Sy:()=>K,Tr:()=>W,Vv:()=>I,cQ:()=>U,cm:()=>M,d8:()=>T,dH:()=>S,ej:()=>O,hK:()=>N,if:()=>L,jM:()=>_,kT:()=>x,l7:()=>A,mJ:()=>V,oF:()=>D,oS:()=>j,ot:()=>H,r7:()=>E,vs:()=>f,x9:()=>w,yj:()=>k});var r,i=n(49251),o=n(24869),s=n(88140),a=n(28956),c=n(1550),l=n(47954),u=n(19406),d=n(30175),h=n(51539),p="3.2.9",f="1DS-Web-JS-"+p,g="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",m="withCredentials",v="timeout",y=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r),b=null,w=Boolean((0,i.Me)()),S=Boolean((0,i.Jj)());function C(e){return!(e===h.qS||(0,o.le)(e))}function _(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return h.qS}function P(){return null===b&&(b=!(0,o.o8)(Uint8Array)&&!function(){var e=(0,i.jW)();if(!(0,o.o8)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}()&&!(0,i.b$)()),b}function E(e){return!!(e&&(0,o.hj)(e)&&e>=1&&e<=4)}function k(e,t,n){if(!t&&!C(t)||"string"!=typeof e)return null;var r=typeof t;if("string"===r||"number"===r||"boolean"===r||(0,o.kJ)(t))t={value:t};else if("object"!==r||c.CY.call(t,"value")){if((0,o.le)(t.value)||t.value===h.qS||!(0,o.HD)(t.value)&&!(0,o.hj)(t.value)&&!(0,o.jn)(t.value)&&!(0,o.kJ)(t.value))return null}else t={value:n?JSON.stringify(t):t};if((0,o.kJ)(t.value)&&!F(t.value))return null;if(!(0,o.le)(t.kind)){if((0,o.kJ)(t.value)||!j(t.kind))return null;t.value=t.value.toString()}return t}function I(e,t,n){var r=-1;if(!(0,o.o8)(e))if(t>0&&(32===t?r=8192:t<=13&&(r=t<<5)),function(e){return e>=0&&e<=9}(n))-1===r&&(r=0),r|=n;else{var i=y[K(e)]||-1;-1!==r&&-1!==i?r|=i:6===i&&(r=i)}return r}function D(){(0,s.JP)(null).setEnabled(!1)}function T(e,t,n){(0,s.p7)(null)&&(0,s.JP)(null).set(e,t,86400*n,null,"/")}function x(e){(0,s.p7)(null)&&(0,s.JP)(null).del(e)}function O(e){return(0,s.p7)(null)?R((0,s.JP)(null),e):h.qS}function R(e,t,n){var r;return void 0===n&&(n=!0),e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||h.qS}function M(e){void 0===e&&(e="D");var t=(0,a.GW)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,h.qS)),t}function A(e,t,n,r,i){var s={},a=!1,l=0,u=arguments.length,d=arguments;for("[object Boolean]"===Object[c.hB].toString.call(d[0])&&(a=d[0],l++);l<u;l++)e=d[l],(0,o.rW)(e,(function(e,t){a&&t&&(0,o.Kn)(t)?(0,o.kJ)(t)?(s[e]=s[e]||[],(0,o.tO)(t,(function(t,n){t&&(0,o.Kn)(t)?s[e][n]=A(!0,s[e][n],t):s[e][n]=t}))):s[e]=A(!0,s[e],t):s[e]=t}));return s}var N=a.Jj;function j(e){return 0===e||e>0&&e<=13||32===e}function F(e){return e.length>0}function L(e,t){var n=e;n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[t]=N()}function K(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===c.fK&&(t=4,(0,o.kJ)(e)?(t=4096,e.length>0&&(t|=K(e[0]))):c.CY.call(e,"value")&&(t=8192|K(e.value)))}return t}var U={Version:p,FullVersionString:f,strUndefined:c.jA,strObject:c.fK,Undefined:c.jA,arrForEach:o.tO,arrIndexOf:o.UA,arrMap:o.Mr,arrReduce:o.Xz,objKeys:o.FY,toISOString:o.Y6,isReactNative:i.b$,isString:o.HD,isNumber:o.hj,isBoolean:o.jn,isFunction:o.mf,isArray:o.kJ,isObject:o.Kn,strTrim:o.nd,isDocumentObjectAvailable:w,isWindowObjectAvailable:S,isValueAssigned:C,getTenantId:_,isBeaconsSupported:i.MF,isUint8ArrayAvailable:P,isLatency:E,sanitizeProperty:k,getISOString:o.Y6,useXDomainRequest:i.cp,getCommonSchemaMetaData:I,cookieAvailable:s.p7,disallowsSameSiteNone:s.UY,setCookie:T,deleteCookie:x,getCookie:O,createGuid:M,extend:A,getTime:N,isValueKind:j,isArrayValid:F,objDefineAccessors:o.l_,addPageUnloadEventListener:l.c9,setProcessTelemetryTimings:L,addEventHandler:l.Ib,getFieldValueType:K,strEndsWith:o.Id,objForEachKey:o.rW},W={_canUseCookies:void 0,isTypeof:o.Ym,isUndefined:o.o8,isNullOrUndefined:o.le,hasOwnProperty:o.nr,isFunction:o.mf,isObject:o.Kn,isDate:o.J_,isArray:o.kJ,isError:o.VZ,isString:o.HD,isNumber:o.hj,isBoolean:o.jn,toISOString:o.Y6,arrForEach:o.tO,arrIndexOf:o.UA,arrMap:o.Mr,arrReduce:o.Xz,strTrim:o.nd,objCreate:d.pu,objKeys:o.FY,objDefineAccessors:o.l_,addEventHandler:l.Ib,dateNow:o.m6,isIE:i.w1,disableCookies:D,newGuid:a.GW,perfNow:a.Jj,newId:u.pZ,randomValue:u.az,random32:u._l,mwcRandomSeed:u.CN,mwcRandom32:u.F6,generateW3CId:a.DO};function V(){return!!(0,i.a8)("chrome")}function H(e,t,n,r,i,o){function s(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return r&&s(a,g,r),n&&s(a,m,n),a.open(e,t,!i),n&&s(a,m,n),!i&&o&&s(a,v,o),a}},71488:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BE_PROFILE:()=>m,NRT_PROFILE:()=>g,PostChannel:()=>ge,RT_PROFILE:()=>f});var r=n(27421),i=n(29141),o=n(81782),s=n(47954),a=n(87624),c=n(65705),l=n(24869),u=n(49251),d=n(28452),h=n(29339),p=n(87951),f="REAL_TIME",g="NEAR_REAL_TIME",m="BEST_EFFORT",v="",y="POST",b="drop",w="requeue",S="application/x-json-stream",C="cache-control",_="content-type",P="kill-duration",E="time-delta-millis",k="client-version",I="client-id",D="time-delta-to-apply-millis",T="upload-time",x="apikey",O="AuthMsaDeviceTicket",R="AuthXToken",M="msfpc",A="trace",N="user";function j(e){var t=(e.ext||{}).intweb;return t&&(0,c.Sn)(t[M])?t[M]:null}function F(e){for(var t=null,n=0;null===t&&n<e.length;n++)t=j(e[n]);return t}var L=function(){function e(t,n){var r=n?[].concat(n):[],i=this,o=F(r);i.iKey=function(){return t},i.Msfpc=function(){return o||v},i.count=function(){return r.length},i.events=function(){return r},i.addEvent=function(e){return!!e&&(r.push(e),o||(o=j(e)),!0)},i.split=function(n,i){var s;if(n<r.length){var a=r.length-n;(0,l.le)(i)||(a=i<a?i:a),s=r.splice(n,a),o=F(r)}return new e(t,s)}}return e.create=function(t,n){return new e(t,n)},e}();const K=function(){function e(){var t=!0,n=!0,r=!0,o="use-collector-delta",s=!1;(0,i.Z)(e,this,(function(e){e.allowRequestSending=function(){return t},e.firstRequestSent=function(){r&&(r=!1,s||(t=!1))},e.shouldAddClockSkewHeaders=function(){return n},e.getClockSkewHeaderValue=function(){return o},e.setClockSkew=function(e){s||(e?(o=e,n=!0,s=!0):n=!1,t=!0)}}))}return e.__ieDyn=1,e}(),U=function(){function e(){var t={};(0,i.Z)(e,this,(function(e){e.setKillSwitchTenants=function(e,n){if(e&&n)try{var r=(s=e.split(","),a=[],s&&(0,l.tO)(s,(function(e){a.push((0,l.nd)(e))})),a);if("this-request-only"===n)return r;for(var i=1e3*parseInt(n,10),o=0;o<r.length;++o)t[r[o]]=(0,l.m6)()+i}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var n=t,r=(0,l.nd)(e);return void 0!==n[r]&&n[r]>(0,l.m6)()||(delete n[r],!1)}}))}return e.__ieDyn=1,e}();var W=n(1550);function V(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)}var H,B=2e6,q=Math.min(B,65e3),J="metadata",$="f",G=/\./,z=function(){function e(t,n,r,s){var a="data",u="baseData",d=!!s,h=n,p={};(0,i.Z)(e,this,(function(e){function n(e,t,i,o,s,a,u){(0,l.rW)(e,(function(e,f){var g=null;if(f||(0,c.Sn)(f)){var m=i,v=e,y=s,b=t;if(d&&!o&&G.test(e)){var w=e.split("."),S=w.length;if(S>1){y&&(y=y.slice());for(var C=0;C<S-1;C++){var _=w[C];b=b[_]=b[_]||{},m+="."+_,y&&y.push(_)}v=w[S-1]}}var P=o&&function(e,t){var n=p[e];return void 0===n&&(e.length>=7&&(n=(0,l.xe)(e,"ext.metadata")||(0,l.xe)(e,"ext.web")),p[e]=n),n}(m);if(g=!P&&h&&h.handleField(m,v)?h.value(m,v,f,r):(0,c.yj)(v,f,r)){var E=g.value;if(b[v]=E,a&&a(y,v,g),u&&"object"==typeof E&&!(0,l.kJ)(E)){var k=y;k&&(k=k.slice()).push(v),n(f,E,m+"."+v,o,k,a,u)}}}}))}e.createPayload=function(e,t,n,r,i,o){return{apiKeys:[],payloadBlob:v,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:r,sendType:o,sendReason:i}},e.appendPayload=function(n,r,i){var s=n&&r&&!n.overflow;return s&&(0,o.Lm)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=r.events(),o=n.payloadBlob,s=n.numEvents,a=!1,c=[],u=[],d=n.isBeacon,h=d?65e3:3984588,p=d?q:B,f=0,g=0;f<t.length;){var m=t[f];if(m){if(s>=i){n.overflow=r.split(f);break}var v=e.getEventBlob(m);if(v&&v.length<=p){var y=v.length;if(o.length+y>h){n.overflow=r.split(f);break}o&&(o+="\n"),o+=v,++g>20&&(o.substr(0,1),g=0),a=!0,s++}else v?c.push(m):u.push(m),t.splice(f,1),f--}f++}if(c&&c.length>0&&n.sizeExceed.push(L.create(r.iKey(),c)),u&&u.length>0&&n.failedEvts.push(L.create(r.iKey(),u)),a){n.batches.push(r),n.payloadBlob=o,n.numEvents=s;var b=r.iKey();-1===(0,l.UA)(n.apiKeys,b)&&n.apiKeys.push(b)}}),(function(){return{payload:n,theBatch:{iKey:r.iKey(),evts:r.events()},max:i}})),s},e.getEventBlob=function(e){try{return(0,o.Lm)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,c.jM)(e.iKey);var r={},i=e.ext;i&&(t.ext=r,(0,l.rW)(i,(function(e,t){n(t,r[e]={},"ext."+e,!0,null,null,!0)})));var o=t[a]={};o.baseType=e.baseType;var s=o[u]={};return n(e.baseData,s,u,!1,[u],(function(e,t,n){Y(r,e,t,n)}),!0),n(e.data,o,a,!1,[],(function(e,t,n){Y(r,e,t,n)}),!0),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))}return e.__ieDyn=1,e}();function Y(e,t,n,r){if(r&&e){var i=(0,c.Vv)(r.value,r.kind,r.propertyType);if(i>-1){var o=e[J];o||(o=e[J]={f:{}});var s=o[$];if(s||(s=o[$]={}),t)for(var a=0;a<t.length;a++){var u=t[a];s[u]||(s[u]={f:{}});var d=s[u][$];d||(d=s[u][$]={}),s=d}s=s[n]={},(0,l.kJ)(r.value)?s.a={t:i}:s.t=i}}}var Q="sendAttempt",X="&NoResponseBody=true",Z=((H={})[1]=w,H[100]=w,H[200]="sent",H[8004]=b,H[8003]=b,H),ee={},te={};function ne(e,t,n){ee[e]=t,!1!==n&&(te[t]=e)}function re(e){try{return e.responseText}catch(e){}return v}function ie(e,t){var n=!1;if(e&&t){var r=(0,l.FY)(e);if(r&&r.length>0)for(var i=t.toLowerCase(),o=0;o<r.length;o++){var s=r[o];if(s&&(0,l.nr)(t,s)&&s.toLowerCase()===i){n=!0;break}}}return n}function oe(e,t,n,r){t&&n&&n.length>0&&(r&&ee[t]?(e.hdrs[ee[t]]=n,e.useHdrs=!0):e.url+="&"+t+"="+n)}function se(e,t){return t&&((0,l.hj)(t)?e=[t].concat(e):(0,l.kJ)(t)&&(e=t.concat(e))),e}ne(O,O,!1),ne(k,k),ne(I,"Client-Id"),ne(x,x),ne(D,D),ne(T,T),ne(R,R);var ae=function(){function e(t,n,r,s,a){this._responseHandlers=[];var d,p,f,g,m,w,O,R,A,N,j="?cors=true&"+_.toLowerCase()+"="+S,F=new U,L=!1,H=new K,B=!1,q=0,J=!0,$=[],G={},Y=[],ee=null,ne=!1,ae=!1,ce=!1;(0,i.Z)(e,this,(function(e){var i=!0;function K(e,t){for(var n=0,r=null,i=0;null==r&&i<e.length;)1===(n=e[i])?(0,u.cp)()?r=U:(0,u.Z3)()&&(r=ue):2===n&&(0,u.JO)(t)&&(!t||t&&!R)?r=le:B&&3===n&&(0,u.MF)()&&(r=he),i++;return r?{_transport:n,_isSync:t,sendPOST:r}:null}function U(e,t,n){var r=new XDomainRequest;r.open(y,e.urlString),e.timeout&&(r.timeout=e.timeout),r.onload=function(){var e=re(r);de(t,200,{},e),_e(e)},r.onerror=function(){de(t,400,{})},r.ontimeout=function(){de(t,500,{})},r.onprogress=function(){},n?r.send(e.data):a.set((function(){r.send(e.data)}),0)}function le(e,t,n){var r,o=e.urlString,s=!1,c=!1,u=((r={body:e.data,method:y}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,r);n&&(u.keepalive=!0,2===e._sendReason&&(s=!0,N&&(o+=X))),i&&(u.credentials="include"),e.headers&&(0,l.FY)(e.headers).length>0&&(u.headers=e.headers),fetch(o,u).then((function(e){var n={},r=v,i=e.headers;i&&i.forEach((function(e,t){n[t]=e})),e.body&&e.text().then((function(e){r=e})),c||(c=!0,de(t,e.status,n,r),_e(r))})).catch((function(e){c||(c=!0,de(t,0,{}))})),s&&!c&&(c=!0,de(t,200,{})),!c&&e.timeout>0&&a.set((function(){c||(c=!0,de(t,500,{}))}),e.timeout)}function ue(e,t,n){var r=e.urlString;function o(e,t,n){if(!e[n]&&t&&t.getResponseHeader){var r=t.getResponseHeader(n);r&&(e[n]=(0,l.nd)(r))}return e}function s(e,n){de(t,e.status,function(e){var t={};return e.getAllResponseHeaders?t=function(e){var t={};if((0,l.HD)(e)){var n=(0,l.nd)(e).split(/[\r\n]+/);(0,l.tO)(n,(function(e){if(e){var n=e.indexOf(": ");if(-1!==n){var r=(0,l.nd)(e.substring(0,n)).toLowerCase(),i=(0,l.nd)(e.substring(n+1));t[r]=i}else t[(0,l.nd)(e)]=1}}))}return t}(e.getAllResponseHeaders()):(t=o(t,e,E),t=o(t,e,P),t=o(t,e,"kill-duration-seconds")),t}(e),n)}n&&e.disableXhrSync&&(n=!1);var a=(0,c.ot)(y,r,i,!0,n,e.timeout);(0,l.rW)(e.headers,(function(e,t){a.setRequestHeader(e,t)})),a.onload=function(){var e=re(a);s(a,e),_e(e)},a.onerror=function(){s(a)},a.ontimeout=function(){s(a)},a.send(e.data)}function de(e,t,n,r){try{e(t,n,r)}catch(e){(0,h.kP)(p,2,518,(0,u.eU)(e))}}function he(e,t,n){var r=200,i=e._thePayload,o=e.urlString+(N?X:v);try{var s=(0,u.jW)();if(!s.sendBeacon(o,e.data))if(i){var a=[];(0,l.tO)(i.batches,(function(e){if(a&&e&&e.count()>0){for(var t=e.events(),n=0;n<t.length;n++)if(!s.sendBeacon(o,ee.getEventBlob(t[n]))){a.push(e.split(n));break}}else a.push(e.split(0))})),Pe(a,8003,i.sendType,!0)}else r=0}catch(e){(0,h.jV)(p,"Failed to send telemetry using sendBeacon API. Ex:"+(0,u.eU)(e)),r=0}finally{de(t,r,{},v)}}function pe(e){return 2===e||3===e}function fe(e){return ae&&pe(e)&&(e=2),e}function ge(){return!L&&q<n}function me(){var e=Y;return Y=[],e}function ve(e,t,n){var r=!1;return e&&e.length>0&&!L&&f[t]&&ee&&(r=0!==t||ge()&&(n>0||H.allowRequestSending())),r}function ye(e){var t={};return e&&(0,l.tO)(e,(function(e,n){t[n]={iKey:e.iKey(),evts:e.events()}})),t}function be(e,n,r,i,s){if(e&&0!==e.length)if(L)Pe(e,1,i);else{i=fe(i);try{var a=e,l=0!==i;(0,o.Lm)(g,(function(){return"HttpManager:_sendBatches"}),(function(o){o&&(e=e.slice(0));for(var a=[],u=null,d=(0,c.hK)(),h=f[i]||(l?f[1]:f[0]),p=h&&h._transport,g=A&&(ae||pe(i)||3===p||h._isSync&&2===p);ve(e,i,n);){var m=e.shift();m&&m.count()>0&&(F.isTenantKilled(m.iKey())?a.push(m):(u=u||ee.createPayload(n,r,l,g,s,i),ee.appendPayload(u,m,t)?null!==u.overflow&&(e=[u.overflow].concat(e),u.overflow=null,Se(u,d,(0,c.hK)(),s),d=(0,c.hK)(),u=null):(Se(u,d,(0,c.hK)(),s),d=(0,c.hK)(),e=[m].concat(e),u=null)))}u&&Se(u,d,(0,c.hK)(),s),e.length>0&&(Y=e.concat(Y)),Pe(a,8004,i)}),(function(){return{batches:ye(a),retryCount:n,isTeardown:r,isSynchronous:l,sendReason:s,useSendBeacon:pe(i),sendType:i}}),!l)}catch(e){(0,h.kP)(p,2,48,"Unexpected Exception sending batch: "+(0,u.eU)(e))}}}function we(e,t,n){e[t]=e[t]||{},e[t][d.identifier]=n}function Se(t,n,i,s){if(t&&t.payloadBlob&&t.payloadBlob.length>0){var a=!!e.sendHook,m=f[t.sendType];!pe(t.sendType)&&t.isBeacon&&2===t.sendReason&&(m=f[2]||f[3]||m);var y=ce;(t.isBeacon||3===m._transport)&&(y=!1);var b=function(e,t){var n={url:j,hdrs:{},useHdrs:!1};t?(n.hdrs=(0,c.l7)(n.hdrs,G),n.useHdrs=(0,l.FY)(n.hdrs).length>0):(0,l.rW)(G,(function(e,t){te[e]?oe(n,te[e],t,!1):(n.hdrs[e]=t,n.useHdrs=!0)})),oe(n,I,"NO_AUTH",t),oe(n,k,c.vs,t);var r=v;(0,l.tO)(e.apiKeys,(function(e){r.length>0&&(r+=","),r+=e})),oe(n,x,r,t),oe(n,T,(0,l.m6)().toString(),t);var i=function(e){for(var t=0;t<e.batches.length;t++){var n=e.batches[t].Msfpc();if(n)return encodeURIComponent(n)}return v}(e);if((0,c.Sn)(i)&&(n.url+="&ext.intweb.msfpc="+i),H.shouldAddClockSkewHeaders()&&oe(n,D,H.getClockSkewHeaderValue(),t),g.getWParam){var o=g.getWParam();o>=0&&(n.url+="&w="+o)}for(var s=0;s<$.length;s++)n.url+="&"+$[s].name+"="+$[s].value;return n}(t,y);y=y||b.useHdrs;var M=(0,c.hK)();(0,o.Lm)(g,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var f=0;f<t.batches.length;f++)for(var v=t.batches[f].events(),k=0;k<v.length;k++){var I=v[k];if(ne){var D=I.timings=I.timings||{};we(D,"sendEventStart",M),we(D,"serializationStart",n),we(D,"serializationCompleted",i)}I[Q]>0?I[Q]++:I[Q]=1}Pe(t.batches,1e3+(s||0),t.sendType,!0);var T={data:t.payloadBlob,urlString:b.url,headers:b.hdrs,_thePayload:t,_sendReason:s,timeout:w,disableXhrSync:O,disableFetchKeepAlive:R};y&&(ie(T.headers,C)||(T.headers[C]="no-cache, no-store"),ie(T.headers,_)||(T.headers[_]=S));var x=null;m&&(x=function(n){H.firstRequestSent();var i=function(n,i){!function(t,n,i,o){var s,a=9e3,u=null,h=!1,p=!1;try{var f=!0;if(typeof t!==W.jA){if(n){H.setClockSkew(n[E]);var g=n[P]||n["kill-duration-seconds"];(0,l.tO)(F.setKillSwitchTenants(n["kill-tokens"],g),(function(e){(0,l.tO)(i.batches,(function(t){if(t.iKey()===e){u=u||[];var n=t.split(0);i.numEvents-=n.count(),u.push(n)}}))}))}if(200==t||204==t)return void(a=200);((s=t)>=300&&s<500&&408!=s&&429!=s||501==s||505==s||i.numEvents<=0)&&(f=!1),a=9e3+t%1e3}if(f){a=100;var m=i.retryCnt;0===i.sendType&&(m<r?(h=!0,Ce((function(){0===i.sendType&&q--,be(i.batches,m+1,i.isTeardown,ae?2:i.sendType,5)}),ae,V(m))):(p=!0,ae&&(a=8001)))}}finally{h||(H.setClockSkew(),function(t,n,r,i){try{i&&d._backOffTransmission(),200===n&&(i||t.isSync||d._clearBackOff(),function(e){if(ne){var t=(0,c.hK)();(0,l.tO)(e,(function(e){e&&e.count()>0&&function(e,t){ne&&(0,l.tO)(e,(function(e){we(e.timings=e.timings||{},"sendEventCompleted",t)}))}(e.events(),t)}))}}(t.batches)),Pe(t.batches,n,t.sendType,!0)}finally{0===t.sendType&&(q--,5!==r&&e.sendQueuedRequests(t.sendType,r))}}(i,a,o,p)),Pe(u,8004,i.sendType)}}(n,i,t,s)},o=t.isTeardown||t.isSync;try{m.sendPOST(n,i,o),e.sendListener&&e.sendListener(T,n,o,t.isBeacon)}catch(e){(0,h.jV)(p,"Unexpected exception sending payload. Ex:"+(0,u.eU)(e)),de(i,0,{})}}),(0,o.Lm)(g,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(x)if(0===t.sendType&&q++,a&&!t.isBeacon&&3!==m._transport){var n={data:T.data,urlString:T.urlString,headers:(0,c.l7)({},T.headers),timeout:T.timeout,disableXhrSync:T.disableXhrSync,disableFetchKeepAlive:T.disableFetchKeepAlive},r=!1;(0,o.Lm)(g,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{e.sendHook(n,(function(e){r=!0,J||e._thePayload||(e._thePayload=e._thePayload||T._thePayload,e._sendReason=e._sendReason||T._sendReason),x(e)}),t.isSync||t.isTeardown)}catch(e){r||x(T)}}))}else x(T)}))}),(function(){return{thePayload:t,serializationStart:n,serializationCompleted:i,sendReason:s}}),t.isSync)}t.sizeExceed&&t.sizeExceed.length>0&&Pe(t.sizeExceed,8003,t.sendType),t.failedEvts&&t.failedEvts.length>0&&Pe(t.failedEvts,8002,t.sendType)}function Ce(e,t,n){t?e():a.set(e,n)}function _e(t){var n=e._responseHandlers;try{for(var r=0;r<n.length;r++)try{n[r](t)}catch(e){(0,h.kP)(p,1,519,"Response handler failed: "+e)}if(t){var i=JSON.parse(t);(0,c.Sn)(i.webResult)&&(0,c.Sn)(i.webResult[M])&&m.set("MSFPC",i.webResult[M],31536e3)}}catch(e){}}function Pe(e,t,n,r){if(e&&e.length>0&&s){var i=s[(l=t,u=Z[l],(0,c.Sn)(u)||(u="oth",l>=9e3&&l<=9999?u="rspFail":l>=8e3&&l<=8999?u=b:l>=1e3&&l<=1999&&(u="send")),u)];if(i){var a=0!==n;(0,o.Lm)(g,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){Ce((function(){try{i.call(s,e,t,a,n)}catch(e){(0,h.kP)(p,1,74,"send request notification failed: "+e)}}),r||a,0)}),(function(){return{batches:ye(e),reason:t,isSync:a,sendSync:r,sendType:n}}),!a)}}var l,u}e.initialize=function(e,t,n,r,o){var s;o||(o={}),j=e+j,ce=!!(0,l.o8)(o.avoidOptions)||!o.avoidOptions,g=t,m=t.getCookieMgr(),ne=!g.config.disableEventTimings;var a=!!g.config.enableCompoundKey;p=(d=n).diagLog();var c=o.valueSanitizer,v=o.stringifyObjects;(0,l.o8)(o.enableCompoundKey)||(a=!!o.enableCompoundKey),w=o.xhrTimeout,O=!!o.disableXhrSync,R=!!o.disableFetchKeepAlive,N=!1!==o.addNoResponse,B=!(0,u.b$)(),ee=new z(g,c,v,a),(0,l.le)(o.useSendBeacon)||(B=!!o.useSendBeacon);var y=r,b=o.alwaysUseXhrOverride?r:null,S=o.alwaysUseXhrOverride?r:null,C=[3,2];if(!r){J=!1;var _=(0,u.k$)();_&&_.protocol&&"file:"===_.protocol.toLowerCase()&&(i=!1);var P=[];(0,u.b$)()?(P=[2,1],C=[2,1,3]):P=[1,2,3],(r=K(P=se(P,o.transports),!1))||(0,h.jV)(p,"No available transport to send events"),y=K(P,!0)}b||(b=K(C=se(C,o.unloadTransports),!0)),A=!J&&(B&&(0,u.MF)()||!R&&(0,u.JO)(!0)),(s={})[0]=r,s[1]=y||K([1,2,3],!0),s[2]=b||y||K([1],!0),s[3]=S||K([2,3],!0)||y||K([1],!0),f=s},e._getDbgPlgTargets=function(){return[f[0],F,ee,f]},e.addQueryStringParameter=function(e,t){for(var n=0;n<$.length;n++)if($[n].name===e)return void($[n].value=t);$.push({name:e,value:t})},e.addHeader=function(e,t){G[e]=t},e.canSendRequest=function(){return ge()&&H.allowRequestSending()},e.sendQueuedRequests=function(e,t){(0,l.o8)(e)&&(e=0),ae&&(e=fe(e),t=2),ve(Y,e,0)&&be(me(),0,!1,e,t||0)},e.isCompletelyIdle=function(){return!L&&0===q&&0===Y.length},e.setUnloading=function(e){ae=e},e.addBatch=function(e){if(e&&e.count()>0){if(F.isTenantKilled(e.iKey()))return!1;Y.push(e)}return!0},e.teardown=function(){Y.length>0&&be(me(),0,!0,2,2)},e.pause=function(){L=!0},e.resume=function(){L=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,t,n){e&&e.count()>0&&((0,l.le)(t)&&(t=1),ae&&(t=fe(t),n=2),be([e],0,!1,t,n||0))}}))}return e.__ieDyn=1,e}();function ce(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout(e,t,n)}function le(e){clearTimeout(e)}function ue(e,t){return{set:e||ce,clear:t||le}}var de="eventsDiscarded",he="overrideInstrumentationKey",pe="maxEventRetryAttempts",fe="maxUnloadEventRetryAttempts";const ge=function(e){function t(){var n,r=e.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="3.2.9";var p,v,y,b,w,S,C,_=!1,P=[],E=null,k=!1,I=0,D=500,T=0,x=1e4,R={},M=f,j=null,F=null,K=0,U=0,W={},H=-1,B=!0,q=!1,J=6,$=2;return(0,i.Z)(t,r,(function(e,t){function r(e){"beforeunload"!==(e||(0,u.Jj)().event).type&&(q=!0,v.setUnloading(q)),te(2,2)}function i(e){q=!1,v.setUnloading(q)}function G(e,t){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext[A]&&delete e.ext[A],e.ext&&e.ext[N]&&e.ext[N].id&&delete e.ext[N].id,B&&(c.if,e.ext=(0,l.Ax)(e.ext),e.baseData&&(e.baseData=(0,l.Ax)(e.baseData)),e.data&&(e.data=(0,l.Ax)(e.data))),e.sync)if(K||k)e.latency=3,e.sync=!1;else if(v)return B&&(e=(0,l.Ax)(e)),void v.sendSynchronousBatch(L.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var n=e.latency,r=T,i=x;4===n&&(r=I,i=D);var o=!1;if(r<i)o=!ie(e,t);else{var s=1,a=20;4===n&&(s=4,a=1),o=!0,function(e,t,n,r){for(;n<=t;){var i=ne(e,t,!0);if(i&&i.count()>0){var o=i.split(0,r),s=o.count();if(s>0)return 4===n?I-=s:T-=s,be(de,[o],d.h.QueueFull),!0}n++}return oe(),!1}(e.iKey,e.latency,s,a)&&(o=!ie(e,t))}o&&ye(de,[e],d.h.QueueFull)}function z(e,t,n){var r=se(e,t,n);return v.sendQueuedRequests(t,n),r}function Y(){return T>0}function Q(){if(H>=0&&se(H,0,w)&&v.sendQueuedRequests(0,w),I>0&&!F&&!k){var e=R[M][2];e>=0&&(F=Z((function(){F=null,z(4,0,1),Q()}),e))}var t=R[M][1];!j&&!E&&t>=0&&!k&&(Y()?j=Z((function(){j=null,z(0===U?3:1,0,1),U++,U%=2,Q()}),t):U=0)}function X(){n=null,_=!1,P=[],E=null,k=!1,I=0,D=500,T=0,x=1e4,R={},M=f,j=null,F=null,K=0,U=0,p=null,W={},y=void 0,b=0,H=-1,w=null,B=!0,q=!1,J=6,$=2,S=null,C=ue(),v=new ae(500,2,1,{requeue:me,send:we,sent:Se,drop:Ce,rspFail:_e,oth:Pe},C),ge(),W[4]={batches:[],iKeyMap:{}},W[3]={batches:[],iKeyMap:{}},W[2]={batches:[],iKeyMap:{}},W[1]={batches:[],iKeyMap:{}},Ee()}function Z(e,t){0===t&&K&&(t=1);var n=1e3;return K&&(n=V(K-1)),C.set(e,t*n)}function ee(){return null!==j&&(C.clear(j),j=null,U=0,!0)}function te(e,t){ee(),E&&(C.clear(E),E=null),k||z(1,e,t)}function ne(e,t,n){var r=W[t];r||(r=W[t=1]);var i=r.iKeyMap[e];return!i&&n&&(i=L.create(e),r.batches.push(i),r.iKeyMap[e]=i),i}function re(t,n){v.canSendRequest()&&!K&&(y>0&&T>y&&(n=!0),n&&null==E&&e.flush(t,null,20))}function ie(e,t){B&&(e=(0,l.Ax)(e));var n=e.latency,r=ne(e.iKey,n,!0);return!!r.addEvent(e)&&(4!==n?(T++,t&&0===e.sendAttempt&&re(!e.sync,b>0&&r.count()>=b)):I++,!0)}function oe(){for(var e=0,t=0,n=function(n){var r=W[n];r&&r.batches&&(0,l.tO)(r.batches,(function(r){4===n?e+=r.count():t+=r.count()}))},r=1;r<=4;r++)n(r);T=t,I=e}function se(t,n,r){var i=!1,s=0===n;return!s||v.canSendRequest()?(0,o.Lm)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],n=4;n>=t;){var r=W[n];r&&r.batches&&r.batches.length>0&&((0,l.tO)(r.batches,(function(t){v.addBatch(t)?i=i||t&&t.count()>0:e=e.concat(t.events()),4===n?I-=t.count():T-=t.count()})),r.batches=[],r.iKeyMap={}),n--}e.length>0&&ye(de,e,d.h.KillSwitch),i&&H>=t&&(H=-1,w=0)}),(function(){return{latency:t,sendType:n,sendReason:r}}),!s):(H=H>=0?Math.min(H,t):t,w=Math.max(w,r)),i}function ce(e,t){z(1,0,t),oe(),le((function(){e&&e(),P.length>0?E=Z((function(){E=null,ce(P.shift(),t)}),0):(E=null,Q())}))}function le(e){v.isCompletelyIdle()?e():E=Z((function(){E=null,le(e)}),.25)}function ge(){(R={})[f]=[2,1,0],R[g]=[6,3,0],R[m]=[18,9,0]}function me(t,n){var r=[],i=J;q&&(i=$),(0,l.tO)(t,(function(t){t&&t.count()>0&&(0,l.tO)(t.events(),(function(t){t&&(t.sync&&(t.latency=4,t.sync=!1),t.sendAttempt<i?((0,c.if)(t,e.identifier),G(t,!1)):r.push(t))}))})),r.length>0&&ye(de,r,d.h.NonRetryableStatus),q&&te(2,2)}function ve(t,n){var r=e._notificationManager||{},i=r[t];if(i)try{i.apply(r,n)}catch(n){(0,h.kP)(e.diagLog(),1,74,t+" notification failed: "+n)}}function ye(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t.length>0&&ve(e,[t].concat(n))}function be(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t.length>0&&(0,l.tO)(t,(function(t){t&&t.count()>0&&ve(e,[t.events()].concat(n))}))}function we(e,t,n){e&&e.length>0&&ve("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function Se(e,t){be("eventsSent",e,t),Q()}function Ce(e,t){be(de,e,t>=8e3&&t<=8999?t-8e3:d.h.Unknown)}function _e(e){be(de,e,d.h.NonRetryableStatus),Q()}function Pe(e,t){be(de,e,d.h.Unknown),Q()}function Ee(){b=n&&n.disableAutoBatchFlushLimit?0:Math.max(1500,x/6)}X(),e._getDbgPlgTargets=function(){return[v]},e.initialize=function(u,d,h){(0,o.Lm)(d,(function(){return"PostChannel:initialize"}),(function(){var o=d;t.initialize(u,d,h);try{d.addUnloadCb,S=(0,s.jU)((0,a.J)(e.identifier),d.evtNamespace&&d.evtNamespace());var f=e._getTelCtx();u.extensionConfig[e.identifier]=u.extensionConfig[e.identifier]||{},n=f.getExtCfg(e.identifier),C=ue(n.setTimeoutOverride,n.clearTimeoutOverride),B=!n.disableOptimizeObj&&(0,c.mJ)(),function(e){var t=e.getWParam;e.getWParam=function(){var e=0;return n.ignoreMc1Ms0CookieProcessing&&(e|=2),e|t()}}(o),n.eventsLimitInMem>0&&(x=n.eventsLimitInMem),n.immediateEventLimit>0&&(D=n.immediateEventLimit),n.autoFlushEventsLimit>0&&(y=n.autoFlushEventsLimit),(0,l.hj)(n[pe])&&(J=n[pe]),(0,l.hj)(n[fe])&&($=n[fe]),Ee(),n.httpXHROverride&&n.httpXHROverride.sendPOST&&(p=n.httpXHROverride),(0,c.Sn)(u.anonCookieName)&&v.addQueryStringParameter("anoncknm",u.anonCookieName),v.sendHook=n.payloadPreprocessor,v.sendListener=n.payloadListener;var g=n.overrideEndpointUrl?n.overrideEndpointUrl:u.endpointUrl;e._notificationManager=d.getNotifyMgr(),v.initialize(g,e.core,e,p,n);var m=u.disablePageUnloadEvents||[];(0,s.c9)(r,m,S),(0,s.TJ)(r,m,S),(0,s.nD)(i,u.disablePageShowEvents,S)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{coreConfig:u,core:d,extensions:h}}))},e.processTelemetry=function(t,r){(0,c.if)(t,e.identifier);var i=(r=e._getTelCtx(r)).getExtCfg(e.identifier),o=!!n.disableTelemetry;i&&(o=o||!!i.disableTelemetry);var s=t;o||_||(n[he]&&(s.iKey=n[he]),i&&i[he]&&(s.iKey=i[he]),G(s,!0),q?te(2,2):Q()),e.processNext(s,r)},e._doTeardown=function(e,t){te(2,2),_=!0,v.teardown(),(0,s.JA)(null,S),(0,s.C9)(null,S),(0,s.Yl)(null,S),X()},e.setEventQueueLimits=function(e,t){x=e>0?e:1e4,y=t>0?t:0,Ee();var n=T>e;if(!n&&b>0)for(var r=1;!n&&r<=3;r++){var i=W[r];i&&i.batches&&(0,l.tO)(i.batches,(function(e){e&&e.count()>=b&&(n=!0)}))}re(!0,n)},e.pause=function(){ee(),k=!0,v.pause()},e.resume=function(){k=!1,v.resume(),Q()},e.addResponseHandler=function(e){v._responseHandlers.push(e)},e._loadTransmitProfiles=function(e){ee(),ge(),M=f,Q(),(0,l.rW)(e,(function(e,t){var n=t.length;if(n>=2){var r=n>2?t[2]:0;if(t.splice(0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}r>=0&&t[1]>=0&&r>t[1]&&(r=t[1]),t.push(r),R[e]=t}}))},e.flush=function(e,t,n){if(void 0===e&&(e=!0),!k)if(n=n||1,e)null==E?(ee(),se(1,0,n),E=Z((function(){E=null,ce(t,n)}),0)):P.push(t);else{var r=ee();z(1,1,n),null!=t&&t(),r&&Q()}},e.setMsaAuthTicket=function(e){v.addHeader(O,e)},e.hasEvents=Y,e._setTransmitProfile=function(e){M!==e&&void 0!==R[e]&&(ee(),M=e,Q())},e._backOffTransmission=function(){K<4&&(K++,ee(),Q())},e._clearBackOff=function(){K&&(K=0,ee(),Q())},(0,l.l_)(e,"_setTimeoutOverride",(function(){return C.set}),(function(e){C=ue(e,C.clear)})),(0,l.l_)(e,"_clearTimeoutOverride",(function(){return C.clear}),(function(e){C=ue(C.set,e)}))})),r}return(0,r.ne)(t,e),t.__ieDyn=1,t}(p.i)},50951:(e,t,n)=>{"use strict";n.d(t,{By:()=>i});var r=n(24869);function i(e){var t={};return(0,r.rW)(e,(function(e,n){t[e]=n,t[n]=e})),(0,r._A)(t)}},28452:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var r=(0,n(50951).By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},87951:(e,t,n)=>{"use strict";n.d(t,{i:()=>u});var r=n(29141),i=n(98145),o=n(24869),s=n(96335),a=n(31030),c=n(38593),l="getPlugin",u=function(){function e(){var t,n,u,d,h,p=this;function f(e){void 0===e&&(e=null);var t=e;if(!t){var r=n||(0,a.CD)(null,{},p[s.oV]);t=u&&u[l]?r[i.zV](null,u[l]):r[i.zV](null,u)}return t}function g(e,t,r){e&&(0,o.sO)(e,s.Zh,[],null,o.le),!r&&t&&(r=t[i.SD]()[i.W2]());var c=u;u&&u[l]&&(c=u[l]()),p[s.oV]=t,n=(0,a.CD)(r,e,t,c)}function m(){t=!1,p[s.oV]=null,n=null,u=null,h=[],d=(0,c.Y)()}m(),(0,r.Z)(e,p,(function(e){e[i.VL]=function(e,n,r,i){g(e,n,i),t=!0},e[i.fi]=function(t,n){var r,c=e[s.oV];if(c&&(!t||c===t[s.oV]())){var p,f=!1,g=t||(0,a.Bt)(null,c,u&&u[l]?u[l]():u),v=n||((r={reason:0})[i.d]=!1,r);return e[i.F3]&&!0===e[i.F3](g,v,y)?p=!0:y(),p}function y(){if(!f){f=!0,d.run(g,n);var e=h;h=[],(0,o.tO)(e,(function(e){e.rm()})),!0===p&&g[i.uL](v),m()}}},e[i.Tu]=function(t,n){var r=e[s.oV];if(r&&(!t||r===t[s.oV]())){var o,c=!1,d=t||(0,a.xy)(null,r,u&&u[l]?u[l]():u),h=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(d,h,p)?o=!0:p(),o}function p(){c||(c=!0,g(d.getCfg(),d.core(),d[i.W2]()))}},e._addHook=function(e){e&&((0,o.kJ)(e)?h=h.concat(e):h[i.MW](e))},(0,o.Oi)(e,"_addUnloadCb",(function(){return d}),"add")})),p[i.mc]=function(e){return f(e)[i.mc]()},p[i.yl]=function(){return t},p.setInitialized=function(e){t=e},p[i.Jd]=function(e){u=e},p[i.uL]=function(e,t){t?t[i.uL](e):u&&(0,o.mf)(u[s.hL])&&u[s.hL](e,null)},p._getTelCtx=f}return e.__ieDyn=1,e}()},88140:(e,t,n)=>{"use strict";n.d(t,{JP:()=>E,Nz:()=>k,UY:()=>M,kj:()=>C,p7:()=>I});var r=n(98145),i=n(29339),o=n(49251),s=n(24869),a=n(96335),c="toGMTString",l="toUTCString",u="cookie",d="expires",h="enabled",p="isCookieUseDisabled",f="disableCookiesUsage",g="_ckMgr",m=null,v=null,y=null,b=(0,o.Me)(),w={},S={};function C(e,t){var n=k[g]||S[g];return n||(n=k[g]=k(e,t),S[g]=n),n}function _(e){return!e||e.isEnabled()}function P(e,t){return!!(t&&e&&(0,s.kJ)(e.ignoreCookies))&&-1!==e.ignoreCookies[r.ou](t)}function E(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var i=t[r.Lk];n=i[g]?i[g]:k(t)}return n||(n=C(t,(e||{})[r.eZ])),n}function k(e,t){var n,i=function(e){var t=e[r.Lk]=e[r.Lk]||{};if((0,s.sO)(t,"domain",e.cookieDomain,s.BX,s.le),(0,s.sO)(t,"path",e.cookiePath||"/",null,s.le),(0,s.le)(t[h])){var n=void 0;(0,s.o8)(e[p])||(n=!e[p]),(0,s.o8)(e[f])||(n=!e[f]),t[h]=n}return t}(e||S),u=i.path||"/",m=i.domain,y=!1!==i[h],b=((n={isEnabled:function(){var e=y&&I(t),n=S[g];return e&&n&&b!==n&&(e=_(n)),e}})[r.$h]=function(e){y=!1!==e},n.set=function(e,t,n,h,p){var f=!1;if(_(b)&&!function(e,t){return!!(t&&e&&(0,s.kJ)(e.blockedCookies)&&-1!==e.blockedCookies[r.ou](t))||P(e,t)}(i,e)){var g={},y=(0,s.nd)(t||a.qS),w=y[r.ou](";");if(-1!==w&&(y=(0,s.nd)(t[r.zc](0,w)),g=D(t[r.zc](w+1))),(0,s.sO)(g,"domain",h||m,s.fQ,s.o8),!(0,s.le)(n)){var S=(0,o.w1)();if((0,s.o8)(g[d])){var C=(0,s.m6)()+1e3*n;if(C>0){var E=new Date;E.setTime(C),(0,s.sO)(g,d,T(E,S?c:l)||T(E,S?c:l)||a.qS,s.fQ)}}S||(0,s.sO)(g,"max-age",a.qS+n,null,s.o8)}var k=(0,o.k$)();k&&"https:"===k.protocol&&((0,s.sO)(g,"secure",null,null,s.o8),null===v&&(v=!M(((0,o.jW)()||{})[r.qV])),v&&(0,s.sO)(g,"SameSite","None",null,s.o8)),(0,s.sO)(g,"path",p||u,null,s.o8),(i.setCookie||R)(e,x(y,g)),f=!0}return f},n.get=function(e){var t=a.qS;return _(b)&&!P(i,e)&&(t=(i.getCookie||O)(e)),t},n.del=function(e,t){var n=!1;return _(b)&&(n=b.purge(e,t)),n},n.purge=function(e,n){var r,s=!1;if(I(t)){var c=((r={}).path=n||"/",r[d]="Thu, 01 Jan 1970 00:00:01 GMT",r);(0,o.w1)()||(c["max-age"]="0"),(i.delCookie||R)(e,x(a.qS,c)),s=!0}return s},n);return b[g]=b,b}function I(e){if(null===m){m=!1;try{m=void 0!==(b||{})[u]}catch(t){(0,i.kP)(e,2,68,"Cannot access document.cookie - "+(0,s.jj)(t),{exception:(0,o.eU)(t)})}}return m}function D(e){var t={};if(e&&e[r.R5]){var n=(0,s.nd)(e)[r.w6](";");(0,s.tO)(n,(function(e){if(e=(0,s.nd)(e||a.qS)){var n=e[r.ou]("=");-1===n?t[e]=null:t[(0,s.nd)(e[r.zc](0,n))]=(0,s.nd)(e[r.zc](n+1))}}))}return t}function T(e,t){return(0,s.mf)(e[t])?e[t]():null}function x(e,t){var n=e||a.qS;return(0,s.rW)(t,(function(e,t){n+="; "+e+((0,s.le)(t)?a.qS:"="+t)})),n}function O(e){var t=a.qS;if(b){var n=b[u]||a.qS;y!==n&&(w=D(n),y=n),t=(0,s.nd)(w[e]||a.qS)}return t}function R(e,t){b&&(b[u]=e+"="+t)}function M(e){return!(!(0,s.HD)(e)||!(0,s._Q)(e,"CPU iPhone OS 12")&&!(0,s._Q)(e,"iPad; CPU OS 12")&&!((0,s._Q)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,s._Q)(e,"Version/")&&(0,s._Q)(e,"Safari"))&&(!(0,s._Q)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,s.Id)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,s._Q)(e,"Chrome/5")&&!(0,s._Q)(e,"Chrome/6")&&(!(0,s._Q)(e,"UnrealEngine")||(0,s._Q)(e,"Chrome"))&&!(0,s._Q)(e,"UCBrowser/12")&&!(0,s._Q)(e,"UCBrowser/11"))}},28956:(e,t,n)=>{"use strict";n.d(t,{DO:()=>g,GW:()=>p,Jj:()=>f,zB:()=>v});var r,i=n(30175),o=n(98145),s=n(88140),a=n(49251),c=n(47954),l=n(24869),u=n(96335),d=n(19406),h=null;function p(){var e=g();return e[o.zc](0,8)+"-"+e[o.zc](8,12)+"-"+e[o.zc](12,16)+"-"+e[o.zc](16,20)+"-"+e[o.zc](20)}function f(){var e=(0,a.r)();return e&&e.now?e.now():(0,l.m6)()}function g(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=u.qS,r=0;r<4;r++)n+=t[15&(e=(0,d._l)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&(0,d._l)())|0];return n[o.Jn](0,8)+n[o.Jn](9,4)+"4"+n[o.Jn](13,3)+i+n[o.Jn](16,3)+n[o.Jn](19,12)}var m={_canUseCookies:void 0,isTypeof:l.Ym,isUndefined:l.o8,isNullOrUndefined:l.le,hasOwnProperty:l.nr,isFunction:l.mf,isObject:l.Kn,isDate:l.J_,isArray:l.kJ,isError:l.VZ,isString:l.HD,isNumber:l.hj,isBoolean:l.jn,toISOString:l.Y6,arrForEach:l.tO,arrIndexOf:l.UA,arrMap:l.Mr,arrReduce:l.Xz,strTrim:l.nd,objCreate:i.pu,objKeys:l.FY,objDefineAccessors:l.l_,addEventHandler:c.Ib,dateNow:l.m6,isIE:a.w1,disableCookies:function(){var e,t,n,i;(n=(0,s.kj)(e,t),i=m._canUseCookies,null===h&&(h=[],r=i,(0,l.l_)(m,"_canUseCookies",(function(){return r}),(function(e){r=e,(0,l.tO)(h,(function(t){t[o.$h](e)}))}))),-1===(0,l.UA)(h,n)&&h[o.MW](n),(0,l.jn)(i)&&n[o.$h](i),(0,l.jn)(r)&&n[o.$h](r),n)[o.$h](!1)},newGuid:p,perfNow:f,newId:d.pZ,randomValue:d.az,random32:d._l,mwcRandomSeed:d.CN,mwcRandom32:d.F6,generateW3CId:g},v={Attach:c.pZ,AttachEvent:c.pZ,Detach:c.pD,DetachEvent:c.pD}},87624:(e,t,n)=>{"use strict";n.d(t,{J:()=>p,K:()=>f});var r=n(1550),i=n(98145),o=n(24869),s=n(96335),a=n(19406),c=r.RJ,l="2.8.10",u="."+(0,a.pZ)(6),d=0;function h(e){return 1===e[i.xv]||9===e[i.xv]||!+e[i.xv]}function p(e,t){return void 0===t&&(t=!1),(0,o.Gf)(e+d+++(t?"."+l:s.qS)+u)}function f(e){var t={id:p("_aiData-"+(e||s.qS)+"."+l),accept:function(e){return h(e)},get:function(e,n,r,i){var s=e[t.id];return s?s[(0,o.Gf)(n)]:(i&&((s=function(e,t){var n=t[e.id];if(!n){n={};try{h(t)&&(function(e,t,n){if(c)try{return c(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(e){}}return n}(t,e))[(0,o.Gf)(n)]=r),r)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},28341:(e,t,n)=>{"use strict";n.d(t,{j:()=>l,p:()=>u});var r,i=n(98145),o=n(49251),s=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],a=null;function c(e,t){return function(){var n=arguments,r=l(t);if(r){var o=r.listener;o&&o[e]&&o[e][i.ZV](o,n)}}}function l(e){var t,n=a;return n||!0===e.disableDbgExt||(n=a||((t=(0,o.a8)("Microsoft"))&&(a=t.ApplicationInsights),a)),n?n.ChromeDbgExt:null}function u(e){if(!r){r={};for(var t=0;t<s[i.R5];t++)r[s[t]]=c(s[t],e)}return r}},29339:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>p,L4:()=>v,jV:()=>m,kP:()=>g,lQ:()=>d,vH:()=>h});var r=n(29141),i=n(98145),o=n(28341),s=n(49251),a=n(24869),c=n(96335);function l(e){return e?'"'+e[i.i7](/\"/g,c.qS)+'"':c.qS}function u(e,t){var n=(0,s.dr)();if(n){var r="log";n[e]&&(r=e),(0,a.mf)(n[r])&&n[r](t)}}var d=function(){function e(e,t,n,r){void 0===n&&(n=!1);var o=this;o[i.Gc]=e,o[i.gU]=(n?"AI: ":"AI (Internal): ")+e;var a=c.qS;(0,s.nS)()&&(a=(0,s.xA)().stringify(r));var u=(t?" message:"+l(t):c.qS)+(r?" props:"+l(a):c.qS);o[i.gU]+=u}return e.dataType="MessageData",e}();function h(e,t){return(e||{})[i.eZ]||new p(t)}var p=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,l,h,p,f=0,g={};(0,r.Z)(e,this,(function(e){function r(t,n){if(!(f>=h)){var r=!0,o="AITR_"+n[i.Gc];if(g[o]?r=!1:g[o]=!0,r&&(t<=l&&(e.queue[i.MW](n),f++,m(1===t?"error":"warn",n)),f===h)){var s="Internal events throttle limit per PageView reached for this app.",a=new d(23,s,!1);e.queue[i.MW](a),1===t?e[c.ys](s):e[c.cL](s)}}}function m(e,n){var r=(0,o.j)(t||{});r&&r[i.mc]&&r[i.mc](e,n)}!function(e){n=(0,a.v4)(e.loggingLevelConsole,0),l=(0,a.v4)(e.loggingLevelTelemetry,1),h=(0,a.v4)(e.maxMessageLimit,25),p=(0,a.v4)(e[i.Fr],!1)}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return l},e.maxInternalMessageLimit=function(){return h},e[i.Fr]=function(){return p},e.throwInternal=function(t,o,l,u,h){void 0===h&&(h=!1);var f=new d(o,l,h,u);if(p)throw(0,s.eU)(f);var v=1===t?c.ys:c.cL;if((0,a.o8)(f[i.gU]))m("throw"+(1===t?"Critical":"Warning"),f);else{if(h){var y=+f[i.Gc];!g[y]&&n>=t&&(e[v](f[i.gU]),g[y]=!0)}else n>=t&&e[v](f[i.gU]);r(t,f)}},e[c.cL]=function(e){u("warn",e),m("warning",e)},e[c.ys]=function(e){u("error",e),m("error",e)},e.resetInternalMessageCount=function(){f=0,g={}},e[i.jk]=r}))}return e.__ieDyn=1,e}();function f(e){return e||new p}function g(e,t,n,r,i,o){void 0===o&&(o=!1),f(e).throwInternal(t,n,r,i,o)}function m(e,t){f(e)[c.cL](t)}function v(e,t,n){f(e)[i.jk](t,n)}},49251:(e,t,n)=>{"use strict";n.d(t,{JO:()=>Q,Jj:()=>R,MF:()=>Y,MX:()=>B,Me:()=>A,Nv:()=>M,Ym:()=>O,Z3:()=>Z,a8:()=>x,b$:()=>J,cp:()=>X,d6:()=>N,dI:()=>T,dr:()=>U,eU:()=>z,ed:()=>te,fE:()=>F,gz:()=>q,jW:()=>j,k$:()=>K,nS:()=>V,pI:()=>ne,r:()=>W,s1:()=>L,sA:()=>G,w1:()=>$,xA:()=>H});var r=n(1550),i=n(30175),o=n(98145),s=n(24869),a=n(96335),c="window",l="document",u="documentMode",d="navigator",h="history",p="location",f="console",g="performance",m="JSON",v="crypto",y="msCrypto",b="ReactNative",w="msie",S="trident/",C="XMLHttpRequest",_=null,P=null,E=!1,k=null,I=null;function D(e,t){var n=!1;if(e){try{if(!(n=t in e)){var i=e[r.hB];i&&(n=t in i)}}catch(e){}if(!n)try{var o=new e;n=!(0,s.o8)(o[t])}catch(e){}}return n}function T(e){E=e}function x(e){var t=(0,i.Rd)();return t&&t[e]?t[e]:e===c&&O()?window:null}function O(){return Boolean(typeof window===r.fK&&window)}function R(){return O()?window:x(c)}function M(){return Boolean(typeof document===r.fK&&document)}function A(){return M()?document:x(l)}function N(){return Boolean(typeof navigator===r.fK&&navigator)}function j(){return N()?navigator:x(d)}function F(){return Boolean(typeof history===r.fK&&history)}function L(){return F()?history:x(h)}function K(e){if(e&&E){var t=x("__mockLocation");if(t)return t}return typeof location===r.fK&&location?location:x(p)}function U(){return typeof console!==r.jA?console:x(f)}function W(){return x(g)}function V(){return Boolean(typeof JSON===r.fK&&JSON||null!==x(m))}function H(){return V()?JSON||x(m):null}function B(){return x(v)}function q(){return x(y)}function J(){var e=j();return!(!e||!e.product)&&e.product===b}function $(){var e=j();if(e&&(e[o.qV]!==P||null===_)){var t=((P=e[o.qV])||a.qS)[o.T1]();_=(0,s._Q)(t,w)||(0,s._Q)(t,S)}return _}function G(e){if(void 0===e&&(e=null),!e){var t=j()||{};e=t?(t[o.qV]||a.qS)[o.T1]():a.qS}var n=(e||a.qS)[o.T1]();if((0,s._Q)(n,w)){var r=A()||{};return Math.max(parseInt(n[o.w6](w)[1]),r[u]||0)}if((0,s._Q)(n,S)){var i=parseInt(n[o.w6](S)[1]);if(i)return i+4}return null}function z(e){var t=Object[r.hB].toString[o._S](e),n=a.qS;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[o.I]+"'":V()&&(n=H().stringify(e)),t+n}function Y(){return null===I&&(I=N()&&Boolean(j().sendBeacon)),I}function Q(e){var t=!1;try{t=!!x("fetch");var n=x("Request");t&&e&&n&&(t=D(n,"keepalive"))}catch(e){}return t}function X(){return null===k&&(k=typeof XDomainRequest!==r.jA)&&Z()&&(k=k&&!D(x(C),"withCredentials")),k}function Z(){var e=!1;try{e=!!x(C)}catch(e){}return e}function ee(e,t){if(e)for(var n=0;n<e[o.R5];n++){var r=e[n];if(r[o.I]&&r[o.I]===t)return r}return{}}function te(e){var t=A();return t&&e?ee(t.querySelectorAll("meta"),e).content:null}function ne(e){var t,n=W();if(n){var r=n.getEntriesByType("navigation")||[];t=ee((r[o.R5]>0?r[0]:{}).serverTiming,e).description}return t}},47954:(e,t,n)=>{"use strict";n.d(t,{C1:()=>L,C9:()=>q,Ib:()=>F,JA:()=>H,QY:()=>A,TJ:()=>B,XO:()=>M,Yl:()=>$,c9:()=>V,jU:()=>R,nD:()=>J,nJ:()=>W,pD:()=>j,pZ:()=>N,um:()=>D,yw:()=>U});var r=n(98145),i=n(87624),o=n(49251),s=n(24869),a=n(96335),c="on",l="attachEvent",u="addEventListener",d="detachEvent",h="removeEventListener",p="events",f="visibilitychange",g="pagehide",m="pageshow",v="unload",y="beforeunload",b=(0,i.J)("aiEvtPageHide"),w=(0,i.J)("aiEvtPageShow"),S=/\.[\.]+/g,C=/[\.]+$/,_=1,P=(0,i.K)("events"),E=/^([^.]*)(?:\.(.+)|)/;function k(e){return e&&e[r.i7]?e[r.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,a.qS):e}function I(e,t){var n;if(t){var i=a.qS;(0,s.kJ)(t)?(i=a.qS,(0,s.tO)(t,(function(e){(e=k(e))&&("."!==e[0]&&(e="."+e),i+=e)}))):i=k(t),i&&("."!==i[0]&&(i="."+i),e=(e||a.qS)+i)}var o=E.exec(e||a.qS)||[];return(n={})[r.P6]=o[1],n.ns=(o[2]||a.qS).replace(S,".").replace(C,a.qS)[r.w6](".").sort().join("."),n}function D(e,t,n){var i=[],o=P.get(e,p,{},!1),c=I(t,n);return(0,s.rW)(o,(function(e,t){(0,s.tO)(t,(function(e){var t;c[r.P6]&&c[r.P6]!==e.evtName[r.P6]||c.ns&&c.ns!=c.ns||i[r.MW](((t={})[r.I]=e.evtName[r.P6]+(e.evtName.ns?"."+e.evtName.ns:a.qS),t.handler=e[r.Kn],t))}))})),i}function T(e,t,n){void 0===n&&(n=!0);var r=P.get(e,p,{},n),i=r[t];return i||(i=r[t]=[]),i}function x(e,t,n,i){e&&t&&t[r.P6]&&(e[h]?e[h](t[r.P6],n,i):e[d]&&e[d](c+t[r.P6],n))}function O(e,t,n,i){for(var o=t[r.R5];o--;){var s=t[o];s&&(n.ns&&n.ns!==s.evtName.ns||i&&!i(s)||(x(e,s.evtName,s[r.Kn],s.capture),t[r.cb](o,1)))}}function R(e,t){return t?I("xx",(0,s.kJ)(t)?[e].concat(t):[e,t]).ns[r.w6]("."):e}function M(e,t,n,i,o){var s;void 0===o&&(o=!1);var a=!1;if(e)try{var d=I(t,i);if(a=function(e,t,n,i){var o=!1;return e&&t&&t[r.P6]&&n&&(e[u]?(e[u](t[r.P6],n,i),o=!0):e[l]&&(e[l](c+t[r.P6],n),o=!0)),o}(e,d,n,o),a&&P.accept(e)){var h=((s={guid:_++,evtName:d})[r.Kn]=n,s.capture=o,s);T(e,d.type)[r.MW](h)}}catch(e){}return a}function A(e,t,n,i,o){if(void 0===o&&(o=!1),e)try{var a=I(t,i),c=!1;!function(e,t,n){if(t[r.P6])O(e,T(e,t[r.P6]),t,n);else{var i=P.get(e,p,{});(0,s.rW)(i,(function(r,i){O(e,i,t,n)})),0===(0,s.FY)(i)[r.R5]&&P.kill(e,p)}}(e,a,(function(e){return!((!a.ns||n)&&e[r.Kn]!==n||(c=!0,0))})),c||x(e,a,n,o)}catch(e){}}function N(e,t,n,r){return void 0===r&&(r=!1),M(e,t,n,null,r)}function j(e,t,n,r){void 0===r&&(r=!1),A(e,t,n,null,r)}function F(e,t,n){var r=!1,i=(0,o.Jj)();i&&(r=M(i,e,t,n),r=M(i.body,e,t,n)||r);var s=(0,o.Me)();return s&&(r=M(s,e,t,n)||r),r}function L(e,t,n){var r=(0,o.Jj)();r&&(A(r,e,t,n),A(r.body,e,t,n));var i=(0,o.Me)();i&&A(i,e,t,n)}function K(e,t,n,i){var o=!1;return t&&e&&e[r.R5]>0&&(0,s.tO)(e,(function(e){e&&(n&&-1!==(0,s.UA)(n,e)||(o=F(e,t,i)||o))})),o}function U(e,t,n,i){var o=!1;return t&&e&&(0,s.kJ)(e)&&!(o=K(e,t,n,i))&&n&&n[r.R5]>0&&(o=K(e,t,null,i)),o}function W(e,t,n){e&&(0,s.kJ)(e)&&(0,s.tO)(e,(function(e){e&&L(e,t,n)}))}function V(e,t,n){return U([y,v,g],e,t,n)}function H(e,t){W([y,v,g],e,t)}function B(e,t,n){var r=R(b,n),i=K([g],e,t,r);return t&&-1!==(0,s.UA)(t,f)||(i=K([f],(function(t){var n=(0,o.Me)();e&&n&&"hidden"===n.visibilityState&&e(t)}),t,r)||i),!i&&t&&(i=B(e,null,n)),i}function q(e,t){var n=R(b,t);W([g],e,n),W([f],null,n)}function J(e,t,n){var r=R(w,n),i=K([m],e,t,r);return!(i=K([f],(function(t){var n=(0,o.Me)();e&&n&&"visible"===n.visibilityState&&e(t)}),t,r)||i)&&t&&(i=J(e,null,n)),i}function $(e,t){var n=R(w,t);W([m],e,n),W([f],null,n)}},24869:(e,t,n)=>{"use strict";n.d(t,{Ax:()=>Ee,BX:()=>F,F:()=>ye,FL:()=>de,FY:()=>ae,Gf:()=>W,HD:()=>z,Id:()=>H,J_:()=>J,Kn:()=>K,Mr:()=>ne,Oi:()=>_e,UA:()=>te,VZ:()=>G,Vb:()=>Pe,Xi:()=>he,Xz:()=>re,Y6:()=>Z,Ym:()=>A,_A:()=>ue,_Q:()=>q,_y:()=>we,cf:()=>Ce,fQ:()=>be,hj:()=>Y,jj:()=>fe,jn:()=>Q,kJ:()=>$,l_:()=>ce,le:()=>j,m6:()=>pe,mf:()=>U,mm:()=>ke,nd:()=>ie,nr:()=>L,o8:()=>N,qK:()=>me,rW:()=>V,sO:()=>ge,tO:()=>ee,v4:()=>ve,xe:()=>B});var r=n(1550),i=n(30175),o=n(98145),s=n(96335),a="toISOString",c="endsWith",l="startsWith",u="indexOf",d="map",h="reduce",p="trim",f="toString",g="__proto__",m="constructor",v=r.RJ,y=r.Pw.freeze,b=r.Pw.seal,w=r.Pw.keys,S=String[r.hB],C=S[p],_=S[c],P=S[l],E=Date[r.hB][a],k=Array.isArray,I=r.V4[f],D=r.CY[f],T=D[o._S](r.Pw),x=/-([a-z])/g,O=/([^\w\d_$])/g,R=/^(\d+[\w\d_$])/,M=Object.getPrototypeOf;function A(e,t){return typeof e===t}function N(e){return void 0===e||typeof e===r.jA}function j(e){return null===e||N(e)}function F(e){return!j(e)}function L(e,t){return!(!e||!r.CY[o._S](e,t))}function K(e){return!(!e||typeof e!==r.fK)}function U(e){return!(!e||typeof e!==r.cb)}function W(e){var t=e;return t&&z(t)&&(t=(t=(t=t[o.i7](x,(function(e,t){return t.toUpperCase()})))[o.i7](O,"_"))[o.i7](R,(function(e,t){return"_"+t}))),t}function V(e,t){if(e)for(var n in e)r.CY[o._S](e,n)&&t[o._S](e,n,e[n])}function H(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=_?e[c](t):function(e,t){var n=!1,r=t?t[o.R5]:0,i=e?e[o.R5]:0;if(r&&i&&i>=r&&!(n=e===t)){for(var s=i-1,a=r-1;a>=0;a--){if(e[s]!=t[a])return!1;s--}n=!0}return n}(e,t)),n}function B(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=P?e[l](t):function(e,t){var n=!1,r=t?t[o.R5]:0;if(e&&r&&e[o.R5]>=r&&!(n=e===t)){for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;n=!0}return n}(e,t)),n}function q(e,t){return!(!e||!t)&&-1!==e[o.ou](t)}function J(e){return!(!e||"[object Date]"!==I[o._S](e))}var $=k||function(e){return!(!e||"[object Array]"!==I[o._S](e))};function G(e){return!(!e||"[object Error]"!==I[o._S](e))}function z(e){return"string"==typeof e}function Y(e){return"number"==typeof e}function Q(e){return"boolean"==typeof e}function X(e){var t=!1;if(e&&"object"==typeof e){var n=M?M(e):function(e){if(e){if(M)return M(e);var t=e[g]||e[r.hB]||e[m];if(t)return t}return null}(e);n?(n[m]&&r.CY[o._S](n,m)&&(n=n[m]),t=typeof n===r.cb&&D[o._S](n)===T):t=!0}return t}function Z(e){if(e)return E?e[a]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[o.R5]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function ee(e,t,n){var r=e[o.R5];try{for(var i=0;i<r&&(!(i in e)||-1!==t[o._S](n||e,e[i],i,e));i++);}catch(e){}}function te(e,t,n){if(e){if(e[u])return e[u](t,n);var r=e[o.R5],i=n||0;try{for(var s=Math.max(i>=0?i:r-Math.abs(i),0);s<r;s++)if(s in e&&e[s]===t)return s}catch(e){}}return-1}function ne(e,t,n){var r;if(e){if(e[d])return e[d](t,n);var i=e[o.R5],s=n||e;r=new Array(i);try{for(var a=0;a<i;a++)a in e&&(r[a]=t[o._S](s,e[a],e))}catch(e){}}return r}function re(e,t,n){var r;if(e){if(e[h])return e[h](t,n);var i=e[o.R5],s=0;if(arguments[o.R5]>=3)r=arguments[2];else{for(;s<i&&!(s in e);)s++;r=e[s++]}for(;s<i;)s in e&&(r=t(r,e[s],s,e)),s++}return r}function ie(e){return e&&(e=C&&e[p]?e[p]():e[o.i7]?e[o.i7](/^\s+|(?=\s)\s+$/g,s.qS):e),e}var oe=!{toString:null}.propertyIsEnumerable("toString"),se=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ae(e){var t=typeof e;if(t===r.cb||t===r.fK&&null!==e||(0,i.ZU)("objKeys called on non-object"),!oe&&w)return w(e);var n=[];for(var s in e)e&&r.CY[o._S](e,s)&&n[o.MW](s);if(oe)for(var a=se[o.R5],c=0;c<a;c++)e&&r.CY[o._S](e,se[c])&&n[o.MW](se[c]);return n}function ce(e,t,n,r){if(v)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),v(e,t,i),!0}catch(e){}return!1}function le(e){return e}function ue(e){return y&&V(e,(function(e,t){($(t)||K(t))&&y(t)})),de(e)}var de=y||le,he=b||le;function pe(){var e=Date;return e.now?e.now():(new e).getTime()}function fe(e){return G(e)?e[o.I]:s.qS}function ge(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(o=n,e[t]=o)),o}function me(e,t,n){var r;return e?!(r=e[t])&&j(r)&&(r=N(n)?{}:n,e[t]=r):r=N(n)?{}:n,r}function ve(e,t){return j(e)?t:e}function ye(e){return!e}function be(e){return!!e}function we(e){throw new Error(e)}function Se(e,t){var n=null,r=null;return U(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t][o.ZV](r,e)}}function Ce(e,t,n){if(e&&t&&K(e)&&K(t)){var r=function(r){if(z(r)){var i=t[r];U(i)?n&&!n(r,!0,t,e)||(e[r]=Se(t,r)):n&&!n(r,!1,t,e)||(L(e,r)&&delete e[r],ce(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i))}};for(var i in t)r(i)}return e}function _e(e,t,n,r,i){e&&t&&n&&(!1!==i||N(e[t]))&&(e[t]=Se(n,r))}function Pe(e,t,n,r){return e&&t&&K(e)&&$(n)&&ee(n,(function(n){z(n)&&_e(e,n,t,n,r)})),e}function Ee(e){return e&&r.rl&&(e=(0,r.Pw)((0,r.rl)({},e))),e}function ke(e,t,n,i,s,a){var c=arguments,l=c[0]||{},u=c[o.R5],d=!1,h=1;for(u>0&&Q(l)&&(d=l,l=c[h]||{},h++),K(l)||(l={});h<u;h++){var p=c[h],f=$(p),g=K(p);for(var m in p)if(f&&m in p||g&&r.CY[o._S](p,m)){var v=p[m],y=void 0;if(d&&v&&((y=$(v))||X(v))){var b=l[m];y?$(b)||(b=[]):X(b)||(b={}),v=ke(d,b,v)}void 0!==v&&(l[m]=v)}}return l}},96335:(e,t,n)=>{"use strict";n.d(t,{$F:()=>p,C$:()=>g,DN:()=>s,Z:()=>i,Zh:()=>c,cL:()=>v,f_:()=>f,hL:()=>u,js:()=>l,kl:()=>y,mE:()=>a,oV:()=>o,qS:()=>r,uC:()=>h,yi:()=>d,ys:()=>m});var r="",i="channels",o="core",s="createPerfMgr",a="disabled",c="extensionConfig",l="extensions",u="processTelemetry",d="priority",h="eventsSent",p="eventsDiscarded",f="eventsSendRequest",g="perfEvent",m="errorToConsole",v="warnToConsole",y="getPerfMgr"},81782:(e,t,n)=>{"use strict";n.d(t,{Jk:()=>h,Lm:()=>f,j5:()=>g,zn:()=>d});var r=n(29141),i=n(98145),o=n(24869),s=n(96335),a="ctx",c="ParentContextKey",l="ChildrenContextKey",u=null,d=function(){function e(t,n,r){var s,u=this,d=!1;u.start=(0,o.m6)(),u[i.I]=t,u[i.d]=r,u[i.PL]=function(){return!1},(0,o.mf)(n)&&(d=(0,o.l_)(u,"payload",(function(){return!s&&(0,o.mf)(n)&&(s=n(),n=null),s}))),u[i.T]=function(t){return t?t===e[c]||t===e[l]?u[t]:(u[a]||{})[t]:null},u[i.wu]=function(t,n){t&&(t===e[c]?(u[t]||(u[i.PL]=function(){return!0}),u[t]=n):t===e[l]?u[t]=n:(u[a]=u[a]||{})[t]=n)},u[i.Km]=function(){var t=0,r=u[i.T](e[l]);if((0,o.kJ)(r))for(var s=0;s<r[i.R5];s++){var a=r[s];a&&(t+=a[i.Z_])}u[i.Z_]=(0,o.m6)()-u.start,u.exTime=u[i.Z_]-t,u[i.Km]=function(){},!d&&(0,o.mf)(n)&&(u.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),h=function(){function e(t){this.ctx={},(0,r.Z)(e,this,(function(e){e.create=function(e,t,n){return new d(e,t,n)},e.fire=function(e){e&&(e[i.Km](),t&&(0,o.mf)(t[s.C$])&&t[s.C$](e))},e[i.wu]=function(t,n){t&&((e[a]=e[a]||{})[t]=n)},e[i.T]=function(t){return(e[a]||{})[t]}}))}return e.__ieDyn=1,e}(),p="CoreUtils.doPerf";function f(e,t,n,r,o){if(e){var a=e;if(a[s.kl]&&(a=a[s.kl]()),a){var u=void 0,h=a[i.T](p);try{if(u=a.create(t(),r,o)){if(h&&u[i.wu]&&(u[i.wu](d[c],h),h[i.T]&&h[i.wu])){var f=h[i.T](d[l]);f||(f=[],h[i.wu](d[l],f)),f[i.MW](u)}return a[i.wu](p,u),n(u)}}catch(e){u&&u[i.wu]&&u[i.wu]("exception",e)}finally{u&&a.fire(u),a[i.wu](p,h)}}}return n()}function g(){return u}},31030:(e,t,n)=>{"use strict";n.d(t,{Bt:()=>m,CD:()=>g,Vi:()=>b,jV:()=>y,xy:()=>v});var r=n(98145),i=n(29339),o=n(49251),s=n(24869),a=n(96335),c=n(81782),l=n(69031),u="TelemetryPluginChain",d="_hasRun",h="_getTelCtx",p=0;function f(e,t,n,c){var l=null,u=[];null!==c&&(l=c?function(e,t,n){for(;e;){if(e[r.TO]()===n)return e;e=e[r.W2]()}return y([n],t[r.TC]||{},t)}(e,n,c):e);var d={_next:function(){var e=l;if(l=e?e[r.W2]():null,!e){var t=u;t&&t[r.R5]>0&&((0,s.tO)(t,(function(e){try{e.func[r._S](e.self,e.args)}catch(e){(0,i.kP)(n[r.eZ],2,73,"Unexpected Exception during onComplete - "+(0,o.eU)(e))}})),u=[])}return e},ctx:{core:function(){return n},diagLog:function(){return(0,i.vH)(n,t)},getCfg:function(){return t},getExtCfg:h,getConfig:function(e,n,r){void 0===r&&(r=!1);var i,o=h(e,null);return o&&!(0,s.le)(o[n])?i=o[n]:t&&!(0,s.le)(t[n])&&(i=t[n]),(0,s.le)(i)?r:i},hasNext:function(){return!!l},getNext:function(){return l},setNext:function(e){l=e},iterate:function(e){for(var t;t=d._next();){var n=t[r.TO]();n&&e(n)}},onComplete:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e&&u[r.MW]({func:e,self:(0,s.o8)(t)?d.ctx:t,args:n})}}};function h(e,n,r){var i;if(void 0===n&&(n={}),void 0===r&&(r=0),t){var o=t[a.Zh];o&&e&&(i=o[e])}if(i){if((0,s.Kn)(n)&&0!==r){var c=(0,s.mm)(!0,n,i);t&&2===r&&(0,s.rW)(n,(function(e){if((0,s.le)(c[e])){var n=t[e];(0,s.le)(n)||(c[e]=n)}})),i=c}}else i=n;return i}return d}function g(e,t,n,i){var o=f(e,t,n,i),c=o.ctx;return c[r.uL]=function(e){var t=o._next();return t&&t[a.hL](e,c),!t},c[r.zV]=function(e,i){return void 0===e&&(e=null),(0,s.kJ)(e)&&(e=y(e,t,n,i)),g(e||c[r.W2](),t,n,i)},c}function m(e,t,n){var i=t[r.TC]||{},o=f(e,i,t,n),a=o.ctx;return a[r.uL]=function(e){var t=o._next();return t&&t.unload(a,e),!t},a[r.zV]=function(e,n){return void 0===e&&(e=null),(0,s.kJ)(e)&&(e=y(e,i,t,n)),m(e||a[r.W2](),t,n)},a}function v(e,t,n){var i=t[r.TC]||{},o=f(e,i,t,n).ctx;return o[r.uL]=function(e){return o.iterate((function(t){(0,s.mf)(t[r.Tu])&&t[r.Tu](o,e)}))},o[r.zV]=function(e,n){return void 0===e&&(e=null),(0,s.kJ)(e)&&(e=y(e,i,t,n)),v(e||o[r.W2](),t,n)},o}function y(e,t,n,f){var m=null,v=!f;if((0,s.kJ)(e)&&e[r.R5]>0){var b=null;(0,s.tO)(e,(function(e){if(v||f!==e||(v=!0),v&&e&&(0,s.mf)(e[a.hL])){var y=function(e,t,n){var f,m=null,v=(0,s.mf)(e[a.hL]),y=(0,s.mf)(e[r.Jd]),b={getPlugin:function(){return e},getNext:function(){return m},processTelemetry:function(i,o){w(o=o||function(){var r;return e&&(0,s.mf)(e[h])&&(r=e[h]()),r||(r=g(b,t,n)),r}(),(function(t){if(!e||!v)return!1;var n=(0,l.OY)(e);return!n[r.fi]&&!n[a.mE]&&(y&&e[r.Jd](m),e[a.hL](i,t),!0)}),"processTelemetry",(function(){return{item:i}}),!i.sync)||o[r.uL](i)},unload:function(t,n){w(t,(function(){var i=!1;if(e){var o=(0,l.OY)(e),s=e[a.oV]||o[a.oV];!e||s&&s!==t.core()||o[r.fi]||(o[a.oV]=null,o[r.fi]=!0,o[r.yl]=!1,e[r.fi]&&!0===e[r.fi](t,n)&&(i=!0))}return i}),"unload",(function(){}),n[r.d])||t[r.uL](n)},update:function(t,n){w(t,(function(){var i=!1;if(e){var o=(0,l.OY)(e),s=e[a.oV]||o[a.oV];!e||s&&s!==t.core()||o[r.fi]||e[r.Tu]&&!0===e[r.Tu](t,n)&&(i=!0)}return i}),"update",(function(){}),!1)||t[r.uL](n)},_id:f=e?e[r.pZ]+"-"+e[a.yi]+"-"+p++:"Unknown-0-"+p++,_setNext:function(e){m=e}};function w(t,n,s,l,h){var p=!1,g=e?e[r.pZ]:u,v=t[d];return v||(v=t[d]={}),t.setNext(m),e&&(0,c.Lm)(t[a.oV](),(function(){return g+":"+s}),(function(){v[f]=!0;try{var e=m?m._id:a.qS;e&&(v[e]=!1),p=n(t)}catch(e){var c=!m||v[m._id];c&&(p=!0),m&&c||(0,i.kP)(t[r.mc](),1,73,"Plugin ["+g+"] failed during "+s+" - "+(0,o.eU)(e)+", run flags: "+(0,o.eU)(v))}}),l,h),p}return(0,s.FL)(b)}(e,t,n);m||(m=y),b&&b._setNext(y),b=y}}))}return f&&!m?y([f],t,n):m}var b=function(e,t,n,r){var i=g(e,t,n,r);(0,s.Vb)(this,i,(0,s.FY)(i))}},19406:(e,t,n)=>{"use strict";n.d(t,{CN:()=>m,F6:()=>v,_l:()=>g,az:()=>f,pZ:()=>y});var r=n(98145),i=n(49251),o=n(24869),s=n(96335),a=4294967296,c=4294967295,l=!1,u=123456789,d=987654321;function h(e){e<0&&(e>>>=0),u=123456789+e&c,d=987654321-e&c,l=!0}function p(){try{var e=2147483647&(0,o.m6)();h((Math.random()*a^e)+e)}catch(e){}}function f(e){return e>0?Math.floor(g()/c*(e+1))>>>0:0}function g(e){var t=0,n=(0,i.MX)()||(0,i.gz)();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,i.w1)()&&(l||p(),t=v()&c),0===t&&(t=Math.floor(a*Math.random()|0)),e||(t>>>=0),t}function m(e){e?h(e):p()}function v(e){var t=((d=36969*(65535&d)+(d>>16)&c)<<16)+(65535&(u=18e3*(65535&u)+(u>>16)&c))>>>0&c|0;return e||(t>>>=0),t}function y(e){void 0===e&&(e=22);for(var t=g()>>>0,n=0,i=s.qS;i[r.R5]<e;)n++,i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(g()<<2&4294967295|3&t)>>>0,n=0);return i}},69031:(e,t,n)=>{"use strict";n.d(t,{AA:()=>d,OY:()=>l,Yn:()=>h,bP:()=>u});var r=n(98145),i=n(87624),o=n(24869),s=n(96335),a=n(56207),c=(0,i.K)("plugin");function l(e){return c.get(e,"state",{},!0)}function u(e,t){for(var n,i=[],a=null,c=e[r.W2]();c;){var u=c[r.TO]();u&&(a&&(0,o.mf)(a[r.Jd])&&(0,o.mf)(u[s.hL])&&a[r.Jd](u),((0,o.mf)(u[r.yl])?u[r.yl]():(n=l(u))[r.yl])||i[r.MW](u),a=u,c=c[r.W2]())}(0,o.tO)(i,(function(i){var o=e[s.oV]();i[r.VL](e.getCfg(),o,t,e[r.W2]()),n=l(i),i[s.oV]||n[s.oV]||(n[s.oV]=o),n[r.yl]=!0,delete n[r.fi]}))}function d(e){return e.sort((function(e,t){var n=0;if(t){var r=(0,o.mf)(t[s.hL]);(0,o.mf)(e[s.hL])?n=r?e[s.yi]-t[s.yi]:1:r&&(n=-1)}else n=e?1:-1;return n}))}function h(e){var t={};return{getName:function(){return t[r.I]},setName:function(n){e&&e.setName(n),t[r.I]=n},getTraceId:function(){return t[r.nY]},setTraceId:function(n){e&&e.setTraceId(n),(0,a.jN)(n)&&(t[r.nY]=n)},getSpanId:function(){return t[r._d]},setSpanId:function(n){e&&e.setSpanId(n),(0,a.Lc)(n)&&(t[r._d]=n)},getTraceFlags:function(){return t[r.T0]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[r.T0]=n}}}},38593:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n(98145),i=n(29339),o=n(49251),s=n(24869);function a(){var e=[];return{add:function(t){t&&e[r.MW](t)},run:function(t,n){(0,s.tO)(e,(function(e){try{e(t,n)}catch(e){(0,i.kP)(t[r.mc](),2,73,"Unexpected error calling unload handler - "+(0,o.eU)(e))}})),e=[]}}}},56207:(e,t,n)=>{"use strict";n.d(t,{J6:()=>w,Lc:()=>b,Pn:()=>S,SU:()=>m,aR:()=>C,jN:()=>y,j_:()=>v,lq:()=>_});var r=n(98145),i=n(28956),o=n(49251),s=n(24869),a=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,c="00",l="ff",u="00000000000000000000000000000000",d="0000000000000000",h=1;function p(e,t,n){return!(!e||e[r.R5]!==t||e===n||!e.match(/^[\da-f]*$/))}function f(e,t,n){return p(e,t)?e:n}function g(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[r.R5]<2;)t="0"+t;return t}function m(e,t,n,o){var s;return(s={})[r.PA]=p(o,2,l)?o:c,s[r.nY]=y(e)?e:(0,i.DO)(),s.spanId=b(t)?t:(0,i.DO)()[r.Jn](0,16),s.traceFlags=n>=0&&n<=255?n:1,s}function v(e){var t;if(!e)return null;if((0,s.kJ)(e)&&(e=e[0]||""),!e||!(0,s.HD)(e)||e[r.R5]>8192)return null;var n=a.exec((0,s.nd)(e));return n&&n[1]!==l&&n[2]!==u&&n[3]!==d?((t={})[r.PA]=n[1],t[r.nY]=n[2],t[r._d]=n[3],t[r.T0]=parseInt(n[4],16),t):null}function y(e){return p(e,32,u)}function b(e){return p(e,16,d)}function w(e){return!!(e&&p(e[r.PA],2,l)&&p(e[r.nY],32,u)&&p(e[r._d],16,d)&&p(g(e[r.T0]),2))}function S(e){return!!w(e)&&(e[r.T0]&h)===h}function C(e){if(e){var t=g(e[r.T0]);p(t,2)||(t="01");var n=e[r.PA]||c;return"00"!==n&&"ff"!==n&&(n=c),"".concat(n,"-").concat(f(e.traceId,32,u),"-").concat(f(e.spanId,16,d),"-").concat(t)}return""}function _(){var e="traceparent",t=v((0,o.ed)(e));return t||(t=v((0,o.pI)(e))),t}},98145:(e,t,n)=>{"use strict";n.d(t,{$h:()=>K,F3:()=>D,Fc:()=>b,Fr:()=>B,Gc:()=>E,I:()=>i,Jd:()=>R,Jn:()=>U,Km:()=>ee,Kn:()=>z,LS:()=>y,Lk:()=>A,MW:()=>a,P6:()=>G,PA:()=>ie,PL:()=>Q,R5:()=>h,SD:()=>g,T:()=>X,T0:()=>re,T1:()=>J,TC:()=>l,TO:()=>w,Tu:()=>T,VL:()=>r,W2:()=>x,ZV:()=>V,Z_:()=>p,_S:()=>$,_d:()=>ne,cb:()=>_,d:()=>I,dE:()=>Y,eZ:()=>d,fi:()=>P,g:()=>m,gU:()=>k,i7:()=>H,iC:()=>C,jk:()=>q,kL:()=>S,mc:()=>O,n7:()=>v,nY:()=>te,ou:()=>N,p$:()=>u,pZ:()=>s,qV:()=>F,tb:()=>o,uL:()=>f,w6:()=>L,wu:()=>Z,xv:()=>W,yl:()=>c,zV:()=>M,zc:()=>j});var r="initialize",i="name",o="getNotifyMgr",s="identifier",a="push",c="isInitialized",l="config",u="instrumentationKey",d="logger",h="length",p="time",f="processNext",g="getProcessTelContext",m="addNotificationListener",v="removeNotificationListener",y="stopPollingInternalLogs",b="onComplete",w="getPlugin",S="flush",C="_extensions",_="splice",P="teardown",E="messageId",k="message",I="isAsync",D="_doTeardown",T="update",x="getNext",O="diagLog",R="setNextPlugin",M="createNew",A="cookieCfg",N="indexOf",j="substring",F="userAgent",L="split",K="setEnabled",U="substr",W="nodeType",V="apply",H="replace",B="enableDebugExceptions",q="logInternalMessage",J="toLowerCase",$="call",G="type",z="handler",Y="listeners",Q="isChildEvt",X="getCtx",Z="setCtx",ee="complete",te="traceId",ne="spanId",re="traceFlags",ie="version"},1550:(e,t,n)=>{"use strict";n.d(t,{CY:()=>p,Pw:()=>c,RJ:()=>h,V4:()=>l,bO:()=>a,cb:()=>r,fK:()=>i,hB:()=>s,jA:()=>o,rl:()=>u,yu:()=>d});var r="function",i="object",o="undefined",s="prototype",a="hasOwnProperty",c=Object,l=c[s],u=c.assign,d=c.create,h=c.defineProperty,p=l[a]},30175:(e,t,n)=>{"use strict";n.d(t,{Rd:()=>o,ZU:()=>s,pu:()=>a});var r=n(1550),i=null;function o(e){void 0===e&&(e=!0);var t=!1===e?null:i;return t||(typeof globalThis!==r.jA&&(t=globalThis),t||typeof self===r.jA||(t=self),t||typeof window===r.jA||(t=window),t||typeof n.g===r.jA||(t=n.g),i=t),t}function s(e){throw new TypeError(e)}function a(e){var t=r.yu;if(t)return t(e);if(null==e)return{};var n=typeof e;function i(){}return n!==r.fK&&n!==r.cb&&s("Object prototype may only be an Object:"+e),i[r.hB]=e,new i}},27421:(e,t,n)=>{"use strict";n.d(t,{$h:()=>c,ne:()=>a,uc:()=>o});var r=n(1550),i=n(30175),o=(((0,i.Rd)()||{}).Symbol,((0,i.Rd)()||{}).Reflect,r.rl||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])r.V4[r.bO].call(t,o)&&(e[o]=t[o]);return e}),s=function(e,t){return s=r.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[r.bO](n)&&(e[n]=t[n])},s(e,t)};function a(e,t){function n(){this.constructor=e}typeof t!==r.cb&&null!==t&&(0,i.ZU)("Class extends value "+String(t)+" is not a constructor or null"),s(e,t),e[r.hB]=null===t?(0,i.pu)(t):(n[r.hB]=t[r.hB],new n)}function c(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}},31626:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>Nh,ApplicationInsights:()=>bp,CoreUtils:()=>ep,Sender:()=>Sc,SeverityLevel:()=>yp,_InternalMessageId:()=>vp,arrForEach:()=>wu,isNullOrUndefined:()=>au,proxyFunctions:()=>Nu,throwError:()=>Mu});var r=n(29141),i=n(27421),o="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",s="sampleRate",a="ProcessLegacy",c="http.method",l="https://dc.services.visualstudio.com",u="/v2/track",d="not_specified",h="split",p="length",f="toLowerCase",g="ingestionendpoint",m="toString",v="removeItem",y="name",b="message",w="stringify",S="pathname",C="indexOf",_="exceptions",P="parsedStack",E="properties",k="measurements",I="sizeInBytes",D="typeName",T="severityLevel",x="problemGroup",O="isManual",R="CreateFromInterface",M="assembly",A="hasFullStack",N="level",j="method",F="fileName",L="line",K="duration",U="receivedResponse",W="substring",V=n(1550),H=n(30175),B="name",q="push",J="length",$="messageId",G="message",z="diagLog",Y="cookieCfg",Q="indexOf",X="substring",Z="userAgent",ee="split",te="setEnabled",ne="substr",re="nodeType",ie="replace",oe="enableDebugExceptions",se="toLowerCase",ae="call",ce="type",le="handler",ue="",de="errorToConsole",he="warnToConsole",pe="toISOString",fe="endsWith",ge="indexOf",me="reduce",ve="trim",ye="toString",be=V.RJ,we=V.Pw.freeze,Se=(V.Pw.seal,V.Pw.keys),Ce=String[V.hB],_e=Ce[ve],Pe=Ce[fe],Ee=(Ce.startsWith,Date[V.hB][pe]),ke=Array.isArray,Ie=V.V4[ye],De=(V.CY[ye][ae](V.Pw),/-([a-z])/g),Te=/([^\w\d_$])/g,xe=/^(\d+[\w\d_$])/;function Oe(e){return void 0===e||typeof e===V.jA}function Re(e){return null===e||Oe(e)}function Me(e){return!Re(e)}function Ae(e){return!(!e||typeof e!==V.fK)}function Ne(e){return!(!e||typeof e!==V.cb)}function je(e){var t=e;return t&&We(t)&&(t=(t=(t=t[ie](De,(function(e,t){return t.toUpperCase()})))[ie](Te,"_"))[ie](xe,(function(e,t){return"_"+t}))),t}function Fe(e,t){if(e)for(var n in e)V.CY[ae](e,n)&&t[ae](e,n,e[n])}function Le(e,t){return!(!e||!t)&&-1!==e[Q](t)}Object.getPrototypeOf;var Ke=ke||function(e){return!(!e||"[object Array]"!==Ie[ae](e))};function Ue(e){return!(!e||"[object Error]"!==Ie[ae](e))}function We(e){return"string"==typeof e}function Ve(e){return"boolean"==typeof e}function He(e){if(e)return Ee?e[pe]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[J]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function Be(e,t,n){var r=e[J];try{for(var i=0;i<r&&(!(i in e)||-1!==t[ae](n||e,e[i],i,e));i++);}catch(e){}}function qe(e,t,n){if(e){if(e[ge])return e[ge](t,n);var r=e[J],i=n||0;try{for(var o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in e&&e[o]===t)return o}catch(e){}}return-1}function Je(e,t,n){var r;if(e){if(e.map)return e.map(t,n);var i=e[J],o=n||e;r=new Array(i);try{for(var s=0;s<i;s++)s in e&&(r[s]=t[ae](o,e[s],e))}catch(e){}}return r}function $e(e,t,n){var r;if(e){if(e[me])return e[me](t,n);var i=e[J],o=0;if(arguments[J]>=3)r=arguments[2];else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=t(r,e[o],o,e)),o++}return r}function Ge(e){return e&&(e=_e&&e[ve]?e[ve]():e[ie]?e[ie](/^\s+|(?=\s)\s+$/g,ue):e),e}var ze=!{toString:null}.propertyIsEnumerable("toString"),Ye=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Qe(e){var t=typeof e;if(t===V.cb||t===V.fK&&null!==e||(0,H.ZU)("objKeys called on non-object"),!ze&&Se)return Se(e);var n=[];for(var r in e)e&&V.CY[ae](e,r)&&n[q](r);if(ze)for(var i=Ye[J],o=0;o<i;o++)e&&V.CY[ae](e,Ye[o])&&n[q](Ye[o]);return n}function Xe(e,t,n,r){if(be)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),be(e,t,i),!0}catch(e){}return!1}function Ze(e){return we&&Fe(e,(function(e,t){(Ke(t)||Ae(t))&&we(t)})),et(e)}var et=we||function(e){return e};function tt(){var e=Date;return e.now?e.now():(new e).getTime()}function nt(e){return Ue(e)?e[B]:ue}function rt(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(o=n,e[t]=o)),o}function it(e,t){return Re(e)?t:e}function ot(e){return!!e}var st="window",at="document",ct="navigator",lt="location",ut="JSON",dt="crypto",ht="msCrypto",pt="msie",ft="trident/",gt=null,mt=null;function vt(e){var t=(0,H.Rd)();return t&&t[e]?t[e]:e===st&&yt()?window:null}function yt(){return Boolean(typeof window===V.fK&&window)}function bt(){return Boolean(typeof document===V.fK&&document)?document:vt(at)}function wt(){return Boolean(typeof navigator===V.fK&&navigator)?navigator:vt(ct)}function St(){return Boolean(typeof JSON===V.fK&&JSON||null!==vt(ut))}function Ct(){return St()?JSON||vt(ut):null}function _t(){var e=wt();if(e&&(e[Z]!==mt||null===gt)){var t=((mt=e[Z])||ue)[se]();gt=Le(t,pt)||Le(t,ft)}return gt}function Pt(e){var t=Object[V.hB].toString[ae](e),n=ue;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[B]+"'":St()&&(n=Ct().stringify(e)),t+n}var Et=null;function kt(e){return e?'"'+e[ie](/\"/g,ue)+'"':ue}function It(e,t){var n=typeof console!==V.jA?console:vt("console");if(n){var r="log";n[e]&&(r=e),Ne(n[r])&&n[r](t)}}var Dt,Tt=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i[$]=e,i[G]=(n?"AI: ":"AI (Internal): ")+e;var o=ue;St()&&(o=Ct().stringify(r));var s=(t?" message:"+kt(t):ue)+(r?" props:"+kt(o):ue);i[G]+=s}return e.dataType="MessageData",e}(),xt=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,i,o,s,a=0,c={};(0,r.Z)(e,this,(function(e){function r(t,n){if(!(a>=o)){var r=!0,s="AITR_"+n[$];if(c[s]?r=!1:c[s]=!0,r&&(t<=i&&(e.queue[q](n),a++,l(1===t?"error":"warn",n)),a===o)){var u="Internal events throttle limit per PageView reached for this app.",d=new Tt(23,u,!1);e.queue[q](d),1===t?e[de](u):e[he](u)}}}function l(e,n){var r=function(e){var t,n=Et;return n||!0===e.disableDbgExt||(n=Et||((t=vt("Microsoft"))&&(Et=t.ApplicationInsights),Et)),n?n.ChromeDbgExt:null}(t||{});r&&r[z]&&r[z](e,n)}!function(e){n=it(e.loggingLevelConsole,0),i=it(e.loggingLevelTelemetry,1),o=it(e.maxMessageLimit,25),s=it(e[oe],!1)}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return i},e.maxInternalMessageLimit=function(){return o},e[oe]=function(){return s},e.throwInternal=function(t,i,o,a,u){void 0===u&&(u=!1);var d=new Tt(i,o,u,a);if(s)throw Pt(d);var h=1===t?de:he;if(Oe(d[G]))l("throw"+(1===t?"Critical":"Warning"),d);else{if(u){var p=+d[$];!c[p]&&n>=t&&(e[h](d[G]),c[p]=!0)}else n>=t&&e[h](d[G]);r(t,d)}},e[he]=function(e){It("warn",e),l("warning",e)},e[de]=function(e){It("error",e),l("error",e)},e.resetInternalMessageCount=function(){a=0,c={}},e.logInternalMessage=r}))}return e.__ieDyn=1,e}();function Ot(e,t,n,r,i,o){void 0===o&&(o=!1),function(e){return e||new xt}(e).throwInternal(t,n,r,i,o)}function Rt(e,t,n){var r=t[p],i=Mt(e,t);if(i[p]!==r){for(var o=0,s=i;void 0!==n[s];)o++,s=i[W](0,147)+Vt(o);i=s}return i}function Mt(e,t){var n;return t&&(t=Ge(t[m]()))[p]>150&&(n=t[W](0,150),Ot(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function At(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=Ge(t)).toString()[p]>n&&(r=t[m]()[W](0,n),Ot(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function Nt(e,t){return Wt(e,t,2048,66)}function jt(e,t){var n;return t&&t[p]>32768&&(n=t[W](0,32768),Ot(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function Ft(e,t){var n;if(t){var r=""+t;r[p]>32768&&(n=r[W](0,32768),Ot(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function Lt(e,t){if(t){var n={};Fe(t,(function(t,r){if(Ae(r)&&St())try{r=Ct()[w](r)}catch(t){Ot(e,2,49,"custom property is not valid",{exception:t},!0)}r=At(e,r,8192),t=Rt(e,t,n),n[t]=r})),t=n}return t}function Kt(e,t){if(t){var n={};Fe(t,(function(t,r){t=Rt(e,t,n),n[t]=r})),t=n}return t}function Ut(e,t){return t?Wt(e,t,128,69)[m]():t}function Wt(e,t,n,r){var i;return t&&(t=Ge(t))[p]>n&&(i=t[W](0,n),Ot(e,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t}function Vt(e){var t="00"+e;return t.substr(t[p]-3)}(Dt={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768}).sanitizeKeyAndAddUniqueness=Rt,Dt.sanitizeKey=Mt,Dt.sanitizeString=At,Dt.sanitizeUrl=Nt,Dt.sanitizeMessage=jt,Dt.sanitizeException=Ft,Dt.sanitizeProperties=Lt,Dt.sanitizeMeasurements=Kt,Dt.sanitizeId=Ut,Dt.sanitizeInput=Wt,Dt.padNumber=Vt,Dt.trim=Ge;var Ht=function(){function e(e,t,n,r){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var i=this;i.ver=2,i[y]=At(e,t)||d,i[E]=Lt(e,n),i[k]=Kt(e,r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(),Bt=function(){function e(e,t,n,r,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var o=this;o.ver=2,t=t||d,o[b]=jt(e,t),o[E]=Lt(e,r),o[k]=Kt(e,i),n&&(o[T]=n)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}();function qt(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=1===t[p]?"00"+t:2===t[p]?"0"+t:t,n=n[p]<2?"0"+n:n,r=r[p]<2?"0"+r:r,(o>0?o+".":"")+(i=i[p]<2?"0"+i:i)+":"+r+":"+n+"."+t}var Jt=function(){function e(e,t,n,r,i,o,s){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var a=this;a.ver=2,a.id=Ut(e,s),a.url=Nt(e,n),a[y]=At(e,t)||d,isNaN(r)||(a[K]=qt(r)),a[E]=Lt(e,i),a[k]=Kt(e,o)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(),$t=function(){function e(e,t,n,r,i,o,s){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var a=this;a.ver=2,a.url=Nt(e,n),a[y]=At(e,t)||d,a[E]=Lt(e,i),a[k]=Kt(e,o),s&&(a.domProcessing=s.domProcessing,a[K]=s[K],a.networkConnect=s.networkConnect,a.perfTotal=s.perfTotal,a[U]=s[U],a.sentRequest=s.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(),Gt="error",zt="stack",Yt="stackDetails",Qt="errorSrc",Xt="message",Zt="description";function en(e,t){var n=e;return n&&!We(n)&&(JSON&&JSON[w]?(n=JSON[w](e),!t||n&&"{}"!==n||(n=Ne(e[m])?e[m]():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function tn(e,t){var n=e;return e&&(n&&!We(n)&&(n=e[Xt]||e[Zt]||n),n&&!We(n)&&(n=en(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(n||"")[C](t)&&(n=t+": "+n),n||""}function nn(e){return e&&e.src&&We(e.src)&&e.obj&&Ke(e.obj)}function rn(e){var t=e||"";We(t)||(t=We(t[zt])?t[zt]:""+t);var n=t[h]("\n");return{src:t,obj:n}}function on(e){var t=null;if(e)try{if(e[zt])t=rn(e[zt]);else if(e[Gt]&&e[Gt][zt])t=rn(e[Gt][zt]);else if(e.exception&&e.exception[zt])t=rn(e.exception[zt]);else if(nn(e))t=e;else if(nn(e[Yt]))t=e[Yt];else if(window&&window.opera&&e[Xt])t=function(e){for(var t=[],n=e[h]("\n"),r=0;r<n[p];r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}(e[b]);else if(e.reason&&e.reason[zt])t=rn(e.reason[zt]);else if(We(e))t=rn(e);else{var n=e[Xt]||e[Zt]||"";We(e[Qt])&&(n&&(n+="\n"),n+=" from "+e[Qt]),n&&(t=rn(n))}}catch(e){t=rn(e)}return t||{src:"",obj:null}}function sn(e){var t="";if(e&&!(t=e.typeName||e[y]||""))try{var n=/function (.{1,200})\(/.exec(e.constructor[m]());t=n&&n[p]>1?n[1]:""}catch(e){}return t}function an(e){if(e)try{if(!We(e)){var t=sn(e),n=en(e,!1);return n&&"{}"!==n||(e[Gt]&&(t=sn(e=e[Gt])),n=en(e,!0)),0!==n[C](t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var cn=function(){function e(e,t,n,r,i,o){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var s=this;s.ver=2,function(e){try{if(Ae(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(t)?(s[_]=t[_]||[],s[E]=t[E],s[k]=t[k],t[T]&&(s[T]=t[T]),t.id&&(s.id=t.id),t[x]&&(s[x]=t[x]),Re(t[O])||(s[O]=t[O])):(n||(n={}),s[_]=[new ln(e,t,n)],s[E]=Lt(e,n),s[k]=Kt(e,r),i&&(s[T]=i),o&&(s.id=o))}return e.CreateAutoException=function(e,t,n,r,i,o,s,a){var c,l=sn(i||o||e);return(c={})[b]=tn(e,l),c.url=t,c.lineNumber=n,c.columnNumber=r,c.error=an(i||o||e),c.evt=an(o||e),c[D]=l,c.stackDetails=on(s||i||o),c.errorSrc=a,c},e.CreateFromInterface=function(t,n,r,o){var s=n[_]&&Je(n[_],(function(e){return ln[R](t,e)}));return new e(t,(0,i.uc)((0,i.uc)({},n),{exceptions:s}),r,o)},e.prototype.toInterface=function(){var e,t=this,n=t.exceptions,r=t.properties,i=t.measurements,o=t.severityLevel,s=t.problemGroup,a=t.id,c=t.isManual,l=n instanceof Array&&Je(n,(function(e){return e.toInterface()}))||void 0;return(e={ver:"4.0"})[_]=l,e.severityLevel=o,e.properties=r,e.measurements=i,e.problemGroup=s,e.id=a,e.isManual=c,e},e.CreateSimpleException=function(e,t,n,r,i,o){var s;return{exceptions:[(s={},s[A]=!0,s.message=e,s.stack=i,s.typeName=t,s)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=an,e}(),ln=function(){function e(e,t,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var r=this;if(function(e){try{if(Ae(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(t))r[D]=t[D],r[b]=t[b],r[zt]=t[zt],r[P]=t[P]||[],r[A]=t[A];else{var i=t,o=i&&i.evt;Ue(i)||(i=i[Gt]||o||i),r[D]=At(e,sn(i))||d,r[b]=jt(e,tn(t||i,r[D]))||d;var s=t[Yt]||on(t);r[P]=function(e){var t,n=e.obj;if(n&&n[p]>0){t=[];var r=0,i=0;if(Be(n,(function(e){var n=e[m]();if(un.regex.test(n)){var o=new un(n,r++);i+=o[I],t.push(o)}})),i>32768)for(var o=0,s=t[p]-1,a=0,c=o,l=s;o<s;){if((a+=t[o][I]+t[s][I])>32768){var u=l-c+1;t.splice(c,u);break}c=o,l=s,o++,s--}}return t}(s),Ke(r[P])&&Je(r[P],(function(t){return t[M]=At(e,t[M])})),r[zt]=Ft(e,function(e){var t="";return e&&(e.obj?Be(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(s)),r.hasFullStack=Ke(r.parsedStack)&&r.parsedStack[p]>0,n&&(n[D]=n[D]||r[D])}}return e.prototype.toInterface=function(){var e,t=this,n=t[P]instanceof Array&&Je(t[P],(function(e){return e.toInterface()}));return(e={id:t.id,outerId:t.outerId,typeName:t[D],message:t[b],hasFullStack:t[A],stack:t[zt]})[P]=n||void 0,e},e.CreateFromInterface=function(t,n){var r=n[P]instanceof Array&&Je(n[P],(function(e){return un[R](e)}))||n[P];return new e(t,(0,i.uc)((0,i.uc)({},n),{parsedStack:r}))},e}(),un=function(){function e(t,n){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var r=this;if(r[I]=0,"string"==typeof t){var i=t;r[N]=n,r[j]="<no_method>",r[M]=Ge(i),r[F]="",r[L]=0;var o=i.match(e.regex);o&&o[p]>=5&&(r[j]=Ge(o[2])||r[j],r[F]=Ge(o[4]),r[L]=parseInt(o[5])||0)}else r[N]=t[N],r[j]=t[j],r[M]=t[M],r[F]=t[F],r[L]=t[L],r[I]=0;r.sizeInBytes+=r.method[p],r.sizeInBytes+=r.fileName[p],r.sizeInBytes+=r.assembly[p],r[I]+=e.baseSize,r.sizeInBytes+=r.level.toString()[p],r.sizeInBytes+=r.line.toString()[p]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[N],method:e[j],assembly:e[M],fileName:e[F],line:e[L]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}(),dn=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},hn=function(){function e(e,t,n,r,i,o,s,a,c){this.aiDataContract={ver:1,metrics:1,properties:0};var l=this;l.ver=2;var u=new dn;u.count=r>0?r:void 0,u.max=isNaN(o)||null===o?void 0:o,u.min=isNaN(i)||null===i?void 0:i,u[y]=At(e,t)||d,u.value=n,u.stdDev=isNaN(s)||null===s?void 0:s,l.metrics=[u],l[E]=Lt(e,a),l[k]=Kt(e,c)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(),pn="toGMTString",fn="toUTCString",gn="cookie",mn="expires",vn="enabled",yn="isCookieUseDisabled",bn="disableCookiesUsage",wn="_ckMgr",Sn=null,Cn=null,_n=null,Pn=bt(),En={},kn={};function In(e){return!e||e.isEnabled()}function Dn(e,t){return!!(t&&e&&Ke(e.ignoreCookies))&&-1!==e.ignoreCookies[Q](t)}function Tn(e,t){var n,r=function(e){var t=e[Y]=e[Y]||{};if(rt(t,"domain",e.cookieDomain,Me,Re),rt(t,"path",e.cookiePath||"/",null,Re),Re(t[vn])){var n=void 0;Oe(e[yn])||(n=!e[yn]),Oe(e[bn])||(n=!e[bn]),t[vn]=n}return t}(e||kn),i=r.path||"/",o=r.domain,s=!1!==r[vn],a=((n={isEnabled:function(){var e=s&&xn(t),n=kn[wn];return e&&n&&a!==n&&(e=In(n)),e}})[te]=function(e){s=!1!==e},n.set=function(e,t,n,s,c){var l,u=!1;if(In(a)&&!function(e,t){return!!(t&&e&&Ke(e.blockedCookies)&&-1!==e.blockedCookies[Q](t))||Dn(e,t)}(r,e)){var d={},h=Ge(t||ue),p=h[Q](";");if(-1!==p&&(h=Ge(t[X](0,p)),d=On(t[X](p+1))),rt(d,"domain",s||o,ot,Oe),!Re(n)){var f=_t();if(Oe(d[mn])){var g=tt()+1e3*n;if(g>0){var m=new Date;m.setTime(g),rt(d,mn,Rn(m,f?pn:fn)||Rn(m,f?pn:fn)||ue,ot)}}f||rt(d,"max-age",ue+n,null,Oe)}var v=typeof location===V.fK&&location?location:vt(lt);v&&"https:"===v.protocol&&(rt(d,"secure",null,null,Oe),null===Cn&&(l=(wt()||{})[Z],Cn=!(We(l)&&(Le(l,"CPU iPhone OS 12")||Le(l,"iPad; CPU OS 12")||Le(l,"Macintosh; Intel Mac OS X 10_14")&&Le(l,"Version/")&&Le(l,"Safari")||Le(l,"Macintosh; Intel Mac OS X 10_14")&&function(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=Pe?e[fe](t):function(e,t){var n=!1,r=t?t[J]:0,i=e?e[J]:0;if(r&&i&&i>=r&&!(n=e===t)){for(var o=i-1,s=r-1;s>=0;s--){if(e[o]!=t[s])return!1;o--}n=!0}return n}(e,t)),n}(l,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Le(l,"Chrome/5")||Le(l,"Chrome/6")||Le(l,"UnrealEngine")&&!Le(l,"Chrome")||Le(l,"UCBrowser/12")||Le(l,"UCBrowser/11")))),Cn&&rt(d,"SameSite","None",null,Oe)),rt(d,"path",c||i,null,Oe),(r.setCookie||Nn)(e,Mn(h,d)),u=!0}return u},n.get=function(e){var t=ue;return In(a)&&!Dn(r,e)&&(t=(r.getCookie||An)(e)),t},n.del=function(e,t){var n=!1;return In(a)&&(n=a.purge(e,t)),n},n.purge=function(e,n){var i,o=!1;if(xn(t)){var s=((i={}).path=n||"/",i[mn]="Thu, 01 Jan 1970 00:00:01 GMT",i);_t()||(s["max-age"]="0"),(r.delCookie||Nn)(e,Mn(ue,s)),o=!0}return o},n);return a[wn]=a,a}function xn(e){if(null===Sn){Sn=!1;try{Sn=void 0!==(Pn||{})[gn]}catch(t){Ot(e,2,68,"Cannot access document.cookie - "+nt(t),{exception:Pt(t)})}}return Sn}function On(e){var t={};return e&&e[J]&&Be(Ge(e)[ee](";"),(function(e){if(e=Ge(e||ue)){var n=e[Q]("=");-1===n?t[e]=null:t[Ge(e[X](0,n))]=Ge(e[X](n+1))}})),t}function Rn(e,t){return Ne(e[t])?e[t]():null}function Mn(e,t){var n=e||ue;return Fe(t,(function(e,t){n+="; "+e+(Re(t)?ue:"="+t)})),n}function An(e){var t=ue;if(Pn){var n=Pn[gn]||ue;_n!==n&&(En=On(n),_n=n),t=Ge(En[e]||ue)}return t}function Nn(e,t){Pn&&(Pn[gn]=e+"="+t)}var jn=4294967296,Fn=4294967295,Ln=!1,Kn=123456789,Un=987654321;function Wn(e){e<0&&(e>>>=0),Kn=123456789+e&Fn,Un=987654321-e&Fn,Ln=!0}function Vn(){try{var e=2147483647&tt();Wn((Math.random()*jn^e)+e)}catch(e){}}function Hn(e){var t=0,n=vt(dt)||vt(ht);return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&Fn),0===t&&_t()&&(Ln||Vn(),t=Bn()&Fn),0===t&&(t=Math.floor(jn*Math.random()|0)),e||(t>>>=0),t}function Bn(e){var t=((Un=36969*(65535&Un)+(Un>>16)&Fn)<<16)+(65535&(Kn=18e3*(65535&Kn)+(Kn>>16)&Fn))>>>0&Fn|0;return e||(t>>>=0),t}function qn(e){void 0===e&&(e=22);for(var t=Hn()>>>0,n=0,r=ue;r[J]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(Hn()<<2&4294967295|3&t)>>>0,n=0);return r}var Jn=V.RJ,$n="2.8.11",Gn="."+qn(6),zn=0;function Yn(e){return 1===e[re]||9===e[re]||!+e[re]}function Qn(e,t){return void 0===t&&(t=!1),je(e+zn+++(t?"."+$n:ue)+Gn)}var Xn,Zn="on",er="attachEvent",tr="addEventListener",nr="events",rr=(Qn("aiEvtPageHide"),Qn("aiEvtPageShow"),/\.[\.]+/g),ir=/[\.]+$/,or=1,sr=Xn={id:Qn("_aiData-events."+$n),accept:function(e){return Yn(e)},get:function(e,t,n,r){var i=e[Xn.id];return i?i[je(t)]:(r&&((i=function(e,t){var n=t[e.id];if(!n){n={};try{Yn(t)&&(function(e,t,n){if(Jn)try{return Jn(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(e){}}return n}(Xn,e))[je(t)]=n),n)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}},ar=/^([^.]*)(?:\.(.+)|)/;function cr(e){return e&&e[ie]?e[ie](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,ue):e}function lr(e,t,n,r,i){var o;void 0===i&&(i=!1);var s=!1;if(e)try{var a=function(e,t){var n;if(t){var r=ue;Ke(t)?(r=ue,Be(t,(function(e){(e=cr(e))&&("."!==e[0]&&(e="."+e),r+=e)}))):r=cr(t),r&&("."!==r[0]&&(r="."+r),e=(e||ue)+r)}var i=ar.exec(e||ue)||[];return(n={})[ce]=i[1],n.ns=(i[2]||ue).replace(rr,".").replace(ir,ue)[ee](".").sort().join("."),n}(t,r);if(s=function(e,t,n,r){var i=!1;return e&&t&&t[ce]&&n&&(e[tr]?(e[tr](t[ce],n,r),i=!0):e[er]&&(e[er](Zn+t[ce],n),i=!0)),i}(e,a,n,i),s&&sr.accept(e)){var c=((o={guid:or++,evtName:a})[le]=n,o.capture=i,o);(function(e,t,n){void 0===n&&(n=!0);var r=sr.get(e,nr,{},n),i=r[t];return i||(i=r[t]=[]),i})(e,a.type)[q](c)}}catch(e){}return s}var ur,dr=null;function hr(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=ue,r=0;r<4;r++)n+=t[15&(e=Hn())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Hn())|0];return n[ne](0,8)+n[ne](9,4)+"4"+n[ne](13,3)+i+n[ne](16,3)+n[ne](19,12)}var pr={_canUseCookies:void 0,isTypeof:function(e,t){return typeof e===t},isUndefined:Oe,isNullOrUndefined:Re,hasOwnProperty:function(e,t){return!(!e||!V.CY[ae](e,t))},isFunction:Ne,isObject:Ae,isDate:function(e){return!(!e||"[object Date]"!==Ie[ae](e))},isArray:Ke,isError:Ue,isString:We,isNumber:function(e){return"number"==typeof e},isBoolean:Ve,toISOString:He,arrForEach:Be,arrIndexOf:qe,arrMap:Je,arrReduce:$e,strTrim:Ge,objCreate:H.pu,objKeys:Qe,objDefineAccessors:Xe,addEventHandler:function(e,t,n){var r=!1,i=yt()?window:vt(st);i&&(r=lr(i,e,t,n),r=lr(i.body,e,t,n)||r);var o=bt();return o&&(r=lr(o,e,t,n)||r),r},dateNow:tt,isIE:_t,disableCookies:function(){(n=function(e,t){var n=Tn[wn]||kn[wn];return n||(n=Tn[wn]=Tn(e,t),kn[wn]=n),n}(e,t),r=pr._canUseCookies,null===dr&&(dr=[],ur=r,Xe(pr,"_canUseCookies",(function(){return ur}),(function(e){ur=e,Be(dr,(function(t){t[te](e)}))}))),-1===qe(dr,n)&&dr[q](n),Ve(r)&&n[te](r),Ve(ur)&&n[te](ur),n)[te](!1);var e,t,n,r},newGuid:function(){var e=hr();return e[X](0,8)+"-"+e[X](8,12)+"-"+e[X](12,16)+"-"+e[X](16,20)+"-"+e[X](20)},perfNow:function(){var e=vt("performance");return e&&e.now?e.now():tt()},newId:qn,randomValue:function(e){return e>0?Math.floor(Hn()/Fn*(e+1))>>>0:0},random32:Hn,mwcRandomSeed:function(e){e?Wn(e):Vn()},mwcRandom32:Bn,generateW3CId:hr};function fr(e){var t={};return Fe(e,(function(e,n){t[e]=n,t[n]=e})),Ze(t)}var gr,mr=(gr={},Fe({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]},(function(e,t){gr[e]=t[1],gr[t[0]]=t[1]})),Ze(gr)),vr=fr({LocalStorage:0,SessionStorage:1}),yr=void fr({AI:0,AI_AND_W3C:1,W3C:2});function br(e){try{if(Re((0,H.Rd)()))return null;var t=(new Date)[m](),n=vt(e===vr.LocalStorage?"localStorage":"sessionStorage");n.setItem(t,t);var r=n.getItem(t)!==t;if(n[v](t),!r)return n}catch(e){}return null}function wr(){return Sr()?br(vr.SessionStorage):null}function Sr(e){return(e||void 0===yr)&&(yr=!!br(vr.SessionStorage)),yr}function Cr(e,t,n){var r=wr();if(null!==r)try{return r.setItem(t,n),!0}catch(t){yr=!1,Ot(e,2,4,"Browser failed write to session storage. "+nt(t),{exception:Pt(t)})}return!1}var _r=bt()||{},Pr=0,Er=[null,null,null,null,null];function kr(e,t){var n=function(e,t){var n=null;if(e){var r=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[p]>2&&We(r[2])&&r[2][p]>0&&(n=r[2]||"",t&&r[p]>2)){var i=(r[1]||"")[f](),o=r[3]||"";("http"===i&&":80"===o||"https"===i&&":443"===o)&&(o=""),n+=o}}return n}(e,t)||"";if(n){var r=n.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[p]>3&&We(r[2])&&r[2][p]>0)return r[2]+(r[3]||"")}return n}var Ir=[l+u,"https://breeze.aimon.applicationinsights.io"+u,"https://dc-int.services.visualstudio.com"+u];function Dr(e){return-1!==qe(Ir,e[f]())}var Tr=function(){function e(e,t,n,r,i,o,s,a,c,l,u,d){void 0===c&&(c="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var h=this;h.ver=2,h.id=t,h[K]=qt(i),h.success=o,h.resultCode=s+"",h.type=At(e,c);var f=function(e,t,n,r){var i,o,s,a,c,l=r,u=r;if(t&&t[p]>0){var d=(o=t,c=(a=Er)[s=Pr],_r.createElement?a[s]||(c=a[s]=_r.createElement("a")):c={host:kr(o,!0)},c.href=o,++s>=a[p]&&(s=0),Pr=s,c);if(i=d.host,!l)if(null!=d[S]){var h=0===d.pathname[p]?"/":d[S];"/"!==h.charAt(0)&&(h="/"+h),u=d[S],l=At(e,n?n+" "+h:h)}else l=At(e,t)}else i=r,l=r;return{target:i,name:l,data:u}}(e,n,a,r);h.data=Nt(e,r)||f.data,h.target=At(e,f.target),l&&(h.target="".concat(h.target," | ").concat(l)),h[y]=At(e,f[y]),h[E]=Lt(e,u),h[k]=Kt(e,d)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(),xr="name",Or="identifier",Rr="push",Mr="isInitialized",Ar="config",Nr="logger",jr="length",Fr="time",Lr="processNext",Kr="getPlugin",Ur="splice",Wr="teardown",Vr="messageId",Hr="message",Br="isAsync",qr="_doTeardown",Jr="update",$r="getNext",Gr="diagLog",zr="setNextPlugin",Yr="createNew",Qr="indexOf",Xr="userAgent",Zr="split",ei="nodeType",ti="apply",ni="replace",ri="enableDebugExceptions",ii="toLowerCase",oi="call",si="type",ai="handler",ci="isChildEvt",li="getCtx",ui="setCtx",di="complete",hi="",pi="core",fi="disabled",gi="extensionConfig",mi="processTelemetry",vi="priority",yi="errorToConsole",bi="warnToConsole",wi="getPerfMgr",Si="toISOString",Ci="indexOf",_i="toString",Pi="__proto__",Ei="constructor",ki=V.RJ,Ii=V.Pw.freeze,Di=(V.Pw.seal,V.Pw.keys),Ti=String[V.hB],xi=(Ti.trim,Ti.endsWith,Ti.startsWith,Date[V.hB][Si]),Oi=Array.isArray,Ri=V.V4[_i],Mi=V.CY[_i],Ai=Mi[oi](V.Pw),Ni=/-([a-z])/g,ji=/([^\w\d_$])/g,Fi=/^(\d+[\w\d_$])/,Li=Object.getPrototypeOf;function Ki(e){return void 0===e||typeof e===V.jA}function Ui(e){return null===e||Ki(e)}function Wi(e){return!(!e||typeof e!==V.fK)}function Vi(e){return!(!e||typeof e!==V.cb)}function Hi(e){var t=e;return t&&$i(t)&&(t=(t=(t=t[ni](Ni,(function(e,t){return t.toUpperCase()})))[ni](ji,"_"))[ni](Fi,(function(e,t){return"_"+t}))),t}function Bi(e,t){if(e)for(var n in e)V.CY[oi](e,n)&&t[oi](e,n,e[n])}function qi(e,t){return!(!e||!t)&&-1!==e[Qr](t)}var Ji=Oi||function(e){return!(!e||"[object Array]"!==Ri[oi](e))};function $i(e){return"string"==typeof e}function Gi(e){var t=!1;if(e&&"object"==typeof e){var n=Li?Li(e):function(e){if(e){if(Li)return Li(e);var t=e[Pi]||e[V.hB]||e[Ei];if(t)return t}return null}(e);n?(n[Ei]&&V.CY[oi](n,Ei)&&(n=n[Ei]),t=typeof n===V.cb&&Mi[oi](n)===Ai):t=!0}return t}function zi(e,t,n){var r=e[jr];try{for(var i=0;i<r&&(!(i in e)||-1!==t[oi](n||e,e[i],i,e));i++);}catch(e){}}var Yi=!{toString:null}.propertyIsEnumerable("toString"),Qi=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Xi(e){var t=typeof e;if(t===V.cb||t===V.fK&&null!==e||(0,H.ZU)("objKeys called on non-object"),!Yi&&Di)return Di(e);var n=[];for(var r in e)e&&V.CY[oi](e,r)&&n[Rr](r);if(Yi)for(var i=Qi[jr],o=0;o<i;o++)e&&V.CY[oi](e,Qi[o])&&n[Rr](Qi[o]);return n}var Zi=Ii||function(e){return e};function eo(){var e=Date;return e.now?e.now():(new e).getTime()}function to(e){return(t=e)&&"[object Error]"===Ri[oi](t)?e[xr]:hi;var t}function no(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(o=n,e[t]=o)),o}function ro(e,t){return Ui(e)?t:e}function io(e){return!!e}function oo(e,t,n,r,i){e&&t&&n&&(!1!==i||Ki(e[t]))&&(e[t]=function(e,t){var n=null,r=null;return Vi(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t][ti](r,e)}}(n,r))}function so(e){return e&&V.rl&&(e=(0,V.Pw)((0,V.rl)({},e))),e}function ao(e,t,n,r,i,o){var s=arguments,a=s[0]||{},c=s[jr],l=!1,u=1;for(c>0&&"boolean"==typeof a&&(l=a,a=s[u]||{},u++),Wi(a)||(a={});u<c;u++){var d=s[u],h=Ji(d),p=Wi(d);for(var f in d)if(h&&f in d||p&&V.CY[oi](d,f)){var g=d[f],m=void 0;if(l&&g&&((m=Ji(g))||Gi(g))){var v=a[f];m?Ji(v)||(v=[]):Gi(v)||(v={}),g=ao(l,v,g)}void 0!==g&&(a[f]=g)}}return a}var co="window",lo="navigator",uo="JSON",ho="msie",po="trident/",fo="XMLHttpRequest",go=null,mo=null,vo=null,yo=null;function bo(e,t){var n=!1;if(e){try{if(!(n=t in e)){var r=e[V.hB];r&&(n=t in r)}}catch(e){}if(!n)try{n=!Ki((new e)[t])}catch(e){}}return n}function wo(e){var t=(0,H.Rd)();return t&&t[e]?t[e]:e===co&&So()?window:null}function So(){return Boolean(typeof window===V.fK&&window)}function Co(){return So()?window:wo(co)}function _o(){return Boolean(typeof document===V.fK&&document)?document:wo("document")}function Po(){return Boolean(typeof navigator===V.fK&&navigator)}function Eo(){return Po()?navigator:wo(lo)}function ko(){return Boolean(typeof JSON===V.fK&&JSON||null!==wo(uo))}function Io(){return ko()?JSON||wo(uo):null}function Do(e){var t=Object[V.hB].toString[oi](e),n=hi;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[xr]+"'":ko()&&(n=Io().stringify(e)),t+n}function To(){return null===yo&&(yo=Po()&&Boolean(Eo().sendBeacon)),yo}function xo(e){var t=!1;try{t=!!wo("fetch");var n=wo("Request");t&&e&&n&&(t=bo(n,"keepalive"))}catch(e){}return t}function Oo(){return null===vo&&(vo=typeof XDomainRequest!==V.jA)&&Ro()&&(vo=vo&&!bo(wo(fo),"withCredentials")),vo}function Ro(){var e=!1;try{e=!!wo(fo)}catch(e){}return e}var Mo=null;function Ao(e){return e?'"'+e[ni](/\"/g,hi)+'"':hi}function No(e,t){var n=typeof console!==V.jA?console:wo("console");if(n){var r="log";n[e]&&(r=e),Vi(n[r])&&n[r](t)}}var jo=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i[Vr]=e,i[Hr]=(n?"AI: ":"AI (Internal): ")+e;var o=hi;ko()&&(o=Io().stringify(r));var s=(t?" message:"+Ao(t):hi)+(r?" props:"+Ao(o):hi);i[Hr]+=s}return e.dataType="MessageData",e}();function Fo(e,t){return(e||{})[Nr]||new Lo(t)}var Lo=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,i,o,s,a=0,c={};(0,r.Z)(e,this,(function(e){function r(t,n){if(!(a>=o)){var r=!0,s="AITR_"+n[Vr];if(c[s]?r=!1:c[s]=!0,r&&(t<=i&&(e.queue[Rr](n),a++,l(1===t?"error":"warn",n)),a===o)){var u="Internal events throttle limit per PageView reached for this app.",d=new jo(23,u,!1);e.queue[Rr](d),1===t?e[yi](u):e[bi](u)}}}function l(e,n){var r=function(e){var t,n=Mo;return n||!0===e.disableDbgExt||(n=Mo||((t=wo("Microsoft"))&&(Mo=t.ApplicationInsights),Mo)),n?n.ChromeDbgExt:null}(t||{});r&&r[Gr]&&r[Gr](e,n)}!function(e){n=ro(e.loggingLevelConsole,0),i=ro(e.loggingLevelTelemetry,1),o=ro(e.maxMessageLimit,25),s=ro(e[ri],!1)}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return i},e.maxInternalMessageLimit=function(){return o},e[ri]=function(){return s},e.throwInternal=function(t,i,o,a,u){void 0===u&&(u=!1);var d=new jo(i,o,u,a);if(s)throw Do(d);var h=1===t?yi:bi;if(Ki(d[Hr]))l("throw"+(1===t?"Critical":"Warning"),d);else{if(u){var p=+d[Vr];!c[p]&&n>=t&&(e[h](d[Hr]),c[p]=!0)}else n>=t&&e[h](d[Hr]);r(t,d)}},e[bi]=function(e){No("warn",e),l("warning",e)},e[yi]=function(e){No("error",e),l("error",e)},e.resetInternalMessageCount=function(){a=0,c={}},e.logInternalMessage=r}))}return e.__ieDyn=1,e}();function Ko(e){return e||new Lo}function Uo(e,t,n,r,i,o){void 0===o&&(o=!1),Ko(e).throwInternal(t,n,r,i,o)}function Wo(e,t){Ko(e)[bi](t)}var Vo=4294967296,Ho=4294967295,Bo=!1,qo=123456789,Jo=987654321;function $o(){try{var e=2147483647&eo();(t=(Math.random()*Vo^e)+e)<0&&(t>>>=0),qo=123456789+t&Ho,Jo=987654321-t&Ho,Bo=!0}catch(e){}var t}function Go(e){var t=0,n=wo("crypto")||wo("msCrypto");return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&Ho),0===t&&function(){var e=Eo();if(e&&(e[Xr]!==mo||null===go)){var t=((mo=e[Xr])||hi)[ii]();go=qi(t,ho)||qi(t,po)}return go}()&&(Bo||$o(),t=function(e){var t=((Jo=36969*(65535&Jo)+(Jo>>16)&Ho)<<16)+(65535&(qo=18e3*(65535&qo)+(qo>>16)&Ho))>>>0&Ho|0;return t>>>=0}()&Ho),0===t&&(t=Math.floor(Vo*Math.random()|0)),e||(t>>>=0),t}var zo=V.RJ,Yo="2.8.11",Qo="."+function(e){void 0===e&&(e=22);for(var t=Go()>>>0,n=0,r=hi;r[jr]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(Go()<<2&4294967295|3&t)>>>0,n=0);return r}(6),Xo=0;function Zo(e){return 1===e[ei]||9===e[ei]||!+e[ei]}function es(e,t){return void 0===t&&(t=!1),Hi(e+Xo+++(t?"."+Yo:hi)+Qo)}function ts(e){var t={id:es("_aiData-"+(e||hi)+"."+Yo),accept:function(e){return Zo(e)},get:function(e,n,r,i){var o=e[t.id];return o?o[Hi(n)]:(i&&((o=function(e,t){var n=t[e.id];if(!n){n={};try{Zo(t)&&(function(e,t,n){if(zo)try{return zo(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(e){}}return n}(t,e))[Hi(n)]=r),r)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}var ns="on",rs="attachEvent",is="addEventListener",os="detachEvent",ss="removeEventListener",as="events",cs=(es("aiEvtPageHide"),es("aiEvtPageShow"),/\.[\.]+/g),ls=/[\.]+$/,us=1,ds=ts("events"),hs=/^([^.]*)(?:\.(.+)|)/;function ps(e){return e&&e[ni]?e[ni](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,hi):e}function fs(e,t){var n;if(t){var r=hi;Ji(t)?(r=hi,zi(t,(function(e){(e=ps(e))&&("."!==e[0]&&(e="."+e),r+=e)}))):r=ps(t),r&&("."!==r[0]&&(r="."+r),e=(e||hi)+r)}var i=hs.exec(e||hi)||[];return(n={})[si]=i[1],n.ns=(i[2]||hi).replace(cs,".").replace(ls,hi)[Zr](".").sort().join("."),n}function gs(e,t,n){void 0===n&&(n=!0);var r=ds.get(e,as,{},n),i=r[t];return i||(i=r[t]=[]),i}function ms(e,t,n,r){e&&t&&t[si]&&(e[ss]?e[ss](t[si],n,r):e[os]&&e[os](ns+t[si],n))}function vs(e,t,n,r){for(var i=t[jr];i--;){var o=t[i];o&&(n.ns&&n.ns!==o.evtName.ns||r&&!r(o)||(ms(e,o.evtName,o[ai],o.capture),t[Ur](i,1)))}}function ys(e,t){return t?fs("xx",Ji(t)?[e].concat(t):[e,t]).ns[Zr]("."):e}function bs(e,t,n,r,i){var o;void 0===i&&(i=!1);var s=!1;if(e)try{var a=fs(t,r);if(s=function(e,t,n,r){var i=!1;return e&&t&&t[si]&&n&&(e[is]?(e[is](t[si],n,r),i=!0):e[rs]&&(e[rs](ns+t[si],n),i=!0)),i}(e,a,n,i),s&&ds.accept(e)){var c=((o={guid:us++,evtName:a})[ai]=n,o.capture=i,o);gs(e,a.type)[Rr](c)}}catch(e){}return s}var ws="ctx",Ss="ParentContextKey",Cs="ChildrenContextKey",_s=function(){function e(t,n,r){var i,o=this,s=!1;o.start=eo(),o[xr]=t,o[Br]=r,o[ci]=function(){return!1},Vi(n)&&(s=function(e,t,n,r){if(ki)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),ki(e,t,i),!0}catch(e){}return!1}(o,"payload",(function(){return!i&&Vi(n)&&(i=n(),n=null),i}))),o[li]=function(t){return t?t===e[Ss]||t===e[Cs]?o[t]:(o[ws]||{})[t]:null},o[ui]=function(t,n){t&&(t===e[Ss]?(o[t]||(o[ci]=function(){return!0}),o[t]=n):t===e[Cs]?o[t]=n:(o[ws]=o[ws]||{})[t]=n)},o[di]=function(){var t=0,r=o[li](e[Cs]);if(Ji(r))for(var i=0;i<r[jr];i++){var a=r[i];a&&(t+=a[Fr])}o[Fr]=eo()-o.start,o.exTime=o[Fr]-t,o[di]=function(){},!s&&Vi(n)&&(o.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),Ps="CoreUtils.doPerf",Es=ts("plugin");function ks(e){return Es.get(e,"state",{},!0)}var Is="TelemetryPluginChain",Ds="_hasRun",Ts="_getTelCtx",xs=0;function Os(e,t,n,r){var i=null,o=[];null!==r&&(i=r?function(e,t,n){for(;e;){if(e[Kr]()===n)return e;e=e[$r]()}return Ns([n],t[Ar]||{},t)}(e,n,r):e);var s={_next:function(){var e=i;if(i=e?e[$r]():null,!e){var t=o;t&&t[jr]>0&&(zi(t,(function(e){try{e.func[oi](e.self,e.args)}catch(e){Uo(n[Nr],2,73,"Unexpected Exception during onComplete - "+Do(e))}})),o=[])}return e},ctx:{core:function(){return n},diagLog:function(){return Fo(n,t)},getCfg:function(){return t},getExtCfg:a,getConfig:function(e,n,r){void 0===r&&(r=!1);var i,o=a(e,null);return o&&!Ui(o[n])?i=o[n]:t&&!Ui(t[n])&&(i=t[n]),Ui(i)?r:i},hasNext:function(){return!!i},getNext:function(){return i},setNext:function(e){i=e},iterate:function(e){for(var t;t=s._next();){var n=t[Kr]();n&&e(n)}},onComplete:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e&&o[Rr]({func:e,self:Ki(t)?s.ctx:t,args:n})}}};function a(e,n,r){var i;if(void 0===n&&(n={}),void 0===r&&(r=0),t){var o=t[gi];o&&e&&(i=o[e])}if(i){if(Wi(n)&&0!==r){var s=ao(!0,n,i);t&&2===r&&Bi(n,(function(e){if(Ui(s[e])){var n=t[e];Ui(n)||(s[e]=n)}})),i=s}}else i=n;return i}return s}function Rs(e,t,n,r){var i=Os(e,t,n,r),o=i.ctx;return o[Lr]=function(e){var t=i._next();return t&&t[mi](e,o),!t},o[Yr]=function(e,r){return void 0===e&&(e=null),Ji(e)&&(e=Ns(e,t,n,r)),Rs(e||o[$r](),t,n,r)},o}function Ms(e,t,n){var r=t[Ar]||{},i=Os(e,r,t,n),o=i.ctx;return o[Lr]=function(e){var t=i._next();return t&&t.unload(o,e),!t},o[Yr]=function(e,n){return void 0===e&&(e=null),Ji(e)&&(e=Ns(e,r,t,n)),Ms(e||o[$r](),t,n)},o}function As(e,t,n){var r=t[Ar]||{},i=Os(e,r,t,n).ctx;return i[Lr]=function(e){return i.iterate((function(t){Vi(t[Jr])&&t[Jr](i,e)}))},i[Yr]=function(e,n){return void 0===e&&(e=null),Ji(e)&&(e=Ns(e,r,t,n)),As(e||i[$r](),t,n)},i}function Ns(e,t,n,r){var i=null,o=!r;if(Ji(e)&&e[jr]>0){var s=null;zi(e,(function(e){if(o||r!==e||(o=!0),o&&e&&Vi(e[mi])){var a=function(e,t,n){var r,i=null,o=Vi(e[mi]),s=Vi(e[zr]),a={getPlugin:function(){return e},getNext:function(){return i},processTelemetry:function(r,l){c(l=l||function(){var r;return e&&Vi(e[Ts])&&(r=e[Ts]()),r||(r=Rs(a,t,n)),r}(),(function(t){if(!e||!o)return!1;var n=ks(e);return!n[Wr]&&!n[fi]&&(s&&e[zr](i),e[mi](r,t),!0)}),"processTelemetry",(function(){return{item:r}}),!r.sync)||l[Lr](r)},unload:function(t,n){c(t,(function(){var r=!1;if(e){var i=ks(e),o=e[pi]||i[pi];!e||o&&o!==t.core()||i[Wr]||(i[pi]=null,i[Wr]=!0,i[Mr]=!1,e[Wr]&&!0===e[Wr](t,n)&&(r=!0))}return r}),"unload",(function(){}),n[Br])||t[Lr](n)},update:function(t,n){c(t,(function(){var r=!1;if(e){var i=ks(e),o=e[pi]||i[pi];!e||o&&o!==t.core()||i[Wr]||e[Jr]&&!0===e[Jr](t,n)&&(r=!0)}return r}),"update",(function(){}),!1)||t[Lr](n)},_id:r=e?e[Or]+"-"+e[vi]+"-"+xs++:"Unknown-0-"+xs++,_setNext:function(e){i=e}};function c(t,n,o,s,a){var c=!1,l=e?e[Or]:Is,u=t[Ds];return u||(u=t[Ds]={}),t.setNext(i),e&&function(e,t,n,r,i){if(e){var s=e;if(s[wi]&&(s=s[wi]()),s){var a=void 0,c=s[li](Ps);try{if(a=s.create(l+":"+o,r,i)){if(c&&a[ui]&&(a[ui](_s[Ss],c),c[li]&&c[ui])){var u=c[li](_s[Cs]);u||(u=[],c[ui](_s[Cs],u)),u[Rr](a)}return s[ui](Ps,a),n()}}catch(e){a&&a[ui]&&a[ui]("exception",e)}finally{a&&s.fire(a),s[ui](Ps,c)}}}n()}(t[pi](),0,(function(){u[r]=!0;try{var e=i?i._id:hi;e&&(u[e]=!1),c=n(t)}catch(e){var s=!i||u[i._id];s&&(c=!0),i&&s||Uo(t[Gr](),1,73,"Plugin ["+l+"] failed during "+o+" - "+Do(e)+", run flags: "+Do(u))}}),s,a),c}return Zi(a)}(e,t,n);i||(i=a),s&&s._setNext(a),s=a}}))}return r&&!i?Ns([r],t,n):i}var js="getPlugin",Fs=function(){function e(){var t,n,i,o,s,a=this;function c(e){void 0===e&&(e=null);var t=e;if(!t){var r=n||Rs(null,{},a[pi]);t=i&&i[js]?r[Yr](null,i[js]):r[Yr](null,i)}return t}function l(e,t,r){e&&no(e,gi,[],null,Ui),!r&&t&&(r=t.getProcessTelContext()[$r]());var o=i;i&&i[js]&&(o=i[js]()),a[pi]=t,n=Rs(r,e,t,o)}function u(){var e;t=!1,a[pi]=null,n=null,i=null,s=[],e=[],o={add:function(t){t&&e[Rr](t)},run:function(t,n){zi(e,(function(e){try{e(t,n)}catch(e){Uo(t[Gr](),2,73,"Unexpected error calling unload handler - "+Do(e))}})),e=[]}}}u(),(0,r.Z)(e,a,(function(e){e.initialize=function(e,n,r,i){l(e,n,i),t=!0},e[Wr]=function(t,n){var r,a=e[pi];if(a&&(!t||a===t[pi]())){var c,l=!1,d=t||Ms(null,a,i&&i[js]?i[js]():i),h=n||((r={reason:0})[Br]=!1,r);return e[qr]&&!0===e[qr](d,h,p)?c=!0:p(),c}function p(){if(!l){l=!0,o.run(d,n);var e=s;s=[],zi(e,(function(e){e.rm()})),!0===c&&d[Lr](h),u()}}},e[Jr]=function(t,n){var r=e[pi];if(r&&(!t||r===t[pi]())){var o,s=!1,a=t||As(null,r,i&&i[js]?i[js]():i),c=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(a,c,u)?o=!0:u(),o}function u(){s||(s=!0,l(a.getCfg(),a.core(),a[$r]()))}},e._addHook=function(e){e&&(Ji(e)?s=s.concat(e):s[Rr](e))},oo(e,"_addUnloadCb",(function(){return o}),"add")})),a[Gr]=function(e){return c(e)[Gr]()},a[Mr]=function(){return t},a.setInitialized=function(e){t=e},a[zr]=function(e){i=e},a[Lr]=function(e,t){t?t[Lr](e):i&&Vi(i[mi])&&i[mi](e,null)},a._getTelCtx=c}return e.__ieDyn=1,e}();function Ls(e){var t="ai."+e+".";return function(e){return t+e}}var Ks,Us=Ls("application"),Ws=Ls("device"),Vs=Ls("location"),Hs=Ls("operation"),Bs=Ls("session"),qs=Ls("user"),Js=Ls("cloud"),$s=Ls("internal"),Gs=function(e){function t(){return e.call(this)||this}return(0,i.ne)(t,e),t}((Ks={applicationVersion:Us("ver"),applicationBuild:Us("build"),applicationTypeId:Us("typeId"),applicationId:Us("applicationId"),applicationLayer:Us("layer"),deviceId:Ws("id"),deviceIp:Ws("ip"),deviceLanguage:Ws("language"),deviceLocale:Ws("locale"),deviceModel:Ws("model"),deviceFriendlyName:Ws("friendlyName"),deviceNetwork:Ws("network"),deviceNetworkName:Ws("networkName"),deviceOEMName:Ws("oemName"),deviceOS:Ws("os"),deviceOSVersion:Ws("osVersion"),deviceRoleInstance:Ws("roleInstance"),deviceRoleName:Ws("roleName"),deviceScreenResolution:Ws("screenResolution"),deviceType:Ws("type"),deviceMachineName:Ws("machineName"),deviceVMName:Ws("vmName"),deviceBrowser:Ws("browser"),deviceBrowserVersion:Ws("browserVersion"),locationIp:Vs("ip"),locationCountry:Vs("country"),locationProvince:Vs("province"),locationCity:Vs("city"),operationId:Hs("id"),operationName:Hs("name"),operationParentId:Hs("parentId"),operationRootId:Hs("rootId"),operationSyntheticSource:Hs("syntheticSource"),operationCorrelationVector:Hs("correlationVector"),sessionId:Bs("id"),sessionIsFirst:Bs("isFirst"),sessionIsNew:Bs("isNew"),userAccountAcquisitionDate:qs("accountAcquisitionDate"),userAccountId:qs("accountId"),userAgent:qs("userAgent"),userId:qs("id"),userStoreRegion:qs("storeRegion"),userAuthUserId:qs("authUserId"),userAnonymousUserAcquisitionDate:qs("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:qs("authUserAcquisitionDate"),cloudName:Js("name"),cloudRole:Js("role"),cloudRoleVer:Js("roleVer"),cloudRoleInstance:Js("roleInstance"),cloudEnvironment:Js("environment"),cloudLocation:Js("location"),cloudDeploymentUnit:Js("deploymentUnit"),internalNodeName:$s("nodeName"),internalSdkVersion:$s("sdkVersion"),internalAgentVersion:$s("agentVersion"),internalSnippet:$s("snippet"),internalSdkSrc:$s("sdkSrc")},function(){var e=this;Ks&&Fe(Ks,(function(t,n){e[t]=n}))})),zs=new Gs,Ys=function(e,t,n){var r=this,i=this;i.ver=1,i.sampleRate=100,i.tags={},i[y]=At(e,n)||d,i.data=t,i.time=He(new Date),i.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===r.sampleRate?4:1},tags:1,data:1}},Qs=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t},Xs="duration",Zs="tags",ea="deviceType",ta="data",na="name",ra="traceID",ia="length",oa="stringify",sa="measurements",aa="dataType",ca="envelopeType",la="toString",ua="onLine",da="enqueue",ha="count",pa="push",fa="emitLineDelimitedJson",ga="clear",ma="batchPayloads",va="markAsSent",ya="clearSent",ba="BUFFER_KEY",wa="SENT_BUFFER_KEY",Sa="MAX_BUFFER_SIZE",Ca="namePrefix",_a="maxBatchSizeInBytes",Pa="triggerSend",Ea="diagLog",ka="onunloadDisableBeacon",Ia="isBeaconApiDisabled",Da="_sender",Ta="_senderConfig",xa="_buffer",Oa="enableSessionStorageBuffer",Ra="samplingPercentage",Ma="instrumentationKey",Aa="endpointUrl",Na="customHeaders",ja="disableXhr",Fa="onunloadDisableFetch",La="disableTelemetry",Ka="baseType",Ua="sampleRate",Wa="convertUndefined",Va="_onError",Ha="_onPartialSuccess",Ba="_onSuccess",qa="itemsAccepted",Ja="isRetryDisabled",$a="setRequestHeader",Ga="maxBatchInterval",za="eventsSendRequest",Ya="disableInstrumentationKeyValidation",Qa="getSamplingScore",Xa="baseType",Za="baseData",ec="properties",tc="true";function nc(e,t,n){return no(e,t,n,io)}function rc(e,t,n){Ui(e)||Bi(e,(function(e,r){!function(e){return"number"==typeof e}(r)?$i(r)?t[e]=r:ko()&&(t[e]=Io()[oa](r)):n[e]=r}))}function ic(e,t){Ui(e)||Bi(e,(function(n,r){e[n]=r||t}))}function oc(e,t,n,r){var o=new Ys(e,r,t);nc(o,"sampleRate",n[s]),(n[Za]||{}).startTime&&(o.time=function(e){if(e)return xi?e[Si]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[jr]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}(n[Za].startTime)),o.iKey=n.iKey;var a=n.iKey.replace(/-/g,"");return o[na]=o[na].replace("{0}",a),function(e,t,n){var r=n[Zs]=n[Zs]||{},o=t.ext=t.ext||{},s=t[Zs]=t[Zs]||[],a=o.user;a&&(nc(r,zs.userAuthUserId,a.authId),nc(r,zs.userId,a.id||a.localId));var c=o.app;c&&nc(r,zs.sessionId,c.sesId);var l=o.device;l&&(nc(r,zs.deviceId,l.id||l.localId),nc(r,zs[ea],l.deviceClass),nc(r,zs.deviceIp,l.ip),nc(r,zs.deviceModel,l.model),nc(r,zs[ea],l[ea]));var u=t.ext.web;if(u){nc(r,zs.deviceLanguage,u.browserLang),nc(r,zs.deviceBrowserVersion,u.browserVer),nc(r,zs.deviceBrowser,u.browser);var d=n[ta]=n[ta]||{},h=d[Za]=d[Za]||{},p=h[ec]=h[ec]||{};nc(p,"domain",u.domain),nc(p,"isManual",u.isManual?tc:null),nc(p,"screenRes",u.screenRes),nc(p,"userConsent",u.userConsent?tc:null)}var f=o.os;f&&nc(r,zs.deviceOS,f[na]);var g=o.trace;g&&(nc(r,zs.operationParentId,g.parentID),nc(r,zs.operationName,At(e,g[na])),nc(r,zs.operationId,g[ra]));for(var m={},v=s[ia]-1;v>=0;v--)Bi(s[v],(function(e,t){m[e]=t})),s.splice(v,1);Bi(s,(function(e,t){m[e]=t}));var y=(0,i.uc)((0,i.uc)({},r),m);y[zs.internalSdkVersion]||(y[zs.internalSdkVersion]="javascript:".concat(ac.Version)),n[Zs]=so(y)}(e,n,o),n[Zs]=n[Zs]||[],so(o)}function sc(e,t){Ui(t[Za])&&Uo(e,1,46,"telemetryItem.baseData cannot be null.")}var ac={Version:"2.8.11"};function cc(e,t,n){sc(e,t);var r={},i={};t[Xa]!==Ht[aa]&&(r.baseTypeSource=t[Xa]),t[Xa]===Ht[aa]?(r=t[Za][ec]||{},i=t[Za][sa]||{}):t[Za]&&rc(t[Za],r,i),rc(t[ta],r,i),Ui(n)||ic(r,n);var o=t[Za][na],s=new Ht(e,o,r,i),a=new Qs(Ht[aa],s);return oc(e,Ht[ca],t,a)}function lc(e,t){!function(e,t,n,r,i){if(void 0===i&&(i=!1),e)try{var o=fs(t,r),s=!1;!function(e,t,n){if(t[si])vs(e,gs(e,t[si]),t,n);else{var r=ds.get(e,as,{});Bi(r,(function(r,i){vs(e,i,t,n)})),0===Xi(r)[jr]&&ds.kill(e,as)}}(e,o,(function(e){return!((!o.ns||n)&&e[ai]!==n||(s=!0,0))})),s||ms(e,o,n,i)}catch(e){}}(e,null,null,t)}var uc,dc=function(){function e(t,n){var i=[],o=!1;this._get=function(){return i},this._set=function(e){return i=e},(0,r.Z)(e,this,(function(e){e[da]=function(r){e[ha]()>=n.eventsLimitInMem()?o||(Uo(t,2,105,"Maximum in-memory buffer size reached: "+e[ha](),!0),o=!0):i[pa](r)},e[ha]=function(){return i[ia]},e.size=function(){for(var e=i[ia],t=0;t<i[ia];t++)e+=i[t][ia];return n[fa]()||(e+=2),e},e[ga]=function(){i=[],o=!1},e.getItems=function(){return i.slice(0)},e[ma]=function(e){return e&&e[ia]>0?n[fa]()?e.join("\n"):"["+e.join(",")+"]":null}}))}return e.__ieDyn=1,e}(),hc=function(e){function t(n,i){var o=e.call(this,n,i)||this;return(0,r.Z)(t,o,(function(e,t){e[va]=function(e){t[ga]()},e[ya]=function(e){}})),o}return(0,i.ne)(t,e),t.__ieDyn=1,t}(dc),pc=function(e){function t(n,i){var o=e.call(this,n,i)||this,s=!1;return(0,r.Z)(t,o,(function(e,r){var o=u(t[ba]),a=u(t[wa]),c=e._set(o.concat(a));function l(e,t){var n=[];return zi(t,(function(t){Vi(t)||-1!==function(e,t,n){if(e){if(e[Ci])return e[Ci](t,n);var r=e[jr];try{for(var i=Math.max(0,0);i<r;i++)if(i in e&&e[i]===t)return i}catch(e){}}return-1}(e,t)||n[pa](t)})),n}function u(e){var t=e;try{t=i[Ca]&&i[Ca]()?i[Ca]()+"_"+t:t;var r=function(e,t){var n=wr();if(null!==n)try{return n.getItem(t)}catch(t){yr=!1,Ot(e,2,2,"Browser failed read of session storage. "+nt(t),{exception:Pt(t)})}return null}(n,t);if(r){var o=Io().parse(r);if($i(o)&&(o=Io().parse(o)),o&&Ji(o))return o}}catch(e){Uo(n,1,42," storage key: "+t+", "+to(e),{exception:Do(e)})}return[]}function d(e,t){var r=e;try{r=i[Ca]&&i[Ca]()?i[Ca]()+"_"+r:r;var o=JSON[oa](t);Cr(n,r,o)}catch(e){Cr(n,r,JSON[oa]([])),Uo(n,2,41," storage key: "+r+", "+to(e)+". Buffer cleared",{exception:Do(e)})}}c[ia]>t[Sa]&&(c[ia]=t[Sa]),d(t[wa],[]),d(t[ba],c),e[da]=function(i){e[ha]()>=t[Sa]?s||(Uo(n,2,67,"Maximum buffer size reached: "+e[ha](),!0),s=!0):(r[da](i),d(t[ba],e._get()))},e[ga]=function(){r[ga](),d(t[ba],e._get()),d(t[wa],[]),s=!1},e[va]=function(r){d(t[ba],e._set(l(r,e._get())));var i=u(t[wa]);i instanceof Array&&r instanceof Array&&((i=i.concat(r))[ia]>t[Sa]&&(Uo(n,1,67,"Sent buffer reached its maximum size: "+i[ia],!0),i[ia]=t[Sa]),d(t[wa],i))},e[ya]=function(e){var n=u(t[wa]);n=l(e,n),d(t[wa],n)}})),o}return(0,i.ne)(t,e),t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}(dc),fc=function(){function e(t){(0,r.Z)(e,this,(function(e){function n(e,o){var s="__aiCircularRefCheck",a={};if(!e)return Uo(t,1,48,"cannot serialize object because it is null or undefined",{name:o},!0),a;if(e[s])return Uo(t,2,50,"Circular reference detected while serializing object",{name:o},!0),a;if(!e.aiDataContract){if("measurements"===o)a=i(e,"number",o);else if("properties"===o)a=i(e,"string",o);else if("tags"===o)a=i(e,"string",o);else if(Ji(e))a=r(e,o);else{Uo(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:o},!0);try{Io()[oa](e),a=e}catch(e){Uo(t,1,48,e&&Vi(e[la])?e[la]():"Error serializing object",null,!0)}}return a}return e[s]=!0,Bi(e.aiDataContract,(function(i,s){var c=Vi(s)?1&s():1&s,l=Vi(s)?4&s():4&s,u=2&s,d=void 0!==e[i],h=Wi(e[i])&&null!==e[i];if(!c||d||u){if(!l){var p;void 0!==(p=h?u?r(e[i],i):n(e[i],i):e[i])&&(a[i]=p)}}else Uo(t,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:o})})),delete e[s],a}function r(e,r){var i;if(e)if(Ji(e)){i=[];for(var o=0;o<e[ia];o++){var s=n(e[o],r+"["+o+"]");i[pa](s)}}else Uo(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},Bi(e,(function(e,o){if("string"===n)void 0===o?i[e]="undefined":null===o?i[e]="null":o[la]?i[e]=o[la]():i[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===o)i[e]="undefined";else if(null===o)i[e]="null";else{var s=parseFloat(o);isNaN(s)?i[e]="NaN":i[e]=s}else i[e]="invalid field: "+r+" is of unknown type.",Uo(t,1,i[e],null,!0)}))),i}e.serialize=function(e){var r=n(e,"root");try{return Io()[oa](r)}catch(e){Uo(t,1,48,e&&Vi(e[la])?e[la]():"Error serializing object",null,!0)}}}))}return e.__ieDyn=1,e}(),gc=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[ia]<8;)e=e.concat(e);for(var t=5381,n=0;n<e[ia];++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),mc=function(){var e=new gc,t=new Gs;this[Qa]=function(n){return n[Zs]&&n[Zs][t.userId]?e.getHashCodeScore(n[Zs][t.userId]):n.ext&&n.ext.user&&n.ext.user.id?e.getHashCodeScore(n.ext.user.id):n[Zs]&&n[Zs][t.operationId]?e.getHashCodeScore(n[Zs][t.operationId]):n.ext&&n.ext.telemetryTrace&&n.ext.telemetryTrace[ra]?e.getHashCodeScore(n.ext.telemetryTrace[ra]):100*Math.random()}},vc=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var n=t||Fo(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[Ua]=e,this.samplingScoreGenerator=new mc}return e.prototype.isSampledIn=function(e){var t=this[Ua];return null==t||t>=100||e.baseType===hn[aa]||this.samplingScoreGenerator[Qa](e)<t},e}();function yc(e){try{return e.responseText}catch(e){}return null}function bc(){var e,t;return(e={endpointUrl:function(){return l+u}})[fa]=function(){return!1},e[Ga]=function(){return 15e3},e[_a]=function(){return 102400},e[La]=function(){return!1},e[Oa]=function(){return!0},e[Ja]=function(){return!1},e[Ia]=function(){return!0},e[ja]=function(){return!1},e[Fa]=function(){return!1},e[ka]=function(){return!1},e[Ma]=function(){return t},e[Ca]=function(){return t},e[Ra]=function(){return 100},e[Na]=function(){},e[Wa]=function(){return t},e.eventsLimitInMem=function(){return 1e4},e}var wc=((uc={})[Ht.dataType]=cc,uc[Bt.dataType]=function(e,t,n){sc(e,t);var r=t[Za].message,i=t[Za].severityLevel,o=t[Za][ec]||{},s=t[Za][sa]||{};rc(t[ta],o,s),Ui(n)||ic(o,n);var a=new Bt(e,r,i,o,s),c=new Qs(Bt[aa],a);return oc(e,Bt[ca],t,c)},uc[Jt.dataType]=function(e,t,n){var r;sc(e,t);var i=t[Za];Ui(i)||Ui(i[ec])||Ui(i[ec][Xs])?Ui(t[ta])||Ui(t[ta][Xs])||(r=t[ta][Xs],delete t[ta][Xs]):(r=i[ec][Xs],delete i[ec][Xs]);var o,s=t[Za];((t.ext||{}).trace||{})[ra]&&(o=t.ext.trace[ra]);var a=s.id||o,c=s[na],l=s.uri,u=s[ec]||{},d=s[sa]||{};Ui(s.refUri)||(u.refUri=s.refUri),Ui(s.pageType)||(u.pageType=s.pageType),Ui(s.isLoggedIn)||(u.isLoggedIn=s.isLoggedIn[la]()),Ui(s[ec])||Bi(s[ec],(function(e,t){u[e]=t})),rc(t[ta],u,d),Ui(n)||ic(u,n);var h=new Jt(e,c,l,r,u,d,a),p=new Qs(Jt[aa],h);return oc(e,Jt[ca],t,p)},uc[$t.dataType]=function(e,t,n){sc(e,t);var r=t[Za],i=r[na],o=r.uri||r.url,s=r[ec]||{},a=r[sa]||{};rc(t[ta],s,a),Ui(n)||ic(s,n);var c=new $t(e,i,o,void 0,s,a,r),l=new Qs($t[aa],c);return oc(e,$t[ca],t,l)},uc[cn.dataType]=function(e,t,n){sc(e,t);var r=t[Za][sa]||{},i=t[Za][ec]||{};rc(t[ta],i,r),Ui(n)||ic(i,n);var o=t[Za],s=cn.CreateFromInterface(e,o,i,r),a=new Qs(cn[aa],s);return oc(e,cn[ca],t,a)},uc[hn.dataType]=function(e,t,n){sc(e,t);var r=t[Za],i=r[ec]||{},o=r[sa]||{};rc(t[ta],i,o),Ui(n)||ic(i,n);var s=new hn(e,r[na],r.average,r.sampleCount,r.min,r.max,r.stdDev,i,o),a=new Qs(hn[aa],s);return oc(e,hn[ca],t,a)},uc[Tr.dataType]=function(e,t,n){sc(e,t);var r=t[Za][sa]||{},i=t[Za][ec]||{};rc(t[ta],i,r),Ui(n)||ic(i,n);var o=t[Za];if(Ui(o))return Wo(e,"Invalid input for dependency data"),null;var s=o[ec]&&o[ec][c]?o[ec][c]:"GET",a=new Tr(e,o.id,o.target,o[na],o[Xs],o.success,o.responseCode,s,o.type,o.correlationContext,i,r),l=new Qs(Tr[aa],a);return oc(e,Tr[ca],t,l)},uc),Sc=function(e){function t(){var n,i,c,l,u,d,h,p=e.call(this)||this;p.priority=1001,p.identifier="AppInsightsChannelPlugin",p._senderConfig=bc();var f,g,m,v,y=0;return(0,r.Z)(t,p,(function(e,r){function b(t,r,i,o,s,a){var c=null;if(e._appId||(c=D(a))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!w(i))return void e[Va](r,s);!e[Ta][Ja]()&&R(t)?(T(r),Uo(e[Ea](),2,40,". Response code "+t+". Will retry to send "+r[ia]+" items.")):e[Va](r,s)}else m&&!m.isOnline()?e[Ta][Ja]()||(T(r,10),Uo(e[Ea](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!m.isOnline(),". Will retry to send ").concat(r.length," items."))):(w(i),206===t?(c||(c=D(a)),c&&!e[Ta][Ja]()?e[Ha](r,c):e[Va](r,s)):(n=0,e[Ba](r,o)))}function w(t){return!(d>=10||Ui(t)||""===t||t===e[Ta][Aa]()||(e[Ta][Aa]=function(){return t},++d,0))}function S(e,t){g?g(e,!1):_(e)}function C(t){var n=Eo(),r=e[xa],i=e[Ta][Aa](),o=e._buffer[ma](t),s=new Blob([o],{type:"text/plain;charset=UTF-8"}),a=n.sendBeacon(i,s);return a&&(r[va](t),e._onSuccess(t,t[ia])),a}function _(t,n){if(Ji(t)&&t[ia]>0&&!C(t)){for(var r=[],i=0;i<t[ia];i++){var o=t[i];C([o])||r[pa](o)}r[ia]>0&&(f&&f(r,!0),Uo(e[Ea](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function P(t,n){var r=new XMLHttpRequest,i=e[Ta][Aa]();try{r[o]=!0}catch(e){}r.open("POST",i,n),r[$a]("Content-type","application/json"),Dr(i)&&r[$a](mr[6],mr[7]),zi(Xi(h),(function(e){r[$a](e,h[e])})),r.onreadystatechange=function(){return e._xhrReadyStateChange(r,t,t[ia])},r.onerror=function(n){return e[Va](t,M(r),n)};var s=e._buffer[ma](t);r.send(s),e._buffer[va](t)}function E(t,n){if(Ji(t)){for(var r=t[ia],i=0;i<t[ia];i++)r+=t[i][ia];y+r<=65e3?I(t,!1):To()?_(t):(f&&f(t,!0),Uo(e[Ea](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function k(e,t){I(e,!0)}function I(t,n){var r,i=e[Ta][Aa](),s=e._buffer[ma](t),a=new Blob([s],{type:"application/json"}),c=new Headers,l=s[ia],u=!1,d=!1;Dr(i)&&c.append(mr[6],mr[7]),zi(Xi(h),(function(e){c.append(e,h[e])}));var p=((r={method:"POST",headers:c,body:a})[o]=!0,r);n||(p.keepalive=!0,u=!0,y+=l);var f=new Request(i,p);try{f[o]=!0}catch(e){}e._buffer[va](t);try{fetch(f).then((function(r){n||(y-=l,l=0),d||(d=!0,r.ok?r.text().then((function(e){b(r.status,t,r.url,t[ia],r.statusText,e)})):e[Va](t,r.statusText))})).catch((function(r){n||(y-=l,l=0),d||(d=!0,e[Va](t,r.message))}))}catch(n){d||e[Va](t,Do(n))}u&&!d&&(d=!0,e._onSuccess(t,t[ia]))}function D(t){try{if(t&&""!==t){var n=Io().parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n[qa]&&n.itemsReceived-n.itemsAccepted===n.errors[ia])return n}}catch(n){Uo(e[Ea](),1,43,"Cannot parse the response. "+to(n),{response:t})}return null}function T(t,r){if(void 0===r&&(r=1),t&&0!==t[ia]){var o=e[xa];o[ya](t),n++;for(var s=0,a=t;s<a.length;s++){var c=a[s];o[da](c)}!function(e){var t;if(n<=1)t=10;else{var r=(Math.pow(2,n)-1)/2,o=Math.floor(Math.random()*r*10)+1;o*=e,t=Math.max(Math.min(o,3600),10)}var s=eo()+1e3*t;i=s}(r),x()}}function x(){if(!l&&!c){var t=i?Math.max(0,i-eo()):0,n=Math.max(e[Ta][Ga](),t);l=setTimeout((function(){l=null,e[Pa](!0,null,1)}),n)}}function O(){clearTimeout(l),l=null,i=null}function R(e){return 401===e||403===e||408===e||429===e||500===e||502===e||503===e||504===e}function M(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+yc(e)||0:t}function A(t,n){var r=e[xa],i=Co(),o=new XDomainRequest;o.onload=function(){return e._xdrOnLoad(o,t)},o.onerror=function(n){return e[Va](t,N(o),n)};var s=i&&i.location&&i.location.protocol||"";if(0!==e[Ta][Aa]().lastIndexOf(s,0))return Uo(e[Ea](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void r[ga]();var a=e[Ta][Aa]().replace(/^(https?:)/,"");o.open("POST",a);var c=r[ma](t);o.send(c),r[va](t)}function N(e,t){return e?"XDomainRequest,Response:"+yc(e)||0:t}function j(){e[Da]=null,e[xa]=null,e._appId=null,e._sample=null,h={},m=null,n=0,i=null,c=!1,l=null,u=null,d=0,y=0,f=null,g=null,v=null}j(),e.pause=function(){O(),c=!0},e.resume=function(){c&&(c=!1,i=null,e._buffer.size()>e._senderConfig[_a]()&&e[Pa](!0,null,10),x())},e.flush=function(t,n,r){if(void 0===t&&(t=!0),!c){O();try{e[Pa](t,null,r||1)}catch(t){Uo(e[Ea](),1,22,"flush failed, telemetry will not be collected: "+to(t),{exception:Do(t)})}}},e.onunloadFlush=function(){if(!c)if(!1!==e._senderConfig[ka]()&&!1!==e[Ta][Ia]()||!To())e.flush();else try{e[Pa](!0,S,2)}catch(t){Uo(e[Ea](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+to(t),{exception:Do(t)})}},e.addHeader=function(e,t){h[e]=t},e.initialize=function(t,o,s,a){e.isInitialized()&&Uo(e[Ea](),1,28,"Sender is already initialized"),r.initialize(t,o,s,a);var c=e._getTelCtx(),l=e.identifier;u=new fc(o.logger),n=0,i=null,e[Da]=null,d=0;var h=e[Ea]();v=ys(es("Sender"),o.evtNamespace&&o.evtNamespace()),m=function(e){var t=_o(),n=Eo(),r=!1,i=!0,o=ys(es("OfflineListener"),e);try{if(a(Co())&&(r=!0),t){var s=t.body||t;s.ononline&&a(s)&&(r=!0)}r&&n&&!Ui(n[ua])&&(i=n[ua])}catch(e){r=!1}function a(e){var t=!1;return e&&(t=bs(e,"online",c,o))&&bs(e,"offline",l,o),t}function c(){i=!0}function l(){i=!1}return{isOnline:function(){var e=!0;return r?e=i:n&&!Ui(n[ua])&&(e=n[ua]),e},isListening:function(){return r},unload:function(){var e=Co();if(e&&r){if(lc(e,o),t){var n=t.body||t;Ki(n.ononline)||lc(n,o)}r=!1}}}}(v),Bi(bc(),(function(t,n){e[Ta][t]=function(){var e=c.getConfig(l,t,n());return e||"endpointUrl"!==t||(e=n()),e}})),e._buffer=e[Ta][Oa]()&&Sr()?new pc(h,e[Ta]):new hc(h,e[Ta]),e._sample=new vc(e[Ta][Ra](),h),function(e){return!(Ui(e[Ya])||!e[Ya])||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e[Ma])}(t)||Uo(h,1,100,"Invalid Instrumentation key "+t[Ma]),!Dr(e._senderConfig.endpointUrl())&&e._senderConfig.customHeaders()&&e._senderConfig.customHeaders()[ia]>0&&zi(e[Ta][Na](),(function(e){p.addHeader(e.header,e.value)}));var y=e[Ta],b=null;!y[ja]()&&Oo()?b=A:!y[ja]()&&Ro()&&(b=P),!b&&xo()&&(b=k),f=b||P,!y[Ia]()&&To()&&(b=_),e[Da]=b||P,g=!y[Fa]()&&xo(!0)?E:To()?_:!y[ja]()&&Oo()?A:!y[ja]()&&Ro()?P:f},e.processTelemetry=function(n,r){var i,o=(r=e._getTelCtx(r))[Ea]();try{if(e[Ta][La]())return;if(!n)return void Uo(o,1,7,"Cannot send empty telemetry");if(n.baseData&&!n[Ka])return void Uo(o,1,70,"Cannot send telemetry without baseData and baseType");if(n[Ka]||(n[Ka]="EventData"),!e[Da])return void Uo(o,1,28,"Sender was not initialized");if(i=n,!e._sample.isSampledIn(i))return void Uo(o,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[Ua]});n[s]=e._sample[Ua];var c=e[Ta][Wa]()||void 0,l=n.iKey||e[Ta][Ma](),d=t.constructEnvelope(n,l,o,c);if(!d)return void Uo(o,1,47,"Unable to create an AppInsights envelope");var h=!1;if(n[Zs]&&n[Zs][a]&&(zi(n[Zs][a],(function(e){try{e&&!1===e(d)&&(h=!0,Wo(o,"Telemetry processor check returns false"))}catch(e){Uo(o,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+to(e),{exception:Do(e)},!0)}})),delete n[Zs][a]),h)return;var p=u.serialize(d),f=e[xa];f.size()+p[ia]>e[Ta][_a]()&&e[Pa](!0,null,10),f[da](p),x()}catch(e){Uo(o,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+to(e),{exception:Do(e)})}e.processNext(n,r)},e._xhrReadyStateChange=function(e,t,n){4===e.readyState&&b(e.status,t,e.responseURL,n,M(e),yc(e)||e.response)},e[Pa]=function(t,n,r){if(void 0===t&&(t=!0),!c)try{var i=e[xa];if(e[Ta][La]())i[ga]();else{if(i[ha]()>0){var o=i.getItems();!function(t,n){var r,i=(r="getNotifyMgr",e.core[r]?e.core[r]():e.core._notificationManager);if(i&&i[za])try{i[za](t,n)}catch(t){Uo(e[Ea](),1,74,"send request notification failed: "+to(t),{exception:Do(t)})}}(r||0,t),n?n.call(p,o,t):e[Da](o,t)}new Date}O()}catch(t){var s=function(e){if(void 0===e&&(e=null),!e){var t=Eo()||{};e=t?(t[Xr]||hi)[ii]():hi}var n=(e||hi)[ii]();if(qi(n,ho)){var r=_o()||{};return Math.max(parseInt(n[Zr](ho)[1]),r.documentMode||0)}if(qi(n,po)){var i=parseInt(n[Zr](po)[1]);if(i)return i+4}return null}();(!s||s>9)&&Uo(e[Ea](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+to(t),{exception:Do(t)})}},e._doTeardown=function(t,n){e.onunloadFlush(),m.unload(),j()},e[Va]=function(t,n,r){Uo(e[Ea](),2,26,"Failed to send telemetry.",{message:n}),e._buffer[ya](t)},e[Ha]=function(t,n){for(var r=[],i=[],o=0,s=n.errors.reverse();o<s.length;o++){var a=s[o],c=t.splice(a.index,1)[0];R(a.statusCode)?i[pa](c):r[pa](c)}t[ia]>0&&e[Ba](t,n[qa]),r[ia]>0&&e[Va](r,M(null,["partial success",n[qa],"of",n.itemsReceived].join(" "))),i[ia]>0&&(T(i),Uo(e[Ea](),2,40,"Partial success. Delivered: "+t[ia]+", Failed: "+r[ia]+". Will retry to send "+i[ia]+" our of "+n.itemsReceived+" items"))},e[Ba]=function(t,n){e._buffer[ya](t)},e._xdrOnLoad=function(t,r){var i=yc(t);if(!t||i+""!="200"&&""!==i){var o=D(i);o&&o.itemsReceived&&o.itemsReceived>o[qa]&&!e[Ta][Ja]()?e[Ha](r,o):e[Va](r,N(t))}else n=0,e[Ba](r,0)}})),p}return(0,i.ne)(t,e),t.constructEnvelope=function(e,t,n,r){var o;return o=t===e.iKey||Ui(t)?e:(0,i.uc)((0,i.uc)({},e),{iKey:t}),(wc[o.baseType]||cc)(n,o,r)},t}(Fs);var Cc="initialize",_c="name",Pc="getNotifyMgr",Ec="identifier",kc="push",Ic="isInitialized",Dc="config",Tc="instrumentationKey",xc="logger",Oc="length",Rc="time",Mc="processNext",Ac="getProcessTelContext",Nc="addNotificationListener",jc="removeNotificationListener",Fc="stopPollingInternalLogs",Lc="onComplete",Kc="getPlugin",Uc="flush",Wc="_extensions",Vc="splice",Hc="teardown",Bc="messageId",qc="message",Jc="isAsync",$c="_doTeardown",Gc="update",zc="getNext",Yc="diagLog",Qc="setNextPlugin",Xc="createNew",Zc="cookieCfg",el="indexOf",tl="substring",nl="userAgent",rl="split",il="setEnabled",ol="substr",sl="nodeType",al="apply",cl="replace",ll="enableDebugExceptions",ul="toLowerCase",dl="call",hl="type",pl="handler",fl="listeners",gl="isChildEvt",ml="getCtx",vl="setCtx",yl="complete",bl="traceId",wl="spanId",Sl="traceFlags",Cl="",_l="channels",Pl="core",El="createPerfMgr",kl="disabled",Il="extensionConfig",Dl="processTelemetry",Tl="priority",xl="eventsSent",Ol="eventsDiscarded",Rl="eventsSendRequest",Ml="perfEvent",Al="errorToConsole",Nl="warnToConsole",jl="getPerfMgr",Fl="toISOString",Ll="endsWith",Kl="indexOf",Ul="reduce",Wl="trim",Vl="toString",Hl="__proto__",Bl="constructor",ql=V.RJ,Jl=V.Pw.freeze,$l=(V.Pw.seal,V.Pw.keys),Gl=String[V.hB],zl=Gl[Wl],Yl=Gl[Ll],Ql=(Gl.startsWith,Date[V.hB][Fl]),Xl=Array.isArray,Zl=V.V4[Vl],eu=V.CY[Vl],tu=eu[dl](V.Pw),nu=/-([a-z])/g,ru=/([^\w\d_$])/g,iu=/^(\d+[\w\d_$])/,ou=Object.getPrototypeOf;function su(e){return void 0===e||typeof e===V.jA}function au(e){return null===e||su(e)}function cu(e){return!au(e)}function lu(e){return!(!e||typeof e!==V.fK)}function uu(e){return!(!e||typeof e!==V.cb)}function du(e){var t=e;return t&&mu(t)&&(t=(t=(t=t[cl](nu,(function(e,t){return t.toUpperCase()})))[cl](ru,"_"))[cl](iu,(function(e,t){return"_"+t}))),t}function hu(e,t){if(e)for(var n in e)V.CY[dl](e,n)&&t[dl](e,n,e[n])}function pu(e,t){return!(!e||!t)&&-1!==e[el](t)}var fu=Xl||function(e){return!(!e||"[object Array]"!==Zl[dl](e))};function gu(e){return!(!e||"[object Error]"!==Zl[dl](e))}function mu(e){return"string"==typeof e}function vu(e){return"boolean"==typeof e}function yu(e){var t=!1;if(e&&"object"==typeof e){var n=ou?ou(e):function(e){if(e){if(ou)return ou(e);var t=e[Hl]||e[V.hB]||e[Bl];if(t)return t}return null}(e);n?(n[Bl]&&V.CY[dl](n,Bl)&&(n=n[Bl]),t=typeof n===V.cb&&eu[dl](n)===tu):t=!0}return t}function bu(e){if(e)return Ql?e[Fl]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[Oc]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function wu(e,t,n){var r=e[Oc];try{for(var i=0;i<r&&(!(i in e)||-1!==t[dl](n||e,e[i],i,e));i++);}catch(e){}}function Su(e,t,n){if(e){if(e[Kl])return e[Kl](t,n);var r=e[Oc],i=n||0;try{for(var o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in e&&e[o]===t)return o}catch(e){}}return-1}function Cu(e){return e&&(e=zl&&e[Wl]?e[Wl]():e[cl]?e[cl](/^\s+|(?=\s)\s+$/g,Cl):e),e}var _u=!{toString:null}.propertyIsEnumerable("toString"),Pu=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Eu(e,t,n,r){if(ql)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),ql(e,t,i),!0}catch(e){}return!1}var ku=Jl||function(e){return e};function Iu(){var e=Date;return e.now?e.now():(new e).getTime()}function Du(e){return gu(e)?e[_c]:Cl}function Tu(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(o=n,e[t]=o)),o}function xu(e,t,n){var r;return e?!(r=e[t])&&au(r)&&(r=su(n)?{}:n,e[t]=r):r=su(n)?{}:n,r}function Ou(e,t){return au(e)?t:e}function Ru(e){return!!e}function Mu(e){throw new Error(e)}function Au(e,t,n,r,i){e&&t&&n&&(!1!==i||su(e[t]))&&(e[t]=function(e,t){var n=null,r=null;return uu(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t][al](r,e)}}(n,r))}function Nu(e,t,n,r){return e&&t&&lu(e)&&fu(n)&&wu(n,(function(n){mu(n)&&Au(e,n,t,n,r)})),e}function ju(e,t,n,r,i,o){var s=arguments,a=s[0]||{},c=s[Oc],l=!1,u=1;for(c>0&&vu(a)&&(l=a,a=s[u]||{},u++),lu(a)||(a={});u<c;u++){var d=s[u],h=fu(d),p=lu(d);for(var f in d)if(h&&f in d||p&&V.CY[dl](d,f)){var g=d[f],m=void 0;if(l&&g&&((m=fu(g))||yu(g))){var v=a[f];m?fu(v)||(v=[]):yu(v)||(v={}),g=ju(l,v,g)}void 0!==g&&(a[f]=g)}}return a}var Fu="window",Lu="document",Ku="navigator",Uu="location",Wu="JSON",Vu="crypto",Hu="msCrypto",Bu="msie",qu="trident/",Ju=null,$u=null;function Gu(e){var t=(0,H.Rd)();return t&&t[e]?t[e]:e===Fu&&zu()?window:null}function zu(){return Boolean(typeof window===V.fK&&window)}function Yu(){return Boolean(typeof document===V.fK&&document)?document:Gu(Lu)}function Qu(){return Boolean(typeof navigator===V.fK&&navigator)?navigator:Gu(Ku)}function Xu(){return Boolean(typeof JSON===V.fK&&JSON||null!==Gu(Wu))}function Zu(){return Xu()?JSON||Gu(Wu):null}function ed(){var e=Qu();if(e&&(e[nl]!==$u||null===Ju)){var t=(($u=e[nl])||Cl)[ul]();Ju=pu(t,Bu)||pu(t,qu)}return Ju}function td(e){var t=Object[V.hB].toString[dl](e),n=Cl;return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[_c]+"'":Xu()&&(n=Zu().stringify(e)),t+n}var nd,rd=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],id=null;function od(e,t){return function(){var n=arguments,r=sd(t);if(r){var i=r.listener;i&&i[e]&&i[e][al](i,n)}}}function sd(e){var t,n=id;return n||!0===e.disableDbgExt||(n=id||((t=Gu("Microsoft"))&&(id=t.ApplicationInsights),id)),n?n.ChromeDbgExt:null}function ad(e){return e?'"'+e[cl](/\"/g,Cl)+'"':Cl}function cd(e,t){var n=typeof console!==V.jA?console:Gu("console");if(n){var r="log";n[e]&&(r=e),uu(n[r])&&n[r](t)}}var ld=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i[Bc]=e,i[qc]=(n?"AI: ":"AI (Internal): ")+e;var o=Cl;Xu()&&(o=Zu().stringify(r));var s=(t?" message:"+ad(t):Cl)+(r?" props:"+ad(o):Cl);i[qc]+=s}return e.dataType="MessageData",e}(),ud=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,i,o,s,a=0,c={};(0,r.Z)(e,this,(function(e){function r(t,n){if(!(a>=o)){var r=!0,s="AITR_"+n[Bc];if(c[s]?r=!1:c[s]=!0,r&&(t<=i&&(e.queue[kc](n),a++,l(1===t?"error":"warn",n)),a===o)){var u="Internal events throttle limit per PageView reached for this app.",d=new ld(23,u,!1);e.queue[kc](d),1===t?e[Al](u):e[Nl](u)}}}function l(e,n){var r=sd(t||{});r&&r[Yc]&&r[Yc](e,n)}!function(e){n=Ou(e.loggingLevelConsole,0),i=Ou(e.loggingLevelTelemetry,1),o=Ou(e.maxMessageLimit,25),s=Ou(e[ll],!1)}(t||{}),e.consoleLoggingLevel=function(){return n},e.telemetryLoggingLevel=function(){return i},e.maxInternalMessageLimit=function(){return o},e[ll]=function(){return s},e.throwInternal=function(t,i,o,a,u){void 0===u&&(u=!1);var d=new ld(i,o,u,a);if(s)throw td(d);var h=1===t?Al:Nl;if(su(d[qc]))l("throw"+(1===t?"Critical":"Warning"),d);else{if(u){var p=+d[Bc];!c[p]&&n>=t&&(e[h](d[qc]),c[p]=!0)}else n>=t&&e[h](d[qc]);r(t,d)}},e[Nl]=function(e){cd("warn",e),l("warning",e)},e[Al]=function(e){cd("error",e),l("error",e)},e.resetInternalMessageCount=function(){a=0,c={}},e.logInternalMessage=r}))}return e.__ieDyn=1,e}();function dd(e){return e||new ud}function hd(e,t,n,r,i,o){void 0===o&&(o=!1),dd(e).throwInternal(t,n,r,i,o)}var pd="ctx",fd="ParentContextKey",gd="ChildrenContextKey",md=function(){function e(t,n,r){var i,o=this,s=!1;o.start=Iu(),o[_c]=t,o[Jc]=r,o[gl]=function(){return!1},uu(n)&&(s=Eu(o,"payload",(function(){return!i&&uu(n)&&(i=n(),n=null),i}))),o[ml]=function(t){return t?t===e[fd]||t===e[gd]?o[t]:(o[pd]||{})[t]:null},o[vl]=function(t,n){t&&(t===e[fd]?(o[t]||(o[gl]=function(){return!0}),o[t]=n):t===e[gd]?o[t]=n:(o[pd]=o[pd]||{})[t]=n)},o[yl]=function(){var t=0,r=o[ml](e[gd]);if(fu(r))for(var i=0;i<r[Oc];i++){var a=r[i];a&&(t+=a[Rc])}o[Rc]=Iu()-o.start,o.exTime=o[Rc]-t,o[yl]=function(){},!s&&uu(n)&&(o.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),vd=function(){function e(t){this.ctx={},(0,r.Z)(e,this,(function(e){e.create=function(e,t,n){return new md(e,t,n)},e.fire=function(e){e&&(e[yl](),t&&uu(t[Ml])&&t[Ml](e))},e[vl]=function(t,n){t&&((e[pd]=e[pd]||{})[t]=n)},e[ml]=function(t){return(e[pd]||{})[t]}}))}return e.__ieDyn=1,e}(),yd="CoreUtils.doPerf";function bd(e,t,n,r,i){if(e){var o=e;if(o[jl]&&(o=o[jl]()),o){var s=void 0,a=o[ml](yd);try{if(s=o.create(t(),r,i)){if(a&&s[vl]&&(s[vl](md[fd],a),a[ml]&&a[vl])){var c=a[ml](md[gd]);c||(c=[],a[vl](md[gd],c)),c[kc](s)}return o[vl](yd,s),n(s)}}catch(e){s&&s[vl]&&s[vl]("exception",e)}finally{s&&o.fire(s),o[vl](yd,a)}}}return n()}var wd=4294967296,Sd=4294967295,Cd=!1,_d=123456789,Pd=987654321;function Ed(e){e<0&&(e>>>=0),_d=123456789+e&Sd,Pd=987654321-e&Sd,Cd=!0}function kd(){try{var e=2147483647&Iu();Ed((Math.random()*wd^e)+e)}catch(e){}}function Id(e){var t=0,n=Gu(Vu)||Gu(Hu);return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&Sd),0===t&&ed()&&(Cd||kd(),t=Dd()&Sd),0===t&&(t=Math.floor(wd*Math.random()|0)),e||(t>>>=0),t}function Dd(e){var t=((Pd=36969*(65535&Pd)+(Pd>>16)&Sd)<<16)+(65535&(_d=18e3*(65535&_d)+(_d>>16)&Sd))>>>0&Sd|0;return e||(t>>>=0),t}function Td(e){void 0===e&&(e=22);for(var t=Id()>>>0,n=0,r=Cl;r[Oc]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(Id()<<2&4294967295|3&t)>>>0,n=0);return r}var xd=V.RJ,Od="2.8.11",Rd="."+Td(6),Md=0;function Ad(e){return 1===e[sl]||9===e[sl]||!+e[sl]}function Nd(e,t){return void 0===t&&(t=!1),du(e+Md+++(t?"."+Od:Cl)+Rd)}function jd(e){var t={id:Nd("_aiData-"+(e||Cl)+"."+Od),accept:function(e){return Ad(e)},get:function(e,n,r,i){var o=e[t.id];return o?o[du(n)]:(i&&((o=function(e,t){var n=t[e.id];if(!n){n={};try{Ad(t)&&(function(e,t,n){if(xd)try{return xd(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,n)||(t[e.id]=n))}catch(e){}}return n}(t,e))[du(n)]=r),r)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}function Fd(e,t,n){return!(!e||e[Oc]!==t||e===n||!e.match(/^[\da-f]*$/))}var Ld=jd("plugin");function Kd(e){return Ld.get(e,"state",{},!0)}function Ud(e,t){for(var n,r=[],i=null,o=e[zc]();o;){var s=o[Kc]();s&&(i&&uu(i[Qc])&&uu(s[Dl])&&i[Qc](s),(uu(s[Ic])?s[Ic]():(n=Kd(s))[Ic])||r[kc](s),i=s,o=o[zc]())}wu(r,(function(r){var i=e[Pl]();r[Cc](e.getCfg(),i,t,e[zc]()),n=Kd(r),r[Pl]||n[Pl]||(n[Pl]=i),n[Ic]=!0,delete n[Hc]}))}function Wd(e){return e.sort((function(e,t){var n=0;if(t){var r=uu(t[Dl]);uu(e[Dl])?n=r?e[Tl]-t[Tl]:1:r&&(n=-1)}else n=e?1:-1;return n}))}var Vd="TelemetryPluginChain",Hd="_hasRun",Bd="_getTelCtx",qd=0;function Jd(e,t,n,r){var i=null,o=[];null!==r&&(i=r?function(e,t,n){for(;e;){if(e[Kc]()===n)return e;e=e[zc]()}return Yd([n],t[Dc]||{},t)}(e,n,r):e);var s={_next:function(){var e=i;if(i=e?e[zc]():null,!e){var t=o;t&&t[Oc]>0&&(wu(t,(function(e){try{e.func[dl](e.self,e.args)}catch(e){hd(n[xc],2,73,"Unexpected Exception during onComplete - "+td(e))}})),o=[])}return e},ctx:{core:function(){return n},diagLog:function(){return function(e,t){return(e||{})[xc]||new ud(t)}(n,t)},getCfg:function(){return t},getExtCfg:a,getConfig:function(e,n,r){void 0===r&&(r=!1);var i,o=a(e,null);return o&&!au(o[n])?i=o[n]:t&&!au(t[n])&&(i=t[n]),au(i)?r:i},hasNext:function(){return!!i},getNext:function(){return i},setNext:function(e){i=e},iterate:function(e){for(var t;t=s._next();){var n=t[Kc]();n&&e(n)}},onComplete:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e&&o[kc]({func:e,self:su(t)?s.ctx:t,args:n})}}};function a(e,n,r){var i;if(void 0===n&&(n={}),void 0===r&&(r=0),t){var o=t[Il];o&&e&&(i=o[e])}if(i){if(lu(n)&&0!==r){var s=ju(!0,n,i);t&&2===r&&hu(n,(function(e){if(au(s[e])){var n=t[e];au(n)||(s[e]=n)}})),i=s}}else i=n;return i}return s}function $d(e,t,n,r){var i=Jd(e,t,n,r),o=i.ctx;return o[Mc]=function(e){var t=i._next();return t&&t[Dl](e,o),!t},o[Xc]=function(e,r){return void 0===e&&(e=null),fu(e)&&(e=Yd(e,t,n,r)),$d(e||o[zc](),t,n,r)},o}function Gd(e,t,n){var r=t[Dc]||{},i=Jd(e,r,t,n),o=i.ctx;return o[Mc]=function(e){var t=i._next();return t&&t.unload(o,e),!t},o[Xc]=function(e,n){return void 0===e&&(e=null),fu(e)&&(e=Yd(e,r,t,n)),Gd(e||o[zc](),t,n)},o}function zd(e,t,n){var r=t[Dc]||{},i=Jd(e,r,t,n).ctx;return i[Mc]=function(e){return i.iterate((function(t){uu(t[Gc])&&t[Gc](i,e)}))},i[Xc]=function(e,n){return void 0===e&&(e=null),fu(e)&&(e=Yd(e,r,t,n)),zd(e||i[zc](),t,n)},i}function Yd(e,t,n,r){var i=null,o=!r;if(fu(e)&&e[Oc]>0){var s=null;wu(e,(function(e){if(o||r!==e||(o=!0),o&&e&&uu(e[Dl])){var a=function(e,t,n){var r,i=null,o=uu(e[Dl]),s=uu(e[Qc]),a={getPlugin:function(){return e},getNext:function(){return i},processTelemetry:function(r,l){c(l=l||function(){var r;return e&&uu(e[Bd])&&(r=e[Bd]()),r||(r=$d(a,t,n)),r}(),(function(t){if(!e||!o)return!1;var n=Kd(e);return!n[Hc]&&!n[kl]&&(s&&e[Qc](i),e[Dl](r,t),!0)}),"processTelemetry",(function(){return{item:r}}),!r.sync)||l[Mc](r)},unload:function(t,n){c(t,(function(){var r=!1;if(e){var i=Kd(e),o=e[Pl]||i[Pl];!e||o&&o!==t.core()||i[Hc]||(i[Pl]=null,i[Hc]=!0,i[Ic]=!1,e[Hc]&&!0===e[Hc](t,n)&&(r=!0))}return r}),"unload",(function(){}),n[Jc])||t[Mc](n)},update:function(t,n){c(t,(function(){var r=!1;if(e){var i=Kd(e),o=e[Pl]||i[Pl];!e||o&&o!==t.core()||i[Hc]||e[Gc]&&!0===e[Gc](t,n)&&(r=!0)}return r}),"update",(function(){}),!1)||t[Mc](n)},_id:r=e?e[Ec]+"-"+e[Tl]+"-"+qd++:"Unknown-0-"+qd++,_setNext:function(e){i=e}};function c(t,n,o,s,a){var c=!1,l=e?e[Ec]:Vd,u=t[Hd];return u||(u=t[Hd]={}),t.setNext(i),e&&bd(t[Pl](),(function(){return l+":"+o}),(function(){u[r]=!0;try{var e=i?i._id:Cl;e&&(u[e]=!1),c=n(t)}catch(e){var s=!i||u[i._id];s&&(c=!0),i&&s||hd(t[Yc](),1,73,"Plugin ["+l+"] failed during "+o+" - "+td(e)+", run flags: "+td(u))}}),s,a),c}return ku(a)}(e,t,n);i||(i=a),s&&s._setNext(a),s=a}}))}return r&&!i?Yd([r],t,n):i}var Qd=500;function Xd(e,t,n){t&&fu(t)&&t[Oc]>0&&(wu(t=t.sort((function(e,t){return e[Tl]-t[Tl]})),(function(e){e[Tl]<Qd&&Mu("Channel has invalid priority - "+e[Ec])})),e[kc]({queue:ku(t),chain:Yd(t,n[Dc],n)}))}var Zd="toGMTString",eh="toUTCString",th="cookie",nh="expires",rh="enabled",ih="isCookieUseDisabled",oh="disableCookiesUsage",sh="_ckMgr",ah=null,ch=null,lh=null,uh=Yu(),dh={},hh={};function ph(e){return!e||e.isEnabled()}function fh(e,t){return!!(t&&e&&fu(e.ignoreCookies))&&-1!==e.ignoreCookies[el](t)}function gh(e,t){var n,r=function(e){var t=e[Zc]=e[Zc]||{};if(Tu(t,"domain",e.cookieDomain,cu,au),Tu(t,"path",e.cookiePath||"/",null,au),au(t[rh])){var n=void 0;su(e[ih])||(n=!e[ih]),su(e[oh])||(n=!e[oh]),t[rh]=n}return t}(e||hh),i=r.path||"/",o=r.domain,s=!1!==r[rh],a=((n={isEnabled:function(){var e=s&&mh(t),n=hh[sh];return e&&n&&a!==n&&(e=ph(n)),e}})[il]=function(e){s=!1!==e},n.set=function(e,t,n,s,c){var l,u=!1;if(ph(a)&&!function(e,t){return!!(t&&e&&fu(e.blockedCookies)&&-1!==e.blockedCookies[el](t))||fh(e,t)}(r,e)){var d={},h=Cu(t||Cl),p=h[el](";");if(-1!==p&&(h=Cu(t[tl](0,p)),d=vh(t[tl](p+1))),Tu(d,"domain",s||o,Ru,su),!au(n)){var f=ed();if(su(d[nh])){var g=Iu()+1e3*n;if(g>0){var m=new Date;m.setTime(g),Tu(d,nh,yh(m,f?Zd:eh)||yh(m,f?Zd:eh)||Cl,Ru)}}f||Tu(d,"max-age",Cl+n,null,su)}var v=typeof location===V.fK&&location?location:Gu(Uu);v&&"https:"===v.protocol&&(Tu(d,"secure",null,null,su),null===ch&&(l=(Qu()||{})[nl],ch=!(mu(l)&&(pu(l,"CPU iPhone OS 12")||pu(l,"iPad; CPU OS 12")||pu(l,"Macintosh; Intel Mac OS X 10_14")&&pu(l,"Version/")&&pu(l,"Safari")||pu(l,"Macintosh; Intel Mac OS X 10_14")&&function(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=Yl?e[Ll](t):function(e,t){var n=!1,r=t?t[Oc]:0,i=e?e[Oc]:0;if(r&&i&&i>=r&&!(n=e===t)){for(var o=i-1,s=r-1;s>=0;s--){if(e[o]!=t[s])return!1;o--}n=!0}return n}(e,t)),n}(l,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||pu(l,"Chrome/5")||pu(l,"Chrome/6")||pu(l,"UnrealEngine")&&!pu(l,"Chrome")||pu(l,"UCBrowser/12")||pu(l,"UCBrowser/11")))),ch&&Tu(d,"SameSite","None",null,su)),Tu(d,"path",c||i,null,su),(r.setCookie||Sh)(e,bh(h,d)),u=!0}return u},n.get=function(e){var t=Cl;return ph(a)&&!fh(r,e)&&(t=(r.getCookie||wh)(e)),t},n.del=function(e,t){var n=!1;return ph(a)&&(n=a.purge(e,t)),n},n.purge=function(e,n){var i,o=!1;if(mh(t)){var s=((i={}).path=n||"/",i[nh]="Thu, 01 Jan 1970 00:00:01 GMT",i);ed()||(s["max-age"]="0"),(r.delCookie||Sh)(e,bh(Cl,s)),o=!0}return o},n);return a[sh]=a,a}function mh(e){if(null===ah){ah=!1;try{ah=void 0!==(uh||{})[th]}catch(t){hd(e,2,68,"Cannot access document.cookie - "+Du(t),{exception:td(t)})}}return ah}function vh(e){var t={};return e&&e[Oc]&&wu(Cu(e)[rl](";"),(function(e){if(e=Cu(e||Cl)){var n=e[el]("=");-1===n?t[e]=null:t[Cu(e[tl](0,n))]=Cu(e[tl](n+1))}})),t}function yh(e,t){return uu(e[t])?e[t]():null}function bh(e,t){var n=e||Cl;return hu(t,(function(e,t){n+="; "+e+(au(t)?Cl:"="+t)})),n}function wh(e){var t=Cl;if(uh){var n=uh[th]||Cl;lh!==n&&(dh=vh(n),lh=n),t=Cu(dh[e]||Cl)}return t}function Sh(e,t){uh&&(uh[th]=e+"="+t)}function Ch(){var e=[];return{add:function(t){t&&e[kc](t)},run:function(t,n){wu(e,(function(e){try{e(t,n)}catch(e){hd(t[Yc](),2,73,"Unexpected error calling unload handler - "+td(e))}})),e=[]}}}var _h="getPlugin",Ph=function(){function e(){var t,n,i,o,s,a=this;function c(e){void 0===e&&(e=null);var t=e;if(!t){var r=n||$d(null,{},a[Pl]);t=i&&i[_h]?r[Xc](null,i[_h]):r[Xc](null,i)}return t}function l(e,t,r){e&&Tu(e,Il,[],null,au),!r&&t&&(r=t[Ac]()[zc]());var o=i;i&&i[_h]&&(o=i[_h]()),a[Pl]=t,n=$d(r,e,t,o)}function u(){t=!1,a[Pl]=null,n=null,i=null,s=[],o=Ch()}u(),(0,r.Z)(e,a,(function(e){e[Cc]=function(e,n,r,i){l(e,n,i),t=!0},e[Hc]=function(t,n){var r,a=e[Pl];if(a&&(!t||a===t[Pl]())){var c,l=!1,d=t||Gd(null,a,i&&i[_h]?i[_h]():i),h=n||((r={reason:0})[Jc]=!1,r);return e[$c]&&!0===e[$c](d,h,p)?c=!0:p(),c}function p(){if(!l){l=!0,o.run(d,n);var e=s;s=[],wu(e,(function(e){e.rm()})),!0===c&&d[Mc](h),u()}}},e[Gc]=function(t,n){var r=e[Pl];if(r&&(!t||r===t[Pl]())){var o,s=!1,a=t||zd(null,r,i&&i[_h]?i[_h]():i),c=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(a,c,u)?o=!0:u(),o}function u(){s||(s=!0,l(a.getCfg(),a.core(),a[zc]()))}},e._addHook=function(e){e&&(fu(e)?s=s.concat(e):s[kc](e))},Au(e,"_addUnloadCb",(function(){return o}),"add")})),a[Yc]=function(e){return c(e)[Yc]()},a[Ic]=function(){return t},a.setInitialized=function(e){t=e},a[Qc]=function(e){i=e},a[Mc]=function(e,t){t?t[Mc](e):i&&uu(i[Dl])&&i[Dl](e,null)},a._getTelCtx=c}return e.__ieDyn=1,e}(),Eh=function(e){function t(){var n,i,o=e.call(this)||this;function s(){n=0,i=[]}return o.identifier="TelemetryInitializerPlugin",o.priority=199,s(),(0,r.Z)(t,o,(function(e,t){e.addTelemetryInitializer=function(e){var t={id:n++,fn:e};return i[kc](t),{remove:function(){wu(i,(function(e,n){if(e.id===t.id)return i[Vc](n,1),-1}))}}},e[Dl]=function(t,n){for(var r=!1,o=i[Oc],s=0;s<o;++s){var a=i[s];if(a)try{if(!1===a.fn[al](null,[t])){r=!0;break}}catch(e){hd(n[Yc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Du(e),{exception:td(e)},!0)}}r||e[Mc](t,n)},e[$c]=function(){s()}})),o}return(0,i.ne)(t,e),t.__ieDyn=1,t}(Ph),kh="Plugins must provide initialize method",Ih="_notificationManager",Dh="SDK is still unloading...",Th={loggingLevelConsole:1};function xh(e,t){return new vd(t)}function Oh(e,t){var n=!1;return wu(t,(function(t){if(t===e)return n=!0,-1})),n}var Rh=function(){function e(){var t,n,o,s,a,c,l,u,d,h,p,f,g,m,v,y,b,w,S,C,_=0;(0,r.Z)(e,this,(function(e){function r(){n=!1,t=ju(!0,{},Th),e[Dc]=t,e[xc]=new ud(t),e[Wc]=[],v=new Eh,o=[],s=null,a=null,c=null,l=null,u=null,h=null,d=[],p=null,f=null,g=null,m=!1,y=null,b=Nd("AIBaseCore",!0),w=Ch(),C=null}function P(){return $d(I(),t,e)}function E(n){var r=function(e,t,n){var r,i=[],o={};return wu(n,(function(n){(au(n)||au(n[Cc]))&&Mu(kh);var r=n[Tl],s=n[Ec];n&&r&&(au(o[r])?o[r]=s:function(e,t){dd(e)[Nl](t)}(e,"Two extensions have same priority #"+r+" - "+o[r]+", "+s)),(!r||r<t)&&i[kc](n)})),(r={all:n})[Pl]=i,r}(e[xc],Qd,d);h=r[Pl],u=null;var i=r.all;if(g=ku(function(e,t,n){var r=[];if(e&&wu(e,(function(e){return Xd(r,e,n)})),t){var i=[];wu(t,(function(e){e[Tl]>Qd&&i[kc](e)})),Xd(r,i,n)}return r}(f,i,e)),p){var o=Su(i,p);-1!==o&&i[Vc](o,1),-1!==(o=Su(h,p))&&h[Vc](o,1),p._setQueue(g)}else p=function(e,t){function n(){return $d(null,t[Dc],t,null)}function r(e,t,n,r){var i=e?e[Oc]+1:1;function o(){0==--i&&(r&&r(),r=null)}i>0&&wu(e,(function(e){if(e&&e.queue[Oc]>0){var r=e.chain,s=t[Xc](r);s[Lc](o),n(s)}else i--})),o()}var i=!1,o={identifier:"ChannelControllerPlugin",priority:Qd,initialize:function(t,n,r,o){i=!0,wu(e,(function(e){e&&e.queue[Oc]>0&&Ud($d(e.chain,t,n),r)}))},isInitialized:function(){return i},processTelemetry:function(t,i){r(e,i||n(),(function(e){e[Mc](t)}),(function(){i[Mc](t)}))},update:function(t,n){var i=n||{reason:0};return r(e,t,(function(e){e[Mc](i)}),(function(){t[Mc](i)})),!0},pause:function(){r(e,n(),(function(e){e.iterate((function(e){e.pause&&e.pause()}))}),null)},resume:function(){r(e,n(),(function(e){e.iterate((function(e){e.resume&&e.resume()}))}),null)},teardown:function(t,n){var o=n||{reason:0,isAsync:!1};return r(e,t,(function(e){e[Mc](o)}),(function(){t[Mc](o),i=!1})),!0},getChannel:function(t){var n=null;return e&&e[Oc]>0&&wu(e,(function(e){if(e&&e.queue[Oc]>0&&(wu(e.queue,(function(e){if(e[Ec]===t)return n=e,-1})),n))return-1})),n},flush:function(t,i,o,s){var a=1,c=!1,l=null;function u(){a--,c&&0===a&&(l&&(clearTimeout(l),l=null),i&&i(c),i=null)}return s=s||5e3,r(e,n(),(function(e){e.iterate((function(e){if(e[Uc]){a++;var n=!1;e[Uc](t,(function(){n=!0,u()}),o)||n||(t&&null==l?l=setTimeout((function(){l=null,u()}),s):u())}}))}),(function(){c=!0,u()})),!0},_setQueue:function(t){e=t}};return o}(g,e);i[kc](p),h[kc](p),e[Wc]=Wd(i),p[Cc](t,e,i),Ud(P(),i),e[Wc]=ku(Wd(h||[])).slice(),n&&function(t){var n=zd(I(),e);e._updateHook&&!0===e._updateHook(n,t)||n[Mc](t)}(n)}function k(t){var n,r=null,i=null;return wu(e[Wc],(function(e){if(e[Ec]===t&&e!==p&&e!==v)return i=e,-1})),!i&&p&&(i=p.getChannel(t)),i&&((n={plugin:i})[il]=function(e){Kd(i)[kl]=!e},n.isEnabled=function(){var e=Kd(i);return!e[Hc]&&!e[kl]},n.remove=function(e,t){var n;void 0===e&&(e=!0);var r=[i],o=((n={reason:1})[Jc]=e,n);D(r,o,(function(e){e&&E({reason:32,removed:r}),t&&t(e)}))},r=n),r}function I(){if(!u){var n=(h||[]).slice();-1===Su(n,v)&&n[kc](v),u=Yd(Wd(n),t,e)}return u}function D(n,r,i){if(n&&n[Oc]>0){var o=Gd(Yd(n,t,e),e);o[Lc]((function(){var e=!1,t=[];wu(d,(function(r,i){Oh(r,n)?e=!0:t[kc](r)})),d=t;var r=[];f&&(wu(f,(function(t,i){var o=[];wu(t,(function(t){Oh(t,n)?e=!0:o[kc](t)})),r[kc](o)})),f=r),i&&i(e)})),o[Mc](r)}else i(!1)}function T(){var n=e[xc]?e[xc].queue:[];n&&(wu(n,(function(n){var r,i=((r={})[_c]=y||"InternalMessageId: "+n[Bc],r.iKey=Ou(t[Tc]),r.time=bu(new Date),r.baseType=ld.dataType,r.baseData={message:n[qc]},r);e.track(i)})),n[Oc]=0)}function x(e,t,n,r){return p?p[Uc](e,t,n||6,r):(t&&t(!1),!0)}function O(t){var n=e[xc];n?hd(n,2,73,t):Mu(t)}r(),e[Ic]=function(){return n},e[Cc]=function(r,o,a,l){var u,h;m&&Mu(Dh),e[Ic]()&&Mu("Core should not be initialized more than once"),t=r||{},e[Dc]=t,au(r[Tc])&&Mu("Please provide instrumentation key"),s=l,e[Ih]=l,!0===(h=Ou(t.disableDbgExt))&&S&&(s[jc](S),S=null),s&&!S&&!0!==h&&(S=function(e){if(!nd){nd={};for(var t=0;t<rd[Oc];t++)nd[rd[t]]=od(rd[t],e)}return nd}(t),s[Nc](S)),!(u=Ou(t.enablePerfMgr))&&c&&(c=null),u&&xu(t,El,xh),xu(t,Il,{}).NotificationManager=s,a&&(e[xc]=a);var p=xu(t,"extensions",[]);(d=[])[kc].apply(d,(0,i.$h)((0,i.$h)([],o,!1),p,!1)),f=xu(t,_l,[]),E(null),g&&0!==g[Oc]||Mu("No "+_l+" available"),n=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return g&&wu(g,(function(t){e[kc](t.queue)})),ku(e)},e.track=function(n){n.iKey=n.iKey||t[Tc],n[Rc]=n[Rc]||bu(new Date),n.ver=n.ver||"4.0",!m&&e[Ic]()?P()[Mc](n):o[kc](n)},e[Ac]=P,e[Pc]=function(){return s||(s=function(){var e;return(0,H.pu)(((e={})[Nc]=function(e){},e[jc]=function(e){},e[xl]=function(e){},e[Ol]=function(e,t){},e[Rl]=function(e,t){},e))}(),e[Ih]=s),s},e[Nc]=function(e){s&&s[Nc](e)},e[jc]=function(e){s&&s[jc](e)},e.getCookieMgr=function(){return l||(l=gh(t,e[xc])),l},e.setCookieMgr=function(e){l=e},e[jl]=function(){if(!a&&!c&&Ou(t.enablePerfMgr)){var n=Ou(t[El]);uu(n)&&(c=n(e,e[Pc]()))}return a||c||null},e.setPerfMgr=function(e){a=e},e.eventCnt=function(){return o[Oc]},e.releaseQueue=function(){if(n&&o[Oc]>0){var e=o;o=[],wu(e,(function(e){P()[Mc](e)}))}},e.pollInternalLogs=function(e){y=e||null;var n=Ou(t.diagnosticLogInterval);return n&&n>0||(n=1e4),_&&clearInterval(_),_=setInterval((function(){T()}),n)},e[Fc]=function(){_&&(clearInterval(_),_=0,T())},Nu(e,(function(){return v}),["addTelemetryInitializer"]),e.unload=function(t,i,o){var s;void 0===t&&(t=!0),n||Mu("SDK is not initialized"),m&&Mu(Dh);var a=((s={reason:50})[Jc]=t,s.flushComplete=!1,s),c=Gd(I(),e);function l(t){a.flushComplete=t,m=!0,w.run(c,a),e[Fc](),c[Mc](a)}c[Lc]((function(){r(),i&&i(a)}),e),x(t,l,6,o)||l(!1)},e[Kc]=k,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void O(kh);var i=k(e[Ec]);if(i&&!t)return r&&r(!1),void O("Plugin ["+e[Ec]+"] is already loaded!");var o={reason:16};function s(t){d[kc](e),o.added=[e],E(o),r&&r(!0)}if(i){var a=[i.plugin];D(a,{reason:2,isAsync:!!n},(function(e){e?(o.removed=a,o.reason|=32,s()):r&&r(!1)}))}else s()},e.evtNamespace=function(){return b},e[Uc]=x,e.getTraceCtx=function(e){var t;return C||(t={},C={getName:function(){return t[_c]},setName:function(e){t[_c]=e},getTraceId:function(){return t[bl]},setTraceId:function(e){Fd(e,32,"00000000000000000000000000000000")&&(t[bl]=e)},getSpanId:function(){return t[wl]},setSpanId:function(e){Fd(e,16,"0000000000000000")&&(t[wl]=e)},getTraceFlags:function(){return t[Sl]},setTraceFlags:function(e){t[Sl]=e}}),C},e.setTraceCtx=function(e){C=e||null},Au(e,"addUnloadCb",(function(){return w}),"add")}))}return e.__ieDyn=1,e}();function Mh(e,t,n,r){wu(e,(function(e){if(e&&e[t])if(n)setTimeout((function(){return r(e)}),0);else try{r(e)}catch(e){}}))}var Ah=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;(0,r.Z)(e,this,(function(e){e[Nc]=function(t){e.listeners[kc](t)},e[jc]=function(t){for(var n=Su(e[fl],t);n>-1;)e.listeners[Vc](n,1),n=Su(e[fl],t)},e[xl]=function(t){Mh(e[fl],xl,!0,(function(e){e[xl](t)}))},e[Ol]=function(t,n){Mh(e[fl],Ol,!0,(function(e){e[Ol](t,n)}))},e[Rl]=function(t,n){Mh(e[fl],Rl,n,(function(e){e[Rl](t,n)}))},e[Ml]=function(t){t&&(!n&&t[gl]()||Mh(e[fl],Ml,!1,(function(e){t[Jc]?setTimeout((function(){return e[Ml](t)}),0):e[Ml](t)})))}}))}return e.__ieDyn=1,e}(),Nh=function(e){function t(){var n=e.call(this)||this;return(0,r.Z)(t,n,(function(e,t){function n(t){var n=e[Pc]();n&&n[Ol]([t],2)}e[Cc]=function(e,n,r,i){t[Cc](e,n,r||new ud(e),i||new Ah(e))},e.track=function(r){bd(e[jl](),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),Mu("Invalid telemetry item")),function(e){au(e[_c])&&(n(e),Mu("telemetry name required"))}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)}})),n}return(0,i.ne)(t,e),t.__ieDyn=1,t}(Rh),jh="instrumentationKey",Fh="connectionString",Lh="diagnosticLogInterval",Kh="on",Uh="attachEvent",Wh="addEventListener",Vh="events",Hh=(Nd("aiEvtPageHide"),Nd("aiEvtPageShow"),/\.[\.]+/g),Bh=/[\.]+$/,qh=1,Jh=jd("events"),$h=/^([^.]*)(?:\.(.+)|)/;function Gh(e){return e&&e[cl]?e[cl](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Cl):e}function zh(e,t,n,r,i){var o;void 0===i&&(i=!1);var s=!1;if(e)try{var a=function(e,t){var n;if(t){var r=Cl;fu(t)?(r=Cl,wu(t,(function(e){(e=Gh(e))&&("."!==e[0]&&(e="."+e),r+=e)}))):r=Gh(t),r&&("."!==r[0]&&(r="."+r),e=(e||Cl)+r)}var i=$h.exec(e||Cl)||[];return(n={})[hl]=i[1],n.ns=(i[2]||Cl).replace(Hh,".").replace(Bh,Cl)[rl](".").sort().join("."),n}(t,r);if(s=function(e,t,n,r){var i=!1;return e&&t&&t[hl]&&n&&(e[Wh]?(e[Wh](t[hl],n,r),i=!0):e[Uh]&&(e[Uh](Kh+t[hl],n),i=!0)),i}(e,a,n,i),s&&Jh.accept(e)){var c=((o={guid:qh++,evtName:a})[pl]=n,o.capture=i,o);(function(e,t,n){void 0===n&&(n=!0);var r=Jh.get(e,Vh,{},n),i=r[t];return i||(i=r[t]=[]),i})(e,a.type)[kc](c)}}catch(e){}return s}var Yh,Qh=null;function Xh(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=Cl,r=0;r<4;r++)n+=t[15&(e=Id())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Id())|0];return n[ol](0,8)+n[ol](9,4)+"4"+n[ol](13,3)+i+n[ol](16,3)+n[ol](19,12)}var Zh,ep={_canUseCookies:void 0,isTypeof:function(e,t){return typeof e===t},isUndefined:su,isNullOrUndefined:au,hasOwnProperty:function(e,t){return!(!e||!V.CY[dl](e,t))},isFunction:uu,isObject:lu,isDate:function(e){return!(!e||"[object Date]"!==Zl[dl](e))},isArray:fu,isError:gu,isString:mu,isNumber:function(e){return"number"==typeof e},isBoolean:vu,toISOString:bu,arrForEach:wu,arrIndexOf:Su,arrMap:function(e,t,n){var r;if(e){if(e.map)return e.map(t,n);var i=e[Oc],o=n||e;r=new Array(i);try{for(var s=0;s<i;s++)s in e&&(r[s]=t[dl](o,e[s],e))}catch(e){}}return r},arrReduce:function(e,t,n){var r;if(e){if(e[Ul])return e[Ul](t,n);var i=e[Oc],o=0;if(arguments[Oc]>=3)r=arguments[2];else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=t(r,e[o],o,e)),o++}return r},strTrim:Cu,objCreate:H.pu,objKeys:function(e){var t=typeof e;if(t===V.cb||t===V.fK&&null!==e||(0,H.ZU)("objKeys called on non-object"),!_u&&$l)return $l(e);var n=[];for(var r in e)e&&V.CY[dl](e,r)&&n[kc](r);if(_u)for(var i=Pu[Oc],o=0;o<i;o++)e&&V.CY[dl](e,Pu[o])&&n[kc](Pu[o]);return n},objDefineAccessors:Eu,addEventHandler:function(e,t,n){var r=!1,i=zu()?window:Gu(Fu);i&&(r=zh(i,e,t,n),r=zh(i.body,e,t,n)||r);var o=Yu();return o&&(r=zh(o,e,t,n)||r),r},dateNow:Iu,isIE:ed,disableCookies:function(){var e,t,n,r;(n=function(e,t){var n=gh[sh]||hh[sh];return n||(n=gh[sh]=gh(e,t),hh[sh]=n),n}(e,t),r=ep._canUseCookies,null===Qh&&(Qh=[],Yh=r,Eu(ep,"_canUseCookies",(function(){return Yh}),(function(e){Yh=e,wu(Qh,(function(t){t[il](e)}))}))),-1===Su(Qh,n)&&Qh[kc](n),vu(r)&&n[il](r),vu(Yh)&&n[il](Yh),n)[il](!1)},newGuid:function(){var e=Xh();return e[tl](0,8)+"-"+e[tl](8,12)+"-"+e[tl](12,16)+"-"+e[tl](16,20)+"-"+e[tl](20)},perfNow:function(){var e=Gu("performance");return e&&e.now?e.now():Iu()},newId:Td,randomValue:function(e){return e>0?Math.floor(Id()/Sd*(e+1))>>>0:0},random32:Id,mwcRandomSeed:function(e){e?Ed(e):kd()},mwcRandom32:Dd,generateW3CId:Xh};function tp(e){var t,n={};return hu(e,(function(e,t){n[e]=t,n[t]=e})),t=n,Jl&&hu(t,(function(e,t){(fu(t)||lu(t))&&Jl(t)})),ku(t)}var np="Failed",rp=np+"MonitorAjax",ip="Track",op="Start",sp="Stop",ap="Event",cp="AuthContext",lp="Exception",up="Local",dp="Session",hp="Storage",pp="Browser",fp="Cannot",gp="Buffer",mp="InstrumentationKey",vp=(tp({CRITICAL:1,WARNING:2}),tp(((Zh={})[pp+"DoesNotSupport"+up+hp]=0,Zh[pp+fp+"Read"+up+hp]=1,Zh[pp+fp+"Read"+dp+hp]=2,Zh[pp+fp+"Write"+up+hp]=3,Zh[pp+fp+"Write"+dp+hp]=4,Zh[pp+np+"RemovalFrom"+up+hp]=5,Zh[pp+np+"RemovalFrom"+dp+hp]=6,Zh[fp+"SendEmptyTelemetry"]=7,Zh.ClientPerformanceMathError=8,Zh["ErrorParsingAI"+dp+"Cookie"]=9,Zh.ErrorPVCalc=10,Zh[lp+"WhileLoggingError"]=11,Zh[np+"AddingTelemetryTo"+gp]=12,Zh[rp+"Abort"]=13,Zh[rp+"Dur"]=14,Zh[rp+"Open"]=15,Zh[rp+"RSC"]=16,Zh[rp+"Send"]=17,Zh[rp+"GetCorrelationHeader"]=18,Zh[np+"ToAddHandlerForOnBeforeUnload"]=19,Zh[np+"ToSendQueuedTelemetry"]=20,Zh[np+"ToReportDataLoss"]=21,Zh["Flush"+np]=22,Zh.MessageLimitPerPVExceeded=23,Zh.MissingRequiredFieldSpecification=24,Zh.NavigationTimingNotSupported=25,Zh.OnError=26,Zh[dp+"RenewalDateIsZero"]=27,Zh.SenderNotInitialized=28,Zh[op+ip+ap+np]=29,Zh[sp+ip+ap+np]=30,Zh[op+ip+np]=31,Zh[sp+ip+np]=32,Zh.TelemetrySampledAndNotSent=33,Zh[ip+ap+np]=34,Zh[ip+lp+np]=35,Zh[ip+"Metric"+np]=36,Zh[ip+"PV"+np]=37,Zh[ip+"PV"+np+"Calc"]=38,Zh[ip+"Trace"+np]=39,Zh["Transmission"+np]=40,Zh[np+"ToSet"+hp+gp]=41,Zh[np+"ToRestore"+hp+gp]=42,Zh.InvalidBackendResponse=43,Zh[np+"ToFixDepricatedValues"]=44,Zh.InvalidDurationValue=45,Zh.TelemetryEnvelopeInvalid=46,Zh.CreateEnvelopeError=47,Zh[fp+"SerializeObject"]=48,Zh[fp+"SerializeObjectNonSerializable"]=49,Zh.CircularReferenceDetected=50,Zh["Clear"+cp+np]=51,Zh[lp+"Truncated"]=52,Zh.IllegalCharsInName=53,Zh.ItemNotInArray=54,Zh.MaxAjaxPerPVExceeded=55,Zh.MessageTruncated=56,Zh.NameTooLong=57,Zh.SampleRateOutOfRange=58,Zh["Set"+cp+np]=59,Zh["Set"+cp+np+"AccountName"]=60,Zh.StringValueTooLong=61,Zh.StartCalledMoreThanOnce=62,Zh.StopCalledWithoutStart=63,Zh["TelemetryInitializer"+np]=64,Zh.TrackArgumentsNotSpecified=65,Zh.UrlTooLong=66,Zh[dp+hp+gp+"Full"]=67,Zh[fp+"AccessCookie"]=68,Zh.IdTooLong=69,Zh.InvalidEvent=70,Zh[rp+"SetRequestHeader"]=71,Zh["Send"+pp+"InfoOnUserInit"]=72,Zh["Plugin"+lp]=73,Zh["Notification"+lp]=74,Zh.SnippetScriptLoadFailure=99,Zh["Invalid"+mp]=100,Zh[fp+"ParseAiBlobValue"]=101,Zh.InvalidContentBlob=102,Zh[ip+"PageAction"+ap+np]=103,Zh[np+"AddingCustomDefinedRequestContext"]=104,Zh["InMemory"+hp+gp+"Full"]=105,Zh[mp+"Deprecation"]=106,Zh))),yp=fr({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),bp=function(){function e(t){var n=new Nh;(au(t)||au(t[jh])&&au(t[Fh]))&&Mu("Invalid input configuration"),(0,r.Z)(e,this,(function(e){if(t[Fh]){var r=function(e){if(!e)return{};var t=$e(e[h](";"),(function(e,t){var n=t[h]("=");if(2===n[p]){var r=n[0][f](),i=n[1];e[r]=i}return e}),{});if(Qe(t)[p]>0){if(t.endpointsuffix){var n=t.location?t.location+".":"";t[g]=t[g]||"https://"+n+"dc."+t.endpointsuffix}t[g]=t[g]||l}return t}(t[Fh]),i=r.ingestionendpoint;t.endpointUrl=i?i+u:t.endpointUrl,t[jh]=r.instrumentationkey||t[jh]}function o(){n.initialize(e.config,[new Sc]),n.pollInternalLogs()}e.config=t,o(),e.initialize=o,e.getSKUDefaults=function(){e.config[Lh]=e.config[Lh]&&e.config[Lh]>0?e.config[Lh]:1e4},e.getSKUDefaults(),Nu(e,n,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"])}))}return e.__ieDyn=1,e}()},29141:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>L});var i,o="undefined",s="constructor",a="prototype",c="function",l="_dynInstFuncs",u="_isDynProxy",d="_dynClass",h="_dynCls$",p="_dynInstChk",f=p,g="_dfOpts",m="_unknown_",v="__proto__",y="_dyn"+v,b="__dynProto$Gbl",w="_dynInstProto",S="useBaseInst",C="setInstFuncs",_=Object,P=_.getPrototypeOf,E=_.getOwnPropertyNames,k=(typeof globalThis!==o&&(i=globalThis),i||typeof self===o||(i=self),i||typeof window===o||(i=window),i||typeof n.g===o||(i=n.g),i||{}),I=k[b]||(k[b]={o:(r={},r[C]=!0,r[S]=!0,r),n:1e3});function D(e,t){return e&&_[a].hasOwnProperty.call(e,t)}function T(e){return e&&(e===_[a]||e===Array[a])}function x(e){return T(e)||e===Function[a]}function O(e){var t;if(e){if(P)return P(e);var n=e[v]||e[a]||(e[s]?e[s][a]:null);t=e[y]||n,D(e,y)||(delete e[w],t=e[y]=e[w]||e[y],e[w]=n)}return t}function R(e,t){var n=[];if(E)n=E(e);else for(var r in e)"string"==typeof r&&D(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function M(e,t,n){return t!==s&&typeof e[t]===c&&(n||D(e,t))}function A(e){throw new TypeError("DynamicProto: "+e)}function N(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function j(e,t,n,r,i){if(!T(e)){var o=n[l]=n[l]||{},s=o[t]=o[t]||{};!1!==o[f]&&(o[f]=!!i),R(n,(function(t){M(n,t,!1)&&n[t]!==r[t]&&(s[t]=n[t],delete n[t],(!D(e,t)||e[t]&&!e[t][u])&&(e[t]=function(e,t){var n=function(){var r=function(e,t,n,r){var i=null;if(e&&D(n,d)){var o=e[l]||{};if((i=(o[n[d]]||{})[t])||A("Missing ["+t+"] "+c),!i[p]&&!1!==o[f]){for(var s=!D(e,t),a=O(e),u=[];s&&a&&!x(a)&&!N(u,a);){var h=a[t];if(h){s=h===r;break}u.push(a),a=O(a)}try{s&&(e[t]=i),i[p]=1}catch(e){o[f]=!1}}}return i}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=O(t)[e]),typeof r!==c&&A("["+e+"] is not a "+c),r}(t,e,n);return r.apply(this,arguments)};return n[u]=1,n}(e,t)))}))}}function F(e,t){return D(e,a)?e.name||t||m:((e||{})[s]||{}).name||t||m}function L(e,t,n,r){D(e,a)||A("theClass is an invalid class definition.");var i=e[a];(function(e,t){if(P){for(var n=[],r=O(t);r&&!x(r)&&!N(n,r);){if(r===e)return!0;n.push(r),r=O(r)}return!1}return!0})(i,t)||A("["+F(e)+"] not in hierarchy of ["+F(t)+"]");var o=null;D(i,d)?o=i[d]:(o=h+F(e,"_")+"$"+I.n,I.n++,i[d]=o);var s=L[g],c=!!s[S];c&&r&&void 0!==r[S]&&(c=!!r[S]);var p=function(e){var t={};return R(e,(function(n){!t[n]&&M(e,n,!1)&&(t[n]=e[n])})),t}(t),m=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[u]&&r){var o=e[l]||{};!1!==o[f]&&(i=(o[t[d]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o={};R(n,(function(e){o[e]=i(t,n,e)}));for(var s=O(e),a=[];s&&!x(s)&&!N(a,s);)R(s,(function(e){!o[e]&&M(s,e,!P)&&(o[e]=i(t,s,e))})),a.push(s),s=O(s);return o}(i,t,p,c);n(t,m);var v=!!P&&!!s[C];v&&r&&(v=!!r[C]),j(i,o,t,p,!1!==v)}L[g]=I.o},80217:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(66828);var i;!function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(i||(i={}));class o{constructor(e,t){this._instantiationStatus=i.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==i.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){this._telemetryClient||this._instantiationStatus!==i.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.sendEventData(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.sendErrorData(e,t))),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===i.NOT_INSTANTIATED&&(this._instantiationStatus=i.INSTANTIATING,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=i.INSTANTIATED,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=i.INSTANTIATED})))}}class s{constructor(e,t,n){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates((()=>{this.updateUserOptIn()}))}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logUsage(e,{properties:t,measurements:n})}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1)}sendDangerousTelemetryEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,n,!0)}internalSendTelemetryErrorEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logError(e,{properties:t,measurements:n})}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!1)}sendDangerousTelemetryErrorEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,n,!0)}internalSendTelemetryException(e,t,n,r){r?this.telemetrySender.sendErrorData(e,{properties:t,measurements:n}):this.telemetryLogger.logError(e,{properties:t,measurements:n})}sendTelemetryException(e,t,n){this.internalSendTelemetryException(e,t,n,!1)}sendDangerousTelemetryException(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,t,n,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map((e=>e.dispose())))}}class a{static applyReplacements(e,t){for(const n of Object.keys(e))for(const r of t)r.lookup.test(n)&&(void 0!==r.replacementString?e[n]=r.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.7"}}static getInstance(){return a._instance||(a._instance=new a),a._instance}}function c(e){if(e.userAgentData){const t=e.userAgentData.brands[e.userAgentData.brands.length-1];return`${e.userAgentData.platform} - ${t?.brand} v${t?.version}}`}return e.appVersion}class l extends s{constructor(e,t){let i=e=>(async(e,t)=>{let r;try{const t=await Promise.resolve().then(n.bind(n,31626));r=new t.ApplicationInsights({instrumentationKey:e,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0})}catch(e){return Promise.reject(e)}return{logEvent:(e,n)=>{const i={...n?.properties,...n?.measurements};t?.length&&a.applyReplacements(i,t),r?.track({name:e,data:i})},flush:async()=>{r?.flush()}}})(e,t);a.shouldUseOneDataSystemSDK(e)&&(i=e=>(async(e,t,r)=>{const i=await(async(e,t,r)=>{const i=await Promise.resolve().then(n.bind(n,67164)),o=await Promise.resolve().then(n.bind(n,71488)),s=new i.AppInsightsCore,a=new o.PostChannel,c={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[a]]};if(r){c.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:r};c.extensionConfig[a.identifier]=e}const l=t.workspace.getConfiguration("telemetry").get("internalTesting");return s.initialize(c,[]),s.addTelemetryInitializer((e=>{l&&(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),s})(e,t,r);return{logEvent:(e,t)=>{try{i?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{i?.unload()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,r));const s={release:c(navigator),platform:"web",architecture:"web"},l=new o(e,i);if(e&&0===e.indexOf("AIF"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(l,r,{additionalCommonProperties:a.getAdditionalCommonProperties(s)})}}},14277:e=>{"use strict";e.exports=({onlyFirst:e=!1}={})=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}},9669:(e,t,n)=>{e.exports=n(51609)},55448:(e,t,n)=>{"use strict";var r=n(64867),i=n(36026),o=n(4372),s=n(15327),a=n(94097),c=n(84109),l=n(67985),u=n(85061),d=n(77874),h=n(65263);e.exports=function(e){return new Promise((function(t,n){var p,f=e.data,g=e.headers,m=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(f)&&delete g["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(b+":"+w)}var S=a(e.baseURL,e.url);function C(){if(y){var r="getAllResponseHeaders"in y?c(y.getAllResponseHeaders()):null,o={data:m&&"text"!==m&&"json"!==m?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y};i((function(e){t(e),v()}),(function(e){n(e),v()}),o),y=null}}if(y.open(e.method.toUpperCase(),s(S,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=C:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(C)},y.onabort=function(){y&&(n(u("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(u("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},r.isStandardBrowserEnv()){var _=(e.withCredentials||l(S))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;_&&(g[e.xsrfHeaderName]=_)}"setRequestHeader"in y&&r.forEach(g,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete g[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),m&&"json"!==m&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){y&&(n(!e||e&&e.type?new h("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),y.send(f)}))}},51609:(e,t,n)=>{"use strict";var r=n(64867),i=n(91849),o=n(30321),s=n(47185),a=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(45546));a.Axios=o,a.Cancel=n(65263),a.CancelToken=n(14972),a.isCancel=n(26502),a.VERSION=n(97288).version,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(16268),e.exports=a,e.exports.default=a},65263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:(e,t,n)=>{"use strict";var r=n(65263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},26502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:(e,t,n)=>{"use strict";var r=n(64867),i=n(15327),o=n(80782),s=n(13572),a=n(47185),c=n(54875),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!i){var d=[s,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(u),o=Promise.resolve(t);d.length;)o=o.then(d.shift(),d.shift());return o}for(var h=t;r.length;){var p=r.shift(),f=r.shift();try{h=p(h)}catch(e){f(e);break}}try{o=s(h)}catch(e){return Promise.reject(e)}for(;u.length;)o=o.then(u.shift(),u.shift());return o},u.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=u},80782:(e,t,n)=>{"use strict";var r=n(64867);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},94097:(e,t,n)=>{"use strict";var r=n(91793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},85061:(e,t,n)=>{"use strict";var r=n(80481);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},13572:(e,t,n)=>{"use strict";var r=n(64867),i=n(18527),o=n(26502),s=n(45546),a=n(65263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},47185:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},36026:(e,t,n)=>{"use strict";var r=n(85061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},18527:(e,t,n)=>{"use strict";var r=n(64867),i=n(45546);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},45546:(e,t,n)=>{"use strict";var r=n(34155),i=n(64867),o=n(16016),s=n(80481),a=n(77874),c={"Content-Type":"application/x-www-form-urlencoded"};function l(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,d={transitional:a,adapter:(("undefined"!=typeof XMLHttpRequest||"[object process]"===Object.prototype.toString.call(r))&&(u=n(55448)),u),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(l(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(l(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(0,JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||d.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){d.headers[e]=i.merge(c)})),e.exports=d},77874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},97288:e=>{e.exports={version:"0.26.1"}},91849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},15327:(e,t,n)=>{"use strict";var r=n(64867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},16268:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},67985:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},84109:(e,t,n)=>{"use strict";var r=n(64867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:(e,t,n)=>{"use strict";var r=n(97288).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},64867:(e,t,n)=>{"use strict";var r=n(91849),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function s(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:l,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return c(e)&&u(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)d(arguments[r],n);return t},extend:function(e,t,n){return d(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},79742:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=a(e),s=o[0],c=o[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,c)),u=0,d=c>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(c(e,a,a+s>l?l:a+s));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},48764:(e,t,n)=>{"use strict";var r=n(79742),i=n(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=c,t.h2=50;var s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|g(e,t),r=a(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(W(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);var i=function(e){if(c.isBuffer(e)){var t=0|f(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||V(e.length)?a(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),a(e<0?0:0|f(e))}function h(e){for(var t=e.length<0?0:0|f(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function f(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(i)return r?-1:L(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=n;o<a;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var d=!0,h=0;h<c;h++)if(l(e,o+h)!==l(t,h)){d=!1;break}if(d)return o}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(V(a))return s;e[n+s]=a}return s}function S(e,t,n,r){return U(L(t,e.length-n),e,n,r)}function C(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return U(K(t),e,n,r)}function P(e,t,n,r){return U(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,l=e[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(W(o,Uint8Array))i+o.length>r.length?c.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,i){if(W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(r,i),u=e.slice(t,n),d=0;d<a;++d)if(l[d]!==u[d]){o=l[d],s=u[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":case"latin1":case"binary":return C(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=H[e[o]];return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,o){return t=+t,n>>>=0,o||A(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return t=+t,n>>>=0,o||A(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:c.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+/0-9A-Za-z-_]/g;function L(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function K(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}var H=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},54098:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=f(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=l(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},h.prototype.delete=function(e){delete this.map[l(e)]},h.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},h.prototype.set=function(e,t){this.map[l(e)]=u(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var n,r,i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function S(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},v.call(b.prototype),v.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var C=[301,302,303,307,308];S.redirect=function(e,t){if(-1===C.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _(e,n){return new Promise((function(r,o){var s=new b(e,n);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new S(i,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}_.polyfill=!0,e.fetch||(e.fetch=_,e.Headers=h,e.Request=b,e.Response=S),t.Headers=h,t.Request=b,t.Response=S,t.fetch=_,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},66518:e=>{"use strict";e.exports=function(e){var t=void 0;t="string"==typeof e?[e]:e.raw;for(var n="",r=0;r<t.length;r++)n+=t[r].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),r<(arguments.length<=1?0:arguments.length-1)&&(n+=arguments.length<=r+1?void 0:arguments[r+1]);var i=n.split("\n"),o=null;return i.forEach((function(e){var t=e.match(/^(\s+)\S+/);if(t){var n=t[1].length;o=o?Math.min(o,n):n}})),null!==o&&(n=i.map((function(e){return" "===e[0]?e.slice(o):e})).join("\n")),(n=n.trim()).replace(/\\n/g,"\n")}},17187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,s,l;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=f(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},64063:e=>{"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty;e.exports=function e(i,o){if(i===o)return!0;if(i&&o&&"object"==typeof i&&"object"==typeof o){var s,a,c,l=t(i),u=t(o);if(l&&u){if((a=i.length)!=o.length)return!1;for(s=a;0!=s--;)if(!e(i[s],o[s]))return!1;return!0}if(l!=u)return!1;var d=i instanceof Date,h=o instanceof Date;if(d!=h)return!1;if(d&&h)return i.getTime()==o.getTime();var p=i instanceof RegExp,f=o instanceof RegExp;if(p!=f)return!1;if(p&&f)return i.toString()==o.toString();var g=n(i);if((a=g.length)!==n(o).length)return!1;for(s=a;0!=s--;)if(!r.call(o,g[s]))return!1;for(s=a;0!=s--;)if(!e(i[c=g[s]],o[c]))return!1;return!0}return i!=i&&o!=o}},35960:e=>{e.exports=function(e){var t=Array.prototype.slice.call(arguments,1);return t.length&&(e=e.replace(/(%?)(%([jds]))/g,(function(e,n,r,i){var o=t.shift();switch(i){case"s":o=""+o;break;case"d":o=Number(o);break;case"j":o=JSON.stringify(o)}return n?(t.unshift(o),e):o}))),t.length&&(e+=" "+t.join(" ")),""+e.replace(/%{2,2}/g,"%")}},80645:(e,t)=>{t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=l}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=f,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[n+p]=255&s,p+=f,s/=256,l-=8);e[n+p-f]|=128*g}},26594:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AsyncContainerModule:()=>ze,BindingScopeEnum:()=>v,BindingTypeEnum:()=>y,Container:()=>$e,ContainerModule:()=>Ge,LazyServiceIdentifer:()=>$,METADATA_KEY:()=>gt,MetadataReader:()=>j,TargetTypeEnum:()=>b,createTaggedDecorator:()=>Xe,decorate:()=>tt,getServiceIdentifierAsString:()=>K,id:()=>S,inject:()=>st,injectable:()=>nt,interfaces:()=>ht,multiBindToService:()=>he,multiInject:()=>lt,named:()=>it,namedConstraint:()=>Me,optional:()=>at,postConstruct:()=>pt,preDestroy:()=>ft,tagged:()=>rt,taggedConstraint:()=>Re,targetName:()=>ut,traverseAncerstors:()=>Oe,typeConstraint:()=>Ae,unmanaged:()=>ct});var r={};n.r(r),n.d(r,{DESIGN_PARAM_TYPES:()=>p,INJECT_TAG:()=>c,MULTI_INJECT_TAG:()=>l,NAMED_TAG:()=>i,NAME_TAG:()=>o,NON_CUSTOM_TAG_KEYS:()=>m,OPTIONAL_TAG:()=>a,PARAM_TYPES:()=>h,POST_CONSTRUCT:()=>f,PRE_DESTROY:()=>g,TAGGED:()=>u,TAGGED_PROP:()=>d,UNMANAGED_TAG:()=>s});var i="named",o="name",s="unmanaged",a="optional",c="inject",l="multi_inject",u="inversify:tagged",d="inversify:tagged_props",h="inversify:paramtypes",p="design:paramtypes",f="post_construct",g="pre_destroy",m=[c,l,o,s,i,a],v={Request:"Request",Singleton:"Singleton",Transient:"Transient"},y={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},b={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},w=0;function S(){return w++}var C=function(){function e(e,t){this.id=S(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=y.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===v.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}(),_="Cannot apply @injectable decorator multiple times.",P="Metadata key was used more than once in a parameter:",E="NULL argument",k="Key Not Found",I="Ambiguous match found for serviceIdentifier:",D="No matching bindings found for serviceIdentifier:",T="Missing required @injectable annotation in:",x="Missing required @inject or @multiInject annotation in:",O="Circular dependency found:",R="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",M=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},A=function(e,t){return"onDeactivation() error in class "+e+": "+t},N="Maximum call stack size exceeded",j=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(h,e),userGeneratedMetadata:Reflect.getMetadata(u,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(d,e)||[]},e}(),F={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function L(e){return e instanceof RangeError||e.message===N}function K(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function U(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=H(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r}function W(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||W(e.parentRequest,t))}function V(e){e.childRequests.forEach((function(e){if(W(e,e.serviceIdentifier)){var t=function(e){return function e(t,n){void 0===n&&(n=[]);var r=K(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(e);throw new Error(O+" "+t)}V(e)}))}function H(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}var B=function(){function e(e){this.id=S(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}(),q=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===i?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},e}(),J=function(e,t){this.parentContext=e,this.rootRequest=t},$=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}(),G=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}(),z=function(){function e(e,t,n,r){this.id=S(),this.type=e,this.serviceIdentifier=n;var o="symbol"==typeof t?t.toString().slice(7,-1):t;this.name=new G(o||""),this.identifier=t,this.metadata=new Array;var s=null;"string"==typeof r?s=new q(i,r):r instanceof q&&(s=r),null!==s&&this.metadata.push(s)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++)if(n[t].key===e)return!0;return!1},e.prototype.isArray=function(){return this.hasTag(l)},e.prototype.matchesArray=function(e){return this.matchesTag(l)(e)},e.prototype.isNamed=function(){return this.hasTag(i)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return m.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(a)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===i}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return m.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(i)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}(),Y=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function Q(e,t,n,r){var i=e.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o)throw new Error(T+" "+t+".");var s=i.userGeneratedMetadata,a=Object.keys(s),c=0===n.length&&a.length>0,l=a.length>n.length,u=function(e,t,n,r,i){for(var o=[],s=0;s<i;s++){var a=X(s,e,t,n,r);null!==a&&o.push(a)}return o}(r,t,o,s,c||l?a.length:n.length),d=ee(e,n,t);return Y(Y([],u,!0),d,!0)}function X(e,t,n,r,i){var o=i[e.toString()]||[],s=ne(o),a=!0!==s.unmanaged,c=r[e];if((c=s.inject||s.multiInject||c)instanceof $&&(c=c.unwrap()),a){if(!t&&(c===Object||c===Function||void 0===c))throw new Error(x+" argument "+e+" in class "+n+".");var l=new z(b.ConstructorArgument,s.targetName,c);return l.metadata=o,l}return null}function Z(e,t,n,r){var i=e||t;if(void 0===i){var o=T+" for property "+String(n)+" in class "+r+".";throw new Error(o)}return i}function ee(e,t,n){for(var r=e.getPropertiesMetadata(t),i=[],o=Object.getOwnPropertySymbols(r),s=0,a=Object.keys(r).concat(o);s<a.length;s++){var c=a[s],l=r[c],u=ne(l),d=u.targetName||c,h=Z(u.inject,u.multiInject,c,n),p=new z(b.ClassProperty,d,h);p.metadata=l,i.push(p)}var f=Object.getPrototypeOf(t.prototype).constructor;if(f!==Object){var g=ee(e,f,n);i=Y(Y([],i,!0),g,!0)}return i}function te(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=Q(e,H(n),n,!0),i=r.map((function(e){return e.metadata.filter((function(e){return e.key===s}))})),o=[].concat.apply([],i).length,a=r.length-o;return a>0?a:te(e,n)}return 0}function ne(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[c],multiInject:t[l],targetName:t[o],unmanaged:t[s]}}var re=function(){function e(e,t,n,r,i){this.id=S(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();function ie(e){return e._bindingDictionary}function oe(e,t,n,r,i){var o,s=ae(n.container,i.serviceIdentifier);return s.length===F.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),s=ae(n.container,i.serviceIdentifier)),o=t?s:s.filter((function(e){var t=new re(e.serviceIdentifier,n,r,e,i);return e.constraint(t)})),function(e,t,n,r){switch(t.length){case F.NoBindingsAvailable:if(n.isOptional())return t;var i=K(e),o=D;throw o+=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e}(i,n),o+=U(r,i,ae),new Error(o);case F.OnlyOneBindingAvailable:return t;case F.MultipleBindingsAvailable:default:if(n.isArray())return t;throw i=K(e),o=I+" "+i,o+=U(r,i,ae),new Error(o)}}(i.serviceIdentifier,o,i,n.container),o}function se(e,t,n,r,i,o){var s,a;if(null===i){s=oe(e,t,r,null,o),a=new re(n,r,null,s,o);var c=new J(r,a);r.addPlan(c)}else s=oe(e,t,r,i,o),a=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach((function(t){var n=null;if(o.isArray())n=a.addChildRequest(t.serviceIdentifier,t,o);else{if(t.cache)return;n=a}if(t.type===y.Instance&&null!==t.implementationType){var i=function(e,t){return Q(e,H(t),t,!1)}(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var s=te(e,t.implementationType);if(i.length<s){var c=M(H(t.implementationType));throw new Error(c)}}i.forEach((function(t){se(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function ae(e,t){var n=[],r=ie(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=ae(e.parent,t)),n}function ce(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function le(e){return!!ce(e)||Array.isArray(e)&&e.some(ce)}var ue,de=function(e,t){return n=void 0,r=void 0,o=function(){var n,r;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return n=i.sent(),e.cache=n,[3,3];case 2:throw r=i.sent(),e.cache=null,e.activated=!1,r;case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,a)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o};!function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"}(ue||(ue={}));var he=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}},pe=function(){return pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pe.apply(this,arguments)},fe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},ge=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},me=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function ve(e){var t,n=new((t=e.constr).bind.apply(t,me([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach((function(t,r){var i=t.target.identifier,o=e.propertyInjections[r];n[i]=o})),n}function ye(e){return fe(this,void 0,void 0,(function(){var t,n,r,i;return ge(this,(function(o){for(t=[],n=0,r=e;n<r.length;n++)i=r[n],Array.isArray(i)?t.push(Promise.all(i)):t.push(i);return[2,Promise.all(t)]}))}))}function be(e,t){var n=function(e,t){var n,r,i,o;if(Reflect.hasMetadata(f,e)){var s=Reflect.getMetadata(f,e);try{return null===(r=(n=t)[s.value])||void 0===r?void 0:r.call(n)}catch(t){throw new Error((i=e.name,o=t.message,"@postConstruct error in class "+i+": "+o))}}}(e,t);return ce(n)?n.then((function(){return t})):t}var we=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,i=t.target&&t.target.isArray(),o=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(i&&o)return r.map((function(t){return we(e)(t)}));if(!t.target.isOptional()||0!==n.length){var s=n[0];return Pe(e,t,s)}}},Se=function(e,t){var n=function(e){switch(e.type){case y.Factory:return{factory:e.factory,factoryType:ue.Factory};case y.Provider:return{factory:e.provider,factoryType:ue.Provider};case y.DynamicValue:return{factory:e.dynamicValue,factoryType:ue.DynamicValue};default:throw new Error("Unexpected factory type "+e.type)}}(e);return function(r,i){try{return n.factory.bind(e)(t)}catch(e){throw L(e)&&(e=new Error((o=n.factoryType,s=t.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+o+"' bindings. Please investigate bindings withservice identifier '"+s+"'."))),e}var o,s}()},Ce=function(e,t,n){var r,i=t.childRequests;switch(function(e){var t=null;switch(e.type){case y.ConstantValue:case y.Function:t=e.cache;break;case y.Constructor:case y.Instance:t=e.implementationType;break;case y.DynamicValue:t=e.dynamicValue;break;case y.Provider:t=e.provider;break;case y.Factory:t=e.factory}if(null===t){var n=K(e.serviceIdentifier);throw new Error("Invalid binding type: "+n)}}(n),n.type){case y.ConstantValue:case y.Function:r=n.cache;break;case y.Constructor:r=n.implementationType;break;case y.Instance:r=function(e,t,n,r){!function(e,t){e.scope!==v.Singleton&&function(e,t){var n="Class cannot be instantiated in "+(e.scope===v.Request?"request":"transient")+" scope.";if("function"==typeof e.onDeactivation)throw new Error(A(t.name,n));if(Reflect.hasMetadata(g,t))throw new Error("@preDestroy error in class "+t.name+": "+n)}(e,t)}(e,t);var i=function(e,t,n){var r;if(t.length>0){var i=function(e,t){return e.reduce((function(e,n){var r=t(n);return n.target.type===b.ConstructorArgument?e.constructorInjections.push(r):(e.propertyRequests.push(n),e.propertyInjections.push(r)),e.isAsync||(e.isAsync=le(r)),e}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(t,n),o=pe(pe({},i),{constr:e});r=i.isAsync?function(e){return fe(this,void 0,void 0,(function(){var t,n;return ge(this,(function(r){switch(r.label){case 0:return[4,ye(e.constructorInjections)];case 1:return t=r.sent(),[4,ye(e.propertyInjections)];case 2:return n=r.sent(),[2,ve(pe(pe({},e),{constructorInjections:t,propertyInjections:n}))]}}))}))}(o):ve(o)}else r=new e;return r}(t,n,r);return ce(i)?i.then((function(e){return be(t,e)})):be(t,i)}(n,n.implementationType,i,we(e));break;default:r=Se(n,t.parentContext)}return r},_e=function(e,t,n){var r=function(e,t){return t.scope===v.Singleton&&t.activated?t.cache:t.scope===v.Request&&e.has(t.id)?e.get(t.id):null}(e,t);return null!==r||function(e,t,n){t.scope===v.Singleton&&function(e,t){e.cache=t,e.activated=!0,ce(t)&&de(e,t)}(t,n),t.scope===v.Request&&function(e,t,n){e.has(t.id)||e.set(t.id,n)}(e,t,n)}(e,t,r=n()),r},Pe=function(e,t,n){return _e(e,n,(function(){var r=Ce(e,t,n);return ce(r)?r.then((function(e){return Ee(t,n,e)})):Ee(t,n,r)}))};function Ee(e,t,n){var r,i=ke(e.parentContext,t,n),o=xe(e.parentContext.container),s=o.next();do{r=s.value;var a=e.parentContext,c=e.serviceIdentifier,l=Te(r,c);i=ce(i)?De(l,a,i):Ie(l,a,i),s=o.next()}while(!0!==s.done&&!ie(r).hasKey(e.serviceIdentifier));return i}var ke=function(e,t,n){return"function"==typeof t.onActivation?t.onActivation(e,n):n},Ie=function(e,t,n){for(var r=e.next();!r.done;){if(ce(n=r.value(t,n)))return De(e,t,n);r=e.next()}return n},De=function(e,t,n){return r=void 0,i=void 0,s=function(){var r,i;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(o){switch(o.label){case 0:return[4,n];case 1:r=o.sent(),i=e.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(t,r)];case 3:return r=o.sent(),i=e.next(),[3,2];case 4:return[2,r]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,a)}c((s=s.apply(r,i||[])).next())}));var r,i,o,s},Te=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},xe=function(e){for(var t=[e],n=e.parent;null!==n;)t.push(n),n=n.parent;return{next:function(){var e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}},Oe=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||Oe(n,t))},Re=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new q(e,t),n}},Me=Re(i),Ae=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}},Ne=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new je(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=Me(e),new je(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e&&null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new je(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=Re(e)(t),new je(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return null!==t&&Ae(e)(t.parentRequest)},new je(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return null!==t&&Me(e)(t.parentRequest)},new je(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&Re(e)(t)(n.parentRequest)},new je(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&Oe(t,Ae(e))},new je(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&!Oe(t,Ae(e))},new je(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&Oe(t,Me(e))},new je(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&!Oe(t,Me(e))},new je(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&Oe(n,Re(e)(t))},new je(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&!Oe(n,Re(e)(t))},new je(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&Oe(t,e)},new je(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&!Oe(t,e)},new je(this._binding)},e}(),je=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new Ne(this._binding)},e.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new Ne(this._binding)},e}(),Fe=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new Ne(this._binding),this._bindingOnSyntax=new je(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),Le=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=v.Request,new Fe(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=v.Singleton,new Fe(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=v.Transient,new Fe(this._binding)},e}(),Ke=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new Ne(this._binding),this._bindingOnSyntax=new je(this._binding),this._bindingInSyntax=new Le(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),Ue=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=y.Instance,this._binding.implementationType=e,new Ke(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=y.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=v.Singleton,new Fe(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=y.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new Ke(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=y.Constructor,this._binding.implementationType=e,this._binding.scope=v.Singleton,new Fe(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=y.Factory,this._binding.factory=e,this._binding.scope=v.Singleton,new Fe(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error("Value provided to function binding must be a function!");var t=this.toConstantValue(e);return this._binding.type=y.Function,this._binding.scope=v.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=y.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=v.Singleton,new Fe(this._binding)},e.prototype.toAutoNamedFactory=function(e){return this._binding.type=y.Factory,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new Fe(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=y.Provider,this._binding.provider=e,this._binding.scope=v.Singleton,new Fe(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}(),We=function(){function e(){}return e.of=function(t,n,r,i,o){var s=new e;return s.bindings=t,s.middleware=n,s.deactivations=i,s.activations=r,s.moduleActivationStore=o,s},e}(),Ve=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(E);if(null==t)throw new Error(E);var n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(E);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(k)},e.prototype.remove=function(e){if(null==e)throw new Error(E);if(!this._map.delete(e))throw new Error(k)},e.prototype.removeIntersection=function(e){var t=this;this.traverse((function(n,r){var i=e.hasKey(n)?e.get(n):void 0;if(void 0!==i){var o=r.filter((function(e){return!i.some((function(t){return e===t}))}));t._setValue(n,o)}}))},e.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach((function(r,i){for(var o=[],s=0,a=r;s<a.length;s++){var c=a[s];e(c)?n.push(c):o.push(c)}t._setValue(i,o)})),n},e.prototype.hasKey=function(e){if(null==e)throw new Error(E);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,"object"==typeof(r=e)&&null!==r&&"clone"in r&&"function"==typeof r.clone?e.clone():e);var r}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},e}(),He=function(){function e(){this._map=new Map}return e.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},e.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){t._map.set(n,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})})),t},e.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},e.prototype._getEmptyHandlersStore=function(){return{onActivations:new Ve,onDeactivations:new Ve}},e}(),Be=function(){return Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Be.apply(this,arguments)},qe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Je=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},$e=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===t.defaultScope)t.defaultScope=v.Transient;else if(t.defaultScope!==v.Singleton&&t.defaultScope!==v.Transient&&t.defaultScope!==v.Request)throw new Error("Invalid Container option. Default scope must be a string ('singleton' or 'transient').");if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=S(),this._bindingDictionary=new Ve,this._snapshots=[],this._middleware=null,this._activations=new Ve,this._deactivations=new Ve,this.parent=null,this._metadataReader=new j,this._moduleActivationStore=new He}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=new e,s=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([t,n],r,!0).map((function(e){return ie(e)})),a=ie(o);return s.forEach((function(e){var t;t=a,e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))})),o},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qe(this,void 0,void 0,(function(){var t,n,r,i,o;return Je(this,(function(s){switch(s.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,s.label=1;case 1:return n<r.length?(i=r[n],o=t(i.id),[4,i.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n=e._removeModuleBindings(t.id);e._deactivateSingletons(n),e._removeModuleHandlers(t.id)}))},e.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qe(this,void 0,void 0,(function(){var t,n,r,i;return Je(this,(function(o){switch(o.label){case 0:t=0,n=e,o.label=1;case 1:return t<n.length?(r=n[t],i=this._removeModuleBindings(r.id),[4,this._deactivateSingletonsAsync(i)]):[3,4];case 2:o.sent(),this._removeModuleHandlers(r.id),o.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.bind=function(e){var t=this.options.defaultScope||v.Transient,n=new C(e,t);return this._bindingDictionary.add(e,n),new Ue(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.rebindAsync=function(e){return qe(this,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}}))}))},e.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},e.prototype.unbindAsync=function(e){return qe(this,void 0,void 0,(function(){var t;return Je(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}}))}))},e.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse((function(t,n){e._deactivateSingletons(n)})),this._bindingDictionary=new Ve},e.prototype.unbindAllAsync=function(){return qe(this,void 0,void 0,(function(){var e,t=this;return Je(this,(function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse((function(n,r){e.push(t._deactivateSingletonsAsync(r))})),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new Ve,[2]}}))}))},e.prototype.onActivation=function(e,t){this._activations.add(e,t)},e.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,i,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=function(e,t,n,r){var i=new z(b.Variable,"",t,new q(n,r)),o=new B(e);return new re(t,o,null,[],i)}(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(We.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},e.prototype.getAsync=function(e){return qe(this,void 0,void 0,(function(){var t;return Je(this,(function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]}))}))},e.prototype.getTagged=function(e,t,n){var r=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(r)},e.prototype.getTaggedAsync=function(e,t,n){return qe(this,void 0,void 0,(function(){var r;return Je(this,(function(i){return r=this._getNotAllArgs(e,!1,t,n),[2,this._get(r)]}))}))},e.prototype.getNamed=function(e,t){return this.getTagged(e,i,t)},e.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,i,t)},e.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},e.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},e.prototype.getAllTagged=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(r)},e.prototype.getAllTaggedAsync=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getAll(r)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,i,t)},e.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,i,t)},e.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},e.prototype._preDestroy=function(e,t){if(Reflect.hasMetadata(g,e))return t[Reflect.getMetadata(g,e).value]()},e.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},e.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition((function(t){return t.moduleId===e}))},e.prototype._deactivate=function(e,t){var n=this,r=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var i=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if(ce(i))return this._handleDeactivationError(i.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,r)})),r)}var o=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,r);if(ce(o))return this._handleDeactivationError(o,r)}catch(e){throw new Error(A(r.name,e.message))}},e.prototype._handleDeactivationError=function(e,t){return qe(this,void 0,void 0,(function(){var n;return Je(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e];case 1:return r.sent(),[3,3];case 2:throw n=r.sent(),new Error(A(t.name,n.message));case 3:return[2]}}))}))},e.prototype._deactivateContainer=function(e,t){for(var n=this,r=t.next();r.value;){var i=r.value(e);if(ce(i))return i.then((function(){return n._deactivateContainerAsync(e,t)}));r=t.next()}},e.prototype._deactivateContainerAsync=function(e,t){return qe(this,void 0,void 0,(function(){var n;return Je(this,(function(r){switch(r.label){case 0:n=t.next(),r.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return r.sent(),n=t.next(),[3,1];case 3:return[2]}}))}))},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.rebind(r);return t(i,n),i}},r=function(t){return function(n,r){e._moduleActivationStore.addActivation(t,n,r),e.onActivation(n,r)}},i=function(t){return function(n,r){e._moduleActivationStore.addDeactivation(t,n,r),e.onDeactivation(n,r)}};return function(o){return{bindFunction:(s=o,function(n){var r=e.bind(n);return t(r,s),r}),isboundFunction:function(t){return e.isBound(t)},onActivationFunction:r(o),onDeactivationFunction:i(o),rebindFunction:n(o),unbindFunction:function(t){return e.unbind(t)},unbindAsyncFunction:function(t){return e.unbindAsync(t)}};var s}},e.prototype._getAll=function(e){return Promise.all(this._get(e))},e.prototype._get=function(e){var t=Be(Be({},e),{contextInterceptor:function(e){return e},targetType:b.Variable});if(this._middleware){var n=this._middleware(t);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(t)},e.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if(le(t))throw new Error("You are attempting to construct '"+e.serviceIdentifier+"' in a synchronous way\n but it has asynchronous dependencies.");return t},e.prototype._getAllArgs=function(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}},e.prototype._getNotAllArgs=function(e,t,n,r){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:r}},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=function(e,t,n,r,i,o,s,a){void 0===a&&(a=!1);var u=new B(t),d=function(e,t,n,r,i,o){var s=new q(e?l:c,n),a=new z(t,"",n,s);if(void 0!==i){var u=new q(i,o);a.metadata.push(u)}return a}(n,r,i,0,o,s);try{return se(e,a,i,u,null,d),u}catch(e){throw L(e)&&V(u.plan.rootRequest),e}}(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return function(e){return we(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}(n=t.contextInterceptor(n))}},e.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return ce(e.cache)?e.cache.then((function(n){return t._deactivate(e,n)})):this._deactivate(e,e.cache)},e.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(ce(this._deactivateIfSingleton(r)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},e.prototype._deactivateSingletonsAsync=function(e){return qe(this,void 0,void 0,(function(){var t=this;return Je(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return t._deactivateIfSingleton(e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return qe(this,void 0,void 0,(function(){return Je(this,(function(r){switch(r.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error("Could not unbind serviceIdentifier: "+K(e))}},e.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var r=this;if("function"==typeof e.onDeactivation){var i=e.onDeactivation(t);if(ce(i))return i.then((function(){return r._preDestroy(n,t)}))}return this._preDestroy(n,t)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return qe(this,void 0,void 0,(function(){return Je(this,(function(r){switch(r.label){case 0:return"function"!=typeof e.onDeactivation?[3,2]:[4,e.onDeactivation(t)];case 1:r.sent(),r.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return r.sent(),[2]}}))}))},e}(),Ge=function(e){this.id=S(),this.registry=e},ze=function(e){this.id=S(),this.registry=e};function Ye(e,t,n,r){!function(e){if(void 0!==e)throw new Error(R)}(t),Qe(u,e,n.toString(),r)}function Qe(e,t,n,r){var i=function(e){var t=[];if(Array.isArray(e)){var n=function(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var i=r[n];if(t.has(i))return i;t.add(i)}}((t=e).map((function(e){return e.key})));if(void 0!==n)throw new Error(P+" "+n.toString())}else t=[e];return t}(r),o={};Reflect.hasOwnMetadata(e,t)&&(o=Reflect.getMetadata(e,t));var s=o[n];if(void 0===s)s=[];else for(var a=function(e){if(i.some((function(t){return t.key===e.key})))throw new Error(P+" "+e.key.toString())},c=0,l=s;c<l.length;c++)a(l[c]);s.push.apply(s,i),o[n]=s,Reflect.defineMetadata(e,o,t)}function Xe(e){return function(t,n,r){"number"==typeof r?Ye(t,n,r,e):function(e,t,n){if(void 0!==e.prototype)throw new Error(R);Qe(d,e.constructor,t,n)}(t,n,e)}}function Ze(e,t){Reflect.decorate(e,t)}function et(e,t){return function(n,r){t(n,r,e)}}function tt(e,t,n){"number"==typeof n?Ze([et(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):Ze([e],t)}function nt(){return function(e){if(Reflect.hasOwnMetadata(h,e))throw new Error(_);var t=Reflect.getMetadata(p,e)||[];return Reflect.defineMetadata(h,t,e),e}}function rt(e,t){return Xe(new q(e,t))}function it(e){return Xe(new q(i,e))}function ot(e){return function(t){return function(n,r,i){if(void 0===t){var o="function"==typeof n?n.name:n.constructor.name;throw new Error("@inject called with undefined this could mean that the class "+o+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation.")}return Xe(new q(e,t))(n,r,i)}}}var st=ot(c);function at(){return Xe(new q(a,!0))}function ct(){return function(e,t,n){Ye(e,t,n,new q(s,!0))}}var lt=ot(l);function ut(e){return function(t,n,r){Ye(t,n,r,new q(o,e))}}function dt(e,t){return function(){return function(n,r){var i=new q(e,r);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,i,n.constructor)}}}var ht,pt=dt(f,"Cannot apply @postConstruct decorator multiple times in the same class"),ft=dt(g,"Cannot apply @preDestroy decorator multiple times in the same class");ht||(ht={});var gt=r},99934:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createTaggedDecorator=t.tagProperty=t.tagParameter=t.decorate=void 0;var s=o(n(16674)),a=o(n(6867)),c=n(72707);function l(e,t,n,r){!function(e){if(void 0!==e)throw new Error(s.INVALID_DECORATOR_OPERATION)}(t),d(a.TAGGED,e,n.toString(),r)}function u(e,t,n){if(void 0!==e.prototype)throw new Error(s.INVALID_DECORATOR_OPERATION);d(a.TAGGED_PROP,e.constructor,t,n)}function d(e,t,n,r){var i=function(e){var t=[];if(Array.isArray(e)){t=e;var n=(0,c.getFirstArrayDuplicate)(t.map((function(e){return e.key})));if(void 0!==n)throw new Error(s.DUPLICATED_METADATA+" "+n.toString())}else t=[e];return t}(r),o={};Reflect.hasOwnMetadata(e,t)&&(o=Reflect.getMetadata(e,t));var a=o[n];if(void 0===a)a=[];else for(var l=function(e){if(i.some((function(t){return t.key===e.key})))throw new Error(s.DUPLICATED_METADATA+" "+e.key.toString())},u=0,d=a;u<d.length;u++)l(d[u]);a.push.apply(a,i),o[n]=a,Reflect.defineMetadata(e,o,t)}function h(e,t){Reflect.decorate(e,t)}function p(e,t){return function(n,r){t(n,r,e)}}t.tagParameter=l,t.tagProperty=u,t.createTaggedDecorator=function(e){return function(t,n,r){"number"==typeof r?l(t,n,r,e):u(t,n,e)}},t.decorate=function(e,t,n){"number"==typeof n?h([p(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):h([e],t)}},5744:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.inject=void 0;var s=o(n(6867)),a=(0,n(69568).injectBase)(s.INJECT_TAG);t.inject=a},69568:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectBase=void 0;var r=n(16674),i=n(47738),o=n(99934);t.injectBase=function(e){return function(t){return function(n,s,a){if(void 0===t){var c="function"==typeof n?n.name:n.constructor.name;throw new Error((0,r.UNDEFINED_INJECT_ANNOTATION)(c))}return(0,o.createTaggedDecorator)(new i.Metadata(e,t))(n,s,a)}}}},64315:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=void 0;var s=o(n(16674)),a=o(n(6867));t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(a.PARAM_TYPES,e))throw new Error(s.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(a.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(a.PARAM_TYPES,t,e),e}}},33695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyServiceIdentifer=void 0;var n=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=n},71693:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;var s=o(n(6867)),a=(0,n(69568).injectBase)(s.MULTI_INJECT_TAG);t.multiInject=a},38085:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.named=void 0;var s=o(n(6867)),a=n(47738),c=n(99934);t.named=function(e){return(0,c.createTaggedDecorator)(new a.Metadata(s.NAMED_TAG,e))}},6515:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0;var s=o(n(6867)),a=n(47738),c=n(99934);t.optional=function(){return(0,c.createTaggedDecorator)(new a.Metadata(s.OPTIONAL_TAG,!0))}},7014:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;var s=o(n(16674)),a=o(n(6867)),c=(0,n(85197).propertyEventDecorator)(a.POST_CONSTRUCT,s.MULTIPLE_POST_CONSTRUCT_METHODS);t.postConstruct=c},8822:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.preDestroy=void 0;var s=o(n(16674)),a=o(n(6867)),c=(0,n(85197).propertyEventDecorator)(a.PRE_DESTROY,s.MULTIPLE_PRE_DESTROY_METHODS);t.preDestroy=c},85197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.propertyEventDecorator=void 0;var r=n(47738);t.propertyEventDecorator=function(e,t){return function(){return function(n,i){var o=new r.Metadata(e,i);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,o,n.constructor)}}}},32052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=void 0;var r=n(47738),i=n(99934);t.tagged=function(e,t){return(0,i.createTaggedDecorator)(new r.Metadata(e,t))}},55638:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=void 0;var s=o(n(6867)),a=n(47738),c=n(99934);t.targetName=function(e){return function(t,n,r){var i=new a.Metadata(s.NAME_TAG,e);(0,c.tagParameter)(t,n,r,i)}}},86757:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=void 0;var s=o(n(6867)),a=n(47738),c=n(99934);t.unmanaged=function(){return function(e,t,n){var r=new a.Metadata(s.UNMANAGED_TAG,!0);(0,c.tagParameter)(e,t,n,r)}}},44290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;var r=n(28421),i=n(37791),o=function(){function e(e,t){this.id=(0,i.id)(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===r.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}();t.Binding=o},23184:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0,t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},16674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.ON_DEACTIVATION_ERROR=t.PRE_DESTROY_ERROR=t.POST_CONSTRUCT_ERROR=t.ASYNC_UNBIND_REQUIRED=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.MULTIPLE_PRE_DESTROY_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.LAZY_IN_SYNC=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.NOT_IMPLEMENTED=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.MISSING_INJECT_ANNOTATION=t.MISSING_INJECTABLE_ANNOTATION=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.LAZY_IN_SYNC=function(e){return"You are attempting to construct '"+e+"' in a synchronous way\n but it has asynchronous dependencies."},t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_PRE_DESTROY_METHODS="Cannot apply @preDestroy decorator multiple times in the same class",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.ASYNC_UNBIND_REQUIRED="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)",t.POST_CONSTRUCT_ERROR=function(e,t){return"@postConstruct error in class "+e+": "+t},t.PRE_DESTROY_ERROR=function(e,t){return"@preDestroy error in class "+e+": "+t},t.ON_DEACTIVATION_ERROR=function(e,t){return"onDeactivation() error in class "+e+": "+t},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(e,t){return"It looks like there is a circular dependency in one of the '"+e+"' bindings. Please investigate bindings withservice identifier '"+t+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0,t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.PRE_DESTROY=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.PRE_DESTROY="pre_destroy",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},51389:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var u=n(44290),d=s(n(16674)),h=n(28421),p=s(n(6867)),f=n(51377),g=n(86311),m=n(31927),v=n(51860),y=n(87331),b=n(37791),w=n(55800),S=n(85700),C=n(80175),_=n(9229),P=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error(""+d.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=h.BindingScopeEnum.Transient;else if(t.defaultScope!==h.BindingScopeEnum.Singleton&&t.defaultScope!==h.BindingScopeEnum.Transient&&t.defaultScope!==h.BindingScopeEnum.Request)throw new Error(""+d.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+d.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+d.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=(0,b.id)(),this._bindingDictionary=new C.Lookup,this._snapshots=[],this._middleware=null,this._activations=new C.Lookup,this._deactivations=new C.Lookup,this.parent=null,this._metadataReader=new f.MetadataReader,this._moduleActivationStore=new _.ModuleActivationStore}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=new e,s=l([t,n],r,!0).map((function(e){return(0,g.getBindingDictionary)(e)})),a=(0,g.getBindingDictionary)(o);return s.forEach((function(e){var t;t=a,e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))})),o},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(this,void 0,void 0,(function(){var t,n,r,i,o;return c(this,(function(s){switch(s.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,s.label=1;case 1:return n<r.length?(i=r[n],o=t(i.id),[4,i.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n=e._removeModuleBindings(t.id);e._deactivateSingletons(n),e._removeModuleHandlers(t.id)}))},e.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(this,void 0,void 0,(function(){var t,n,r,i;return c(this,(function(o){switch(o.label){case 0:t=0,n=e,o.label=1;case 1:return t<n.length?(r=n[t],i=this._removeModuleBindings(r.id),[4,this._deactivateSingletonsAsync(i)]):[3,4];case 2:o.sent(),this._removeModuleHandlers(r.id),o.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.bind=function(e){var t=this.options.defaultScope||h.BindingScopeEnum.Transient,n=new u.Binding(e,t);return this._bindingDictionary.add(e,n),new v.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.rebindAsync=function(e){return a(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}}))}))},e.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},e.prototype.unbindAsync=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}}))}))},e.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse((function(t,n){e._deactivateSingletons(n)})),this._bindingDictionary=new C.Lookup},e.prototype.unbindAllAsync=function(){return a(this,void 0,void 0,(function(){var e,t=this;return c(this,(function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse((function(n,r){e.push(t._deactivateSingletonsAsync(r))})),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new C.Lookup,[2]}}))}))},e.prototype.onActivation=function(e,t){this._activations.add(e,t)},e.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,p.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=(0,g.createMockRequest)(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(S.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(d.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},e.prototype.getAsync=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]}))}))},e.prototype.getTagged=function(e,t,n){var r=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(r)},e.prototype.getTaggedAsync=function(e,t,n){return a(this,void 0,void 0,(function(){var r;return c(this,(function(i){return r=this._getNotAllArgs(e,!1,t,n),[2,this._get(r)]}))}))},e.prototype.getNamed=function(e,t){return this.getTagged(e,p.NAMED_TAG,t)},e.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,p.NAMED_TAG,t)},e.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},e.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},e.prototype.getAllTagged=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(r)},e.prototype.getAllTaggedAsync=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getAll(r)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,p.NAMED_TAG,t)},e.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,p.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},e.prototype._preDestroy=function(e,t){if(Reflect.hasMetadata(p.PRE_DESTROY,e))return t[Reflect.getMetadata(p.PRE_DESTROY,e).value]()},e.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},e.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition((function(t){return t.moduleId===e}))},e.prototype._deactivate=function(e,t){var n=this,r=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var i=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if((0,y.isPromise)(i))return this._handleDeactivationError(i.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,r)})),r)}var o=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,r);if((0,y.isPromise)(o))return this._handleDeactivationError(o,r)}catch(e){throw new Error(d.ON_DEACTIVATION_ERROR(r.name,e.message))}},e.prototype._handleDeactivationError=function(e,t){return a(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e];case 1:return r.sent(),[3,3];case 2:throw n=r.sent(),new Error(d.ON_DEACTIVATION_ERROR(t.name,n.message));case 3:return[2]}}))}))},e.prototype._deactivateContainer=function(e,t){for(var n=this,r=t.next();r.value;){var i=r.value(e);if((0,y.isPromise)(i))return i.then((function(){return n._deactivateContainerAsync(e,t)}));r=t.next()}},e.prototype._deactivateContainerAsync=function(e,t){return a(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:n=t.next(),r.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return r.sent(),n=t.next(),[3,1];case 3:return[2]}}))}))},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.rebind(r);return t(i,n),i}},r=function(t){return function(n,r){e._moduleActivationStore.addActivation(t,n,r),e.onActivation(n,r)}},i=function(t){return function(n,r){e._moduleActivationStore.addDeactivation(t,n,r),e.onDeactivation(n,r)}};return function(o){return{bindFunction:(s=o,function(n){var r=e.bind(n);return t(r,s),r}),isboundFunction:function(t){return e.isBound(t)},onActivationFunction:r(o),onDeactivationFunction:i(o),rebindFunction:n(o),unbindFunction:function(t){return e.unbind(t)},unbindAsyncFunction:function(t){return e.unbindAsync(t)}};var s}},e.prototype._getAll=function(e){return Promise.all(this._get(e))},e.prototype._get=function(e){var t=r(r({},e),{contextInterceptor:function(e){return e},targetType:h.TargetTypeEnum.Variable});if(this._middleware){var n=this._middleware(t);if(null==n)throw new Error(d.INVALID_MIDDLEWARE_RETURN);return n}return this._planAndResolve()(t)},e.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if((0,y.isPromiseOrContainsPromise)(t))throw new Error(d.LAZY_IN_SYNC(e.serviceIdentifier));return t},e.prototype._getAllArgs=function(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}},e.prototype._getNotAllArgs=function(e,t,n,r){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:r}},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=(0,g.plan)(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),(0,m.resolve)(n)}},e.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return(0,y.isPromise)(e.cache)?e.cache.then((function(n){return t._deactivate(e,n)})):this._deactivate(e,e.cache)},e.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=this._deactivateIfSingleton(r);if((0,y.isPromise)(i))throw new Error(d.ASYNC_UNBIND_REQUIRED)}},e.prototype._deactivateSingletonsAsync=function(e){return a(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return t._deactivateIfSingleton(e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(d.CANNOT_UNBIND+" "+(0,w.getServiceIdentifierAsString)(e))}},e.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var r=this;if("function"==typeof e.onDeactivation){var i=e.onDeactivation(t);if((0,y.isPromise)(i))return i.then((function(){return r._preDestroy(n,t)}))}return this._preDestroy(n,t)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return a(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return"function"!=typeof e.onDeactivation?[3,2]:[4,e.onDeactivation(t)];case 1:r.sent(),r.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return r.sent(),[2]}}))}))},e}();t.Container=P},33244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;var r=n(37791);t.ContainerModule=function(e){this.id=(0,r.id)(),this.registry=e};t.AsyncContainerModule=function(e){this.id=(0,r.id)(),this.registry=e}},85700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;var n=function(){function e(){}return e.of=function(t,n,r,i,o){var s=new e;return s.bindings=t,s.middleware=n,s.deactivations=i,s.activations=r,s.moduleActivationStore=o,s},e}();t.ContainerSnapshot=n},80175:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;var s=o(n(16674)),a=n(14192),c=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(s.NULL_ARGUMENT);if(null==t)throw new Error(s.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(s.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(s.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(s.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(s.KEY_NOT_FOUND)},e.prototype.removeIntersection=function(e){var t=this;this.traverse((function(n,r){var i=e.hasKey(n)?e.get(n):void 0;if(void 0!==i){var o=r.filter((function(e){return!i.some((function(t){return e===t}))}));t._setValue(n,o)}}))},e.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach((function(r,i){for(var o=[],s=0,a=r;s<a.length;s++){var c=a[s];e(c)?n.push(c):o.push(c)}t._setValue(i,o)})),n},e.prototype.hasKey=function(e){if(null==e)throw new Error(s.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,(0,a.isClonable)(e)?e.clone():e)}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},e}();t.Lookup=c},9229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleActivationStore=void 0;var r=n(80175),i=function(){function e(){this._map=new Map}return e.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},e.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){t._map.set(n,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})})),t},e.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},e.prototype._getEmptyHandlersStore=function(){return{onActivations:new r.Lookup,onDeactivations:new r.Lookup}},e}();t.ModuleActivationStore=i},87405:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.interfaces=void 0,n||(n={}),t.interfaces=n},86700:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=t.getServiceIdentifierAsString=t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=t.decorate=t.interfaces=t.id=t.MetadataReader=t.preDestroy=t.postConstruct=t.targetName=t.multiInject=t.unmanaged=t.optional=t.LazyServiceIdentifer=t.inject=t.named=t.tagged=t.injectable=t.createTaggedDecorator=t.ContainerModule=t.AsyncContainerModule=t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=t.Container=t.METADATA_KEY=void 0;var s=o(n(6867));t.METADATA_KEY=s;var a=n(51389);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return a.Container}});var c=n(28421);Object.defineProperty(t,"BindingScopeEnum",{enumerable:!0,get:function(){return c.BindingScopeEnum}}),Object.defineProperty(t,"BindingTypeEnum",{enumerable:!0,get:function(){return c.BindingTypeEnum}}),Object.defineProperty(t,"TargetTypeEnum",{enumerable:!0,get:function(){return c.TargetTypeEnum}});var l=n(33244);Object.defineProperty(t,"AsyncContainerModule",{enumerable:!0,get:function(){return l.AsyncContainerModule}}),Object.defineProperty(t,"ContainerModule",{enumerable:!0,get:function(){return l.ContainerModule}});var u=n(99934);Object.defineProperty(t,"createTaggedDecorator",{enumerable:!0,get:function(){return u.createTaggedDecorator}});var d=n(64315);Object.defineProperty(t,"injectable",{enumerable:!0,get:function(){return d.injectable}});var h=n(32052);Object.defineProperty(t,"tagged",{enumerable:!0,get:function(){return h.tagged}});var p=n(38085);Object.defineProperty(t,"named",{enumerable:!0,get:function(){return p.named}});var f=n(5744);Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return f.inject}});var g=n(33695);Object.defineProperty(t,"LazyServiceIdentifer",{enumerable:!0,get:function(){return g.LazyServiceIdentifer}});var m=n(6515);Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return m.optional}});var v=n(86757);Object.defineProperty(t,"unmanaged",{enumerable:!0,get:function(){return v.unmanaged}});var y=n(71693);Object.defineProperty(t,"multiInject",{enumerable:!0,get:function(){return y.multiInject}});var b=n(55638);Object.defineProperty(t,"targetName",{enumerable:!0,get:function(){return b.targetName}});var w=n(7014);Object.defineProperty(t,"postConstruct",{enumerable:!0,get:function(){return w.postConstruct}});var S=n(8822);Object.defineProperty(t,"preDestroy",{enumerable:!0,get:function(){return S.preDestroy}});var C=n(51377);Object.defineProperty(t,"MetadataReader",{enumerable:!0,get:function(){return C.MetadataReader}});var _=n(37791);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return _.id}});var P=n(87405);Object.defineProperty(t,"interfaces",{enumerable:!0,get:function(){return P.interfaces}});var E=n(99934);Object.defineProperty(t,"decorate",{enumerable:!0,get:function(){return E.decorate}});var k=n(80758);Object.defineProperty(t,"traverseAncerstors",{enumerable:!0,get:function(){return k.traverseAncerstors}}),Object.defineProperty(t,"taggedConstraint",{enumerable:!0,get:function(){return k.taggedConstraint}}),Object.defineProperty(t,"namedConstraint",{enumerable:!0,get:function(){return k.namedConstraint}}),Object.defineProperty(t,"typeConstraint",{enumerable:!0,get:function(){return k.typeConstraint}});var I=n(55800);Object.defineProperty(t,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return I.getServiceIdentifierAsString}});var D=n(70600);Object.defineProperty(t,"multiBindToService",{enumerable:!0,get:function(){return D.multiBindToService}})},95228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=n(37791),i=function(){function e(e){this.id=(0,r.id)(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=i},47738:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var s=o(n(6867)),a=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===s.NAMED_TAG?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},e}();t.Metadata=a},51377:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;var s=o(n(6867)),a=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(s.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(s.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(s.TAGGED_PROP,e)||[]},e}();t.MetadataReader=a},55314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0;t.Plan=function(e,t){this.parentContext=e,this.rootRequest=t}},86311:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=t.createMockRequest=t.plan=void 0;var s=n(23184),a=o(n(16674)),c=n(28421),l=o(n(6867)),u=n(85265),d=n(55800),h=n(95228),p=n(47738),f=n(55314),g=n(6e3),m=n(6748),v=n(18924);function y(e){return e._bindingDictionary}function b(e,t,n,r,i){var o,c=S(n.container,i.serviceIdentifier);return c.length===s.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),c=S(n.container,i.serviceIdentifier)),o=t?c:c.filter((function(e){var t=new m.Request(e.serviceIdentifier,n,r,e,i);return e.constraint(t)})),function(e,t,n,r){switch(t.length){case s.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var i=(0,d.getServiceIdentifierAsString)(e),o=a.NOT_REGISTERED;throw o+=(0,d.listMetadataForTarget)(i,n),o+=(0,d.listRegisteredBindingsForServiceIdentifier)(r,i,S),new Error(o);case s.BindingCount.OnlyOneBindingAvailable:return t;case s.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;throw i=(0,d.getServiceIdentifierAsString)(e),o=a.AMBIGUOUS_MATCH+" "+i,o+=(0,d.listRegisteredBindingsForServiceIdentifier)(r,i,S),new Error(o)}}(i.serviceIdentifier,o,i,n.container),o}function w(e,t,n,r,i,o){var s,l;if(null===i){s=b(e,t,r,null,o),l=new m.Request(n,r,null,s,o);var u=new f.Plan(r,l);r.addPlan(u)}else s=b(e,t,r,i,o),l=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach((function(t){var n=null;if(o.isArray())n=l.addChildRequest(t.serviceIdentifier,t,o);else{if(t.cache)return;n=l}if(t.type===c.BindingTypeEnum.Instance&&null!==t.implementationType){var i=(0,g.getDependencies)(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var s=(0,g.getBaseClassDependencyCount)(e,t.implementationType);if(i.length<s){var u=a.ARGUMENTS_LENGTH_MISMATCH((0,g.getFunctionName)(t.implementationType));throw new Error(u)}}i.forEach((function(t){w(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function S(e,t){var n=[],r=y(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=S(e.parent,t)),n}t.getBindingDictionary=y,t.plan=function(e,t,n,r,i,o,s,a){void 0===a&&(a=!1);var c=new h.Context(t),f=function(e,t,n,r,i,o){var s=e?l.MULTI_INJECT_TAG:l.INJECT_TAG,a=new p.Metadata(s,n),c=new v.Target(t,"",n,a);if(void 0!==i){var u=new p.Metadata(i,o);c.metadata.push(u)}return c}(n,r,i,0,o,s);try{return w(e,a,i,c,null,f),c}catch(e){throw(0,u.isStackOverflowExeption)(e)&&(0,d.circularDependencyToException)(c.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,r){var i=new v.Target(c.TargetTypeEnum.Variable,"",t,new p.Metadata(n,r)),o=new h.Context(e);return new m.Request(t,o,null,[],i)}},88460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryableString=void 0;var n=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=n},6e3:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=t.getBaseClassDependencyCount=t.getDependencies=void 0;var a=n(33695),c=o(n(16674)),l=n(28421),u=o(n(6867)),d=n(55800);Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return d.getFunctionName}});var h=n(18924);function p(e,t,n,r){var i=e.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o){var a=c.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(a)}var l=i.userGeneratedMetadata,u=Object.keys(l),d=0===n.length&&u.length>0,h=u.length>n.length,p=function(e,t,n,r,i){for(var o=[],s=0;s<i;s++){var a=f(s,e,t,n,r);null!==a&&o.push(a)}return o}(r,t,o,l,d||h?u.length:n.length),g=m(e,n,t);return s(s([],p,!0),g,!0)}function f(e,t,n,r,i){var o=i[e.toString()]||[],s=v(o),u=!0!==s.unmanaged,d=r[e];if((d=s.inject||s.multiInject||d)instanceof a.LazyServiceIdentifer&&(d=d.unwrap()),u){if(!t&&(d===Object||d===Function||void 0===d)){var p=c.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(p)}var f=new h.Target(l.TargetTypeEnum.ConstructorArgument,s.targetName,d);return f.metadata=o,f}return null}function g(e,t,n,r){var i=e||t;if(void 0===i){var o=c.MISSING_INJECTABLE_ANNOTATION+" for property "+String(n)+" in class "+r+".";throw new Error(o)}return i}function m(e,t,n){for(var r=e.getPropertiesMetadata(t),i=[],o=Object.getOwnPropertySymbols(r),a=0,c=Object.keys(r).concat(o);a<c.length;a++){var u=c[a],d=r[u],p=v(d),f=p.targetName||u,y=g(p.inject,p.multiInject,u,n),b=new h.Target(l.TargetTypeEnum.ClassProperty,f,y);b.metadata=d,i.push(b)}var w=Object.getPrototypeOf(t.prototype).constructor;if(w!==Object){var S=m(e,w,n);i=s(s([],i,!0),S,!0)}return i}function v(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[u.INJECT_TAG],multiInject:t[u.MULTI_INJECT_TAG],targetName:t[u.NAME_TAG],unmanaged:t[u.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return p(e,(0,d.getFunctionName)(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=p(t,(0,d.getFunctionName)(r),r,!0),o=i.map((function(e){return e.metadata.filter((function(e){return e.key===u.UNMANAGED_TAG}))})),s=[].concat.apply([],o).length,a=i.length-s;return a>0?a:e(t,r)}return 0}},6748:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var r=n(37791),i=function(){function e(e,t,n,i,o){this.id=(0,r.id)(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();t.Request=i},18924:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;var s=o(n(6867)),a=n(37791),c=n(55800),l=n(47738),u=n(88460),d=function(){function e(e,t,n,r){this.id=(0,a.id)(),this.type=e,this.serviceIdentifier=n;var i="symbol"==typeof t?(0,c.getSymbolDescription)(t):t;this.name=new u.QueryableString(i||""),this.identifier=t,this.metadata=new Array;var o=null;"string"==typeof r?o=new l.Metadata(s.NAMED_TAG,r):r instanceof l.Metadata&&(o=r),null!==o&&this.metadata.push(o)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++)if(n[t].key===e)return!0;return!1},e.prototype.isArray=function(){return this.hasTag(s.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(s.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(s.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return s.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(s.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===s.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return s.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(s.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=d},52279:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=void 0;var u=n(16674),d=n(28421),h=s(n(6867)),p=n(87331);function f(e){var t,n=new((t=e.constr).bind.apply(t,l([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach((function(t,r){var i=t.target.identifier,o=e.propertyInjections[r];n[i]=o})),n}function g(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return c(this,(function(o){for(t=[],n=0,r=e;n<r.length;n++)i=r[n],Array.isArray(i)?t.push(Promise.all(i)):t.push(i);return[2,Promise.all(t)]}))}))}function m(e,t){var n=function(e,t){var n,r;if(Reflect.hasMetadata(h.POST_CONSTRUCT,e)){var i=Reflect.getMetadata(h.POST_CONSTRUCT,e);try{return null===(r=(n=t)[i.value])||void 0===r?void 0:r.call(n)}catch(t){throw new Error((0,u.POST_CONSTRUCT_ERROR)(e.name,t.message))}}}(e,t);return(0,p.isPromise)(n)?n.then((function(){return t})):t}t.resolveInstance=function(e,t,n,i){!function(e,t){e.scope!==d.BindingScopeEnum.Singleton&&function(e,t){var n="Class cannot be instantiated in "+(e.scope===d.BindingScopeEnum.Request?"request":"transient")+" scope.";if("function"==typeof e.onDeactivation)throw new Error((0,u.ON_DEACTIVATION_ERROR)(t.name,n));if(Reflect.hasMetadata(h.PRE_DESTROY,t))throw new Error((0,u.PRE_DESTROY_ERROR)(t.name,n))}(e,t)}(e,t);var o=function(e,t,n){var i;if(t.length>0){var o=function(e,t){return e.reduce((function(e,n){var r=t(n);return n.target.type===d.TargetTypeEnum.ConstructorArgument?e.constructorInjections.push(r):(e.propertyRequests.push(n),e.propertyInjections.push(r)),e.isAsync||(e.isAsync=(0,p.isPromiseOrContainsPromise)(r)),e}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(t,n),s=r(r({},o),{constr:e});i=o.isAsync?function(e){return a(this,void 0,void 0,(function(){var t,n;return c(this,(function(i){switch(i.label){case 0:return[4,g(e.constructorInjections)];case 1:return t=i.sent(),[4,g(e.propertyInjections)];case 2:return n=i.sent(),[2,f(r(r({},e),{constructorInjections:t,propertyInjections:n}))]}}))}))}(s):f(s)}else i=new e;return i}(t,n,i);return(0,p.isPromise)(o)?o.then((function(e){return m(t,e)})):m(t,o)}},31927:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=void 0;var c=o(n(16674)),l=n(28421),u=n(86311),d=n(73380),h=n(87331),p=n(70600),f=n(85265),g=n(52279),m=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,i=t.target&&t.target.isArray(),o=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(i&&o)return r.map((function(t){return m(e)(t)}));if(!t.target.isOptional()||0!==n.length){var s=n[0];return v(e,t,s)}}},v=function(e,t,n){return function(e,t,n){var r=(0,d.tryGetFromScope)(e,t);return null!==r||(r=n(),(0,d.saveToScope)(e,t,r)),r}(e,n,(function(){var r=function(e,t,n){var r,i=t.childRequests;switch((0,p.ensureFullyBound)(n),n.type){case l.BindingTypeEnum.ConstantValue:case l.BindingTypeEnum.Function:r=n.cache;break;case l.BindingTypeEnum.Constructor:r=n.implementationType;break;case l.BindingTypeEnum.Instance:r=(0,g.resolveInstance)(n,n.implementationType,i,m(e));break;default:r=function(e,t){var n=(0,p.getFactoryDetails)(e);return(0,f.tryAndThrowErrorIfStackOverflow)((function(){return n.factory.bind(e)(t)}),(function(){return new Error(c.CIRCULAR_DEPENDENCY_IN_FACTORY(n.factoryType,t.currentRequest.serviceIdentifier.toString()))}))}(n,t.parentContext)}return r}(e,t,n);return(0,h.isPromise)(r)?r.then((function(e){return y(t,n,e)})):y(t,n,r)}))};function y(e,t,n){var r,i=b(e.parentContext,t,n),o=_(e.parentContext.container),s=o.next();do{r=s.value;var a=e.parentContext,c=e.serviceIdentifier,l=C(r,c);i=(0,h.isPromise)(i)?S(l,a,i):w(l,a,i),s=o.next()}while(!0!==s.done&&!(0,u.getBindingDictionary)(r).hasKey(e.serviceIdentifier));return i}var b=function(e,t,n){return"function"==typeof t.onActivation?t.onActivation(e,n):n},w=function(e,t,n){for(var r=e.next();!r.done;){if(n=r.value(t,n),(0,h.isPromise)(n))return S(e,t,n);r=e.next()}return n},S=function(e,t,n){return s(void 0,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:return[4,n];case 1:r=o.sent(),i=e.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(t,r)];case 3:return r=o.sent(),i=e.next(),[3,2];case 4:return[2,r]}}))}))},C=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},_=function(e){for(var t=[e],n=e.parent;null!==n;)t.push(n),n=n.parent;return{next:function(){var e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}};t.resolve=function(e){return m(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},73380:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveToScope=t.tryGetFromScope=void 0;var o=n(86700),s=n(87331);t.tryGetFromScope=function(e,t){return t.scope===o.BindingScopeEnum.Singleton&&t.activated?t.cache:t.scope===o.BindingScopeEnum.Request&&e.has(t.id)?e.get(t.id):null},t.saveToScope=function(e,t,n){t.scope===o.BindingScopeEnum.Singleton&&c(t,n),t.scope===o.BindingScopeEnum.Request&&a(e,t,n)};var a=function(e,t,n){e.has(t.id)||e.set(t.id,n)},c=function(e,t){e.cache=t,e.activated=!0,(0,s.isPromise)(t)&&l(e,t)},l=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return n=i.sent(),e.cache=n,[3,3];case 2:throw r=i.sent(),e.cache=null,e.activated=!1,r;case 3:return[2]}}))}))}},83366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;var r=n(28421),i=n(71325),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},99812:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;var r=n(83366),i=n(51811),o=n(98370),s=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}();t.BindingInWhenOnSyntax=s},51811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;var r=n(98370),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)},e.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new r.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},51860:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;var s=o(n(16674)),a=n(28421),c=n(99812),l=n(71325),u=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=a.BindingTypeEnum.Instance,this._binding.implementationType=e,new c.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+s.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=a.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=a.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new c.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=a.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=a.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(s.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=a.BindingTypeEnum.Function,this._binding.scope=a.BindingScopeEnum.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=a.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toAutoNamedFactory=function(e){return this._binding.type=a.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new l.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=a.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=a.BindingScopeEnum.Singleton,new l.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=u},71325:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;var r=n(51811),i=n(98370),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}();t.BindingWhenOnSyntax=o},98370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;var r=n(51811),i=n(80758),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=(0,i.namedConstraint)(e),new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e&&null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=(0,i.taggedConstraint)(e)(t),new r.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return null!==t&&(0,i.typeConstraint)(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return null!==t&&(0,i.namedConstraint)(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&(0,i.taggedConstraint)(e)(t)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&(0,i.traverseAncerstors)(t,(0,i.typeConstraint)(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&!(0,i.traverseAncerstors)(t,(0,i.typeConstraint)(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&(0,i.traverseAncerstors)(t,(0,i.namedConstraint)(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&!(0,i.traverseAncerstors)(t,(0,i.namedConstraint)(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&(0,i.traverseAncerstors)(n,(0,i.taggedConstraint)(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&!(0,i.traverseAncerstors)(n,(0,i.taggedConstraint)(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&(0,i.traverseAncerstors)(t,e)},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&!(0,i.traverseAncerstors)(t,e)},new r.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},80758:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;var s=o(n(6867)),a=n(47738),c=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||c(n,t))};t.traverseAncerstors=c;var l=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new a.Metadata(e,t),n}};t.taggedConstraint=l;var u=l(s.NAMED_TAG);t.namedConstraint=u,t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}}},87331:(e,t)=>{"use strict";function n(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0}),t.isPromiseOrContainsPromise=t.isPromise=void 0,t.isPromise=n,t.isPromiseOrContainsPromise=function(e){return!!n(e)||Array.isArray(e)&&e.some(n)}},70600:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getFactoryDetails=t.ensureFullyBound=t.multiBindToService=void 0;var s=n(86700),a=o(n(16674)),c=n(28421),l=n(82938);t.multiBindToService=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}},t.ensureFullyBound=function(e){var t=null;switch(e.type){case c.BindingTypeEnum.ConstantValue:case c.BindingTypeEnum.Function:t=e.cache;break;case c.BindingTypeEnum.Constructor:case c.BindingTypeEnum.Instance:t=e.implementationType;break;case c.BindingTypeEnum.DynamicValue:t=e.dynamicValue;break;case c.BindingTypeEnum.Provider:t=e.provider;break;case c.BindingTypeEnum.Factory:t=e.factory}if(null===t){var n=(0,s.getServiceIdentifierAsString)(e.serviceIdentifier);throw new Error(a.INVALID_BINDING_TYPE+" "+n)}},t.getFactoryDetails=function(e){switch(e.type){case c.BindingTypeEnum.Factory:return{factory:e.factory,factoryType:l.FactoryType.Factory};case c.BindingTypeEnum.Provider:return{factory:e.provider,factoryType:l.FactoryType.Provider};case c.BindingTypeEnum.DynamicValue:return{factory:e.dynamicValue,factoryType:l.FactoryType.DynamicValue};default:throw new Error("Unexpected factory type "+e.type)}}},14192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isClonable=void 0,t.isClonable=function(e){return"object"==typeof e&&null!==e&&"clone"in e&&"function"==typeof e.clone}},85265:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.tryAndThrowErrorIfStackOverflow=t.isStackOverflowExeption=void 0;var s=o(n(16674));function a(e){return e instanceof RangeError||e.message===s.STACK_OVERFLOW}t.isStackOverflowExeption=a,t.tryAndThrowErrorIfStackOverflow=function(e,t){try{return e()}catch(e){throw a(e)&&(e=t()),e}}},82938:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.FactoryType=void 0,(n=t.FactoryType||(t.FactoryType={})).DynamicValue="toDynamicValue",n.Factory="toFactory",n.Provider="toProvider"},37791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;var n=0;t.id=function(){return n++}},72707:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstArrayDuplicate=void 0,t.getFirstArrayDuplicate=function(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var i=r[n];if(t.has(i))return i;t.add(i)}}},55800:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getSymbolDescription=t.circularDependencyToException=t.listMetadataForTarget=t.listRegisteredBindingsForServiceIdentifier=t.getServiceIdentifierAsString=t.getFunctionName=void 0;var s=o(n(16674));function a(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function c(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||c(e.parentRequest,t))}function l(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=a,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=l(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(c(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var r=a(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(s.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=l,t.getSymbolDescription=function(e){return e.toString().slice(7,-1)}},46792:(e,t,n)=>{var r=null;"undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof MozWebSocket?r=MozWebSocket:void 0!==n.g?r=n.g.WebSocket||n.g.MozWebSocket:"undefined"!=typeof window?r=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),e.exports=r},18552:(e,t,n)=>{var r=n(10852)(n(55639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(51789),i=n(80401),o=n(57667),s=n(21327),a=n(81866);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},38407:(e,t,n)=>{var r=n(27040),i=n(14125),o=n(82117),s=n(67518),a=n(54705);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},57071:(e,t,n)=>{var r=n(10852)(n(55639),"Map");e.exports=r},83369:(e,t,n)=>{var r=n(24785),i=n(11285),o=n(96e3),s=n(49916),a=n(95265);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},53818:(e,t,n)=>{var r=n(10852)(n(55639),"Promise");e.exports=r},58525:(e,t,n)=>{var r=n(10852)(n(55639),"Set");e.exports=r},46384:(e,t,n)=>{var r=n(38407),i=n(37465),o=n(63779),s=n(67599),a=n(44758),c=n(34309);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=s,l.prototype.has=a,l.prototype.set=c,e.exports=l},62705:(e,t,n)=>{var r=n(55639).Symbol;e.exports=r},11149:(e,t,n)=>{var r=n(55639).Uint8Array;e.exports=r},70577:(e,t,n)=>{var r=n(10852)(n(55639),"WeakMap");e.exports=r},77412:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},34963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},14636:(e,t,n)=>{var r=n(22545),i=n(35694),o=n(1469),s=n(44144),a=n(65776),c=n(36719),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),d=!n&&!u&&s(e),h=!n&&!u&&!d&&c(e),p=n||u||d||h,f=p?r(e.length,String):[],g=f.length;for(var m in e)!t&&!l.call(e,m)||p&&("length"==m||d&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||f.push(m);return f}},29932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},62488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},34865:(e,t,n)=>{var r=n(89465),i=n(77813),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];o.call(e,t)&&i(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},18470:(e,t,n)=>{var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},44037:(e,t,n)=>{var r=n(98363),i=n(3674);e.exports=function(e,t){return e&&r(t,i(t),e)}},63886:(e,t,n)=>{var r=n(98363),i=n(81704);e.exports=function(e,t){return e&&r(t,i(t),e)}},89465:(e,t,n)=>{var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},85990:(e,t,n)=>{var r=n(46384),i=n(77412),o=n(34865),s=n(44037),a=n(63886),c=n(64626),l=n(278),u=n(18805),d=n(1911),h=n(58234),p=n(46904),f=n(64160),g=n(43824),m=n(29148),v=n(38517),y=n(1469),b=n(44144),w=n(56688),S=n(13218),C=n(72928),_=n(3674),P=n(81704),E="[object Arguments]",k="[object Function]",I="[object Object]",D={};D[E]=D["[object Array]"]=D["[object ArrayBuffer]"]=D["[object DataView]"]=D["[object Boolean]"]=D["[object Date]"]=D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Map]"]=D["[object Number]"]=D[I]=D["[object RegExp]"]=D["[object Set]"]=D["[object String]"]=D["[object Symbol]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D["[object Error]"]=D[k]=D["[object WeakMap]"]=!1,e.exports=function e(t,n,T,x,O,R){var M,A=1&n,N=2&n,j=4&n;if(T&&(M=O?T(t,x,O,R):T(t)),void 0!==M)return M;if(!S(t))return t;var F=y(t);if(F){if(M=g(t),!A)return l(t,M)}else{var L=f(t),K=L==k||"[object GeneratorFunction]"==L;if(b(t))return c(t,A);if(L==I||L==E||K&&!O){if(M=N||K?{}:v(t),!A)return N?d(t,a(M,t)):u(t,s(M,t))}else{if(!D[L])return O?t:{};M=m(t,L,A)}}R||(R=new r);var U=R.get(t);if(U)return U;R.set(t,M),C(t)?t.forEach((function(r){M.add(e(r,n,T,r,t,R))})):w(t)&&t.forEach((function(r,i){M.set(i,e(r,n,T,i,t,R))}));var W=F?void 0:(j?N?p:h:N?P:_)(t);return i(W||t,(function(r,i){W&&(r=t[i=r]),o(M,i,e(r,n,T,i,t,R))})),M}},3118:(e,t,n)=>{var r=n(13218),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},68866:(e,t,n)=>{var r=n(62488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},44239:(e,t,n)=>{var r=n(62705),i=n(89607),o=n(2333),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},9454:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},25588:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},28458:(e,t,n)=>{var r=n(23560),i=n(15346),o=n(13218),s=n(80346),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:a).test(s(e))}},29221:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},38749:(e,t,n)=>{var r=n(44239),i=n(41780),o=n(37005),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},280:(e,t,n)=>{var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},10313:(e,t,n)=>{var r=n(13218),i=n(25726),o=n(33498),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}},22545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},80531:(e,t,n)=>{var r=n(62705),i=n(29932),o=n(1469),s=n(33448),a=r?r.prototype:void 0,c=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},27561:(e,t,n)=>{var r=n(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},74318:(e,t,n)=>{var r=n(11149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},64626:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}},57157:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},93147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},40419:(e,t,n)=>{var r=n(62705),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},77133:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},278:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},98363:(e,t,n)=>{var r=n(34865),i=n(89465);e.exports=function(e,t,n,o){var s=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var l=t[a],u=o?o(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),s?i(n,l,u):r(n,l,u)}return n}},18805:(e,t,n)=>{var r=n(98363),i=n(99551);e.exports=function(e,t){return r(e,i(e),t)}},1911:(e,t,n)=>{var r=n(98363),i=n(51442);e.exports=function(e,t){return r(e,i(e),t)}},14429:(e,t,n)=>{var r=n(55639)["__core-js_shared__"];e.exports=r},38777:(e,t,n)=>{var r=n(10852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},31957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},58234:(e,t,n)=>{var r=n(68866),i=n(99551),o=n(3674);e.exports=function(e){return r(e,o,i)}},46904:(e,t,n)=>{var r=n(68866),i=n(51442),o=n(81704);e.exports=function(e){return r(e,o,i)}},45050:(e,t,n)=>{var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},10852:(e,t,n)=>{var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},85924:(e,t,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);e.exports=r},89607:(e,t,n)=>{var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},99551:(e,t,n)=>{var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return o.call(e,t)})))}:i;e.exports=a},51442:(e,t,n)=>{var r=n(62488),i=n(85924),o=n(99551),s=n(70479),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:s;e.exports=a},64160:(e,t,n)=>{var r=n(18552),i=n(57071),o=n(53818),s=n(58525),a=n(70577),c=n(44239),l=n(80346),u="[object Map]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",f="[object DataView]",g=l(r),m=l(i),v=l(o),y=l(s),b=l(a),w=c;(r&&w(new r(new ArrayBuffer(1)))!=f||i&&w(new i)!=u||o&&w(o.resolve())!=d||s&&w(new s)!=h||a&&w(new a)!=p)&&(w=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case g:return f;case m:return u;case v:return d;case y:return h;case b:return p}return t}),e.exports=w},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},51789:(e,t,n)=>{var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},21327:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:(e,t,n)=>{var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},29148:(e,t,n)=>{var r=n(74318),i=n(57157),o=n(93147),s=n(40419),a=n(77133);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Symbol]":return s(e)}}},38517:(e,t,n)=>{var r=n(3118),i=n(85924),o=n(25726);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},65776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:(e,t,n)=>{var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,n)=>{var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},82117:(e,t,n)=>{var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:(e,t,n)=>{var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:(e,t,n)=>{var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:(e,t,n)=>{var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:(e,t,n)=>{var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:(e,t,n)=>{var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},94536:(e,t,n)=>{var r=n(10852)(Object,"create");e.exports=r},86916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},33498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},31167:(e,t,n)=>{e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},55639:(e,t,n)=>{var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},37465:(e,t,n)=>{var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,n)=>{var r=n(38407),i=n(57071),o=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},50361:(e,t,n)=>{var r=n(85990);e.exports=function(e){return r(e,5)}},23279:(e,t,n)=>{var r=n(13218),i=n(7771),o=n(14841),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c,l,u,d,h,p,f=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=c,r=l;return c=l=void 0,f=t,d=e.apply(r,n)}function b(e){var n=e-p;return void 0===p||n>=t||n<0||m&&e-f>=u}function w(){var e=i();if(b(e))return S(e);h=setTimeout(w,function(e){var n=t-(e-p);return m?a(n,u-(e-f)):n}(e))}function S(e){return h=void 0,v&&c?y(e):(c=l=void 0,d)}function C(){var e=i(),n=b(e);if(c=arguments,l=this,p=e,n){if(void 0===h)return function(e){return f=e,h=setTimeout(w,t),g?y(e):d}(p);if(m)return clearTimeout(h),h=setTimeout(w,t),y(p)}return void 0===h&&(h=setTimeout(w,t)),d}return t=o(t)||0,r(n)&&(g=!!n.leading,u=(m="maxWait"in n)?s(o(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),C.cancel=function(){void 0!==h&&clearTimeout(h),f=0,c=p=l=h=void 0},C.flush=function(){return void 0===h?d:S(i())},C}},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},3522:(e,t,n)=>{var r=n(79833),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);e.exports=function(e){return(e=r(e))&&o.test(e)?e.replace(i,"\\$&"):e}},35694:(e,t,n)=>{var r=n(9454),i=n(37005),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,n)=>{var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},44144:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;e.exports=c},23560:(e,t,n)=>{var r=n(44239),i=n(13218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},56688:(e,t,n)=>{var r=n(25588),i=n(7518),o=n(31167),s=o&&o.isMap,a=s?i(s):r;e.exports=a},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},72928:(e,t,n)=>{var r=n(29221),i=n(7518),o=n(31167),s=o&&o.isSet,a=s?i(s):r;e.exports=a},33448:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},36719:(e,t,n)=>{var r=n(38749),i=n(7518),o=n(31167),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},3674:(e,t,n)=>{var r=n(14636),i=n(280),o=n(98612);e.exports=function(e){return o(e)?r(e):i(e)}},81704:(e,t,n)=>{var r=n(14636),i=n(10313),o=n(98612);e.exports=function(e){return o(e)?r(e,!0):i(e)}},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},14841:(e,t,n)=>{var r=n(27561),i=n(13218),o=n(33448),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}},79833:(e,t,n)=>{var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},96562:e=>{"use strict";function t(e){return"number"==typeof e||!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function n(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}e.exports=function(e,r){r||(r={});var i={bools:{},strings:{},unknownFn:null};"function"==typeof r.unknown&&(i.unknownFn=r.unknown),"boolean"==typeof r.boolean&&r.boolean?i.allBools=!0:[].concat(r.boolean).filter(Boolean).forEach((function(e){i.bools[e]=!0}));var o={};function s(e){return o[e].some((function(e){return i.bools[e]}))}Object.keys(r.alias||{}).forEach((function(e){o[e]=[].concat(r.alias[e]),o[e].forEach((function(t){o[t]=[e].concat(o[e].filter((function(e){return t!==e})))}))})),[].concat(r.string).filter(Boolean).forEach((function(e){i.strings[e]=!0,o[e]&&[].concat(o[e]).forEach((function(e){i.strings[e]=!0}))}));var a=r.default||{},c={_:[]};function l(e,t,r){for(var o=e,s=0;s<t.length-1;s++){var a=t[s];if(n(o,a))return;void 0===o[a]&&(o[a]={}),o[a]!==Object.prototype&&o[a]!==Number.prototype&&o[a]!==String.prototype||(o[a]={}),o[a]===Array.prototype&&(o[a]=[]),o=o[a]}var c=t[t.length-1];n(o,c)||(o!==Object.prototype&&o!==Number.prototype&&o!==String.prototype||(o={}),o===Array.prototype&&(o=[]),void 0===o[c]||i.bools[c]||"boolean"==typeof o[c]?o[c]=r:Array.isArray(o[c])?o[c].push(r):o[c]=[o[c],r])}function u(e,n,r){if(!r||!i.unknownFn||function(e,t){return i.allBools&&/^--[^=]+$/.test(t)||i.strings[e]||i.bools[e]||o[e]}(e,r)||!1!==i.unknownFn(r)){var s=!i.strings[e]&&t(n)?Number(n):n;l(c,e.split("."),s),(o[e]||[]).forEach((function(e){l(c,e.split("."),s)}))}}Object.keys(i.bools).forEach((function(e){u(e,void 0!==a[e]&&a[e])}));var d=[];-1!==e.indexOf("--")&&(d=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var h=0;h<e.length;h++){var p,f,g=e[h];if(/^--.+=/.test(g)){var m=g.match(/^--([^=]+)=([\s\S]*)$/);p=m[1];var v=m[2];i.bools[p]&&(v="false"!==v),u(p,v,g)}else if(/^--no-.+/.test(g))u(p=g.match(/^--no-(.+)/)[1],!1,g);else if(/^--.+/.test(g))p=g.match(/^--(.+)/)[1],void 0===(f=e[h+1])||/^(-|--)[^-]/.test(f)||i.bools[p]||i.allBools||o[p]&&s(p)?/^(true|false)$/.test(f)?(u(p,"true"===f,g),h+=1):u(p,!i.strings[p]||"",g):(u(p,f,g),h+=1);else if(/^-[^-]+/.test(g)){for(var y=g.slice(1,-1).split(""),b=!1,w=0;w<y.length;w++)if("-"!==(f=g.slice(w+2))){if(/[A-Za-z]/.test(y[w])&&"="===f[0]){u(y[w],f.slice(1),g),b=!0;break}if(/[A-Za-z]/.test(y[w])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(f)){u(y[w],f,g),b=!0;break}if(y[w+1]&&y[w+1].match(/\W/)){u(y[w],g.slice(w+2),g),b=!0;break}u(y[w],!i.strings[y[w]]||"",g)}else u(y[w],f,g);p=g.slice(-1)[0],b||"-"===p||(!e[h+1]||/^(-|--)[^-]/.test(e[h+1])||i.bools[p]||o[p]&&s(p)?e[h+1]&&/^(true|false)$/.test(e[h+1])?(u(p,"true"===e[h+1],g),h+=1):u(p,!i.strings[p]||"",g):(u(p,e[h+1],g),h+=1))}else if(i.unknownFn&&!1===i.unknownFn(g)||c._.push(i.strings._||!t(g)?g:Number(g)),r.stopEarly){c._.push.apply(c._,e.slice(h+1));break}}return Object.keys(a).forEach((function(e){var t,n,r;t=c,n=e.split("."),r=t,n.slice(0,-1).forEach((function(e){r=r[e]||{}})),n[n.length-1]in r||(l(c,e.split("."),a[e]),(o[e]||[]).forEach((function(t){l(c,t.split("."),a[e])})))})),r["--"]?c["--"]=d.slice():d.forEach((function(e){c._.push(e)})),c}},83300:(e,t)=>{"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},24753:(e,t,n)=>{e.exports=n(24753)},26470:(e,t,n)=>{"use strict";var r=n(34155);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var s={resolve:function(){for(var e,t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var a;s>=0?a=arguments[s]:(void 0===e&&(e=r.cwd()),a=e),i(a),0!==a.length&&(t=a+"/"+t,n=47===a.charCodeAt(0))}return t=o(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];i(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":s.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=s.resolve(e))===(t=s.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,o=r-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var c=t.length-a,l=o<c?o:c,u=-1,d=0;d<=l;++d){if(d===l){if(c>l){if(47===t.charCodeAt(a+d))return t.slice(a+d+1);if(0===d)return t.slice(a+d)}else o>l&&(47===e.charCodeAt(n+d)?u=d:0===d&&(u=0));break}var h=e.charCodeAt(n+d);if(h!==t.charCodeAt(a+d))break;47===h&&(u=d)}var p="";for(d=n+u+1;d<=r;++d)d!==r&&47!==e.charCodeAt(d)||(0===p.length?p+="..":p+="/..");return p.length>0?p+t.slice(a+u):(a+=u,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var n,r=0,o=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,c=-1;for(n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(47===l){if(!s){r=n+1;break}}else-1===c&&(s=!1,c=n+1),a>=0&&(l===t.charCodeAt(a)?-1==--a&&(o=n):(a=-1,o=c))}return r===o?o=c:-1===o&&(o=e.length),e.slice(r,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!s){r=n+1;break}}else-1===o&&(s=!1,o=n+1);return-1===o?"":e.slice(r,o)},extname:function(e){i(e);for(var t=-1,n=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===r&&(o=!1,r=a+1),46===c?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){n=a+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+"/"+r:r}(0,e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=e.charCodeAt(0),o=47===r;o?(t.root="/",n=1):n=0;for(var s=-1,a=0,c=-1,l=!0,u=e.length-1,d=0;u>=n;--u)if(47!==(r=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===r?-1===s?s=u:1!==d&&(d=1):-1!==s&&(d=-1);else if(!l){a=u+1;break}return-1===s||-1===c||0===d||1===d&&s===c-1&&s===a+1?-1!==c&&(t.base=t.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(t.name=e.slice(1,s),t.base=e.slice(1,c)):(t.name=e.slice(a,s),t.base=e.slice(a,c)),t.ext=e.slice(s,c)),a>0?t.dir=e.slice(0,a-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,e.exports=s},34155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,c=[],l=!1,u=-1;function d(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},57129:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!=r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),s=r(t[2]);null===o||null===s||o in i||(i[o]=s)}return i}},28660:(e,t,n)=>{var r,i=n(34155);!function(e){!function(t){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=s(e);function s(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:o=s(r.Reflect,o),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,c=!s&&!a,l={create:s?function(){return j(Object.create(null))}:a?function(){return j({__proto__:null})}:function(){return j({})},has:c?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:c?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),d=i.env&&"true"===i.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}():Map,p=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,f=new(d||"function"!=typeof WeakMap?function(){var e=16,n=l.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+a()}while(l.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:l.create()})}return e[r]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(){var t,n=(t=e,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t));n[6]=79&n[6]|64,n[8]=191&n[8]|128;for(var r="",i=0;i<e;++i){var o=n[i];4!==i&&6!==i&&8!==i||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}():WeakMap);function g(e,t,n){var r=f.get(e);if(P(r)){if(!n)return;r=new h,f.set(e,r)}var i=r.get(t);if(P(i)){if(!n)return;i=new h,r.set(t,i)}return i}function m(e,t,n){if(v(e,t,n))return!0;var r=N(t);return!E(r)&&m(e,r,n)}function v(e,t,n){var r=g(t,n,!1);return!P(r)&&!!r.has(e)}function y(e,t,n){if(v(e,t,n))return b(e,t,n);var r=N(t);return E(r)?void 0:y(e,r,n)}function b(e,t,n){var r=g(t,n,!1);if(!P(r))return r.get(e)}function w(e,t,n,r){g(n,r,!0).set(e,t)}function S(e,t){var n=C(e,t),r=N(e);if(null===r)return n;var i=S(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new p,s=[],a=0,c=n;a<c.length;a++){var l=c[a];o.has(l)||(o.add(l),s.push(l))}for(var u=0,d=i;u<d.length;u++)l=d[u],o.has(l)||(o.add(l),s.push(l));return s}function C(e,t){var n=[],r=g(e,t,!1);if(P(r))return n;for(var i=function(e){var t=R(e,o);if(!x(t))throw new TypeError;var n=t.call(e);if(!k(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=M(i);if(!a)return n.length=s,n;var c=a.value;try{n[s]=c}catch(e){try{A(i)}finally{throw e}}s++}}function _(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function P(e){return void 0===e}function E(e){return null===e}function k(e){return"object"==typeof e?null!==e:"function"==typeof e}function I(e,t){switch(_(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=R(e,r);if(void 0!==i){var o=i.call(e,n);if(k(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(x(n)&&!k(i=n.call(e)))return i;if(x(r=e.valueOf)&&!k(i=r.call(e)))return i}else{var r;if(x(r=e.valueOf)&&!k(i=r.call(e)))return i;var i,o=e.toString;if(x(o)&&!k(i=o.call(e)))return i}throw new TypeError}(e,"default"===n?"number":n)}function D(e){var t=I(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function T(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"function"==typeof e}function O(e){return"function"==typeof e}function R(e,t){var n=e[t];if(null!=n){if(!x(n))throw new TypeError;return n}}function M(e){var t=e.next();return!t.done&&t}function A(e){var t=e.return;t&&t.call(e)}function N(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function j(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(P(n)){if(!T(e))throw new TypeError;if(!O(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!P(r)&&!E(r)){if(!O(r))throw new TypeError;t=r}}return t}(e,t)}if(!T(e))throw new TypeError;if(!k(t))throw new TypeError;if(!k(r)&&!P(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!P(o)&&!E(o)){if(!k(o))throw new TypeError;r=o}}return r}(e,t,n=D(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!k(n))throw new TypeError;if(!P(r)&&!function(e){switch(_(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;w(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!k(n))throw new TypeError;return P(r)||(r=D(r)),w(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!k(t))throw new TypeError;return P(n)||(n=D(n)),m(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!k(t))throw new TypeError;return P(n)||(n=D(n)),v(e,t,n)})),e("getMetadata",(function(e,t,n){if(!k(t))throw new TypeError;return P(n)||(n=D(n)),y(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!k(t))throw new TypeError;return P(n)||(n=D(n)),b(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!k(e))throw new TypeError;return P(t)||(t=D(t)),S(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!k(e))throw new TypeError;return P(t)||(t=D(t)),C(e,t)})),e("deleteMetadata",(function(e,t,n){if(!k(t))throw new TypeError;P(n)||(n=D(n));var r=g(t,n,!1);if(P(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=f.get(t);return i.delete(n),i.size>0||f.delete(t),!0}))}(o)}()}(r||(r={}))},47418:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},26765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(45020);t.ReplaySubject=r.ReplaySubject},37875:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(26765))},45020:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ArgumentOutOfRangeError:()=>N.W,AsyncSubject:()=>v,BehaviorSubject:()=>g,ConnectableObservable:()=>u,EMPTY:()=>me.E,EmptyError:()=>j.K,GroupedObservable:()=>h.T,NEVER:()=>Me,Notification:()=>x.P,NotificationKind:()=>x.W,ObjectUnsubscribedError:()=>f.N,Observable:()=>r.y,ReplaySubject:()=>m.t,Scheduler:()=>T.b,Subject:()=>o.xQ,Subscriber:()=>a.L,Subscription:()=>s.w,TimeoutError:()=>L.W,UnsubscriptionError:()=>F.B,VirtualAction:()=>D,VirtualTimeScheduler:()=>I,animationFrame:()=>k,animationFrameScheduler:()=>E,asap:()=>y.e,asapScheduler:()=>y.E,async:()=>C,asyncScheduler:()=>S,bindCallback:()=>H,bindNodeCallback:()=>J,combineLatest:()=>Y.aj,concat:()=>ge,config:()=>st.v,defer:()=>ve,empty:()=>me.c,forkJoin:()=>be,from:()=>ae,fromEvent:()=>Ce,fromEventPattern:()=>Pe,generate:()=>Ee,identity:()=>M.y,iif:()=>Ie,interval:()=>Te,isObservable:()=>A,merge:()=>Re,never:()=>Ae,noop:()=>R.Z,observable:()=>p.L,of:()=>Q.of,onErrorResumeNext:()=>Ne,pairs:()=>je,partition:()=>Ve,pipe:()=>O.z,queue:()=>_.c,queueScheduler:()=>_.N,race:()=>qe,range:()=>Ge.w,scheduled:()=>se,throwError:()=>ze._,timer:()=>Ye,using:()=>Xe,zip:()=>et});var r=n(61244),i=n(35987),o=n(70211),s=n(98760),a=n(10979),c=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new l(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i.ZT(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(a.L),u=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i.ZT(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.w).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e},t.prototype.refCount=function(){return(e=this).lift(new c(e));var e},t}(r.y),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i.ZT(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(o.Yc),h=n(11120),p=n(15050),f=n(41016),g=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i.ZT(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new f.N;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(o.xQ),m=n(32993),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i.ZT(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),s.w.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(o.xQ),y=n(77681),b=n(96114),w=n(78399),S=new w.v(b.o),C=S,_=n(92546),P=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i.ZT(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(b.o),E=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.ZT(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(w.v))(P),k=E,I=function(e){function t(t,n){void 0===t&&(t=D),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i.ZT(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(w.v),D=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return i.ZT(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(b.o),T=n(38725),x=n(42632),O=n(62561),R=n(33306),M=n(43608);function A(e){return!!e&&(e instanceof r.y||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var N=n(76565),j=n(26929),F=n(28782),L=n(81462),K=n(55709),U=n(93642),W=n(59026),V=n(17507);function H(e,t,n){if(t){if(!(0,V.K)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return H(e,n).apply(void 0,r).pipe((0,K.U)((function(e){return(0,W.k)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o,s=this,a={context:s,subject:o,callbackFunc:e,scheduler:n};return new r.y((function(r){if(n){var i={args:t,subscriber:r,params:a};return n.schedule(B,0,i)}if(!o){o=new v;try{e.apply(s,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.next(e.length<=1?e[0]:e),o.complete()}]))}catch(e){(0,U._)(o)?o.error(e):console.warn(e)}}return o.subscribe(r)}))}}function B(e){var t=this,n=e.args,r=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new v;try{o.apply(s,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(a.schedule(q,0,{value:r,subject:c}))}]))}catch(e){c.error(e)}}this.add(c.subscribe(r))}function q(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function J(e,t,n){if(t){if(!(0,V.K)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return J(e,n).apply(void 0,r).pipe((0,K.U)((function(e){return(0,W.k)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new r.y((function(r){var i=o.context,s=o.subject;if(n)return n.schedule($,0,{params:o,subscriber:r,context:i});if(!s){s=o.subject=new v;try{e.apply(i,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?s.error(n):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){(0,U._)(s)?s.error(e):console.warn(e)}}return s.subscribe(r)}))}}function $(e){var t=this,n=e.params,r=e.subscriber,i=e.context,o=n.callbackFunc,s=n.args,a=n.scheduler,c=n.subject;if(!c){c=n.subject=new v;try{o.apply(i,s.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(a.schedule(z,0,{err:r,subject:c}));else{var i=e.length<=1?e[0]:e;t.add(a.schedule(G,0,{value:i,subject:c}))}}]))}catch(e){this.add(a.schedule(z,0,{err:e,subject:c}))}}this.add(c.subscribe(r))}function G(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function z(e){var t=e.err;e.subject.error(t)}var Y=n(75142),Q=n(18170),X=n(84551),Z=n(73049),ee=n(53109),te=n(91275),ne=n(76208),re=n(70336),ie=n(39217),oe=n(6727);function se(e,t){if(null!=e){if((0,ne.c)(e))return function(e,t){return new r.y((function(n){var r=new s.w;return r.add(t.schedule((function(){var i=e[p.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if((0,re.t)(e))return(0,Z.c)(e,t);if((0,ie.z)(e))return(0,ee.r)(e,t);if((0,oe.T)(e)||"string"==typeof e)return(0,te.Q)(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function ae(e,t){return t?se(e,t):e instanceof r.y?e:new r.y((0,X.s)(e))}var ce=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return i.ZT(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(a.L),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.ZT(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(a.L);function ue(e,t){if(!t.closed){if(e instanceof r.y)return e.subscribe(t);var n;try{n=(0,X.s)(e)(t)}catch(e){t.error(e)}return n}}function de(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(de((function(n,r){return ae(e(n,r)).pipe((0,K.U)((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new he(e,n))})}var he=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new pe(e,this.project,this.concurrent))},e}(),pe=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i.ZT(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new ce(this),n=this.destination;n.add(t);var r=ue(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(le);function fe(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),de(M.y,e)}function ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fe(1)(Q.of.apply(void 0,e))}var me=n(5631);function ve(e){return new r.y((function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?ae(n):(0,me.c)()).subscribe(t)}))}var ye=n(92009);function be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if((0,W.k)(n))return we(n,null);if((0,ye.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return we(r.map((function(e){return n[e]})),r)}}if("function"==typeof e[e.length-1]){var i=e.pop();return we(e=1===e.length&&(0,W.k)(e[0])?e[0]:e,null).pipe((0,K.U)((function(e){return i.apply(void 0,e)})))}return we(e,null)}function we(e,t){return new r.y((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,s=0,a=function(a){var c=ae(e[a]),l=!1;n.add(c.subscribe({next:function(e){l||(l=!0,s++),i[a]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&l||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},c=0;c<r;c++)a(c);else n.complete()}))}var Se=n(14156);function Ce(e,t,n,i){return(0,Se.m)(n)&&(i=n,n=void 0),i?Ce(e,t,n).pipe((0,K.U)((function(e){return(0,W.k)(e)?i.apply(void 0,e):i(e)}))):new r.y((function(r){_e(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function _e(e,t,n,r,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var s=e;e.addEventListener(t,n,i),o=function(){return s.removeEventListener(t,n,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var a=e;e.on(t,n),o=function(){return a.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var c=e;e.addListener(t,n),o=function(){return c.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,u=e.length;l<u;l++)_e(e[l],t,n,r,i)}r.add(o)}function Pe(e,t,n){return n?Pe(e,t).pipe((0,K.U)((function(e){return(0,W.k)(e)?n.apply(void 0,e):n(e)}))):new r.y((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if((0,Se.m)(t))return function(){return t(i,r)}}))}function Ee(e,t,n,i,o){var s,a;if(1==arguments.length){var c=e;a=c.initialState,t=c.condition,n=c.iterate,s=c.resultSelector||M.y,o=c.scheduler}else void 0===i||(0,V.K)(i)?(a=e,s=M.y,o=i):(a=e,s=i);return new r.y((function(e){var r=a;if(o)return o.schedule(ke,0,{subscriber:e,iterate:n,condition:t,resultSelector:s,state:r});for(;;){if(t){var i=void 0;try{i=t(r)}catch(t){return void e.error(t)}if(!i){e.complete();break}}var c=void 0;try{c=s(r)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{r=n(r)}catch(t){return void e.error(t)}}}))}function ke(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function Ie(e,t,n){return void 0===t&&(t=me.E),void 0===n&&(n=me.E),ve((function(){return e()?t:n}))}var De=n(35812);function Te(e,t){return void 0===e&&(e=0),void 0===t&&(t=C),(!(0,De.k)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=C),new r.y((function(n){return n.add(t.schedule(xe,e,{subscriber:n,counter:0,period:e})),n}))}function xe(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}var Oe=n(43375);function Re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,i=null,o=e[e.length-1];return(0,V.K)(o)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof o&&(n=e.pop()),null===i&&1===e.length&&e[0]instanceof r.y?e[0]:fe(n)((0,Oe.n)(e,i))}var Me=new r.y(R.Z);function Ae(){return Me}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return me.E;var n=e[0],i=e.slice(1);return 1===e.length&&(0,W.k)(n)?Ne.apply(void 0,n):new r.y((function(e){var t=function(){return e.add(Ne.apply(void 0,i).subscribe(e))};return ae(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function je(e,t){return t?new r.y((function(n){var r=Object.keys(e),i=new s.w;return i.add(t.schedule(Fe,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i})):new r.y((function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()}))}function Fe(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var s=t[n];r.next([s,o[s]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var Le=n(18463);function Ke(e,t){return function(n){return n.lift(new Ue(e,t))}}var Ue=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new We(e,this.predicate,this.thisArg))},e}(),We=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i.ZT(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(a.L);function Ve(e,t,n){return[Ke(t,n)(new r.y((0,X.s)(e))),Ke((0,Le.f)(t,n))(new r.y((0,X.s)(e)))]}var He=n(62039),Be=n(47407);function qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!(0,W.k)(e[0]))return e[0];e=e[0]}return(0,Oe.n)(e,void 0).lift(new Je)}var Je=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new $e(e))},e}(),$e=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i.ZT(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=(0,Be.D)(this,r,void 0,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)},t}(He.L),Ge=n(31898),ze=n(64944);function Ye(e,t,n){void 0===e&&(e=0);var i=-1;return(0,De.k)(t)?i=Number(t)<1?1:Number(t):(0,V.K)(t)&&(n=t),(0,V.K)(n)||(n=C),new r.y((function(t){var r=(0,De.k)(e)?e:+e-n.now();return n.schedule(Qe,r,{index:0,period:i,subscriber:t})}))}function Qe(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Xe(e,t){return new r.y((function(n){var r,i;try{r=e()}catch(e){return void n.error(e)}try{i=t(r)}catch(e){return void n.error(e)}var o=(i?ae(i):me.E).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}var Ze=n(999);function et(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),(0,Oe.n)(e,void 0).lift(new tt(n))}var tt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new nt(e,this.resultSelector))},e}(),nt=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:void 0,i}return i.ZT(t,e),t.prototype._next=function(e){var t=this.iterators;(0,W.k)(e)?t.push(new it(e)):"function"==typeof e[Ze.hZ]?t.push(new rt(e[Ze.hZ]())):t.push(new ot(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++)if("function"==typeof(s=e[r]).hasValue&&!s.hasValue())return;var i=!1,o=[];for(r=0;r<t;r++){var s,a=(s=e[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(a.L),rt=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),it=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Ze.hZ]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),ot=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i.ZT(t,e),t.prototype[Ze.hZ]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return ue(this.observable,new ce(this))},t}(le),st=n(30150)},25472:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AjaxError:()=>R,AjaxObservable:()=>T,AjaxResponse:()=>O,AjaxSubscriber:()=>x,AjaxTimeoutError:()=>A,AnonymousSubject:()=>a.ug,ArgumentOutOfRangeError:()=>Z.W,CombineLatestOperator:()=>W.Ms,EmptyError:()=>ee.K,GroupedObservable:()=>G.T,Immediate:()=>te.H,InnerSubscriber:()=>i.d,ObjectUnsubscribedError:()=>ne.N,OuterSubscriber:()=>o.L,Scheduler:()=>s.b,SubjectSubscription:()=>c.W,SubscribeOnObservable:()=>q,Subscriber:()=>l.L,TimeInterval:()=>$,TimeoutError:()=>re.W,Timestamp:()=>J,UnsubscriptionError:()=>ie.B,WebSocketSubject:()=>K,ajax:()=>N,ajaxDelete:()=>P,ajaxGet:()=>C,ajaxGetJSON:()=>D,ajaxPatch:()=>k,ajaxPost:()=>_,ajaxPut:()=>E,applyMixins:()=>oe,config:()=>r.v,defaultThrottleConfig:()=>z,dispatch:()=>V.W,errorObject:()=>se,fromIterable:()=>m,fromPromise:()=>p,hostReportError:()=>ae.z,identity:()=>ce.y,isArray:()=>le.k,isArrayLike:()=>ue.z,isDate:()=>de,isFunction:()=>pe.m,isIterable:()=>fe.T,isNumeric:()=>B.k,isObject:()=>ge.K,isObservable:()=>me.c,isPromise:()=>ve.t,isScheduler:()=>ye.K,iterator:()=>Q.hZ,noop:()=>be.Z,not:()=>we.f,observable:()=>X.L,pipe:()=>Se.z,root:()=>S,rxSubscriber:()=>Y.b,subscribeTo:()=>Ce.s,subscribeToArray:()=>_e.V,subscribeToIterable:()=>f.u,subscribeToObservable:()=>Pe.h,subscribeToPromise:()=>d.A,subscribeToResult:()=>Ee.D,toSubscriber:()=>ke.Y,tryCatch:()=>De,webSocket:()=>U});var r=n(30150),i=n(81112),o=n(62039),s=n(38725),a=n(70211),c=n(18253),l=n(10979),u=n(61244),d=n(51203),h=n(73049);function p(e,t){return t?(0,h.c)(e,t):new u.y((0,d.A)(e))}var f=n(52949),g=n(91275);function m(e,t){if(!e)throw new Error("Iterable cannot be null");return t?(0,g.Q)(e,t):new u.y((0,f.u)(e))}var v=n(35987),y="undefined"!=typeof window&&window,b="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,w=void 0!==n.g&&n.g,S=y||w||b;function C(e,t){return void 0===t&&(t=null),new T({method:"GET",url:e,headers:t})}function _(e,t,n){return new T({method:"POST",url:e,body:t,headers:n})}function P(e,t){return new T({method:"DELETE",url:e,headers:t})}function E(e,t,n){return new T({method:"PUT",url:e,body:t,headers:n})}function k(e,t,n){return new T({method:"PATCH",url:e,body:t,headers:n})}var I=(0,n(55709).U)((function(e,t){return e.response}));function D(e,t){return I(new T({method:"GET",url:e,responseType:"json",headers:t}))}var T=function(e){function t(t){var n=e.call(this)||this,r={async:!0,createXHR:function(){return this.crossDomain?function(){if(S.XMLHttpRequest)return new S.XMLHttpRequest;if(S.XDomainRequest)return new S.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(S.XMLHttpRequest)return new S.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(e=t[n],new S.ActiveXObject(e))break}catch(e){}return new S.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)r.url=t;else for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return n.request=r,n}var n;return v.ZT(t,e),t.prototype._subscribe=function(e){return new x(e,this.request)},t.create=((n=function(e){return new t(e)}).get=C,n.post=_,n.delete=P,n.put=E,n.patch=k,n.getJSON=D,n),t}(u.y),x=function(e){function t(t,n){var r=e.call(this,t)||this;r.request=n,r.done=!1;var i=n.headers=n.headers||{};return n.crossDomain||r.getHeader(i,"X-Requested-With")||(i["X-Requested-With"]="XMLHttpRequest"),r.getHeader(i,"Content-Type")||S.FormData&&n.body instanceof S.FormData||void 0===n.body||(i["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=r.serializeBody(n.body,r.getHeader(n.headers,"Content-Type")),r.send(),r}return v.ZT(t,e),t.prototype.next=function(e){this.done=!0;var t,n=this,r=n.xhr,i=n.request,o=n.destination;try{t=new O(e,r,i)}catch(e){return o.error(e)}o.next(t)},t.prototype.send=function(){var e=this.request,t=this.request,n=t.user,r=t.method,i=t.url,o=t.async,s=t.password,a=t.headers,c=t.body;try{var l=this.xhr=e.createXHR();this.setupEvents(l,e),n?l.open(r,i,o,n,s):l.open(r,i,o),o&&(l.timeout=e.timeout,l.responseType=e.responseType),"withCredentials"in l&&(l.withCredentials=!!e.withCredentials),this.setHeaders(l,a),c?l.send(c):l.send()}catch(e){this.error(e)}},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(S.FormData&&e instanceof S.FormData)return e;if(t){var n=t.indexOf(";");-1!==n&&(t=t.substring(0,n))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n])},t.prototype.getHeader=function(e,t){for(var n in e)if(n.toLowerCase()===t.toLowerCase())return e[n]},t.prototype.setupEvents=function(e,t){var n,r,i=t.progressSubscriber;function o(e){var t,n=o,r=n.subscriber,i=n.progressSubscriber,s=n.request;i&&i.error(e);try{t=new A(this,s)}catch(e){t=e}r.error(t)}(e.ontimeout=o,o.request=t,o.subscriber=this,o.progressSubscriber=i,e.upload&&"withCredentials"in e)&&(i&&(n=function(e){n.progressSubscriber.next(e)},S.XDomainRequest?e.onprogress=n:e.upload.onprogress=n,n.progressSubscriber=i),r=function(e){var t,n=r,i=n.progressSubscriber,o=n.subscriber,s=n.request;i&&i.error(e);try{t=new R("ajax error",this,s)}catch(e){t=e}o.error(t)},e.onerror=r,r.request=t,r.subscriber=this,r.progressSubscriber=i);function s(e){}function a(e){var t=a,n=t.subscriber,r=t.progressSubscriber,i=t.request;if(4===this.readyState){var o=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;if(0===o&&(o=s?200:0),o<400)r&&r.complete(),n.next(e),n.complete();else{r&&r.error(e);var c=void 0;try{c=new R("ajax error "+o,this,i)}catch(e){c=e}n.error(c)}}}e.onreadystatechange=s,s.subscriber=this,s.progressSubscriber=i,s.request=t,e.onload=a,a.subscriber=this,a.progressSubscriber=i,a.request=t},t.prototype.unsubscribe=function(){var t=this.done,n=this.xhr;!t&&n&&4!==n.readyState&&"function"==typeof n.abort&&n.abort(),e.prototype.unsubscribe.call(this)},t}(l.L),O=function(){return function(e,t,n){this.originalEvent=e,this.xhr=t,this.request=n,this.status=t.status,this.responseType=t.responseType||n.responseType,this.response=M(this.responseType,t)}}(),R=function(){function e(e,t,n){return Error.call(this),this.message=e,this.name="AjaxError",this.xhr=t,this.request=n,this.status=t.status,this.responseType=t.responseType||n.responseType,this.response=M(this.responseType,t),this}return e.prototype=Object.create(Error.prototype),e}();function M(e,t){switch(e){case"json":return function(e){return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null")}(t);case"xml":return t.responseXML;default:return"response"in t?t.response:t.responseText}}var A=function(e,t){return R.call(this,"ajax timeout",e,t),this.name="AjaxTimeoutError",this},N=function(){return T.create}(),j=n(98760),F=n(32993),L={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},K=function(e){function t(t,n){var r=e.call(this)||this;if(t instanceof u.y)r.destination=n,r.source=t;else{var i=r._config=v.pi({},L);if(r._output=new a.xQ,"string"==typeof t)i.url=t;else for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");r.destination=new F.t}return r}return v.ZT(t,e),t.prototype.lift=function(e){var n=new t(this._config,this.destination);return n.operator=e,n.source=this,n},t.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new F.t),this._output=new a.xQ},t.prototype.multiplex=function(e,t,n){var r=this;return new u.y((function(i){try{r.next(e())}catch(e){i.error(e)}var o=r.subscribe((function(e){try{n(e)&&i.next(e)}catch(e){i.error(e)}}),(function(e){return i.error(e)}),(function(){return i.complete()}));return function(){try{r.next(t())}catch(e){i.error(e)}o.unsubscribe()}}))},t.prototype._connectSocket=function(){var e=this,t=this._config,n=t.WebSocketCtor,r=t.protocol,i=t.url,o=t.binaryType,s=this._output,a=null;try{a=r?new n(i,r):new n(i),this._socket=a,o&&(this._socket.binaryType=o)}catch(e){return void s.error(e)}var c=new j.w((function(){e._socket=null,a&&1===a.readyState&&a.close()}));a.onopen=function(t){if(!e._socket)return a.close(),void e._resetState();var n=e._config.openObserver;n&&n.next(t);var r=e.destination;e.destination=l.L.create((function(t){if(1===a.readyState)try{var n=e._config.serializer;a.send(n(t))}catch(t){e.destination.error(t)}}),(function(t){var n=e._config.closingObserver;n&&n.next(void 0),t&&t.code?a.close(t.code,t.reason):s.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()}),(function(){var t=e._config.closingObserver;t&&t.next(void 0),a.close(),e._resetState()})),r&&r instanceof F.t&&c.add(r.subscribe(e.destination))},a.onerror=function(t){e._resetState(),s.error(t)},a.onclose=function(t){e._resetState();var n=e._config.closeObserver;n&&n.next(t),t.wasClean?s.complete():s.error(t)},a.onmessage=function(t){try{var n=e._config.deserializer;s.next(n(t))}catch(e){s.error(e)}}},t.prototype._subscribe=function(e){var t=this,n=this.source;return n?n.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add((function(){var e=t._socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())})),e)},t.prototype.unsubscribe=function(){var t=this._socket;t&&1===t.readyState&&t.close(),this._resetState(),e.prototype.unsubscribe.call(this)},t}(a.ug);function U(e){return new K(e)}var W=n(75142),V=n(31898),H=n(77681),B=n(35812),q=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=H.e);var i=e.call(this)||this;return i.source=t,i.delayTime=n,i.scheduler=r,(!(0,B.k)(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=H.e),i}return v.ZT(t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=H.e),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source;return this.scheduler.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(u.y),J=function(){return function(e,t){this.value=e,this.timestamp=t}}(),$=function(){return function(e,t){this.value=e,this.interval=t}}(),G=n(11120),z={leading:!0,trailing:!1},Y=n(23142),Q=n(999),X=n(15050),Z=n(76565),ee=n(26929),te=n(78147),ne=n(41016),re=n(81462),ie=n(28782);function oe(e,t){for(var n=0,r=t.length;n<r;n++)for(var i=t[n],o=Object.getOwnPropertyNames(i.prototype),s=0,a=o.length;s<a;s++){var c=o[s];e.prototype[c]=i.prototype[c]}}var se={e:{}},ae=n(71644),ce=n(43608),le=n(59026),ue=n(39217);function de(e){return e instanceof Date&&!isNaN(+e)}var he,pe=n(14156),fe=n(6727),ge=n(92009),me=n(76208),ve=n(70336),ye=n(17507),be=n(33306),we=n(18463),Se=n(62561),Ce=n(84551),_e=n(56900),Pe=n(24105),Ee=n(47407),ke=n(3680);function Ie(){se.e=void 0;try{return he.apply(this,arguments)}catch(e){return se.e=e,se}finally{he=void 0}}function De(e){return he=e,Ie}},81112:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(35987),i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.ZT(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n(10979).L)},42632:(e,t,n)=>{"use strict";n.d(t,{P:()=>a,W:()=>r});var r,i=n(5631),o=n(18170),s=n(64944);r||(r={});var a=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,i.c)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},61244:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(93642),i=n(3680),o=n(15050),s=n(62561),a=n(30150),c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=(0,i.Y)(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||a.v.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.v.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),(0,r._)(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=l(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:(0,s.U)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=l(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function l(e){if(e||(e=a.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},32174:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(30150),i=n(71644),o={closed:!0,next:function(e){},error:function(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete:function(){}}},62039:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var r=n(35987),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.ZT(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(10979).L)},32993:(e,t,n)=>{"use strict";n.d(t,{t:()=>p});var r=n(35987),i=n(70211),o=n(92546),s=n(98760),a=n(10979),c=n(42632),l=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r.ZT(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(c.P.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(c.P.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(c.P.createComplete()),this.unsubscribe()},t}(a.L),u=function(){return function(e,t){this.notification=e,this.destination=t}}(),d=n(41016),h=n(18253),p=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.ZT(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new f(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new d.N;if(this.isStopped||this.hasError?t=s.w.EMPTY:(this.observers.push(e),t=new h.W(this,e)),i&&e.add(e=new l(e,i)),n)for(var a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.c).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.xQ),f=function(){return function(e,t){this.time=e,this.value=t}}()},38725:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}()},70211:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>u,ug:()=>h,xQ:()=>d});var r=n(35987),i=n(61244),o=n(10979),s=n(98760),a=n(41016),c=n(18253),l=n(23142),u=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.ZT(t,e),t}(o.L),d=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.ZT(t,e),t.prototype[l.b]=function(){return new u(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.N;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.N;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new c.W(this,e))},t.prototype.asObservable=function(){var e=new i.y;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(i.y),h=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.ZT(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.w.EMPTY},t}(d)},18253:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(35987),i=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.ZT(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(98760).w)},10979:(e,t,n)=>{"use strict";n.d(t,{L:()=>u});var r=n(35987),i=n(14156),o=n(32174),s=n(98760),a=n(23142),c=n(30150),l=n(71644),u=function(e){function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o.c;break;case 1:if(!n){s.destination=o.c;break}if("object"==typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new d(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new d(s,n,r,i)}return s}return r.ZT(t,e),t.prototype[a.b]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(s.w),d=function(e){function t(t,n,r,s){var a,c=e.call(this)||this;c._parentSubscriber=t;var l=c;return(0,i.m)(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o.c&&(l=Object.create(n),(0,i.m)(l.unsubscribe)&&c.add(l.unsubscribe.bind(l)),l.unsubscribe=c.unsubscribe.bind(c))),c._context=l,c._next=a,c._error=r,c._complete=s,c}return r.ZT(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,l.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,l.z)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),c.v.useDeprecatedSynchronousErrorHandling)throw e;(0,l.z)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return c.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):((0,l.z)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},98760:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(59026),i=n(92009),o=n(14156),s=n(28782),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,a=n._parentOrParents,l=n._ctorUnsubscribe,u=n._unsubscribe,d=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof e)a.remove(this);else if(null!==a)for(var h=0;h<a.length;++h)a[h].remove(this);if((0,o.m)(u)){l&&(this._unsubscribe=void 0);try{u.call(this)}catch(e){t=e instanceof s.B?c(e.errors):[e]}}if((0,r.k)(d)){h=-1;for(var p=d.length;++h<p;){var f=d[h];if((0,i.K)(f))try{f.unsubscribe()}catch(e){t=t||[],e instanceof s.B?t=t.concat(c(e.errors)):t.push(e)}}}if(t)throw new s.B(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function c(e){return e.reduce((function(e,t){return e.concat(t instanceof s.B?t.errors:t)}),[])}},30150:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},75142:(e,t,n)=>{"use strict";n.d(t,{Ms:()=>d,aj:()=>u});var r=n(35987),i=n(17507),o=n(59026),s=n(62039),a=n(47407),c=n(43375),l={};function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,r=void 0;return(0,i.K)(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&(0,o.k)(e[0])&&(e=e[0]),(0,c.n)(e,r).lift(new d(n))}var d=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.resultSelector))},e}(),h=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.ZT(t,e),t.prototype._next=function(e){this.values.push(l),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add((0,a.D)(this,r,void 0,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=this.values,i=r[n],o=this.toRespond?i===l?--this.toRespond:this.toRespond:0;r[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.L)},5631:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,c:()=>o});var r=n(61244),i=new r.y((function(e){return e.complete()}));function o(e){return e?function(e){return new r.y((function(t){return e.schedule((function(){return t.complete()}))}))}(e):i}},43375:(e,t,n)=>{"use strict";n.d(t,{n:()=>s});var r=n(61244),i=n(56900),o=n(53109);function s(e,t){return t?(0,o.r)(e,t):new r.y((0,i.V)(e))}},18170:(e,t,n)=>{"use strict";n.d(t,{of:()=>s});var r=n(17507),i=n(43375),o=n(53109);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return(0,r.K)(n)?(e.pop(),(0,o.r)(e,n)):(0,i.n)(e)}},31898:(e,t,n)=>{"use strict";n.d(t,{W:()=>o,w:()=>i});var r=n(61244);function i(e,t,n){return void 0===e&&(e=0),new r.y((function(r){void 0===t&&(t=e,e=0);var i=0,s=e;if(n)return n.schedule(o,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(s++),r.closed)break}}))}function o(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}},64944:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(61244);function i(e,t){return t?new r.y((function(n){return t.schedule(o,0,{error:e,subscriber:n})})):new r.y((function(t){return t.error(e)}))}function o(e){var t=e.error;e.subscriber.error(t)}},11120:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n(35987),i=n(98760),o=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return r.ZT(t,e),t.prototype._subscribe=function(e){var t=new i.w,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new s(n)),t.add(r.subscribe(e)),t},t}(n(61244).y),s=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return r.ZT(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(i.w)},55709:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(35987),i=n(10979);function o(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.ZT(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.L)},53109:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(61244),i=n(98760);function o(e,t){return new r.y((function(n){var r=new i.w,o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},91275:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});var r=n(61244),i=n(98760),o=n(999);function s(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y((function(n){var r,s=new i.w;return s.add((function(){r&&"function"==typeof r.return&&r.return()})),s.add(t.schedule((function(){r=e[o.hZ](),s.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),s}))}},73049:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(61244),i=n(98760);function o(e,t){return new r.y((function(n){var r=new i.w;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}},96114:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var r=n(35987),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r.ZT(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return r.ZT(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(98760).w))},78399:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(35987),i=n(38725),o=function(e){function t(n,r){void 0===r&&(r=i.b.now);var o=e.call(this,n,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.ZT(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(i.b)},77681:(e,t,n)=>{"use strict";n.d(t,{e:()=>a,E:()=>s});var r=n(35987),i=n(78147),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.ZT(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=i.H.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(i.H.clearImmediate(n),t.scheduled=void 0)},t}(n(96114).o),s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.ZT(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(78399).v))(o),a=s},92546:(e,t,n)=>{"use strict";n.d(t,{c:()=>s,N:()=>o});var r=n(35987),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.ZT(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n(96114).o),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.ZT(t,e),t}(n(78399).v))(i),s=o},999:(e,t,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,{hZ:()=>i});var i=r()},15050:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},23142:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},76565:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},26929:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var r=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}()},78147:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r=1,i=function(){return Promise.resolve()}(),o={};function s(e){return e in o&&(delete o[e],!0)}var a={setImmediate:function(e){var t=r++;return o[t]=!0,i.then((function(){return s(t)&&e()})),t},clearImmediate:function(e){s(e)}}},41016:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},81462:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var r=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}()},28782:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},93642:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r=n(10979);function i(e){for(;e;){var t=e,n=t.closed,i=t.destination,o=t.isStopped;if(n||o)return!1;e=i&&i instanceof r.L?i:null}return!0}},71644:(e,t,n)=>{"use strict";function r(e){setTimeout((function(){throw e}),0)}n.d(t,{z:()=>r})},43608:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},59026:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},39217:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},14156:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},76208:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var r=n(15050);function i(e){return e&&"function"==typeof e[r.L]}},6727:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var r=n(999);function i(e){return e&&"function"==typeof e[r.hZ]}},35812:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(59026);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},92009:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},70336:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},17507:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},33306:(e,t,n)=>{"use strict";function r(){}n.d(t,{Z:()=>r})},18463:(e,t,n)=>{"use strict";function r(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}n.d(t,{f:()=>r})},62561:(e,t,n)=>{"use strict";n.d(t,{U:()=>o,z:()=>i});var r=n(43608);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return 0===e.length?r.y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}},84551:(e,t,n)=>{"use strict";n.d(t,{s:()=>h});var r=n(56900),i=n(51203),o=n(52949),s=n(24105),a=n(39217),c=n(70336),l=n(92009),u=n(999),d=n(15050),h=function(e){if(e&&"function"==typeof e[d.L])return(0,s.h)(e);if((0,a.z)(e))return(0,r.V)(e);if((0,c.t)(e))return(0,i.A)(e);if(e&&"function"==typeof e[u.hZ])return(0,o.u)(e);var t=(0,l.K)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},56900:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},52949:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(999),i=function(e){return function(t){for(var n=e[r.hZ]();;){var i=void 0;try{i=n.next()}catch(e){return t.error(e),t}if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}}},24105:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(15050),i=function(e){return function(t){var n=e[r.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},51203:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(71644),i=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,r.z),t}}},47407:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var r=n(81112),i=n(84551),o=n(61244);function s(e,t,n,s,a){if(void 0===a&&(a=new r.d(e,n,s)),!a.closed)return t instanceof o.y?t.subscribe(a):(0,i.s)(t)(a)}},3680:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var r=n(10979),i=n(23142),o=n(32174);function s(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(o.c)}},35987:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>i,pi:()=>o});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)}},36625:(e,t,n)=>{var r,i=n(34155);t=e.exports=ee,r=i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,a=o-6,c=t.re=[],l=t.safeRe=[],u=t.src=[],d=0,h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",o],[h,a]];function f(e){for(var t=0;t<p.length;t++){var n=p[t][0],r=p[t][1];e=e.split(n+"*").join(n+"{0,"+r+"}").split(n+"+").join(n+"{1,"+r+"}")}return e}var g=d++;u[g]="0|[1-9]\\d*";var m=d++;u[m]="\\d+";var v=d++;u[v]="\\d*[a-zA-Z-]"+h+"*";var y=d++;u[y]="("+u[g]+")\\.("+u[g]+")\\.("+u[g]+")";var b=d++;u[b]="("+u[m]+")\\.("+u[m]+")\\.("+u[m]+")";var w=d++;u[w]="(?:"+u[g]+"|"+u[v]+")";var S=d++;u[S]="(?:"+u[m]+"|"+u[v]+")";var C=d++;u[C]="(?:-("+u[w]+"(?:\\."+u[w]+")*))";var _=d++;u[_]="(?:-?("+u[S]+"(?:\\."+u[S]+")*))";var P=d++;u[P]=h+"+";var E=d++;u[E]="(?:\\+("+u[P]+"(?:\\."+u[P]+")*))";var k=d++,I="v?"+u[y]+u[C]+"?"+u[E]+"?";u[k]="^"+I+"$";var D="[v=\\s]*"+u[b]+u[_]+"?"+u[E]+"?",T=d++;u[T]="^"+D+"$";var x=d++;u[x]="((?:<|>)?=?)";var O=d++;u[O]=u[m]+"|x|X|\\*";var R=d++;u[R]=u[g]+"|x|X|\\*";var M=d++;u[M]="[v=\\s]*("+u[R]+")(?:\\.("+u[R]+")(?:\\.("+u[R]+")(?:"+u[C]+")?"+u[E]+"?)?)?";var A=d++;u[A]="[v=\\s]*("+u[O]+")(?:\\.("+u[O]+")(?:\\.("+u[O]+")(?:"+u[_]+")?"+u[E]+"?)?)?";var N=d++;u[N]="^"+u[x]+"\\s*"+u[M]+"$";var j=d++;u[j]="^"+u[x]+"\\s*"+u[A]+"$";var F=d++;u[F]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var L=d++;u[L]="(?:~>?)";var K=d++;u[K]="(\\s*)"+u[L]+"\\s+",c[K]=new RegExp(u[K],"g"),l[K]=new RegExp(f(u[K]),"g");var U=d++;u[U]="^"+u[L]+u[M]+"$";var W=d++;u[W]="^"+u[L]+u[A]+"$";var V=d++;u[V]="(?:\\^)";var H=d++;u[H]="(\\s*)"+u[V]+"\\s+",c[H]=new RegExp(u[H],"g"),l[H]=new RegExp(f(u[H]),"g");var B=d++;u[B]="^"+u[V]+u[M]+"$";var q=d++;u[q]="^"+u[V]+u[A]+"$";var J=d++;u[J]="^"+u[x]+"\\s*("+D+")$|^$";var $=d++;u[$]="^"+u[x]+"\\s*("+I+")$|^$";var G=d++;u[G]="(\\s*)"+u[x]+"\\s*("+D+"|"+u[M]+")",c[G]=new RegExp(u[G],"g"),l[G]=new RegExp(f(u[G]),"g");var z=d++;u[z]="^\\s*("+u[M]+")\\s+-\\s+("+u[M]+")\\s*$";var Y=d++;u[Y]="^\\s*("+u[A]+")\\s+-\\s+("+u[A]+")\\s*$";var Q=d++;u[Q]="(<|>)?=?\\s*\\*";for(var X=0;X<35;X++)r(X,u[X]),c[X]||(c[X]=new RegExp(u[X]),l[X]=new RegExp(f(u[X])));function Z(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ee)return e;if("string"!=typeof e)return null;if(e.length>o)return null;if(!(t.loose?l[T]:l[k]).test(e))return null;try{return new ee(e,t)}catch(e){return null}}function ee(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ee){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>o)throw new TypeError("version is longer than "+o+" characters");if(!(this instanceof ee))return new ee(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?l[T]:l[k]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=Z,t.valid=function(e,t){var n=Z(e,t);return n?n.version:null},t.clean=function(e,t){var n=Z(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=ee,ee.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ee.prototype.toString=function(){return this.version},ee.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof ee||(e=new ee(e,this.options)),this.compareMain(e)||this.comparePre(e)},ee.prototype.compareMain=function(e){return e instanceof ee||(e=new ee(e,this.options)),ne(this.major,e.major)||ne(this.minor,e.minor)||ne(this.patch,e.patch)},ee.prototype.comparePre=function(e){if(e instanceof ee||(e=new ee(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return ne(n,i)}while(++t)},ee.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new ee(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(se(e,t))return null;var n=Z(e),r=Z(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=ne;var te=/^[0-9]+$/;function ne(e,t){var n=te.test(e),r=te.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function re(e,t,n){return new ee(e,n).compare(new ee(t,n))}function ie(e,t,n){return re(e,t,n)>0}function oe(e,t,n){return re(e,t,n)<0}function se(e,t,n){return 0===re(e,t,n)}function ae(e,t,n){return 0!==re(e,t,n)}function ce(e,t,n){return re(e,t,n)>=0}function le(e,t,n){return re(e,t,n)<=0}function ue(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return se(e,n,r);case"!=":return ae(e,n,r);case">":return ie(e,n,r);case">=":return ce(e,n,r);case"<":return oe(e,n,r);case"<=":return le(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function de(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof de){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof de))return new de(e,t);e=e.trim().split(/\s+/).join(" "),r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===he?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return ne(t,e)},t.major=function(e,t){return new ee(e,t).major},t.minor=function(e,t){return new ee(e,t).minor},t.patch=function(e,t){return new ee(e,t).patch},t.compare=re,t.compareLoose=function(e,t){return re(e,t,!0)},t.rcompare=function(e,t,n){return re(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=ie,t.lt=oe,t.eq=se,t.neq=ae,t.gte=ce,t.lte=le,t.cmp=ue,t.Comparator=de;var he={};function pe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof pe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new pe(e.raw,t);if(e instanceof de)return new pe(e.value,t);if(!(this instanceof pe))return new pe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function fe(e){return!e||"x"===e.toLowerCase()||"*"===e}function ge(e,t,n,r,i,o,s,a,c,l,u,d,h){return((t=fe(n)?"":fe(r)?">="+n+".0.0":fe(i)?">="+n+"."+r+".0":">="+t)+" "+(a=fe(c)?"":fe(l)?"<"+(+c+1)+".0.0":fe(u)?"<"+c+"."+(+l+1)+".0":d?"<="+c+"."+l+"."+u+"-"+d:"<="+a)).trim()}function me(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==he&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ve(e,t,n){try{t=new pe(t,n)}catch(e){return!1}return t.test(e)}function ye(e,t,n,r){var i,o,s,a,c;switch(e=new ee(e,r),t=new pe(t,r),n){case">":i=ie,o=le,s=oe,a=">",c=">=";break;case"<":i=oe,o=ce,s=ie,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ve(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],d=null,h=null;if(u.forEach((function(e){e.semver===he&&(e=new de(">=0.0.0")),d=d||e,h=h||e,i(e.semver,d.semver,r)?d=e:s(e.semver,h.semver,r)&&(h=e)})),d.operator===a||d.operator===c)return!1;if((!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===c&&s(e,h.semver))return!1}return!0}de.prototype.parse=function(e){var t=this.options.loose?l[J]:l[$],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new ee(n[2],this.options.loose):this.semver=he},de.prototype.toString=function(){return this.value},de.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===he||("string"==typeof e&&(e=new ee(e,this.options)),ue(e,this.operator,this.semver,this.options))},de.prototype.intersects=function(e,t){if(!(e instanceof de))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new pe(e.value,t),ve(this.value,n,t);if(""===e.operator)return n=new pe(this.value,t),ve(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ue(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ue(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=pe,pe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},pe.prototype.toString=function(){return this.range},pe.prototype.parseRange=function(e){var t=this.options.loose,n=t?l[Y]:l[z];e=e.replace(n,ge),r("hyphen replace",e),e=e.replace(l[G],"$1$2$3"),r("comparator trim",e,l[G]),e=(e=e.replace(l[K],"$1~")).replace(l[H],"$1^");var i=t?l[J]:l[$],o=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?l[q]:l[B];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),fe(n)?a="":fe(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":fe(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?l[W]:l[U];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),fe(n)?a="":fe(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":fe(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?l[j]:l[N];return e.replace(n,(function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var c=fe(i),l=c||fe(o),u=l||fe(s);return"="===n&&u&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(l&&(o=0),s=0,">"===n?(n=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",l?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):l?t=">="+i+".0.0 <"+(+i+1)+".0.0":u&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(l[Q],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o.map((function(e){return new de(e,this.options)}),this)},pe.prototype.intersects=function(e,t){if(!(e instanceof pe))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new pe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},pe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new ee(e,this.options));for(var t=0;t<this.set.length;t++)if(me(this.set[t],e,this.options))return!0;return!1},t.satisfies=ve,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new pe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new ee(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new pe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new ee(r=e,n)))})),r},t.minVersion=function(e,t){e=new pe(e,t);var n=new ee("0.0.0");if(e.test(n))return n;if(n=new ee("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new ee(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!ie(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},t.validRange=function(e,t){try{return new pe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return ye(e,t,"<",n)},t.gtr=function(e,t,n){return ye(e,t,">",n)},t.outside=ye,t.prerelease=function(e,t){var n=Z(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new pe(e,n),t=new pe(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof ee)return e;if("string"!=typeof e)return null;var t=e.match(l[F]);return null==t?null:Z(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},77911:(e,t)=>{function n(e){for(var t in e)this[t]=e[t]}t.get=function(e){var n=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.captureStackTrace(r,e||t.get);var o=r.stack;return Error.prepareStackTrace=i,Error.stackTraceLimit=n,o},t.parse=function(e){if(!e.stack)return[];var t=this;return e.stack.split("\n").slice(1).map((function(e){if(e.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var n=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(n){var r=null,i=null,o=null,s=null,a=null,c="native"===n[5];if(n[1]){var l=(o=n[1]).lastIndexOf(".");if("."==o[l-1]&&l--,l>0){r=o.substr(0,l),i=o.substr(l+1);var u=r.indexOf(".Module");u>0&&(o=o.substr(u+1),r=r.substr(0,u))}s=null}i&&(s=r,a=i),"<anonymous>"===i&&(a=null,o=null);var d={fileName:n[2]||null,lineNumber:parseInt(n[3],10)||null,functionName:o,typeName:s,methodName:a,columnNumber:parseInt(n[4],10)||null,native:c};return t._createParsedCallSite(d)}})).filter((function(e){return!!e}))},["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach((function(e){n.prototype[e]=null,n.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),["topLevel","eval","native","constructor"].forEach((function(e){n.prototype[e]=!1,n.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),t._createParsedCallSite=function(e){return new n(e)}},44110:(e,t,n)=>{"use strict";const r=n(33406),i=n(49598),o=e.exports=(e,t)=>{const n={...t,block:!0,line:!0};return r(i(e,n),n)};o.block=(e,t)=>{const n={...t,block:!0};return r(i(e,n),n)},o.line=(e,t)=>{const n={...t,line:!0};return r(i(e,n),n)},o.first=(e,t)=>{const n={...t,block:!0,line:!0,first:!0};return r(i(e,n),n)},o.parse=i},50985:e=>{"use strict";class t{constructor(e){this.type=e.type,e.value&&(this.value=e.value),e.match&&(this.match=e.match),this.newline=e.newline||""}get protected(){return Boolean(this.match)&&"!"===this.match[1]}}e.exports={Node:t,Block:class extends t{constructor(e){super(e),this.nodes=e.nodes||[]}push(e){this.nodes.push(e)}get protected(){return this.nodes.length>0&&!0===this.nodes[0].protected}}}},33406:e=>{"use strict";e.exports=(e,t={})=>{const n=!0===t.safe||!0===t.keepProtected;let r=!1;const i=(e,o)=>{let s,a,c="";for(const o of e.nodes)switch(o.type){case"block":if(t.first&&!0===r){c+=i(o,e);break}if(!0===t.preserveNewlines){s=i(o,e),a=s.split("\n"),c+="\n".repeat(a.length-1);break}if(!0===n&&!0===o.protected){c+=i(o,e);break}r=!0;break;case"line":if(t.first&&!0===r){c+=o.value;break}!0===n&&!0===o.protected&&(c+=o.value),r=!0;break;default:c+=o.value||""}return c};return i(e)}},38657:(e,t)=>{"use strict";t.javascript={BLOCK_OPEN_REGEX:/^\/\*\*?(!?)/,BLOCK_CLOSE_REGEX:/^\*\/(\n?)/,LINE_REGEX:/^\/\/(!?).*/}},49598:(e,t,n)=>{"use strict";const{Node:r,Block:i}=n(50985),o=n(38657),s=/^\\./,a=/^(['"`])((?:\\.|[^\1])+?)(\1)/,c=/^\r*\n/;e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");const n=new i({type:"root",nodes:[]}),l=[n],u=(t.language||"javascript").toLowerCase(),d=o[u];if(void 0===d)throw new Error(`Language "${u}" is not supported by strip-comments`);const{LINE_REGEX:h,BLOCK_OPEN_REGEX:p,BLOCK_CLOSE_REGEX:f}=d;let g,m,v=n,y=e,b=!1;[p,f].filter(Boolean).every((e=>'^"""'===e.source))&&(b=!0);const w=(e=y[0]||"")=>(y=y.slice(e.length),e),S=(e,t="text")=>{const n=e.exec(y);if(n)return w(n[0]),{type:t,value:n[0],match:n}},C=e=>{m&&"text"===m.type&&"text"===e.type?m.value+=e.value:(v.push(e),e.nodes&&(l.push(e),v=e),m=e)},_=()=>{if("root"===v.type)throw new SyntaxError("Unclosed block comment");l.pop(),v=l[l.length-1]};for(;""!==y;)(g=S(s,"text"))?C(new r(g)):"block"===v.type||m&&/\w$/.test(m.value)||b&&y.startsWith('"""')||!(g=S(a,"text"))?(g=S(c,"newline"))?C(new r(g)):!p||!t.block||b&&"block"===v.type||!(g=S(p,"open"))?f&&"block"===v.type&&t.block&&(g=S(f,"close"))?(g.newline=g.match[1]||"",C(new r(g)),_()):h&&"block"!==v.type&&t.line&&(g=S(h,"line"))||(g=S(/^[a-zABD-Z0-9\t ]+/,"text"))?C(new r(g)):C(new r({type:"text",value:w(y[0])})):(C(new i({type:"block"})),C(new r(g))):C(new r(g));return n}},14802:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26363);t.ExperimentationService=r.ExperimentationService},26363:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34067),i=n(44234),o=n(15975);class s extends o.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],null!=e.refetchInterval?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new r.TasApiFeatureProvider(new i.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}t.ExperimentationService=s,s.REFRESH_RATE_IN_MINUTES=30},15975:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23663),i=n(73334);class o extends r.ExperimentationServiceBase{constructor(e,t,n,r,o,s,a){if(super(e,r,o,s,a),this.telemetry=e,this.filterProviders=t,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&0!==n)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new i.PollingService(n),this.pollingService.OnPollTick((async()=>{await super.getFeaturesAsync()})))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let t=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),t}return await super.getFeaturesAsync(e)}}t.ExperimentationServiceAutoPolling=o},23663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17002);t.ExperimentationServiceBase=class{constructor(e,t,n,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=t,this.telemetryEventName=n,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new r.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise(((e,t)=>{this.resolveInitialFetchPromise=e}))}get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}async getFeaturesAsync(e=!1){if(null!=this.fetchPromise){try{await this.fetchPromise}catch(e){}return this.features}if(!this.featureProviders||0===this.featureProviders.length)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map((async e=>await e.getFeatures())));const t=await this.fetchPromise;this.updateFeatures(t,e)}catch(e){}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,t=!1){let n={features:[],assignmentContext:"",configs:[]};for(let t of e){for(let e of t.features)n.features.includes(e)||n.features.push(e);for(let e of t.configs){const t=n.configs.find((t=>t.Id===e.Id));t?t.Parameters=Object.assign(Object.assign({},t.Parameters),e.Parameters):n.configs.push(e)}n.assignmentContext+=t.assignmentContext}!t&&this.featuresConsumed||(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),void 0!==e&&void 0===e.configs&&(e.configs=[])),0===this.features.features.length&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){const t=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),t.features.includes(e)}getTreatmentVariable(e,t){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${t}`),null===(n=this.features.configs.find((t=>t.Id===e)))||void 0===n?void 0:n.Parameters[t]}async getTreatmentVariableAsync(e,t,n){if(n){const n=this.featuresConsumed,r=this.getTreatmentVariable(e,t);if(void 0!==r)return r;this.featuresConsumed=n}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,t)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(null!=e&&null!=this.featureProviders)for(let t of e)this.featureProviders.push(t)}}},60069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFeatureProvider=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}}},94e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(60069);class i extends r.BaseFeatureProvider{constructor(e,t){super(e),this.telemetry=e,this.filterProviders=t,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let t of this.filterProviders){let n=t.getFilters();for(let t of n.keys()){let r=n.get(t);e.set(t,r)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;const t=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",t]])),this.cachedTelemetryEvents.push(e)}}t.FilteredFeatureProvider=i},34067:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(94e3);t.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";const i="ErrorType";class o extends r.FilteredFeatureProvider{constructor(e,t,n){super(t,n),this.httpClient=e,this.telemetry=t,this.filterProviders=n}async fetch(){let e,n=this.getFilters(),r={};for(let e of n.keys()){const t=n.get(e);r[e]=t}try{e=await this.httpClient.get({headers:r})}catch(e){const n=e,r=new Map;n.response?r.set(i,"ServerError"):n.request?r.set(i,"NoResponse"):r.set(i,"GenericError"),this.telemetry.postEvent(t.TASAPI_FETCHERROR_EVENTNAME,r)}if(!e)throw Error(t.TASAPI_FETCHERROR_EVENTNAME);n.keys.length>0&&this.PostEventToTelemetry(r);let o=e.data,s=o.Configs,a=[];for(let e of s)if(e.Parameters)for(let t of Object.keys(e.Parameters)){const n=t+(e.Parameters[t]?"":"cf");a.includes(n)||a.push(n)}return{features:a,assignmentContext:o.AssignmentContext,configs:s}}}t.TasApiFeatureProvider=o},44234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9669);t.AxiosHttpClient=class{constructor(e){this.endpoint=e}get(e){return r.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}}},17002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryKeyValueStorage=class{constructor(){this.storage=new Map}async getValue(e,t){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(t||void 0)}setValue(e,t){this.storage.set(e,t)}}},73334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollingService=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),null!=this.onTick&&(e&&this.onTick().then((()=>{})).catch((()=>{})),this.intervalHandle=setInterval((async()=>{await this.onTick()}),this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}},20327:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveControllerHelper=void 0;const o=n(26594),s=n(88960),a=n(61239),c=n(94062),l=n(46799),u=n(50867),d=n(15925),h=n(42080),p=n(84570),f=n(41778),g=n(11642),m=n(98729),v=n(35412),y="LastInteractiveKernelSelected";let b=class{constructor(e,t,n,r,i){this.controllerRegistration=e,this.interpreterService=t,this.disposables=n,this.workspaceMemento=r,this.serviceContainer=i,this.onControllerSelected=this.controllerRegistration.onControllerSelected}async getInitialController(e,t){if(t){const e=this.controllerRegistration.get(t,d.InteractiveWindowView);if(e)return e}if(this.workspaceMemento.get(y)){const e=this.workspaceMemento.get(y),t=e?this.controllerRegistration.get(e,d.InteractiveWindowView):void 0;if(t)return t}if(this.interpreterService)return await async function(e,t,n,r){const i=await n.getActiveInterpreter(t);if(i){const n=await(0,m.createInterpreterKernelSpec)(i),o=c.PythonKernelConnectionMetadata.create({kernelSpec:n,interpreter:i,id:(0,m.getKernelId)(n,i)}),s=r.addOrUpdate(o,[e]),a=s[0];return r.trackActiveInterpreterControllers(s),(0,g.traceInfoIfCI)(`Active Interpreter Controller ${a.connection.kind}:${a.id} created for View ${e} with resource ${(0,v.getDisplayPath)(t)}`),a}}(d.InteractiveWindowView,e,this.interpreterService,this.controllerRegistration)}getSelectedController(e){return this.controllerRegistration.getSelected(e)}getRegisteredController(e){return this.controllerRegistration.get(e,"interactive")}async createKernel(e,t,n,r,i){await(0,a.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(n,e);const o=await l.KernelConnector.connectToNotebookKernel(e,this.serviceContainer,{resource:n||r.uri,notebook:r,controller:t},new s.DisplayOptions(!1),i,"jupyterExtension",((e,t)=>{"start"!==e&&"restart"!==e||(0,g.traceInfoIfCI)(`(onStart) Looking for controller ${t.controller.id} in ${this.controllerRegistration.all.map((e=>`${e.kind}:${e.id}`)).join(", ")}`)})),c=this.controllerRegistration.registered.find((e=>e.id===o.controller.id));if(!c)throw Error(`Controller ${o.controller.id} not found or not yet created`);const u=c.controller;return this.interpreterService&&async function(e,t,n){const r=await n.getActiveInterpreter(t);return r?.id===e.interpreter?.id}(o.kernelConnectionMetadata,n,this.interpreterService).then((async e=>{await this.workspaceMemento.update(y,e?void 0:o.kernelConnectionMetadata)})).catch((e=>{(0,g.traceWarning)("Failed to store kernel connection metadata",e)})),{kernel:o,actualController:u}}};t.InteractiveControllerHelper=b,t.InteractiveControllerHelper=b=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IControllerRegistration)),i(1,(0,o.inject)(p.IInterpreterService)),i(1,(0,o.optional)()),i(2,(0,o.inject)(h.IDisposableRegistry)),i(3,(0,o.inject)(h.IMemento)),i(3,(0,o.named)(h.WORKSPACE_MEMENTO)),i(4,(0,o.inject)(f.IServiceContainer))],b)},4710:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveControllerFactory=t.InteractiveWindowController=void 0;const r=n(43138),i=n(58681),o=n(53073),s=n(11642),a=n(35412),c=n(30682);class l{constructor(e,t,n,r,i,o,s){this.controllerService=e,this.mode=t,this.notebook=n,this.errorHandler=r,this.kernelProvider=i,this.owner=o,this.disposables=[],this.controller=s?.controller,this.metadata=s?.connection}updateMode(e){this.mode=e}updateOwners(e){this.owner=e}async startKernel(){if(this.connectingListener?.dispose(),this.kernel)return this.kernel.promise;if(!this.controller||!this.metadata)throw new Error("Interactive Window kernel not selected");this.setInfoMessage(this.metadata,c.SysInfoReason.Start);try{const e=await this.createKernel(),t=async()=>{this.notebook&&this.metadata&&(this.systemInfoCell=void 0,this.setInfoMessage(this.metadata,c.SysInfoReason.Restart))};return this.disposables.push(e.addHook("willRestart",t)),e.onRestarted((async()=>{(0,s.traceVerbose)("Restart event handled in IW"),this.fileInKernel=void 0;try{await this.setFileInKernel(e)}catch(e){(0,s.traceError)("Failed to run initialization after restarting")}finally{this.finishSysInfoMessage(e,c.SysInfoReason.Restart)}}),this,this.disposables),this.fileInKernel=void 0,await this.setFileInKernel(e),this.finishSysInfoMessage(e,c.SysInfoReason.Start),e}catch(e){throw this.owner?this.deleteSysInfoCell():await this.finishSysInfoWithFailureMessage(e),e}}async createKernel(){if(this.kernel)return this.kernel.promise;if(!this.controller||!this.metadata)throw new Error("Controller not selected");const e=(0,r.createDeferred)();e.promise.catch(i.noop),this.kernel=e;try{const{kernel:t,actualController:n}=await this.controllerService.createKernel(this.metadata,this.controller,this.owner,this.notebook,this.disposables);return this.metadata=t.kernelConnectionMetadata,this.controller=n,this.disposables.push(t),e.resolve(t),t}catch(t){throw e.reject(t),this.disconnect(),t}}async setFileInKernel(e){const t=this.owner;if(!t)return void(0,s.traceInfoIfCI)("Unable to run initialization for IW");const n=(0,a.getFilePath)(t),r=this.kernelProvider.getKernelExecution(e);("perFile"!==this.mode||this.fileInKernel)&&(this.fileInKernel&&this.fileInKernel.toString()===t.toString()||"perFile"===this.mode)?(0,s.traceVerbose)(`Not Initializing __file__ in setFileInKernel with ${n} for mode ${this.mode} currently ${this.fileInKernel}`):((0,s.traceVerbose)(`Initializing __file__ in setFileInKernel with ${t} for mode ${this.mode}`),this.fileInKernel=t,await r.executeHidden(`__file__ = '${n.replace(/\\/g,"\\\\")}'`))}setPendingCellAdd(e){if(this.metadata&&this.notebook){const t=this.controllerService.getRegisteredController(this.metadata);t?.setPendingCellAddition(this.notebook,e)}}listenForControllerSelection(){return this.controllerService.onControllerSelected((e=>{if(this.notebook&&e.notebook.uri.toString()===this.notebook?.uri?.toString()&&e.controller.id!==this.controller?.id){const t=!!this.kernel;this.disconnect(),this.controller=e.controller.controller,this.metadata=e.controller.connection,t?this.startKernel().catch(i.noop):(this.connectingListener?.dispose(),this.connectingListener=e.controller.onConnecting((()=>{this.startKernel().catch(i.noop)})),this.disposables.push(this.connectingListener))}}),this)}setInfoMessageCell(e){this.systemInfoCell?this.systemInfoCell.updateMessage(e).catch((t=>(0,s.traceWarning)(`could not update info cell with message: "${e}", error: ${t}`))):this.systemInfoCell=new o.SystemInfoCell(this.notebook,e)}setInfoMessage(e,t){const n=(0,o.getStartConnectMessage)(e,t);this.setInfoMessageCell(n)}finishSysInfoMessage(e,t){const n=(0,o.getFinishConnectMessage)(e.kernelConnectionMetadata,t);this.systemInfoCell?.updateMessage(n).catch((e=>(0,s.traceWarning)(`System info message was not updated: "${n}" because of error: ${e}`))),this.systemInfoCell=void 0}async finishSysInfoWithFailureMessage(e){let t=await this.errorHandler.getErrorMessageForDisplayInCell(e,"start",this.owner);t=t.split("\n").join("  \n"),this.systemInfoCell?.updateMessage(t).catch((e=>(0,s.traceWarning)(`System info message was not updated: "${t}" because of error: ${e}`))),this.systemInfoCell=void 0}deleteSysInfoCell(){this.systemInfoCell?.deleteCell().then(i.noop,i.noop),this.systemInfoCell=void 0}disconnect(){this.disposables.forEach((e=>e.dispose())),this.disposables=[],this.kernel=void 0}}t.InteractiveWindowController=l,t.InteractiveControllerFactory=class{constructor(e,t,n){this.controllerService=e,this.mode=t,this.initialController=n}create(e,t,n,r){let i=this.initialController;const o=this.controllerService.getSelectedController(e);return o&&(i=o),new l(this.controllerService,this.mode,e,t,n,r,i)}}},88232:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRegistry=void 0;const c=n(26594),l=n(66828),u=n(94062),d=n(10053),h=n(42080),p=n(25251),f=n(58681),g=n(9959),m=n(15925),v=n(74858),y=n(135),b=s(n(52859)),w=n(35412),S=n(62440),C=n(13730),_=n(41779),P=n(11642),E=n(94523),k=n(90541),I=n(85249),D=n(94433),T=n(83599),x=n(84599);let O=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d,h,p,f,g,m,v,y,b,w){this.disposables=e,this.jupyterExporter=t,this.jupyterServerHelper=n,this.documentManager=r,this.applicationShell=i,this.fileSystem=o,this.configuration=s,this.dataScienceCodeLensProvider=a,this.commandManager=c,this.debugService=l,this.configService=u,this.appShell=d,this.workspace=h,this.interactiveWindowProvider=p,this.kernelProvider=f,this.dataScienceErrorHandler=g,this.ipynbProvider=m,this.fileConverter=v,this.exportDialog=y,this.clipboard=b,this.notebook=w,this.statusProvider=new x.StatusProvider(i),this.workspace.isTrusted||this.workspace.onDidGrantWorkspaceTrust(this.registerCommandsIfTrusted,this,this.disposables)}activate(){this.registerCommandsIfTrusted(),this.registerCommand(m.Commands.InsertCellBelowPosition,this.insertCellBelowPosition),this.registerCommand(m.Commands.InsertCellBelow,this.insertCellBelow),this.registerCommand(m.Commands.InsertCellAbove,this.insertCellAbove),this.registerCommand(m.Commands.DeleteCells,this.deleteCells),this.registerCommand(m.Commands.SelectCell,this.selectCell),this.registerCommand(m.Commands.SelectCellContents,this.selectCellContents),this.registerCommand(m.Commands.ExtendSelectionByCellAbove,this.extendSelectionByCellAbove),this.registerCommand(m.Commands.ExtendSelectionByCellBelow,this.extendSelectionByCellBelow),this.registerCommand(m.Commands.MoveCellsUp,this.moveCellsUp),this.registerCommand(m.Commands.MoveCellsDown,this.moveCellsDown),this.registerCommand(m.Commands.ChangeCellToMarkdown,this.changeCellToMarkdown),this.registerCommand(m.Commands.ChangeCellToCode,this.changeCellToCode),this.registerCommand(m.Commands.GotoNextCellInFile,this.gotoNextCellInFile),this.registerCommand(m.Commands.GotoPrevCellInFile,this.gotoPrevCellInFile),this.registerCommand(m.Commands.AddCellBelow,this.addCellBelow),this.registerCommand(m.Commands.CreateNewNotebook,this.createNewNotebook),this.registerCommand(m.Commands.LatestExtension,this.openPythonExtensionPage),this.registerCommand(m.Commands.EnableDebugLogging,this.enableDebugLogging),this.registerCommand(m.Commands.ResetLoggingLevel,this.resetLoggingLevel),this.registerCommand(m.Commands.EnableLoadingWidgetsFrom3rdPartySource,this.enableLoadingWidgetScriptsFromThirdParty),this.registerCommand(m.Commands.CreateNewInteractive,(e=>this.createNewInteractiveWindow(e))),this.registerCommand(m.Commands.ImportNotebook,((e,t=m.CommandSource.commandPalette)=>this.listenForErrors((()=>e?this.importNotebookOnFile(e):this.importNotebook())))),this.registerCommand(m.Commands.ImportNotebookFile,((e,t=m.CommandSource.commandPalette)=>this.listenForErrors((()=>e?this.importNotebookOnFile(e):this.importNotebook())))),this.commandManager.registerCommand(m.Commands.ExportFileAsNotebook,((e,t=m.CommandSource.commandPalette)=>this.listenForErrors((()=>{if(e)return this.exportFile(e);{const e=this.documentManager.activeTextEditor;if(e&&e.document.languageId===m.PYTHON_LANGUAGE)return this.exportFile(e.document.uri)}return Promise.resolve()})))),this.registerCommand(m.Commands.ExportFileAndOutputAsNotebook,((e,t=m.CommandSource.commandPalette)=>this.listenForErrors((()=>{if(e)return this.exportFileAndOutput(e);{const e=this.documentManager.activeTextEditor;if(e&&e.document.languageId===m.PYTHON_LANGUAGE)return this.exportFileAndOutput(e.document.uri)}return Promise.resolve()})))),this.registerCommand(m.Commands.ExpandAllCells,(async e=>this.expandAllCells(e?.notebookEditor?.notebookUri))),this.registerCommand(m.Commands.CollapseAllCells,(async e=>this.collapseAllCells(e?.notebookEditor?.notebookUri))),this.registerCommand(m.Commands.ExportOutputAsNotebook,(()=>this.exportCells())),this.registerCommand(m.Commands.InteractiveExportAsNotebook,(e=>this.export(e?.notebookEditor?.notebookUri))),this.registerCommand(m.Commands.InteractiveExportAs,(e=>this.exportAs(e?.notebookEditor?.notebookUri))),this.registerCommand(m.Commands.ScrollToCell,((e,t)=>this.scrollToCell(e,t))),this.registerCommand(m.Commands.InteractiveClearAll,this.clearAllCellsInInteractiveWindow),this.registerCommand(m.Commands.InteractiveGoToCode,this.goToCodeInInteractiveWindow),this.commandManager.registerCommand(m.Commands.InteractiveCopyCell,this.copyCellInInteractiveWindow)}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommandsIfTrusted(){this.workspace.isTrusted&&(this.registerCommand(m.Commands.RunAllCells,this.runAllCells),this.registerCommand(m.Commands.RunCell,this.runCell),this.registerCommand(m.Commands.RunCurrentCell,this.runCurrentCell),this.registerCommand(m.Commands.RunCurrentCellAdvance,this.runCurrentCellAndAdvance),this.registerCommand(m.Commands.ExecSelectionInInteractiveWindow,(e=>{this.runSelectionOrLine(e).catch(f.noop)})),this.registerCommand(m.Commands.RunAllCellsAbove,this.runAllCellsAbove),this.registerCommand(m.Commands.RunCellAndAllBelow,this.runCellAndAllBelow),this.registerCommand(m.Commands.RunAllCellsAbovePalette,this.runAllCellsAboveFromCursor),this.registerCommand(m.Commands.RunCellAndAllBelowPalette,this.runCellAndAllBelowFromCursor),this.registerCommand(m.Commands.RunCurrentCellAndAddBelow,this.runCurrentCellAndAddBelow),this.registerCommand(m.Commands.DebugCell,this.debugCell),this.registerCommand(m.Commands.DebugStepOver,this.debugStepOver),this.registerCommand(m.Commands.DebugContinue,this.debugContinue),this.registerCommand(m.Commands.DebugStop,this.debugStop),this.registerCommand(m.Commands.DebugCurrentCellPalette,this.debugCurrentCellFromCursor),this.registerCommand(m.Commands.OpenVariableView,this.openVariableView),this.registerCommand(m.Commands.OpenOutlineView,this.openOutlineView),this.registerCommand(m.Commands.RunToLine,this.runToLine),this.registerCommand(m.Commands.RunFromLine,this.runFromLine),this.registerCommand(m.Commands.RunFileInInteractiveWindows,this.runFileInteractive),this.registerCommand(m.Commands.DebugFileInInteractiveWindows,this.debugFileInteractive))}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}getCodeWatcher(e){if(e&&this.dataScienceCodeLensProvider){const t=this.documentManager.textDocuments.filter((t=>b.isEqual(t.uri,e)));if(t&&1===t.length)return this.dataScienceCodeLensProvider.getCodeWatcher(t[0]);if(t&&t.length>1)throw new Error(p.DataScience.documentMismatch((0,w.getFilePath)(e)))}}async enableDebugLogging(){"debug"!==this.configService.getSettings().logging.level&&(await this.configService.updateSetting("logging.level","debug",void 0,l.ConfigurationTarget.Global),this.commandManager.executeCommand("jupyter.reloadVSCode",p.DataScience.reloadRequired).then(f.noop,f.noop))}async resetLoggingLevel(){"error"!==this.configService.getSettings().logging.level&&(await this.configService.updateSetting("logging.level","error",void 0,l.ConfigurationTarget.Global),this.commandManager.executeCommand("jupyter.reloadVSCode",p.DataScience.reloadRequired).then(f.noop,f.noop))}async enableLoadingWidgetScriptsFromThirdParty(){this.configService.getSettings(void 0).widgetScriptSources.length>0||await this.configService.updateSetting("widgetScriptSources",["jsdelivr.com","unpkg.com"],void 0,l.ConfigurationTarget.Global).catch(f.noop)}async runAllCells(e){let t=this.getCodeWatcher(e);return t||(t=this.getCurrentCodeWatcher()),t?t.runAllCells():void 0}async runFileInteractive(e){let t=this.getCodeWatcher(e);return t||(t=this.getCurrentCodeWatcher()),t?t.runFileInteractive():void 0}async debugFileInteractive(e){let t=this.getCodeWatcher(e);return t||(t=this.getCurrentCodeWatcher()),t?t.debugFileInteractive():void 0}async runCell(e,t,n,r,i){const o=this.getCodeWatcher(e);if(o)return o.runCell(new l.Range(t,n,r,i))}async runAllCellsAbove(e,t,n){if(e){const r=this.getCodeWatcher(e);if(r)return r.runAllCellsAbove(t,n)}}async runCellAndAllBelow(e,t,n){if(e){const r=this.getCodeWatcher(e);if(r)return r.runCellAndAllBelow(t,n)}}async runToLine(){const e=this.getCurrentCodeWatcher(),t=this.documentManager.activeTextEditor;if(e&&t&&t.selection)return e.runToLine(t.selection.start.line)}async runFromLine(){const e=this.getCurrentCodeWatcher(),t=this.documentManager.activeTextEditor;if(e&&t&&t.selection)return e.runFromLine(t.selection.start.line)}async runCurrentCell(){const e=this.getCurrentCodeWatcher();return e?e.runCurrentCell():void 0}async runCurrentCellAndAdvance(){const e=this.getCurrentCodeWatcher();return e?e.runCurrentCellAndAdvance():void 0}async runSelectionOrLine(e){const t=this.getCurrentCodeWatcher();return t?t.runSelectionOrLine(this.documentManager.activeTextEditor,(0,f.isUri)(e)?void 0:e):void 0}async debugCell(e,t,n,r,i){if(e){const o=this.getCodeWatcher(e);if(o)return o.debugCell(new l.Range(t,n,r,i))}}async debugStepOver(){this.debugService?.activeDebugSession&&this.commandManager.executeCommand("workbench.action.debug.stepOver").then(f.noop,f.noop)}async debugStop(e){if(this.debugService?.activeDebugSession&&this.interactiveWindowProvider){const t=this.interactiveWindowProvider.get(e);if(t&&t.notebookDocument){const n=this.kernelProvider.get(t.notebookDocument);n&&((0,P.traceVerbose)(`Interrupt kernel due to debug stop of IW ${e.toString()}`),await n.interrupt())}this.commandManager.executeCommand("workbench.action.debug.stop").then(f.noop,f.noop)}}async debugContinue(){this.debugService?.activeDebugSession&&this.commandManager.executeCommand("workbench.action.debug.continue").then(f.noop,f.noop)}async addCellBelow(){await(this.getCurrentCodeWatcher()?.addEmptyCellToBottom())}async runCurrentCellAndAddBelow(){this.getCurrentCodeWatcher()?.runCurrentCellAndAddBelow()}async insertCellBelowPosition(){this.getCurrentCodeWatcher()?.insertCellBelowPosition()}async insertCellBelow(){this.getCurrentCodeWatcher()?.insertCellBelow()}async insertCellAbove(){this.getCurrentCodeWatcher()?.insertCellAbove()}async deleteCells(){this.getCurrentCodeWatcher()?.deleteCells()}async selectCell(){this.getCurrentCodeWatcher()?.selectCell()}async selectCellContents(){this.getCurrentCodeWatcher()?.selectCellContents()}async extendSelectionByCellAbove(){this.getCurrentCodeWatcher()?.extendSelectionByCellAbove()}async extendSelectionByCellBelow(){this.getCurrentCodeWatcher()?.extendSelectionByCellBelow()}async moveCellsUp(){this.getCurrentCodeWatcher()?.moveCellsUp()}async moveCellsDown(){this.getCurrentCodeWatcher()?.moveCellsDown()}async changeCellToMarkdown(){this.getCurrentCodeWatcher()?.changeCellToMarkdown()}async changeCellToCode(){this.getCurrentCodeWatcher()?.changeCellToCode()}async gotoNextCellInFile(){this.getCurrentCodeWatcher()?.gotoNextCell()}async gotoPrevCellInFile(){this.getCurrentCodeWatcher()?.gotoPreviousCell()}async runAllCellsAboveFromCursor(){const e=this.getCurrentCodeLens();if(e){const t=this.getCurrentCodeWatcher();if(t)return t.runAllCellsAbove(e.range.start.line,e.range.start.character)}}async runCellAndAllBelowFromCursor(){const e=this.getCurrentCodeLens();if(e){const t=this.getCurrentCodeWatcher();if(t)return t.runCellAndAllBelow(e.range.start.line,e.range.start.character)}}async debugCurrentCellFromCursor(){if(this.getCurrentCodeLens()){const e=this.getCurrentCodeWatcher();if(e)return e.debugCurrentCell()}}async createNewNotebook(){this.appShell.showInformationMessage('This command has been deprecated and will eventually be removed, please use ["Create: New Jupyter Notebook"](command:workbench.action.openGlobalKeybindings?%5B%22@command:ipynb.newUntitledIpynb%22%5D) instead.').then(f.noop,f.noop),await l.commands.executeCommand("ipynb.newUntitledIpynb")}getCurrentCodeLens(){const e=this.documentManager.activeTextEditor,t=this.getCurrentCodeWatcher();if(e&&t)return t.getCodeLenses().find((t=>t.range.end.line>=e.selection.anchor.line&&t.range.start.line<=e.selection.anchor.line))}getCurrentCodeWatcher(){const e=this.documentManager.activeTextEditor;if(e&&e.document&&this.dataScienceCodeLensProvider)return this.dataScienceCodeLensProvider.getCodeWatcher(e.document)}openPythonExtensionPage(){l.env.openExternal(l.Uri.parse("https://marketplace.visualstudio.com/items?itemName=ms-toolsai.jupyter")).then(f.noop,f.noop)}async openVariableView(){return this.commandManager.executeCommand("jupyterViewVariables.focus")}async openOutlineView(){return this.commandManager.executeCommand("outline.focus")}async listenForErrors(e){let t;try{return t=await e(),t}catch(e){(0,P.traceError)("listenForErrors",e),this.dataScienceErrorHandler.handleError(e).then(f.noop,f.noop)}return t}async exportFile(e){const t=(0,w.getFilePath)(e);if(t&&t.length>0&&this.jupyterExporter){const n=this.documentManager.activeTextEditor;if(n&&this.fileSystem.arePathsSame(n.document.uri,e)){const r=(0,E.generateCellsFromDocument)(n.document,this.configuration.getSettings(n.document.uri));if(r){const n=await this.exportDialog.showDialog(S.ExportFormat.ipynb,e);if(await this.waitForStatus((async()=>{if(n){const e=await(this.jupyterExporter?.translateToNotebook(r));await this.fileSystem.writeFile(n,JSON.stringify(e,void 0,1))}}),p.DataScience.exportingFormat,(0,w.getDisplayPath)(e)),n&&t){const t=p.DataScience.exportOpenQuestion1;await this.applicationShell.showInformationMessage(p.DataScience.exportDialogComplete((0,w.getDisplayPath)(e)),t)===t&&await(0,C.openAndShowNotebook)(n)}}}}}async exportFileAndOutput(e){const t=(0,w.getFilePath)(e);if(t&&t.length>0&&this.jupyterExporter&&this.jupyterServerHelper&&await this.jupyterServerHelper.isJupyterServerSupported()){const t=this.documentManager.activeTextEditor;if(t&&t.document&&this.fileSystem.arePathsSame(t.document.uri,e)){const n=(0,E.generateCellsFromDocument)(t.document,this.configuration.getSettings(t.document.uri));if(n){const t=await this.exportDialog.showDialog(S.ExportFormat.ipynb,e);if(!t)return;return await this.waitForStatus((async()=>{if(t){const e=await(this.jupyterExporter?.translateToNotebook(n));await this.fileSystem.writeFile(t,JSON.stringify(e,void 0,1))}}),p.DataScience.exportingFormat,(0,w.getDisplayPath)(e)),await this.notebook.openNotebookDocument(t).then((e=>this.notebook.showNotebookDocument(e))),await this.commandManager.executeCommand("notebook.execute"),t}}}else this.jupyterServerHelper&&await this.dataScienceErrorHandler.handleError(new _.JupyterInstallError(p.DataScience.jupyterNotSupported(await this.jupyterServerHelper.getJupyterServerError())))}async expandAllCells(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);(0,P.traceInfo)(`Expanding all cells in interactive window with uri ${t?.notebookUri}`),t&&await t.expandAllCells()}async collapseAllCells(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);(0,P.traceInfo)(`Collapsing all cells in interactive window with uri ${t?.notebookUri}`),t&&await t.collapseAllCells()}exportCells(){const e=this.interactiveWindowProvider?.activeWindow;e&&e.export()}exportAs(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);t&&t.exportAs()}export(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e);t&&t.export()}async createNewInteractiveWindow(e){await(this.interactiveWindowProvider?.getOrCreate(void 0,e))}waitForStatus(e,t,n,r){const i=t(n||"");return this.statusProvider.waitWithStatus(e,i,void 0,r)}async importNotebook(){const e={};e[p.DataScience.importDialogFilter]=["ipynb"];const t=await this.applicationShell.showOpenDialog({openLabel:p.DataScience.importDialogTitle,filters:e});t&&t.length>0&&await this.waitForStatus((async()=>{await this.fileConverter.importIpynb(t[0])}),p.DataScience.importingFormat,(0,w.getDisplayPath)(t[0]))}async importNotebookOnFile(e){const t=(0,w.getFilePath)(e);t&&t.length>0&&await this.waitForStatus((async()=>{await this.fileConverter.importIpynb(e)}),p.DataScience.importingFormat,(0,w.getDisplayPath)(e))}async scrollToCell(e,t){if(t&&e){const n=this.interactiveWindowProvider.getInteractiveWindowsWithSubmitter(e);for(let e=0;e<n.length;e+=1)if(await n[e].hasCell(t)){n[e].scrollToCell(t);break}}}async clearAllCellsInInteractiveWindow(e){const t=this.interactiveWindowProvider.getInteractiveWindowWithNotebook(e?.notebookEditor?.notebookUri)?.notebookUri;if(!t)return;const n=l.workspace.notebookDocuments.find((e=>e.uri.toString()===t.toString()));if(!n)return;const r=new l.WorkspaceEdit,i=l.NotebookEdit.deleteCells(new l.NotebookRange(0,n.cellCount));r.set(n.uri,[i]),await l.workspace.applyEdit(r)}async goToCodeInInteractiveWindow(e){if(e&&e.metadata?.interactive){const t=l.Uri.parse(e.metadata.interactive.uristring),n=e.metadata.interactive.lineIndex,r=await this.documentManager.showTextDocument(t,{viewColumn:l.ViewColumn.One});r&&(r.revealRange(new l.Range(n,0,n,0)),r.selection=new l.Selection(new l.Position(n,0),new l.Position(n,0)))}}async copyCellInInteractiveWindow(e){if(e){const t=this.configuration.getSettings(e.notebook.uri),n=[e.metadata.interactiveWindowCellMarker??t.defaultCellMarker,e.document.getText()].join("\n");await this.clipboard.writeText(n)}}};t.CommandRegistry=O,o([(0,g.captureUsageTelemetry)(m.Telemetry.DebugStepOver)],O.prototype,"debugStepOver",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.DebugStop)],O.prototype,"debugStop",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.DebugContinue)],O.prototype,"debugContinue",null),o([(0,g.capturePerfTelemetry)(m.Telemetry.AddCellBelow)],O.prototype,"addCellBelow",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.ExportPythonFileInteractive)],O.prototype,"exportFile",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.ExportPythonFileAndOutputInteractive)],O.prototype,"exportFileAndOutput",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.ImportNotebook,{scope:"command"})],O.prototype,"importNotebook",null),o([(0,g.captureUsageTelemetry)(m.Telemetry.ImportNotebook,{scope:"file"})],O.prototype,"importNotebookOnFile",null),t.CommandRegistry=O=o([(0,c.injectable)(),a(0,(0,c.inject)(h.IDisposableRegistry)),a(1,(0,c.inject)(D.INotebookExporter)),a(1,(0,c.optional)()),a(2,(0,c.inject)(D.IJupyterServerHelper)),a(2,(0,c.optional)()),a(3,(0,c.inject)(d.IDocumentManager)),a(4,(0,c.inject)(d.IApplicationShell)),a(5,(0,c.inject)(T.IFileSystem)),a(6,(0,c.inject)(h.IConfigurationService)),a(7,(0,c.inject)(v.IDataScienceCodeLensProvider)),a(7,(0,c.optional)()),a(8,(0,c.inject)(d.ICommandManager)),a(9,(0,c.inject)(d.IDebugService)),a(9,(0,c.optional)()),a(10,(0,c.inject)(h.IConfigurationService)),a(11,(0,c.inject)(d.IApplicationShell)),a(12,(0,c.inject)(d.IWorkspaceService)),a(13,(0,c.inject)(y.IInteractiveWindowProvider)),a(14,(0,c.inject)(u.IKernelProvider)),a(15,(0,c.inject)(k.IDataScienceErrorHandler)),a(16,(0,c.inject)(I.INotebookEditorProvider)),a(17,(0,c.inject)(S.IFileConverter)),a(18,(0,c.inject)(S.IExportDialog)),a(19,(0,c.inject)(d.IClipboard)),a(20,(0,c.inject)(d.IVSCodeNotebook))],O)},84599:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusProvider=void 0;const r=n(66828),i=n(43138),o=n(58681);class s{constructor(e,t,n){this.disposed=!1,this.dispose=()=>{this.disposed||(this.disposed=!0,this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.disposeCallback(),this.deferred.completed||this.deferred.resolve())},this.promise=()=>this.deferred.promise,this.reject=()=>{this.deferred.reject(),this.dispose()},this.deferred=(0,i.createDeferred)(),this.disposeCallback=t,n&&(this.timeout=setTimeout(this.dispose,n))}}t.StatusProvider=class{constructor(e){this.applicationShell=e,this.statusCount=0,this.incrementCount=()=>{this.statusCount+=1},this.decrementCount=()=>{const e=this.statusCount-1;this.statusCount=Math.max(e,0)}}set(e,t,n){this.incrementCount();const i=new s(e,(()=>this.decrementCount()),t),a={location:n?r.ProgressLocation.Notification:r.ProgressLocation.Window,title:e,cancellable:void 0!==n};return this.applicationShell.withProgress(a,((e,t)=>(t&&n&&t.onCancellationRequested((()=>{n(),i.reject()})),i.promise()))).then(o.noop,o.noop),i}async waitWithStatus(e,t,n,r){const i=this.set(t,n,r);let o;try{o=await e()}finally{i.dispose()}return o}}},95772:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSourceMap=void 0;const r=n(35412);t.buildSourceMap=function(e){const t={source:{path:(0,r.getFilePath)(e.uri)},pydevdSourceMaps:[]};return t.pydevdSourceMaps=e.generatedCodes.map((e=>({line:e.debuggerStartLine,endLine:e.endLine,runtimeSource:{path:e.runtimeFile},runtimeLine:e.runtimeLine}))),t}},72771:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugCellController=void 0;const r=n(3445),i=n(33648),o=n(57566),s=n(43138),a=n(11642),c=n(9959),l=n(15139);t.DebugCellController=class{constructor(e,t,n){this.debugAdapter=e,this.debugCell=t,this.execution=n,this._ready=(0,s.createDeferred)(),this.ready=this._ready.promise,(0,c.sendTelemetryEvent)(r.DebuggingTelemetry.successfullyStartedRunAndDebugCell)}trace(e,t){(0,a.traceVerbose)(`[Debug-IW] ${e}: ${t}`)}async willSendEvent(e){return(0,i.isDebugpyAttachRequest)(e)?(this.trace("intercept","debugpyAttach request for subprocess, not supported"),!0):!("output"!==e.event||!(0,i.isJustMyCodeNotification)(e.body.output)||(this.trace("intercept","justMyCode notification"),0))}async willSendRequest(e){const t=(0,l.getInteractiveCellMetadata)(this.debugCell);"setBreakpoints"===e.command&&t&&t.generatedCode&&!this.cellDumpInvoked&&(this.debugCellDumped||(this.debugCellDumped=(0,o.cellDebugSetup)(this.execution,this.debugAdapter)),await this.debugCellDumped),"configurationDone"===e.command&&t&&t.generatedCode&&(this.debugCellDumped||(this.debugCellDumped=(0,o.cellDebugSetup)(this.execution,this.debugAdapter)),await this.debugCellDumped,this._ready.resolve())}}},32394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWDebugger=void 0;const r=n(3856),i=n(43138);class o extends r.Debugger{constructor(){super(...arguments),this._ready=(0,i.createDeferred)(),this.ready=this._ready.promise}resolve(){this._ready.resolve()}}t.IWDebugger=o},6821:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindowDebuggingManager=void 0;const c=n(26594),l=n(66828),u=n(94062),d=n(50867),h=n(3445),p=n(40157),f=n(66317),g=n(57566),m=n(10053),v=n(83599),y=n(42080),b=n(25251),w=n(58681),S=n(41778),C=n(11642),_=s(n(15948)),P=n(95772),E=n(72771),k=n(32394),I=n(69035),D=n(42793);let T=class extends p.DebuggingManagerBase{constructor(e,t,n,r,i,o,s,a,c,l){super(e,t,n,r,i,l),this.platform=o,this.debugLocationTrackerFactory=s,this.configService=a,this.debugService=c}activate(){super.activate(),this.disposables.push(l.debug.registerDebugAdapterDescriptorFactory(h.pythonIWKernelDebugAdapter,{createDebugAdapterDescriptor:async e=>this.createDebugAdapterDescriptor(e)}))}getDebugMode(e){return f.KernelDebugMode.InteractiveWindow}async start(e,t){(0,C.traceInfoIfCI)("Starting debugging IW"),await this.checkIpykernelAndPrompt(t)===g.IpykernelCheckResult.Ok&&await this.startDebuggingCell(e,t)}async startDebuggingCell(e,t){const n=this.configService.getSettings(e.uri),r={type:h.pythonIWKernelDebugAdapter,name:_.basename(e.uri.toString()),request:"attach",justMyCode:n.debugJustMyCode,__notebookUri:e.uri.toString(),__mode:f.KernelDebugMode.InteractiveWindow,__cellIndex:t.index};await this.startDebuggingConfig(r,{suppressSaveBeforeStart:!0});const i=this.notebookToDebugger.get(e);i?await i.ready:(0,C.traceError)("Debugger not found, could not start debugging.")}async createDebugAdapterDescriptor(e){const t=e.configuration;(0,g.assertIsInteractiveWindowDebugConfig)(t);const n=this.vscNotebook.notebookDocuments.find((e=>e.uri.toString()===t.__notebookUri));if(!n||"number"!=typeof t.__cellIndex)return void(0,C.traceError)("Invalid debug session for debugging of IW using Jupyter Protocol");if(this.notebookInProgress.has(n))return void(0,C.traceInfo)("Cannot start debugging. Already debugging this notebook");if(this.isDebugging(n))return void(0,C.traceInfo)("Cannot start debugging. Already debugging this notebook document. Toolbar should update");const r=new k.IWDebugger(n,t,e);this.notebookToDebugger.set(n,r);try{return this.notebookInProgress.add(n),await this.doCreateDebugAdapterDescriptor(t,e,n,r)}finally{this.notebookInProgress.delete(n)}}async doCreateDebugAdapterDescriptor(e,t,n,r){const i=await this.ensureKernelIsRunning(n);if(!i?.session)return void this.appShell.showInformationMessage(b.DataScience.kernelWasNotStarted).then(w.noop,w.noop);const o=new I.KernelDebugAdapter(t,n,i.session,i,this.platform,this.debugService,this.debugLocationTrackerFactory);this.disposables.push(o.onDidEndSession(this.endSession.bind(this)));const s=n.cellAt(e.__cellIndex),a=new E.DebugCellController(o,s,this.kernelProvider.getKernelExecution(i));return o.addDebuggingDelegates([a,new D.RestartNotSupportedController(s,this.serviceContainer)]),a.ready.then((()=>r.resolve())).catch((e=>console.error("Failed waiting for controller to be ready",e))),this.trackDebugAdapter(n,o),new l.DebugAdapterInlineImplementation(o)}async updateSourceMaps(e,t){let n=this.getDebugSession(e.notebook);n&&((0,C.traceInfoIfCI)("Sending debug request for source map"),await Promise.all(t.map((async e=>{if(n)return n.customRequest("setPydevdSourceMap",(0,P.buildSourceMap)(e))}))))}};t.InteractiveWindowDebuggingManager=T,t.InteractiveWindowDebuggingManager=T=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IKernelProvider)),a(1,(0,c.inject)(d.IControllerRegistration)),a(2,(0,c.inject)(m.ICommandManager)),a(3,(0,c.inject)(m.IApplicationShell)),a(4,(0,c.inject)(m.IVSCodeNotebook)),a(5,(0,c.inject)(v.IPlatformService)),a(6,(0,c.inject)(f.IDebugLocationTrackerFactory)),a(7,(0,c.inject)(y.IConfigurationService)),a(8,(0,c.inject)(m.IDebugService)),a(9,(0,c.inject)(S.IServiceContainer))],T)},69035:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDebugAdapter=void 0;const s=n(66828),a=n(15139),c=n(79626),l=n(11642),u=o(n(15948));class d extends c.KernelDebugAdapterBase{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,o),this.cellToDebugFileSortedInReverseOrderByLineNumber=[],s&&(this.debugLocationTracker=s.createDebugAdapterTracker(e),this.debugLocationTracker.onWillStartSession&&this.debugLocationTracker.onWillStartSession(),this.onDidSendMessage((e=>{this.debugLocationTracker?.onDidSendMessage&&this.debugLocationTracker.onDidSendMessage(e)}),this,this.disposables),this.onDidEndSession((()=>{this.debugLocationTracker?.onWillStopSession&&this.debugLocationTracker.onWillStopSession()}),this,this.disposables))}handleClientMessageAsync(e){return(0,l.traceInfoIfCI)(`KernelDebugAdapter::handleMessage ${JSON.stringify(e,void 0," ")}`),"request"===e.type&&this.debugLocationTracker?.onWillReceiveMessage&&this.debugLocationTracker.onWillReceiveMessage(e),"response"===e.type&&this.debugLocationTracker?.onDidSendMessage&&this.debugLocationTracker.onDidSendMessage(e),super.handleClientMessageAsync(e)}async dumpCell(e){const t=this.notebookDocument.cellAt(e),n=(0,a.getInteractiveCellMetadata)(t);if(!n)throw new Error("Not an interactive window cell");try{const e=(n.generatedCode?.code||t.document.getText()).replace(/\r\n/g,"\n"),r=await this.session.customRequest("dumpCell",{code:e}),i=u.normalize(r.sourcePath);this.fileToCell.set(i,s.Uri.parse(n.interactive.uristring));let o=0;n.generatedCode&&!n.generatedCode.hasCellMarker&&(o=n.generatedCode.firstNonBlankLineIndex),this.cellToDebugFileSortedInReverseOrderByLineNumber.push({debugFilePath:i,interactiveWindow:s.Uri.parse(n.interactive.uristring),metadata:n,lineOffset:o+n.interactive.lineIndex+(n.generatedCode?.lineOffsetRelativeToIndexOfFirstLineInCell||0)}),this.cellToDebugFileSortedInReverseOrderByLineNumber.sort(((e,t)=>t.metadata.interactive.lineIndex-e.metadata.interactive.lineIndex))}catch(e){(0,l.traceError)(`Failed to dump cell for ${t.index} with code ${n.interactive.originalSource}`,e)}}translateDebuggerLocationToRealLocation(e,t){if(!(t=e?.source??t)||!t.path)return;const n=this.cellToDebugFileSortedInReverseOrderByLineNumber.find((e=>e.debugFilePath===t.path));n&&(t.name=u.basename(n.interactiveWindow.path),t.path=n.interactiveWindow.toString(),"number"==typeof e?.endLine&&(e.endLine=e.endLine+(n.lineOffset||0)),"number"==typeof e?.line&&(e.line=e.line+(n.lineOffset||0)))}translateRealLocationToDebuggerLocation(e,t){const n=e.line;if(!(t=e?.source??t)||!t.path||"number"!=typeof n)return;const r=this.cellToDebugFileSortedInReverseOrderByLineNumber.find((e=>n>=e.metadata.interactive.lineIndex+1));r&&r.interactiveWindow.path===t.path&&(t.path=r.debugFilePath,"number"==typeof e?.endLine&&(e.endLine=e.endLine-(r.lineOffset||0)),"number"==typeof e?.line&&(e.line=e.line-(r.lineOffset||0)))}async sendRequestToJupyterSession(e){if("setBreakpoints"===e.command){const t=e.arguments;if(delete t.lines,t.source.path!==this.cellToDebugFileSortedInReverseOrderByLineNumber[0]?.interactiveWindow.path)return super.sendRequestToJupyterSession(e);let n,r=[];const i=[],o=()=>{if(r.length){const t=JSON.parse(JSON.stringify(e));t.arguments.breakpoints=r,i.push(super.sendRequestToJupyterSession(t))}};for(const t of e.arguments.breakpoints??[]){const e=this.cellToDebugFileSortedInReverseOrderByLineNumber.find((e=>t.line>=e.metadata.generatedCode.line&&t.line<=e.metadata.generatedCode.endLine));if(e&&e.metadata.interactive.lineIndex!==n)o(),n=e.metadata.interactive.lineIndex,r=[t];else if(e)r.push(t);else{const e={...t,verified:!0};i.push(Promise.resolve({body:{breakpoints:[e]}}))}}o();const s=await Promise.all(i),a=JSON.parse(JSON.stringify(s[0]));return s.slice(1).forEach((e=>{a.body.breakpoints=a.body.breakpoints.concat(e.body.breakpoints??[])})),a.command="setBreakpoints",a.type="response",a.success=!0,a.request_seq=e.seq,a}return super.sendRequestToJupyterSession(e)}getDumpFilesForDeletion(){return this.cellToDebugFileSortedInReverseOrderByLineNumber.map((e=>e.debugFilePath))}}t.KernelDebugAdapter=d},42793:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestartNotSupportedController=void 0;const r=n(10053),i=n(25251),o=n(58681),s=n(11642);t.RestartNotSupportedController=class{constructor(e,t){this.debugCell=e,this.applicationShell=t.get(r.IApplicationShell)}trace(e,t){(0,s.traceVerbose)(`[Debug-IWRestart] ${e}: ${t}`)}async willSendResponse(e){"initialize"===e.command&&e.body&&(e.body.supportsRestartRequest=!0)}async willSendRequest(e){if("restart"===e.command)return this.trace("restart","Showing warning for unsupported restart request"),this.applicationShell.showWarningMessage(i.DataScience.restartNotSupported,{modal:!0}).then(o.noop,o.noop),{command:e.command,request_seq:e.seq,seq:e.seq,success:!0,type:"response"}}}},64064:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindowDebuggingStartupCodeProvider=void 0;const o=n(26594),s=n(66828),a=n(98729),c=n(94062),l=n(15925),u=n(20397),d=n(83599),h=n(42080);let p=class{constructor(e,t,n,r,i){this.configService=e,this.fs=t,this.context=n,this.isWebExtension=r,this.registry=i,this.priority=5}activate(){this.registry.register(this,l.InteractiveWindowView)}async getCode(e){if(!(0,a.isPythonKernelConnection)(e.kernelConnectionMetadata))return[];if(!this.isWebExtension){if(!0===this.configService.getSettings(void 0).forceIPyKernelDebugger)return[];if(!(0,c.isLocalConnection)(e.kernelConnectionMetadata))return[]}if(e.notebook?.notebookType===l.InteractiveWindowView){if(!(0,c.isLocalConnection)(e.kernelConnectionMetadata))return[];this.addRunCellHookContents||(this.addRunCellHookContents=this.fs.readFile(s.Uri.joinPath(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers","kernel","addRunCellHook.py")));const t=await this.addRunCellHookContents;return(0,u.splitLines)(t,{trim:!1})}return[]}};t.InteractiveWindowDebuggingStartupCodeProvider=p,t.InteractiveWindowDebuggingStartupCodeProvider=p=r([(0,o.injectable)(),i(0,(0,o.inject)(h.IConfigurationService)),i(1,(0,o.inject)(d.IFileSystem)),i(2,(0,o.inject)(h.IExtensionContext)),i(3,(0,o.inject)(h.IsWebExtension)),i(4,(0,o.inject)(c.IStartupCodeProviders))],p)},94523:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCellsFromNotebookDocument=t.generateCellsFromDocument=t.generateCellRangesFromDocument=t.hasCells=t.generateCells=t.uncommentMagicCommands=t.createMarkdownCell=t.createCodeCell=void 0;const r=n(66828),i=n(49691),o=n(58681),s=n(14154),a=n(86563),c=n(20397),l=n(53073);function u(e,t){const n="boolean"==typeof t&&t;return e=e||"",{cell_type:"code",execution_count:null,metadata:{},outputs:"boolean"==typeof t?[]:t||[],source:Array.isArray(e)?(0,a.appendLineFeed)(e,"\n",n?h:void 0):e}}function d(e,t=!1){return e=Array.isArray(e)?e:[e],{cell_type:"markdown",metadata:{},source:t?e:(0,a.generateMarkdownFromCodeLines)(e)}}function h(e){return/^#\s*!/.test(e)?/^#\s*!\s*%%?/.test(e)?e.replace(/^#\s*!\s*/,""):e.replace(/^#\s*/,""):e}function p(e,t,n){return{data:u(e,n),uri:t}}function f(e,t,n=!1){return{uri:t,data:d(e,n)}}function g(e,t,n,r){const s=(0,c.splitLines)(t,{trim:!1}),l=s[0],u=new i.CellMatcher(e),{magicCommandsAsComments:d=!1}=e||{};if(u.isMarkdown(l)){let e=-1;return(0,a.parseForComments)(s,((e,t)=>(0,o.noop)()),((t,n)=>{t&&t.length>0&&-1===e&&(e=r?n:-1)})),e>=0?[f(s.slice(0,e),n),p(s.slice(e),n,d)]:[f(s,n)]}return[p(s,n,d)]}function m(e,t){const n=new i.CellMatcher(t),o=[];for(let t=0;t<e.lineCount;t+=1){const i=e.lineAt(t);if(n.isCell(i.text)){if(o.length>0){const n=o[o.length-1];n.range=new r.Range(n.range.start,e.lineAt(t-1).range.end)}o.push({range:i.range,cell_type:n.getCellType(i.text)})}}if(o.length>=1){const t=e.lineAt(e.lineCount-1),n=o[o.length-1];n.range=new r.Range(n.range.start,t.range.end)}return o}t.createCodeCell=u,t.createMarkdownCell=d,t.uncommentMagicCommands=h,t.generateCells=g,t.hasCells=function(e,t){const n=new i.CellMatcher(t);for(let t=0;t<e.lineCount;t+=1){const r=e.lineAt(t);if(n.isCell(r.text))return!0}return!1},t.generateCellRangesFromDocument=m,t.generateCellsFromDocument=function(e,t){const n=m(e,t);return Array.prototype.concat(...n.map((n=>{const r=e.getText(n.range);return g(t,r,e.uri,!1)})))},t.generateCellsFromNotebookDocument=function(e,t){return e.getCells().filter((e=>!(0,l.isSysInfoCell)(e))).map((e=>{let n=(0,c.splitLines)(e.document.getText(),{trim:!1,removeEmptyEntries:!1});void 0!==e.metadata.interactiveWindowCellMarker&&n.unshift(e.metadata.interactiveWindowCellMarker+"\n");const i=(0,s.createJupyterCellFromVSCNotebookCell)(e);return i.source=e.kind===r.NotebookCellKind.Code?(0,a.appendLineFeed)(n,"\n",t?h:void 0):(0,a.appendLineFeed)(n),{data:i,file:""}}))}},49691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellMatcher=void 0;const r=n(15925),i=n(20397),o=n(58681);t.CellMatcher=class{constructor(e){this.codeMatchRegEx=this.createRegExp(e?e.codeRegularExpression:void 0,r.RegExpValues.PythonCellMarker),this.markdownMatchRegEx=this.createRegExp(e?e.markdownRegularExpression:void 0,r.RegExpValues.PythonMarkdownCellMarker),this.codeExecRegEx=new RegExp(`${this.codeMatchRegEx.source}(.*)`),this.markdownExecRegEx=new RegExp(`${this.markdownMatchRegEx.source}(.*)`),this.defaultCellMarker=e?.defaultCellMarker?e.defaultCellMarker:"# %%"}isCell(e){return this.isCode(e)||this.isMarkdown(e)}isMarkdown(e){return this.markdownMatchRegEx.test(e.trim())}isCode(e){return this.codeMatchRegEx.test(e.trim())||e.trim()===this.defaultCellMarker}getCellType(e){return this.isMarkdown(e)?"markdown":"code"}isEmptyCell(e){return 0===this.stripFirstMarker(e).trim().length}stripFirstMarker(e){const t=(0,i.splitLines)(e,{trim:!1,removeEmptyEntries:!1});return t.length>0&&(this.isCode(t[0])||this.isMarkdown(t[0]))?t.slice(1).join("\n"):e}stripFirstMarkerNoConcat(e){return e.length>0&&(this.isCode(e[0])||this.isMarkdown(e[0]))?e.slice(1):e}getFirstMarker(e){const t=(0,i.splitLines)(e,{trim:!1,removeEmptyEntries:!1});if(t.length>0&&(this.isCode(t[0])||this.isMarkdown(t[0])))return t[0]}createRegExp(e,t){try{if(e)return new RegExp(e)}catch{(0,o.noop)()}return t}}},50451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGenerator=void 0;const r=n(66828),i=n(86563),o=n(11642),s=n(94523),a=n(49691),c=n(46729);t.CodeGenerator=class{constructor(e,t,n,r,i,o){this.documentManager=e,this.configService=t,this.storage=n,this.notebook=r,this.executionCount=0,this.cellIndexesCounted={},this.disposables=[],o.push(this),this.documentManager.onDidChangeTextDocument(this.onChangedDocument,this,this.disposables),i.onDidChangeNotebookCellExecutionState(this.onDidCellStateChange,this,this.disposables)}dispose(){this.disposed||(this.disposed=!0,this.storage.clear(),this.disposables.forEach((e=>e.dispose())))}reset(){this.storage.clear(),this.executionCount=0}async generateCode(e,t,n,r){const{executableLines:i}=this.extractExecutableLines(e);if(this.executionCount+=1,this.cellIndexesCounted[t]=!0,i.length>0&&i.find((e=>e.trim().length>0)))return this.generateCodeImpl(e,this.executionCount,n,r)}extractExecutableLines(e){const t=e.interactive.originalSource,n=this.configService.getSettings(this.notebook.uri),r=new a.CellMatcher(n),o=(0,i.splitMultilineString)(t);if(n.magicCommandsAsComments&&o.forEach(((e,t)=>o[t]=(0,s.uncommentMagicCommands)(e))),e.interactiveWindowCellMarker&&o.length&&o[0].trim()===e.interactiveWindowCellMarker.trim()){const e=o.slice(1).filter((e=>e.trim().length>0));if(e.length>0&&e[0].trim().startsWith("%%")){const t=o.slice(o.indexOf(e[0]));return{lines:t,executableLines:t}}}return o.length>0&&(r.isCode(o[0])||r.isMarkdown(o[0]))?{lines:o,executableLines:o.slice(1)}:{lines:o,executableLines:o}}onDidCellStateChange(e){e.cell.notebook===this.notebook&&e.cell.executionSummary?.executionOrder&&!this.cellIndexesCounted[e.cell.index]&&(this.executionCount+=1,this.cellIndexesCounted[e.cell.index]=!0)}async generateCodeImpl(e,t,n,i){const{lineIndex:s,uristring:a}=e.interactive,l=this.documentManager.textDocuments.find((e=>e.uri.toString()===a));if(!l)return;const{stripped:u,trueStartLine:d}=this.extractStrippedLines(e),h=l.lineAt(d),p=l.lineAt(Math.min(d+u.length-1,l.lineCount-1));let f=0;for(;f<u.length&&0===u[f].trim().length;)f+=1;const g=f+d,m=l.offsetAt(new r.Position(s,0)),v=l.offsetAt(p.rangeIncludingLineBreak.end),y=(e.interactiveWindowCellMarker||"").length>0,{runtimeLine:b,debuggerStartLine:w}=this.addHiddenLines(n,u,d,g,y,i),S=u.join(""),C=l.getText(new r.Range(new r.Position(s,0),p.rangeIncludingLineBreak.end)),_=(await(0,c.computeHash)(S,"SHA-1")).substring(0,12),P=this.getRuntimeFile(_,t),E=n?-1:0,k={line:h?h.lineNumber+1:1,endLine:p?p.lineNumber+1:1,firstNonBlankLineIndex:g,debuggerStartLine:w,executionCount:t,startOffset:m,endOffset:v,deleted:!1,code:S,trimmedRightCode:u.map((e=>e.replace(/[ \t\r]+\n$/g,"\n"))).join(""),realCode:C,runtimeLine:b,runtimeFile:P,id:e.id,timestamp:Date.now(),lineOffsetRelativeToIndexOfFirstLineInCell:E,hasCellMarker:y};return(0,o.traceInfo)(`Generated code for ${t} = ${P} with ${u.length} lines`),this.storage.store(r.Uri.parse(e.interactive.uristring),k),k}getRuntimeFile(e,t){return`<ipython-input-${t}-${e}>`}onChangedDocument(e){const t=this.storage.getFileGeneratedCode(e.document.uri);if(t){const n=e.document.getText();e.contentChanges.forEach((e=>{this.handleContentChange(n,e,t)}))}}extractStrippedLines(e){const t=(0,i.splitMultilineString)(e.interactive.originalSource),{lines:n}=this.extractExecutableLines(e);let r=e.interactive.lineIndex+1;if(!e.interactiveWindowCellMarker){r=e.interactive.lineIndex;for(let e=0;e<n.length;e+=1)if(n[e]!==t[e]){r+=e+1;break}}let o=0;for(;o<n.length&&0===n[o].trim().length;)o+=1;let s=n.length-1,a=n.length-2;for(;a>0;){const e=n[s],t=n[a];if(0!==e.length&&"\n"!==e||0!==t.length&&"\n"!==t)break;n.splice(s,1),s-=1,a-=1}!n[s].endsWith("\n")&&n[s].length>0&&(n[s]=`${n[s]}\n`);for(let e=0;e<n.length;e++)n[e]=n[e].replace(/\r\n/g,"\n");return{stripped:n,trueStartLine:r}}handleContentChange(e,t,n){const r=t.range.start.line-t.range.end.line+t.text.split("\n").length-1,i=t.text.length-t.rangeLength,o=t.rangeLength<=0?t.rangeOffset:t.rangeOffset+t.rangeLength-1;n.forEach((n=>{n.endOffset<t.rangeOffset||(n.startOffset>o?(n.line+=r,n.endLine+=r,n.startOffset+=i,n.endOffset+=i):n.startOffset===o?n.deleted||t.rangeLength>0||0===r?n.deleted=e.substr(n.startOffset,n.endOffset-n.startOffset)!==n.realCode:(n.line+=r,n.endLine+=r,n.startOffset+=i,n.endOffset+=i):n.deleted=e.substr(n.startOffset,n.endOffset-n.startOffset)!==n.realCode)}))}addHiddenLines(e,t,n,r,i,o){const s=o||!0===this.configService.getSettings(void 0).forceIPyKernelDebugger;return e&&this.configService.getSettings(this.notebook.uri).stopOnFirstLineWhileDebugging?s?(t.splice(0,0,"breakpoint()\n"),{runtimeLine:1,debuggerStartLine:n+1}):(t.splice(0,0,"breakpoint()\n"),{runtimeLine:2,debuggerStartLine:n}):{runtimeLine:1,debuggerStartLine:i?r:r+1}}}},2644:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGeneratorFactory=void 0;const o=n(26594),s=n(10053),a=n(42080),c=n(50451),l=n(74858);let u=class{constructor(e,t,n,r,i){this.documentManager=e,this.configService=t,this.storageFactory=n,this.disposables=r,this.notebooks=i,this.codeGenerators=new WeakMap}activate(){this.notebooks.onDidCloseNotebookDocument(this.onDidCloseNotebook,this,this.disposables)}getOrCreate(e){const t=this.get(e);if(t)return t;const n=new c.CodeGenerator(this.documentManager,this.configService,this.storageFactory.getOrCreate(e),e,this.notebooks,this.disposables);return this.codeGenerators.set(e,n),n}get(e){return this.codeGenerators.get(e)}onDidCloseNotebook(e){this.codeGenerators.get(e)?.dispose(),this.codeGenerators.delete(e)}};t.CodeGeneratorFactory=u,t.CodeGeneratorFactory=u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDocumentManager)),i(1,(0,o.inject)(a.IConfigurationService)),i(2,(0,o.inject)(l.IGeneratedCodeStorageFactory)),i(3,(0,o.inject)(a.IDisposableRegistry)),i(4,(0,o.inject)(s.IVSCodeNotebook))],u)},2785:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.generateCommand=t.CodeLensFactory=void 0;const c=n(26594),l=n(66828),u=n(10053),d=n(11642),h=n(42080),p=s(n(25251)),f=n(15139),g=n(94062),m=n(15925),v=n(94523),y=n(74858),b=n(11386),w=p.DataScience.runCurrentCellAndAddBelow,S=p.DataScience.addCellBelowCommandTitle,C=p.DataScience.debugCellCommandTitle,_=p.DataScience.debugCellCommandTitle,P=p.DataScience.debugStepOverCommandTitle,E=p.DataScience.debugContinueCommandTitle,k=p.DataScience.debugStopCommandTitle,I=p.DataScience.runCellLensCommandTitle,D=p.DataScience.runAllCellsLensCommandTitle,T=p.DataScience.runAllCellsAboveLensCommandTitle,x=p.DataScience.runCellAndAllBelowLensCommandTitle,O=p.DataScience.scrollToCellTitleFormatMessage;let R=class{constructor(e,t,n,r,i,o,s){this.configService=e,this.documentManager=t,this.workspace=n,this.generatedCodeStorageFactory=o,this.updateEvent=new l.EventEmitter,this.notebookData=new Map,this.codeLensCache=new Map,this.totalCodeLensUpdateTimeInMs=0,this.codeLensUpdateCount=0,this.maxCellCount=0,this.documentManager.onDidCloseTextDocument(this.onClosedDocument,this,i),this.workspace.onDidGrantWorkspaceTrust((()=>this.codeLensCache.clear()),this,i),this.configService.getSettings(void 0).onDidChange(this.onChangedSettings,this,i),r.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,i),s.onDidDisposeKernel((e=>{this.notebookData.delete(e.notebook.uri.toString())}),this,i)}getPerfMeasures(){return{totalCodeLensUpdateTimeInMs:this.totalCodeLensUpdateTimeInMs,codeLensUpdateCount:this.codeLensUpdateCount,maxCellCount:this.maxCellCount}}get updateRequired(){return this.updateEvent.event}createCodeLenses(e){const t=this.getCodeLensCacheData(e);return[...t.documentLenses,...t.gotoCellLens]}getCellRanges(e){return this.getCodeLensCacheData(e).cellRanges}getCodeLensCacheData(e){const t=new b.StopWatch;let n=!1;const r=e.uri.toString();let i=this.codeLensCache.get(r),o=!1;i||(i={cachedDocumentVersion:void 0,cachedExecutionCounts:new Set,documentLenses:[],cellRanges:[],gotoCellLens:[]},o=!0,this.codeLensCache.set(r,i)),i.cachedDocumentVersion!==e.version&&(i.cellRanges=(0,v.generateCellRangesFromDocument)(e,this.configService.getSettings(e.uri)),i.documentLenses=[],i.gotoCellLens=[],i.cachedDocumentVersion=e.version,o=!0);const s=this.getDocumentExecutionCounts(r);if((s.length!==i.cachedExecutionCounts.size||s.find((e=>!i?.cachedExecutionCounts.has(e))))&&(i.gotoCellLens=[],i.cachedExecutionCounts=new Set(s),o=!0),0===i.documentLenses.length&&o&&i.cellRanges.length){n=!0;const t=this.enumerateCommands(e.uri);(0,d.traceVerbose)(`CodeLensFactory: Generating new code lenses for version ${e.version} of document ${e.uri} for commands ${t.join(", ")}`);let r=!0;i.cellRanges.forEach((n=>{t.forEach((t=>{const o=this.createCodeLens(e,n,t,r);o&&i.documentLenses.push(o)})),r=!1}))}else(0,d.traceInfoIfCI)(`NOT Generating new code lenses for version ${e.version} of document ${e.uri} - needUpdate: ${o}, cellRanges.length: ${i.cellRanges.length}`);if(o&&0===i.gotoCellLens.length&&i.cellRanges.length&&this.configService.getSettings(e.uri).addGotoCodeLenses){const t=this.generatedCodeStorageFactory.get({fileUri:e.uri}),n=t?t.all.find((t=>t.uri.toString()===e.uri.toString()))?.generatedCodes:void 0;n&&n.length&&i.cellRanges.forEach((t=>{const r=this.createExecutionLens(e,t.range,n);r&&i?.gotoCellLens.push(r)}))}return n&&(this.totalCodeLensUpdateTimeInMs+=t.elapsedTime,this.codeLensUpdateCount+=1,this.maxCellCount=Math.max(this.maxCellCount,i.cellRanges.length)),i}getDocumentExecutionCounts(e){return[...this.notebookData.values()].map((t=>t.documentExecutionCounts.get(e))).filter((e=>void 0!==e))}onDidChangeNotebookCellExecutionState(e){if(e.cell.notebook.notebookType!==m.InteractiveWindowView)return;if(e.state!==l.NotebookCellExecutionState.Idle||!e.cell.executionSummary?.executionOrder)return;const t=(0,f.getInteractiveCellMetadata)(e.cell);let n=this.notebookData.get(e.cell.notebook.uri.toString());n||(n={cellExecutionCounts:new Map,documentExecutionCounts:new Map},this.notebookData.set(e.cell.notebook.uri.toString(),n)),void 0!==n&&void 0!==t&&(n.cellExecutionCounts.set(t.id,e.cell.executionSummary.executionOrder),n.documentExecutionCounts.set(t.interactive.uristring,e.cell.executionSummary.executionOrder),this.updateEvent.fire())}onClosedDocument(e){this.codeLensCache.delete(e.uri.toString())}onChangedSettings(){this.codeLensCache.clear(),this.updateEvent.fire()}enumerateCommands(e){let t;const n=this.configService.getSettings(e).codeLenses;t=n?n.split(",").map((e=>e.trim())):m.CodeLensCommands.DefaultDesignLenses;const r=this.configService.getSettings(e).debugCodeLenses;t=r?t.concat(r.split(",").map((e=>e.trim()))):t.concat(m.CodeLensCommands.DefaultDebuggingLenses);let i=[];return this.workspace.isTrusted||(i=[...m.CodeLensCommands.DebuggerCommands,...m.CodeLensCommands.DebuggerCommands,m.Commands.RunAllCells,m.Commands.RunAllCellsAbove,m.Commands.RunAllCellsAbovePalette,m.Commands.RunCellAndAllBelowPalette,m.Commands.RunCurrentCell,m.Commands.RunCurrentCellAdvance,m.Commands.RunCurrentCellAndAddBelow,m.Commands.RunFileInInteractiveWindows,m.Commands.InterruptKernel,m.Commands.RunToLine,m.Commands.RunCell,m.Commands.DebugCell,m.Commands.DebugContinue,m.Commands.DebugStepOver,m.Commands.DebugStop,m.Commands.RunCellAndAllBelowPalette]),i&&(t=t.filter((e=>!i.includes(e)))),t}createCodeLens(e,t,n,r){const{range:i,cell_type:o}=t;switch(n){case m.Commands.RunCurrentCellAndAddBelow:return this.generateCodeLens(i,m.Commands.RunCurrentCellAndAddBelow,w);case m.Commands.AddCellBelow:return this.generateCodeLens(i,m.Commands.AddCellBelow,S,[e.uri,i.start.line]);case m.Commands.DebugCurrentCellPalette:return this.generateCodeLens(i,m.Commands.DebugCurrentCellPalette,C);case m.Commands.DebugCell:if("code"!==o)break;return this.generateCodeLens(i,m.Commands.DebugCell,_,[e.uri,i.start.line,i.start.character,i.end.line,i.end.character]);case m.Commands.DebugStepOver:if("code"!==o)break;return this.generateCodeLens(i,m.Commands.DebugStepOver,P,[e.uri]);case m.Commands.DebugContinue:if("code"!==o)break;return this.generateCodeLens(i,m.Commands.DebugContinue,E,[e.uri]);case m.Commands.DebugStop:if("code"!==o)break;return this.generateCodeLens(i,m.Commands.DebugStop,k,[e.uri]);case m.Commands.RunCurrentCell:case m.Commands.RunCell:return this.generateCodeLens(i,m.Commands.RunCell,I,[e.uri,i.start.line,i.start.character,i.end.line,i.end.character]);case m.Commands.RunAllCells:return this.generateCodeLens(i,m.Commands.RunAllCells,D,[e.uri,i.start.line,i.start.character]);case m.Commands.RunAllCellsAbovePalette:case m.Commands.RunAllCellsAbove:return r?this.generateCodeLens(i,m.Commands.RunCellAndAllBelow,x,[e.uri,i.start.line,i.start.character]):this.generateCodeLens(i,m.Commands.RunAllCellsAbove,T,[e.uri,i.start.line,i.start.character]);case m.Commands.RunCellAndAllBelowPalette:case m.Commands.RunCellAndAllBelow:return this.generateCodeLens(i,m.Commands.RunCellAndAllBelow,x,[e.uri,i.start.line,i.start.character]);default:(0,d.traceWarning)(`Invalid command for code lens ${n}`)}}findMatchingCellExecutionCount(e){const t=[...this.notebookData.values()].find((t=>t.cellExecutionCounts.get(e)));return t?.cellExecutionCounts.get(e)}createExecutionLens(e,t,n){if(n){const r=n.filter((e=>e.line-2===t.start.line)).sort(((e,t)=>e.timestamp-t.timestamp));if(r&&r.length){const n=r[r.length-1],i=this.findMatchingCellExecutionCount(n.id);if(void 0!==i)return this.generateCodeLens(t,m.Commands.ScrollToCell,O(i),[e.uri,n.id])}}}generateCodeLens(e,t,n,r){return new l.CodeLens(e,M(t,n,r))}};function M(e,t,n){return{arguments:n,title:t,command:e}}t.CodeLensFactory=R,t.CodeLensFactory=R=o([(0,c.injectable)(),a(0,(0,c.inject)(h.IConfigurationService)),a(1,(0,c.inject)(u.IDocumentManager)),a(2,(0,c.inject)(u.IWorkspaceService)),a(3,(0,c.inject)(u.IVSCodeNotebook)),a(4,(0,c.inject)(h.IDisposableRegistry)),a(5,(0,c.inject)(y.IGeneratedCodeStorageFactory)),a(6,(0,c.inject)(g.IKernelProvider))],R),t.generateCommand=M},42277:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeLensProviderActivator=void 0;const o=n(26594),s=n(74858),a=n(66828),c=n(15925),l=n(42080);let u=class{constructor(e,t){this.dataScienceCodeLensProvider=e,this.extensionContext=t}activate(){this.extensionContext.subscriptions.push(a.languages.registerCodeLensProvider([c.PYTHON_FILE_ANY_SCHEME],this.dataScienceCodeLensProvider))}};t.CodeLensProviderActivator=u,t.CodeLensProviderActivator=u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDataScienceCodeLensProvider)),i(1,(0,o.inject)(l.IExtensionContext))],u)},75463:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceCodeLensProvider=void 0;const c=n(26594),l=s(n(66828)),u=n(10053),d=n(29444),h=n(20397),p=n(42080),f=n(58681),g=n(11386),m=n(41778),v=n(9959),y=n(11642),b=n(15925),w=n(74858),S=s(n(52859)),C=n(66317);let _=class{constructor(e,t,n,r,i,o,s,a){this.serviceContainer=e,this.debugLocationTracker=t,this.documentManager=n,this.configuration=r,this.commandManager=i,this.debugService=s,this.totalExecutionTimeInMs=0,this.totalGetCodeLensCalls=0,this.activeCodeWatchers=[],this.didChangeCodeLenses=new l.EventEmitter,o.push(this),o.push(a.onDidGrantWorkspaceTrust((()=>{(0,h.dispose)(this.activeCodeWatchers),this.activeCodeWatchers=[],this.didChangeCodeLenses.fire()}))),o.push(this.debugService.onDidChangeActiveDebugSession(this.onChangeDebugSession.bind(this))),o.push(this.documentManager.onDidCloseTextDocument(this.onDidCloseTextDocument.bind(this))),this.debugLocationTracker&&o.push(this.debugLocationTracker.updated(this.onDebugLocationUpdated.bind(this)))}dispose(){this.totalGetCodeLensCalls>0&&(0,v.sendTelemetryEvent)(b.Telemetry.CodeLensAverageAcquisitionTime,{duration:this.totalExecutionTimeInMs/this.totalGetCodeLensCalls}),(0,h.dispose)(this.activeCodeWatchers)}get onDidChangeCodeLenses(){return this.didChangeCodeLenses.event}provideCodeLenses(e,t){return[b.NotebookCellScheme,b.InteractiveInputScheme].includes(e.uri.scheme)?[]:this.getCodeLensTimed(e)}getCodeWatcher(e){return this.matchWatcher(e.uri)}onDebugLocationUpdated(){this.didChangeCodeLenses.fire()}onChangeDebugSession(e){this.didChangeCodeLenses.fire()}onDidCloseTextDocument(e){const t=this.activeCodeWatchers.findIndex((t=>t.uri&&t.uri.toString()===e.uri.toString()));t>=0&&this.activeCodeWatchers.splice(t,1)[0].dispose()}getCodeLensTimed(e){const t=new g.StopWatch,n=this.getCodeLens(e);return this.totalExecutionTimeInMs+=t.elapsedTime,this.totalGetCodeLensCalls+=1,new d.ContextKey(b.EditorContexts.HasCodeCells,this.commandManager).set(n&&n.length>0).catch(f.noop),this.configuration.getSettings(e.uri).enableCellCodeLens?this.adjustDebuggingLenses(e,n):[]}adjustDebuggingLenses(e,t){const n=b.CodeLensCommands.DebuggerCommands;if(!this.debugLocationTracker||!this.debugService.activeDebugSession)return t.filter((e=>!!e.command&&!n.includes(e.command.command)));{const r=this.debugLocationTracker.getLocation(this.debugService.activeDebugSession);let i;try{i=r?l.Uri.parse(r.fileName):void 0}catch{}if(r&&(S.isEqual(l.Uri.file(r.fileName),e.uri,!0)||i&&S.isEqual(i,e.uri,!0)))return t.filter((e=>{const t=new l.Position(r.lineNumber-1,r.column-1);return e.range.contains(t)})).filter((e=>!!e.command&&n.includes(e.command.command)));(0,y.traceInfoIfCI)(`Detected debugging context because activeDebugSession is name:"${this.debugService.activeDebugSession.name}", type: "${this.debugService.activeDebugSession.type}", but fell through with debugLocation: ${JSON.stringify(r)}, and document.uri: ${e.uri.toString()}`)}return[]}getCodeLens(e){const t=this.matchWatcher(e.uri);return t?t.getCodeLenses():((0,y.traceVerbose)(`Creating a new watcher for document ${e.uri}`),this.createNewCodeWatcher(e).getCodeLenses())}matchWatcher(e){const t=this.activeCodeWatchers.findIndex((t=>t.uri&&t.uri.toString()==e.toString()));if(t>=0)return this.activeCodeWatchers[t];const n=this.documentManager.textDocuments.filter((t=>t.uri.toString()===e.toString()));return n&&n.length>0?((0,y.traceVerbose)(`creating new code watcher with matching document ${e}`),this.createNewCodeWatcher(n[0])):void 0}createNewCodeWatcher(e){const t=this.serviceContainer.get(w.ICodeWatcher);return t.setDocument(e),t.codeLensUpdated(this.onWatcherUpdated.bind(this)),this.activeCodeWatchers.push(t),t}onWatcherUpdated(){this.didChangeCodeLenses.fire()}};t.DataScienceCodeLensProvider=_,t.DataScienceCodeLensProvider=_=o([(0,c.injectable)(),a(0,(0,c.inject)(m.IServiceContainer)),a(1,(0,c.inject)(C.IDebugLocationTracker)),a(1,(0,c.optional)()),a(2,(0,c.inject)(u.IDocumentManager)),a(3,(0,c.inject)(p.IConfigurationService)),a(4,(0,c.inject)(u.ICommandManager)),a(5,(0,c.inject)(p.IDisposableRegistry)),a(6,(0,c.inject)(u.IDebugService)),a(7,(0,c.inject)(u.IWorkspaceService))],_)},65410:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeWatcher=void 0;const c=n(26594),l=n(66828),u=n(10053),d=n(42080),h=n(58681),p=n(9959),f=n(89275),g=n(58659),m=n(15925),v=n(135),y=n(49691),b=n(74858),w=n(11642),S=n(99203),C=s(n(52859)),_=n(90541);let P=class{constructor(e,t,n,r,i,o){this.interactiveWindowProvider=e,this.configService=t,this.documentManager=n,this.executionHelper=r,this.dataScienceErrorHandler=i,this.codeLensFactory=o,this.version=-1,this.codeLenses=[],this.cells=[],this.codeLensUpdatedEvent=new l.EventEmitter}setDocument(e){this.document=e,this.version=e.version,this.codeLenses=this.codeLensFactory.createCodeLenses(e),this.cells=this.codeLensFactory.getCellRanges(e),this.updateRequiredDisposable=this.codeLensFactory.updateRequired(this.onCodeLensFactoryUpdated.bind(this)),this.closeDocumentDisposable=this.documentManager.onDidCloseTextDocument(this.onDocumentClosed.bind(this))}get codeLensUpdated(){return this.codeLensUpdatedEvent.event}get uri(){return this.document?.uri}getVersion(){return this.version}getCodeLenses(){const e=this.document;return e&&e.version!=this.version&&(this.codeLenses=this.codeLensFactory.createCodeLenses(e),this.cells=this.codeLensFactory.getCellRanges(e),this.version=e.version),this.codeLenses}async debugCurrentCell(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(this.documentManager.activeTextEditor.selection,!1,!0)}dispose(){let e=this.codeLensFactory.getPerfMeasures();e&&e.codeLensUpdateCount>0&&(0,p.sendTelemetryEvent)(m.Telemetry.DocumentWithCodeCells,{codeLensUpdateTime:e.totalCodeLensUpdateTimeInMs/e.codeLensUpdateCount,maxCellCount:e.maxCellCount}),this.codeLensUpdatedEvent.dispose(),this.closeDocumentDisposable?.dispose(),this.updateRequiredDisposable?.dispose()}async runAllCells(){const e=await this.getActiveInteractiveWindow(),t=this.codeLenses.filter((e=>e.command&&e.command.command===m.Commands.RunCell&&e.command.arguments&&e.command.arguments.length>=5));let n=t.length,r=Promise.resolve(!0);for(const i of t){let o=new l.Range(i.command.arguments[1],i.command.arguments[2],i.command.arguments[3],i.command.arguments[4]);if(this.document){n===t.length&&(o=new l.Range(new l.Position(0,0),o.end));const i=this.document.getText(o);n-=1,r=this.addCode(e,i,this.document.uri,o.start.line)}}if(await r,0===t.length)return this.runFileInteractiveInternal(!1)}async runFileInteractive(){return this.runFileInteractiveInternal(!1)}async debugFileInteractive(){return this.runFileInteractiveInternal(!0)}async runAllCellsAbove(e,t){const n=await this.getActiveInteractiveWindow(),r=this.codeLenses.filter((e=>e.command&&e.command.command===m.Commands.RunCell));let i=r.findIndex((n=>n.range.start.line>=e&&n.range.start.character>=t));i<0&&(i=r.length);const o=i;let s=Promise.resolve(!0);for(const e of r){if(!(i>0&&this.document))break;{let t=new l.Range(e.range.start,e.range.end);i===o&&(t=new l.Range(new l.Position(0,0),t.end)),i-=1;const r=this.document.getText(t);s=this.addCode(n,r,this.document.uri,e.range.start.line)}}await s}async runCellAndAllBelow(e,t){const n=await this.getActiveInteractiveWindow(),r=this.codeLenses.filter((e=>e.command&&e.command.command===m.Commands.RunCell)),i=r.findIndex((n=>n.range.start.line>=e&&n.range.start.character>=t));let o=i>0?r.length-i:r.length,s=Promise.resolve(!0);for(let e=i;e>=0&&e<r.length;e+=1)if(o>0&&this.document){const t=r[e];o-=1;const i=this.document.getText(t.range);s=this.addCode(n,i,this.document.uri,t.range.start.line)}await s}async runSelectionOrLine(e,t){if(this.document&&e&&C.isEqual(e.document.uri,this.document.uri)){const n=await this.getActiveInteractiveWindow();let r;if(r=void 0===t||(0,h.isUri)(t)?this.executionHelper.getSelectedTextToExecute(e):t,!r)return;const i=await this.executionHelper.normalizeLines(r);if(!i||0===i.trim().length)return;await this.addCode(n,i,this.document.uri,e.selection.start.line)}}async runToLine(e){if(this.document&&e>0){const t=await this.getActiveInteractiveWindow(),n=this.document.lineAt(e-1),r=this.document.getText(new l.Range(0,0,n.range.end.line,n.range.end.character));r&&r.trim().length&&await this.addCode(t,r,this.document.uri,0)}}async runFromLine(e){if(this.document&&e<this.document.lineCount){const t=await this.getActiveInteractiveWindow(),n=this.document.lineAt(this.document.lineCount-1),r=this.document.getText(new l.Range(e,0,n.range.end.line,n.range.end.character));r&&r.trim().length&&await this.addCode(t,r,this.document.uri,e)}}async runCell(e){if(!this.documentManager.activeTextEditor||!this.documentManager.activeTextEditor.document)return;const t=e.contains(this.documentManager.activeTextEditor.selection.start)&&this.configService.getSettings(this.documentManager.activeTextEditor.document.uri).enableAutoMoveToNextCell;return this.runMatchingCell(e,t)}async debugCell(e){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(e,!1,!0)}async runCurrentCell(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(this.documentManager.activeTextEditor.selection,!1)}async runCurrentCellAndAdvance(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)return this.runMatchingCell(this.documentManager.activeTextEditor.selection,!0)}async addEmptyCellToBottom(){const e=this.documentManager.activeTextEditor;e&&this.insertCell(e,e.document.lineCount+1)}async runCurrentCellAndAddBelow(){if(!this.documentManager.activeTextEditor||!this.documentManager.activeTextEditor.document)return;const e=this.documentManager.activeTextEditor,t=new y.CellMatcher(this.configService.getSettings(e.document.uri));let n=0;const r=this.getDefaultCellMarker(e.document.uri);e&&e.edit((i=>{let o=!0;for(let s=e.selection.end.line+1;s<e.document.lineCount;s+=1)if(t.isCell(e.document.lineAt(s).text)){o=!1,n=s,i.insert(new l.Position(s,0),`${r}\n\n`);break}o&&(n=e.document.lineCount,i.insert(new l.Position(e.document.lineCount,0),`\n${r}\n`))})).then(h.noop,h.noop);const i=new l.Position(n+1,0);return this.runMatchingCell(e.selection,!1).then((()=>this.advanceToRange(new l.Range(i,i))))}insertCellBelowPosition(){const e=this.documentManager.activeTextEditor;e&&e.selection&&this.insertCell(e,e.selection.end.line+1)}insertCellBelow(){const e=this.documentManager.activeTextEditor;if(e&&e.selection){const t=this.getCellFromPosition(e.selection.end);t?this.insertCell(e,t.range.end.line+1):this.insertCell(e,e.selection.end.line+1)}}insertCellAbove(){const e=this.documentManager.activeTextEditor;if(e&&e.selection){const t=this.getCellFromPosition(e.selection.start);t?this.insertCell(e,t.range.start.line):this.insertCell(e,e.selection.start.line)}}deleteCells(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=this.getStartEndCells(e.selection);if(!t)return;const n=t[0],r=t[1];let i=0,o=0,s=r.range.end.line+1,a=0;n.range.start.line>0&&(i=n.range.start.line-1,o=e.document.lineAt(i).range.end.character,s=r.range.end.line,a=r.range.end.character);const c=new l.Range(new l.Position(i,o),new l.Position(s,a));e.edit((e=>{e.replace(c,""),this.codeLensUpdatedEvent.fire()})).then(h.noop,h.noop)}selectCell(){const e=this.documentManager.activeTextEditor;if(e&&e.selection){const t=this.getStartEndCells(e.selection);if(t){const n=t[0],r=t[1];e.selection.anchor.isBeforeOrEqual(e.selection.active)?e.selection=new l.Selection(n.range.start,r.range.end):e.selection=new l.Selection(r.range.end,n.range.start)}}}selectCellContents(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=this.getStartEndCellIndex(e.selection);if(!t)return;const n=t[0],r=t[1],i=e.selection.anchor.isBeforeOrEqual(e.selection.active),o=this.cells,s=[];for(let t=n;t<=r;t+=1){const n=o[t];let r=n.range.start.line+1,a=0,c=n.range.end.line,u=n.range.end.character;n.range.start.line===n.range.end.line&&(r=n.range.start.line,a=e.document.lineAt(r).range.end.character,c=r,u=a),i?s.push(new l.Selection(r,a,c,u)):s.push(new l.Selection(c,u,r,a))}e.selections=s}extendSelectionByCellAbove(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getStartEndCellIndex(e.selection);if(!n)return;const r=e.selection.anchor.isBefore(e.selection.active),i=this.cells,o=n[0],s=n[1],a=i[o],c=i[s];if(a.range.start.isEqual(t.start)&&c.range.end.isEqual(t.end)){let t;r&&o<s?(t=i[s-1],e.selection=new l.Selection(a.range.start,t.range.end)):o>0&&(t=i[o-1],e.selection=new l.Selection(c.range.end,t.range.start)),t&&e.revealRange(t.range,l.TextEditorRevealType.Default)}else{let t;t=r?o<s?new l.Selection(a.range.start,i[s-1].range.end):new l.Selection(a.range.end,a.range.start):new l.Selection(c.range.end,a.range.start),e.selection=t}}extendSelectionByCellBelow(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getStartEndCellIndex(e.selection);if(!n)return;const r=e.selection.anchor.isBeforeOrEqual(e.selection.active),i=this.cells,o=n[0],s=n[1],a=i[o],c=i[s];if(a.range.start.isEqual(t.start)&&c.range.end.isEqual(t.end)){let t;r||o===s?s<i.length-1&&(t=i[s+1],e.selection=new l.Selection(a.range.start,t.range.end)):o<s&&(t=i[o+1],e.selection=new l.Selection(c.range.end,t.range.start)),t&&e.revealRange(t.range,l.TextEditorRevealType.Default)}else{let t;t=r?new l.Selection(a.range.start,c.range.end):o<s?new l.Selection(i[o+1].range.start,c.range.end):new l.Selection(c.range.start,c.range.end),e.selection=t}}async moveCellsUp(){await this.moveCellsDirection(!0)}async moveCellsDown(){await this.moveCellsDirection(!1)}changeCellToMarkdown(){this.applyToCells(((e,t,n)=>this.changeCellTo(e,t,"markdown")))}changeCellToCode(){this.applyToCells(((e,t,n)=>this.changeCellTo(e,t,"code")))}gotoNextCell(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getCurrentCellLens(t.start),r=this.getNextCellLens(t.start);n&&r&&this.advanceToRange(r.range)}gotoPreviousCell(){const e=this.documentManager.activeTextEditor;if(!e||!e.selection)return;const t=e.selection,n=this.getCurrentCellLens(t.start),r=this.getPreviousCellLens(t.start);n&&r&&this.advanceToRange(r.range)}applyToCells(e){const t=this.documentManager.activeTextEditor,n=this.getStartEndCellIndex(t?.selection);if(!t||!n)return;const r=this.cells,i=n[0],o=n[1];for(let n=i;n<=o;n+=1)e(t,r[n],n)}changeCellTo(e,t,n){if("raw"===n)throw Error("Cell Type raw not implemented");if(t.cell_type===n)return;const r=new y.CellMatcher(this.configService.getSettings(e.document.uri)),i=e.document.lineAt(t.range.start.line),o=e.document.getText(i.range),s=this.getDefaultCellMarker(e.document.uri),a="markdown"===n?r.codeExecRegEx.exec(o):r.markdownExecRegEx.exec(o);if(!a)return;const c=a[a.length-1],u="markdown"===n?`${s} [markdown]${c}`:`${s}${c}`;e.edit((async r=>{r.replace(i.range,u),t.cell_type=n,t.range.start.line<t.range.end.line&&(e.selection=new l.Selection(t.range.start.line+1,0,t.range.end.line,t.range.end.character),l.commands.executeCommand("editor.action.removeCommentLine").then(h.noop,h.noop),"markdown"===n&&l.commands.executeCommand("editor.action.addCommentLine").then(h.noop,h.noop))})).then(h.noop,h.noop)}async moveCellsDirection(e){const t=this.documentManager.activeTextEditor;if(!t||!t.selection)return!1;const n=this.getStartEndCellIndex(t.selection);if(!n)return!1;const r=n[0],i=n[1],o=this.cells,s=o[r],a=o[i];if(!s||!a)return!1;const c=new l.Range(s.range.start,a.range.end),u=new l.Range(t.selection.start.line-c.start.line,t.selection.start.character,t.selection.end.line-c.start.line,t.selection.end.character),d=t.selection.active.isBefore(t.selection.anchor);let h;if(e){if(0===r)return!1;{const e=o[r-1];h=this.exchangeTextLines(t,e.range,c).then((n=>(n&&(t.selection=new l.Selection(e.range.start.line+u.start.line,u.start.character,e.range.start.line+u.end.line,u.end.character)),n)))}}else{if(i===o.length-1)return!1;{const e=o[i+1],n=this.exchangeTextLines(t,c,e.range),r=e.range.end.line-e.range.start.line-(c.end.line-c.start.line);h=n.then((n=>(n&&(t.selection=new l.Selection(e.range.start.line+r+u.start.line,u.start.character,e.range.start.line+r+u.end.line,u.end.character)),n)))}}return h.then((e=>(e&&d&&(t.selection=new l.Selection(t.selection.active,t.selection.anchor)),!0)))}exchangeTextLines(e,t,n){const r=t.start.line,i=t.end.line,o=n.start.line,s=n.end.line;if(i>=o)throw RangeError(`Above lines must be fully above not ${i} <= ${o}`);const a=new l.Range(r,0,i,e.document.lineAt(i).range.end.character),c=e.document.getText(a),u=new l.Range(o,0,s,e.document.lineAt(s).range.end.character),d=e.document.getText(u);let h="";if(i+1<o){const t=i+1,n=o-1,r=new l.Range(t,0,n,e.document.lineAt(n).range.end.character);h=`${e.document.getText(r)}\n`}const p=`${d}\n${h}${c}`,f=new l.Range(a.start,u.end);return e.edit((e=>{e.replace(f,p),this.codeLensUpdatedEvent.fire()}))}getStartEndCells(e){const t=this.getStartEndCellIndex(e);if(t)return[this.getCellFromIndex(t[0]),this.getCellFromIndex(t[1])]}getStartEndCellIndex(e){if(!e)return;let t=this.getCellIndex(e.start),n=t;if(e.start.line!==e.end.line&&(n=this.getCellIndex(e.end)),-1===t){if(-1===n)return;{t=0;const n=this.getCellFromIndex(0);if(e.start.line>n.range.start.line)throw RangeError(`Should not be able to pick a range with an end in a cell and start after a cell. ${e.start.line} > ${n.range.end.line}`)}}return t>=0&&n>=0?[t,n]:void 0}insertCell(e,t){const n=this.getDefaultCellMarker(e.document.uri),r=t>=e.document.lineCount?`\n${n}\n`:`${n}\n\n`,i=new l.Position(t,0),o=new l.Position(t+1,0);e.edit((e=>{e.insert(i,r),this.codeLensUpdatedEvent.fire()})).then(h.noop,h.noop),e.selection=new l.Selection(o,o)}getDefaultCellMarker(e){return this.configService.getSettings(e).defaultCellMarker||m.Identifiers.DefaultCodeCellMarker}onCodeLensFactoryUpdated(){this.document&&(this.codeLenses=this.codeLensFactory.createCodeLenses(this.document),this.cells=this.codeLensFactory.getCellRanges(this.document)),this.codeLensUpdatedEvent.fire()}onDocumentClosed(e){this.document&&C.isEqual(e.uri,this.document.uri)&&(this.codeLensUpdatedEvent.dispose(),this.closeDocumentDisposable?.dispose(),this.updateRequiredDisposable?.dispose())}getActiveInteractiveWindow(){return this.interactiveWindowProvider.getOrCreate(this.document?.uri)}async addCode(e,t,n,r,i){let o=!1;try{o=i?await e.debugCode(t,n,r):await e.addCode(t,n,r)}catch(e){e instanceof g.InteractiveCellResultError||await this.dataScienceErrorHandler.handleError(e)}return o}async runMatchingCell(e,t,n){const r=this.getCurrentCellLens(e.start),i=this.getNextCellLens(e.start);if(r&&this.document){const e=this.document.getText(r.range);if(t){const t=this.documentManager.activeTextEditor,{newCellOnRunLast:n}=this.configService.getSettings(this.document.uri),o=new y.CellMatcher(this.configService.getSettings(this.document.uri));i?this.advanceToRange(i.range):n&&t&&!o.isEmptyCell(e)&&this.insertCell(t,r.range.end.line+1)}const o=await this.getActiveInteractiveWindow();await this.addCode(o,e,this.document.uri,r.range.start.line,n)}}getCellIndex(e){return this.cells.findIndex((t=>e&&t.range.contains(e)))}getCellFromIndex(e){const t=this.cells,n=function(e,t){if(t<=0)throw new RangeError(`Length must be > 0 not ${t}`);return e<0&&(e+=t),e<0?0:e>=t?t-1:e}(e,t.length);return t[n]}getCellFromPosition(e){if(!e){const t=this.documentManager.activeTextEditor;t&&t.selection&&(e=t.selection.active)}if(e){const t=this.getCellIndex(e);if(t>=0)return this.cells[t]}}getCurrentCellLens(e){return this.codeLenses.find((t=>t.range.contains(e)&&void 0!==t.command&&t.command.command===m.Commands.RunCell))}getNextCellLens(e){const t=this.codeLenses.findIndex((t=>t.range.contains(e)&&void 0!==t.command&&t.command.command===m.Commands.RunCell));if(t>=0)return this.codeLenses.find(((e,n)=>void 0!==e.command&&e.command.command===m.Commands.RunCell&&n>t))}getPreviousCellLens(e){const t=this.codeLenses.findIndex((t=>t.range.contains(e)&&void 0!==t.command&&t.command.command===m.Commands.RunCell));if(t>=1)return this.codeLenses.find(((e,n)=>void 0!==e.command&&n<t&&n+1===t))}async runFileInteractiveInternal(e){if(this.document){const t=await this.getActiveInteractiveWindow(),n=this.document.getText(),r=this.cells;if(r&&r.length){const n=r.map((n=>this.addCode(t,this.document.getText(n.range),this.document.uri,n.range.start.line,e)));await Promise.all(n)}else await this.addCode(t,n,this.document.uri,0,e)}}advanceToRange(e){const t=this.documentManager.activeTextEditor,n=new l.Selection(e.start,e.start);t&&(t.selection=n,t.revealRange(e,l.TextEditorRevealType.Default))}};t.CodeWatcher=P,o([(0,p.captureUsageTelemetry)(m.Telemetry.DebugCurrentCell)],P.prototype,"debugCurrentCell",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.RunAllCells)],P.prototype,"runAllCells",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.RunFileInteractive)],P.prototype,"runFileInteractive",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.DebugFileInteractive)],P.prototype,"debugFileInteractive",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.RunAllCellsAbove)],P.prototype,"runAllCellsAbove",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.RunCellAndAllBelow)],P.prototype,"runCellAndAllBelow",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.RunSelectionOrLine)],P.prototype,"runSelectionOrLine",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.RunToLine)],P.prototype,"runToLine",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.RunFromLine)],P.prototype,"runFromLine",null),o([(0,w.traceDecoratorVerbose)("CodeWatcher::runCell",S.TraceOptions.BeforeCall)],P.prototype,"runCell",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.DebugCurrentCell)],P.prototype,"debugCell",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.RunCurrentCell)],P.prototype,"runCurrentCell",null),o([(0,p.captureUsageTelemetry)(m.Telemetry.RunCurrentCellAndAdvance)],P.prototype,"runCurrentCellAndAdvance",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.RunCurrentCellAndAddBelow)],P.prototype,"runCurrentCellAndAddBelow",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.InsertCellBelowPosition)],P.prototype,"insertCellBelowPosition",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.InsertCellBelow)],P.prototype,"insertCellBelow",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.InsertCellAbove)],P.prototype,"insertCellAbove",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.DeleteCells)],P.prototype,"deleteCells",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.SelectCell)],P.prototype,"selectCell",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.SelectCellContents)],P.prototype,"selectCellContents",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.ExtendSelectionByCellAbove)],P.prototype,"extendSelectionByCellAbove",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.ExtendSelectionByCellBelow)],P.prototype,"extendSelectionByCellBelow",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.MoveCellsUp)],P.prototype,"moveCellsUp",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.MoveCellsDown)],P.prototype,"moveCellsDown",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.ChangeCellToMarkdown)],P.prototype,"changeCellToMarkdown",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.ChangeCellToCode)],P.prototype,"changeCellToCode",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.GotoNextCellInFile)],P.prototype,"gotoNextCell",null),o([(0,p.capturePerfTelemetry)(m.Telemetry.GotoPrevCellInFile)],P.prototype,"gotoPreviousCell",null),t.CodeWatcher=P=o([(0,c.injectable)(),a(0,(0,c.inject)(v.IInteractiveWindowProvider)),a(1,(0,c.inject)(d.IConfigurationService)),a(2,(0,c.inject)(u.IDocumentManager)),a(3,(0,c.inject)(f.ICodeExecutionHelper)),a(4,(0,c.inject)(_.IDataScienceErrorHandler)),a(5,(0,c.inject)(b.ICodeLensFactory))],P)},11633:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Decorator=void 0;const c=n(26594),l=s(n(66828)),u=n(77886),d=n(10053),h=n(15925),p=n(42080),f=n(86563),g=n(94523);let m=class{constructor(e,t,n,r){this.documentManager=e,this.configuration=n,this.extensionChecker=r,this.computeDecorations(),t.push(this),t.push(this.configuration.getSettings(void 0).onDidChange(this.settingsChanged,this)),t.push(this.documentManager.onDidChangeActiveTextEditor(this.changedEditor,this)),t.push(this.documentManager.onDidChangeTextEditorSelection(this.changedSelection,this)),t.push(this.documentManager.onDidChangeTextDocument(this.changedDocument,this)),this.settingsChanged()}activate(){}dispose(){this.timer&&clearTimeout(this.timer)}settingsChanged(){this.documentManager.activeTextEditor&&this.triggerUpdate(this.documentManager.activeTextEditor)}changedEditor(){this.triggerUpdate(void 0)}changedDocument(e){this.documentManager.activeTextEditor&&e.document===this.documentManager.activeTextEditor.document&&this.triggerUpdate(this.documentManager.activeTextEditor)}changedSelection(e){e.textEditor&&e.textEditor.selection.anchor&&this.triggerUpdate(e.textEditor)}triggerUpdate(e){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>this.update(e)),100)}computeDecorations(){this.currentCellTopUnfocused=this.documentManager.createTextEditorDecorationType({borderColor:new l.ThemeColor("interactive.inactiveCodeBorder"),borderWidth:"2px 0px 0px 0px",borderStyle:"solid",isWholeLine:!0}),this.currentCellBottomUnfocused=this.documentManager.createTextEditorDecorationType({borderColor:new l.ThemeColor("interactive.inactiveCodeBorder"),borderWidth:"0px 0px 1px 0px",borderStyle:"solid",isWholeLine:!0}),this.currentCellTop=this.documentManager.createTextEditorDecorationType({borderColor:new l.ThemeColor("interactive.activeCodeBorder"),borderWidth:"2px 0px 0px 0px",borderStyle:"solid",isWholeLine:!0}),this.currentCellBottom=this.documentManager.createTextEditorDecorationType({borderColor:new l.ThemeColor("interactive.activeCodeBorder"),borderWidth:"0px 0px 1px 0px",borderStyle:"solid",isWholeLine:!0})}cellDecorationEnabled(e){return!1!==e.decorateCells&&("currentCell"===e.decorateCells||"allCells"===e.decorateCells)}update(e){const t=void 0===e?this.documentManager.visibleTextEditors:[e];for(const e of t)if(e&&e.document&&e.document.languageId===h.PYTHON_LANGUAGE&&!(0,f.getAssociatedJupyterNotebook)(e.document)&&this.currentCellTop&&this.currentCellBottom&&this.currentCellTopUnfocused&&this.currentCellBottomUnfocused&&this.extensionChecker.isPythonExtensionInstalled){const t=this.configuration.getSettings(e.document.uri);if(this.cellDecorationEnabled(t)){const n=(0,g.generateCellRangesFromDocument)(e.document,t),r=n.map((e=>e.range)).filter((t=>t.contains(e.selection.anchor))),i=r.length>0?[new l.Range(r[0].start,r[0].start)]:[],o="allCells"!==t.decorateCells&&r.length>0?[new l.Range(r[0].end,r[0].end)]:[],s=[];"allCells"===t.decorateCells&&n.forEach((e=>{const t=e.range.start;t!==r[0].start&&s.push(new l.Range(t,t))})),this.documentManager.activeTextEditor===e?(e.setDecorations(this.currentCellTop,i),e.setDecorations(this.currentCellBottom,o),e.setDecorations(this.currentCellTopUnfocused,s),e.setDecorations(this.currentCellBottomUnfocused,[])):(e.setDecorations(this.currentCellTop,[]),e.setDecorations(this.currentCellBottom,[]),e.setDecorations(this.currentCellTopUnfocused,[...s,...i]),e.setDecorations(this.currentCellBottomUnfocused,o))}else e.setDecorations(this.currentCellTop,[]),e.setDecorations(this.currentCellBottom,[]),e.setDecorations(this.currentCellTopUnfocused,[]),e.setDecorations(this.currentCellBottomUnfocused,[])}}};t.Decorator=m,t.Decorator=m=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IDocumentManager)),a(1,(0,c.inject)(p.IDisposableRegistry)),a(2,(0,c.inject)(p.IConfigurationService)),a(3,(0,c.inject)(u.IPythonExtensionChecker))],m)},50088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedCodeStorage=void 0;const r=n(56297);t.GeneratedCodeStorage=class{constructor(){this.codeGeneratorsByFile=new r.ResourceMap}clear(){this.codeGeneratorsByFile.clear()}get all(){return[...this.codeGeneratorsByFile.entries()].map((e=>({uri:e[0],generatedCodes:e[1].filter((e=>!e.deleted))}))).filter((e=>e.generatedCodes.length>0))}getFileGeneratedCode(e){return this.codeGeneratorsByFile.get(e)||[]}store(e,t){const n=this.codeGeneratorsByFile.get(e)||[];let r=!1;for(let e=0;e<n.length&&!r;e+=1){const i=n[e];t.line>=i.line&&t.line<=i.endLine?(n.splice(e,1,t),r=!0):i.line>t.line&&(n.splice(e,0,t),r=!0)}r||n.push(t),this.codeGeneratorsByFile.set(e,n)}}},94671:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedCodeStorageFactory=void 0;const o=n(26594),s=n(10053),a=n(50088);let c=class{constructor(e){this.notebook=e,this.storages=new WeakMap}getOrCreate(e){return this.storages.has(e)||this.storages.set(e,new a.GeneratedCodeStorage),this.storages.get(e)}get(e){if("notebook"in e)return this.storages.get(e.notebook);{const t=this.notebook.notebookDocuments.find((t=>{const n=this.storages.get(t);return n?.all.find((t=>t.uri.toString()===e.fileUri.toString()))}));return t?this.storages.get(t):void 0}}};t.GeneratedCodeStorageFactory=c,t.GeneratedCodeStorageFactory=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IVSCodeNotebook))],c)},50016:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonCellFoldingProvider=void 0;const o=n(26594),s=n(66828),a=n(15925),c=n(42080),l=n(74858);let u=class{constructor(e,t,n){this.dataScienceCodeLensProvider=e,this.extensionContext=t,this.configurationService=n}activate(){this.configurationService.getSettings().pythonCellFolding&&this.extensionContext.subscriptions.push(s.languages.registerFoldingRangeProvider([a.PYTHON_FILE_ANY_SCHEME],this))}provideFoldingRanges(e,t,n){if([a.NotebookCellScheme,a.InteractiveInputScheme].includes(e.uri.scheme))return;const r=this.dataScienceCodeLensProvider.getCodeWatcher(e);if(r){const e=r.getCodeLenses();if(n.isCancellationRequested||0==e.length)return;return e.map((e=>new s.FoldingRange(e.range.start.line,e.range.end.line,s.FoldingRangeKind.Region)))}}};t.PythonCellFoldingProvider=u,t.PythonCellFoldingProvider=u=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IDataScienceCodeLensProvider)),i(1,(0,o.inject)(c.IExtensionContext)),i(2,(0,o.inject)(c.IConfigurationService))],u)},74858:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICodeGeneratorFactory=t.IGeneratedCodeStorageFactory=t.IGeneratedCodeStore=t.ICodeLensFactory=t.ICodeWatcher=t.IDataScienceCodeLensProvider=void 0,t.IDataScienceCodeLensProvider=Symbol("IDataScienceCodeLensProvider"),t.ICodeWatcher=Symbol("ICodeWatcher"),t.ICodeLensFactory=Symbol("ICodeLensFactory"),t.IGeneratedCodeStore=Symbol("IGeneratedCodeStore"),t.IGeneratedCodeStorageFactory=Symbol("IGeneratedCodeStorageFactory"),t.ICodeGeneratorFactory=Symbol("ICodeGeneratorFactory")},80246:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedCodeStorageManager=void 0;const o=n(26594),s=n(94062),a=n(50867),c=n(15925),l=n(20397),u=n(42080),d=n(74858);let h=class{constructor(e,t,n,r,i){this.kernelProvider=e,this.codeGeneratorFactory=n,this.storageFactory=r,this.controllers=i,this.disposables=[],t.push(this)}dispose(){(0,l.dispose)(this.disposables)}activate(){this.kernelProvider.onDidCreateKernel(this.onDidCreateKernel,this,this.disposables),this.controllers.onControllerSelected(this.onNotebookControllerSelected,this,this.disposables)}onNotebookControllerSelected({notebook:e}){this.storageFactory.get({notebook:e})?.clear(),this.codeGeneratorFactory.get(e)?.reset()}onDidCreateKernel(e){const t=e.notebook;"jupyterExtension"===e.creator&&t.notebookType===c.InteractiveWindowView&&(this.storageFactory.get({notebook:t})?.clear(),e.onRestarted((()=>{this.storageFactory.get({notebook:t})?.clear(),this.codeGeneratorFactory.getOrCreate(t).reset()}),this,this.disposables))}};t.GeneratedCodeStorageManager=h,t.GeneratedCodeStorageManager=h=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IKernelProvider)),i(1,(0,o.inject)(u.IDisposableRegistry)),i(2,(0,o.inject)(d.ICodeGeneratorFactory)),i(3,(0,o.inject)(d.IGeneratedCodeStorageFactory)),i(4,(0,o.inject)(a.IControllerRegistration))],h)},15139:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInteractiveInputTab=t.generateInteractiveCode=t.getInteractiveCellMetadata=void 0;const r=n(20397),i=n(86563),o=n(58681),s=n(94523);t.getInteractiveCellMetadata=function(e){if(void 0!==e.metadata.interactive)return e.metadata},t.generateInteractiveCode=function(e,t,n){const o=(0,r.splitLines)(e,{trim:!1,removeEmptyEntries:!1}),a=n.stripFirstMarkerNoConcat(o),c=(0,i.removeLinesFromFrontAndBackNoConcat)(a);return(0,i.appendLineFeed)(c,"\n",t.magicCommandsAsComments?s.uncommentMagicCommands:void 0).join("")},t.isInteractiveInputTab=function(e){let t=e;return t&&t.input&&(0,o.isUri)(t.input.uri)&&(0,o.isUri)(t.input.inputBoxUri)}},90760:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getInteractiveWindowTitle=void 0;const s=o(n(15948)),a=o(n(25251));t.getInteractiveWindowTitle=function(e){return a.DataScience.interactiveWindowTitleFormat(s.basename(e.path))}},602:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindow=void 0;const c=s(n(15948)),l=n(66828),u=n(10053),d=n(15925),h=n(11642),p=n(83599),f=a(n(71171)),g=n(42080),m=n(58681),v=n(94062),y=n(85446),b=n(58659),w=n(25251),S=n(43138),C=n(29629),_=n(94433),P=n(62440),E=n(94523),k=n(49691),I=n(135),D=n(15139),T=n(15139),x=n(35412),O=n(74858),R=n(90541),M=n(9016),A=n(14154),N=n(58880),j=n(86563),F=n(35631),L=n(20397);class K{get onDidChangeViewState(){return this._onDidChangeViewState.event}get closed(){return this.closedEvent.event}get owner(){return this._owner}get submitters(){return this._submitters}get notebookDocument(){return this._notebookDocument||(this._notebookDocument=l.workspace.notebookDocuments.find((e=>e.uri.toString()===this.notebookUri.toString()))),this._notebookDocument}get kernelConnectionMetadata(){return this.controller?.metadata}constructor(e,t,n,r,i){this.serviceContainer=e,this._owner=t,this.controllerFactory=n,this.inputUri=i,this._onDidChangeViewState=new l.EventEmitter,this.closedEvent=new l.EventEmitter,this._submitters=[],this.internalDisposables=[],this.documentManager=this.serviceContainer.get(u.IDocumentManager),this.commandManager=this.serviceContainer.get(u.ICommandManager),this.fs=this.serviceContainer.get(p.IFileSystem),this.configuration=this.serviceContainer.get(g.IConfigurationService),this.jupyterExporter=this.serviceContainer.get(_.INotebookExporter),this.workspaceService=this.serviceContainer.get(u.IWorkspaceService),this.exportDialog=this.serviceContainer.get(P.IExportDialog),this.interactiveWindowDebugger=this.serviceContainer.tryGet(I.IInteractiveWindowDebugger),this.errorHandler=this.serviceContainer.get(R.IDataScienceErrorHandler),this.codeGeneratorFactory=this.serviceContainer.get(O.ICodeGeneratorFactory),this.storageFactory=this.serviceContainer.get(O.IGeneratedCodeStorageFactory),this.kernelProvider=this.serviceContainer.get(v.IKernelProvider),this.debuggingManager=this.serviceContainer.get(I.IInteractiveWindowDebuggingManager),this.isWebExtension=this.serviceContainer.get(g.IsWebExtension),this.notebookUri=(0,D.isInteractiveInputTab)(r)?r.input.uri:r.notebook.uri,this._owner&&this._submitters.push(this._owner),l.window.onDidChangeActiveNotebookEditor((e=>{e?.notebook.uri.toString()===this.notebookUri.toString()&&this._onDidChangeViewState.fire()}),this.internalDisposables),l.workspace.onDidCloseNotebookDocument((e=>{e.uri.toString()===this.notebookUri.toString()&&this.closedEvent.fire()}),this.internalDisposables),l.window.activeNotebookEditor?.notebook.uri.toString()===this.notebookUri.toString()&&this._onDidChangeViewState.fire(),this.cellMatcher=new k.CellMatcher(this.configuration.getSettings(this.owningResource)),this.notebookDocument&&this.codeGeneratorFactory.getOrCreate(this.notebookDocument)}notifyConnectionReset(){if(this.notebookDocument)this.controller||(this.controller=this.initController(this.notebookDocument)),this.controller.setInfoMessageCell(w.DataScience.noKernelConnected);else{const e=l.workspace.onDidOpenNotebookDocument((t=>{t.uri.toString()===this.notebookUri.toString()&&(this._notebookDocument=t,this.controller=this.initController(t),this.internalDisposables.push(this.controller.listenForControllerSelection()),this.controller.setInfoMessageCell(w.DataScience.noKernelConnected),e.dispose())}))}}initController(e){const t=this.controllerFactory.create(e,this.errorHandler,this.kernelProvider,this._owner);return this.internalDisposables.push(t.listenForControllerSelection()),t}async ensureInitialized(){if(!this.notebookDocument&&((0,h.traceVerbose)("Showing Interactive editor to initialize codeGenerator from notebook document"),await this.showInteractiveEditor(),!this.notebookDocument))throw new Error("Could not open notebook document for Interactive Window");this.codeGeneratorFactory.get(this.notebookDocument)||this.codeGeneratorFactory.getOrCreate(this.notebookDocument),this.controller||(this.controller=this.initController(this.notebookDocument)),this.controller.controller?this.controller.startKernel().catch(m.noop):((0,h.traceInfo)("No controller selected for Interactive Window initilization"),this.controller.setInfoMessageCell(w.DataScience.selectKernelForEditor))}async showInteractiveEditor(){let e;l.window.tabGroups.all.find((t=>{t.tabs.find((t=>{(0,D.isInteractiveInputTab)(t)&&t.input.uri.toString()==this.notebookUri.toString()&&(e=t)}))}));const t=this.notebookDocument||await this.openNotebookDocument();return await l.window.showNotebookDocument(t,{preserveFocus:!0,viewColumn:e?.group.viewColumn})}async openNotebookDocument(){return(0,h.traceVerbose)(`Opening notebook document ${this.notebookUri}`),await l.workspace.openNotebookDocument(this.notebookUri)}dispose(){this.internalDisposables.forEach((e=>e.dispose())),this.controller?.disconnect()}async showErrorForCell(e,t){const n=this.controller?.controller,r=(0,C.createOutputWithErrorMessageForDisplay)(e);if(n&&r&&t){const e=M.CellExecutionCreator.getOrCreate(t,new F.KernelController(n));try{await e.appendOutput(r)}catch(e){(0,h.traceWarning)(`Could not append error message "${r}" to cell: ${e}`)}finally{e.end(!1,t.executionSummary?.timing?.endTime)}}else(0,h.traceInfo)(`Could not append error message to cell "${r}"`)}changeMode(e){this.controller?.updateMode(e)}async addCode(e,t,n){return this.submitCode(e,t,n,!1)}useNewDebugMode(){return!!(this.configuration.getSettings(this.owner).forceIPyKernelDebugger||this.controller?.metadata&&!(0,v.isLocalConnection)(this.controller.metadata))}async debugCode(e,t,n){let r=!0;const i=this.documentManager.textDocuments.find((e=>this.fs.arePathsSame(e.uri,t)));if(!this.useNewDebugMode()&&i&&i.isUntitled){const e=[...this.documentManager.textDocuments];if(r=await i.save(),r){const n=this.documentManager.textDocuments.filter((t=>-1===e.indexOf(t)));if(n&&n.length>0){const e=n.find((e=>"python"===e.languageId))||n.find((e=>!e.fileName.endsWith(".interactive")))||n[0];t=e.uri,await this.documentManager.openTextDocument(t)}}}return!r||this.submitCode(e,t,n,!0)}async submitCode(e,t,n,r){if(this.cellMatcher.isEmptyCell(e)||!this.controller?.controller)return!0;this.updateOwners(t);const i=(0,L.splitLines)(e,{trim:!1}),o=new k.CellMatcher(this.configuration.getSettings(t));let s=-1;o.isMarkdown(i[0])&&(0,j.parseForComments)(i,((e,t)=>(0,m.noop)()),((e,t)=>{e&&e.length>0&&-1===s&&(s=t)}));const a=(s>0?[i.slice(0,s).join("\n"),i.slice(s).join("\n")]:[e]).map((e=>{const i=(0,S.createDeferred)();this.controller.setPendingCellAdd(i.promise);const o=this.addNotebookCell(e,t,n),s=this.createExecutionPromise(o,r);return s.catch((e=>{e instanceof b.InteractiveCellResultError?o.then((t=>{e.cell!==t&&this.showErrorForCell(w.DataScience.cellStopOnErrorMessage,t).then(m.noop,m.noop)})).catch(m.noop):o.then((t=>this.errorHandler.getErrorMessageForDisplayInCell(e,"execution",this.owningResource).then((e=>this.showErrorForCell(e,t))))).catch(m.noop)})).finally((()=>{i?.resolve()})),s}));return a[a.length-1]}async createExecutionPromise(e,t){if(!this.controller||!this.notebookDocument)return!1;(0,h.traceInfoIfCI)("InteractiveWindow.ts.createExecutionPromise.start");const n=this.controller.startKernel(),r=await e;let i=!0,o=async()=>(0,m.noop)();try{const e=await n;await this.generateCodeAndAddMetadata(r,t,e),t&&this.useNewDebugMode()?await this.debuggingManager.start(this.notebookDocument,r):t&&(0,v.isLocalConnection)(e.kernelConnectionMetadata)&&this.interactiveWindowDebugger&&(o=async()=>this.interactiveWindowDebugger?.detach(e),await this.interactiveWindowDebugger.attach(e),await this.interactiveWindowDebugger.updateSourceMaps(this.storageFactory.get({notebook:r.notebook})?.all||[]),this.interactiveWindowDebugger.enable(e)),(0,h.traceInfoIfCI)("InteractiveWindow.ts.createExecutionPromise.kernel.executeCell");const s=(0,T.getInteractiveCellMetadata)(r),a=this.kernelProvider.getKernelExecution(e);i=await a.executeCell(r,s?.generatedCode?.code)!==v.NotebookCellRunState.Error,(0,h.traceInfoIfCI)("InteractiveWindow.ts.createExecutionPromise.kernel.executeCell.finished")}finally{await o(),(0,h.traceInfoIfCI)("InteractiveWindow.ts.createExecutionPromise.end")}if(!i)throw new b.InteractiveCellResultError(r);return i}async expandAllCells(){this.notebookDocument&&await Promise.all(this.notebookDocument.getCells().map((async(e,t)=>{await this.commandManager.executeCommand("notebook.cell.expandCellInput",{ranges:[{start:t,end:t+1}],document:this.notebookUri})})))}async collapseAllCells(){this.notebookDocument&&await Promise.all(this.notebookDocument.getCells().map((async(e,t)=>{e.kind===l.NotebookCellKind.Code&&await this.commandManager.executeCommand("notebook.cell.collapseCellInput",{ranges:[{start:t,end:t+1}],document:this.notebookUri})})))}async scrollToCell(e){const t=await this.showInteractiveEditor(),n=t.notebook.getCells().find((t=>(0,T.getInteractiveCellMetadata)(t)?.id===e));if(n){const e=new l.NotebookRange(n.index,n.index+1);t.revealRange(e,l.NotebookEditorRevealType.Default),t.selection=e}}async hasCell(e){const t=this.notebookDocument;return!!t&&t.getCells().some((t=>(0,T.getInteractiveCellMetadata)(t)?.id===e))}get owningResource(){if(this.owner)return this.owner;return this.workspaceService.rootFolder||void 0}updateOwners(e){this._owner||(this._owner=e,this.controller?.updateOwners(e)),this._submitters.find((t=>t.toString()==e.toString()))||this._submitters.push(e)}async addNotebookCell(e,t,n){const r=this.notebookDocument;if(!r)throw new Error("No notebook document");const i=this.configuration.getSettings(this.owningResource),o=this.cellMatcher.getCellType(e)===d.MARKDOWN_LANGUAGE,s=o?(0,j.generateMarkdownFromCodeLines)((0,L.splitLines)(e)).join(""):(0,D.generateInteractiveCode)(e,i,this.cellMatcher),a=this.cellMatcher.getFirstMarker(e),c=l.workspace.textDocuments.find((e=>e.uri.toString()===this.owner?.toString()))?.languageId??d.PYTHON_LANGUAGE,u=new l.NotebookCellData(o?l.NotebookCellKind.Markup:l.NotebookCellKind.Code,s,o?d.MARKDOWN_LANGUAGE:c),h={interactiveWindowCellMarker:a,interactive:{uristring:t.toString(),lineIndex:n,originalSource:e},id:(0,f.default)()};u.metadata=h,await(0,N.chainWithPendingUpdates)(r,(e=>{const t=l.NotebookEdit.insertCells(r.cellCount,[u]);e.set(r.uri,[t])}));const p=r.cellCount-1;return r.cellAt(p)}async generateCodeAndAddMetadata(e,t,n){const r=(0,T.getInteractiveCellMetadata)(e);if(!r)return;const i=!(0,v.isLocalConnection)(n.kernelConnectionMetadata)||this.configuration.getSettings(void 0).forceIPyKernelDebugger,o=await this.codeGeneratorFactory.getOrCreate(this.notebookDocument).generateCode(r,e.index,t,i),s={...r,generatedCode:o},a=new l.WorkspaceEdit,c=l.NotebookEdit.updateCellMetadata(e.index,s);a.set(e.notebook.uri,[c]),await l.workspace.applyEdit(a)}async export(){if(!this.notebookDocument)throw new Error("no notebook to export.");const{magicCommandsAsComments:e}=this.configuration.getSettings(this.owningResource),t=(0,E.generateCellsFromNotebookDocument)(this.notebookDocument,e);if(t&&this.exportDialog){const e=await this.exportDialog.showDialog(P.ExportFormat.ipynb,this.owningResource);e&&await(this.jupyterExporter?.exportToFile(t,(0,x.getFilePath)(e)))}}async exportAs(){if(await this.ensureInitialized(),!this.controller)throw new Error("An active kernel is required to export the notebook.");const e=this.controller.kernel?.value;let t;if(e&&await(0,A.updateNotebookMetadata)({},e.kernelConnectionMetadata),this.submitters&&this.submitters.length){const e=this.submitters[this.submitters.length-1];t=c.basename(e.path,c.extname(e.path))}this.isWebExtension?this.commandManager.executeCommand(d.Commands.ExportAsPythonScript,this.notebookDocument,e?.kernelConnectionMetadata.interpreter).then(m.noop,m.noop):this.commandManager.executeCommand(d.Commands.Export,this.notebookDocument,t,e?.kernelConnectionMetadata.interpreter).then(m.noop,m.noop)}}t.InteractiveWindow=K,o([(0,y.chainable)()],K.prototype,"showErrorForCell",null),o([(0,y.chainable)()],K.prototype,"createExecutionPromise",null)},24145:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindowProvider=t.InteractiveWindowCacheKey=t.AskedForPerFileSettingKey=void 0;const c=n(26594),l=n(66828),u=n(10053),d=n(11642),h=n(83599),p=n(42080),f=s(n(25251)),g=n(58681),m=n(41778),v=n(85249),y=n(602),b=n(15925),w=n(135),S=n(90760),C=n(43138),_=n(35412),P=n(15139),E=n(9959),k=n(4710);t.AskedForPerFileSettingKey="ds_asked_per_file_interactive",t.InteractiveWindowCacheKey="ds_interactive_window_cache";let I=class{get onDidChangeActiveInteractiveWindow(){return this._onDidChangeActiveInteractiveWindow.event}get activeWindow(){const e=l.window.activeNotebookEditor?.notebook.uri.toString();return e?this._windows.find((t=>t.notebookUri?.toString()===e)):void 0}constructor(e,t,n,r,i,o,s,a,c,u){this.serviceContainer=e,this.disposables=t,this.fs=n,this.configService=r,this.globalMemento=i,this.workspaceMemento=o,this.appShell=s,this.workspaceService=a,this.notebookEditorProvider=c,this.controllerHelper=u,this._onDidChangeActiveInteractiveWindow=new l.EventEmitter,this._windows=[],this.notebookEditorProvider.registerEmbedNotebookProvider(this),this.restoreWindows()}restoreWindows(){const e=new Map;l.window.tabGroups.all.forEach((t=>{t.tabs.forEach((t=>{(0,P.isInteractiveInputTab)(t)&&t.input.uri&&e.set(t.input.uri.toString(),t)}))})),this.workspaceMemento.get(t.InteractiveWindowCacheKey,[]).forEach((t=>{if(!t.uriString||!e.get(t.uriString))return;const n=e.get(t.uriString);if(!n)return;const r=this.configService.getSettings(n.input.uri).interactiveWindowMode,i=new y.InteractiveWindow(this.serviceContainer,l.Uri.parse(t.owner),new k.InteractiveControllerFactory(this.controllerHelper,r),n,l.Uri.parse(t.inputBoxUriString));i.notifyConnectionReset(),this._windows.push(i),(0,E.sendTelemetryEvent)(b.Telemetry.CreateInteractiveWindow,{windowCount:this._windows.length},{hasKernel:!1,hasOwner:!!t.owner,mode:r,restored:!0});const o=i.closed(this.onInteractiveWindowClosed.bind(this,i));this.disposables.push(i),this.disposables.push(o),this.disposables.push(i.onDidChangeViewState(this.raiseOnDidChangeActiveInteractiveWindow.bind(this)))})),this._updateWindowCache()}async getOrCreate(e,t){if(!this.workspaceService.isTrusted)throw new Error("Workspace not trusted");const n=await this.getInteractiveMode(e);this.pendingCreations&&await this.pendingCreations.catch(g.noop);let r=this.getExisting(e,n,t);return r||(r=await this.create(e,n,t)),await r.ensureInitialized(),r}get(e){const t=this.configService.getSettings(e).interactiveWindowMode;return this.getExisting(e,t)}async create(e,t,n){const r=(0,C.createDeferred)();this.pendingCreations=r.promise;try{let r=await this.controllerHelper.getInitialController(e,n);(0,d.traceInfo)(`Starting interactive window for resource '${(0,_.getDisplayPath)(e)}' with controller '${r?.id}'`);const i=this.serviceContainer.get(u.ICommandManager),[o,s]=await this.createEditor(r,e,t,i);r&&r.controller.updateNotebookAffinity(s.notebook,l.NotebookControllerAffinity.Preferred),(0,d.traceVerbose)(`Interactive Window Editor Created: ${s.notebook.uri.toString()} with input box: ${o.toString()}`);const a=new y.InteractiveWindow(this.serviceContainer,e,new k.InteractiveControllerFactory(this.controllerHelper,t,r),s,o);this._windows.push(a),(0,E.sendTelemetryEvent)(b.Telemetry.CreateInteractiveWindow,{windowCount:this._windows.length},{hasKernel:!!r,hasOwner:!!e,mode:t,restored:!1}),this._updateWindowCache(),this.lastActiveInteractiveWindow=a;const c=a.closed(this.onInteractiveWindowClosed.bind(this,a));return this.disposables.push(a),this.disposables.push(c),this.disposables.push(a.onDidChangeViewState(this.raiseOnDidChangeActiveInteractiveWindow.bind(this))),a}finally{r.resolve()}}async createEditor(e,t,n,r){const i=e?`${b.JVSC_EXTENSION_ID}/${e.id}`:void 0,o=void 0!==t;let s=this.getInteractiveViewColumn(t);const{inputUri:a,notebookEditor:c}=await r.executeCommand("interactive.open",{viewColumn:s,preserveFocus:o},void 0,i,t&&"perFile"===n?(0,S.getInteractiveWindowTitle)(t):void 0);if(!c)throw new Error("Failed to request creation of interactive window from VS Code.");return[a,c]}getInteractiveViewColumn(e){if(e)return l.ViewColumn.Beside;const t=this.configService.getSettings(e).interactiveWindowViewColumn;return"secondGroup"===t?l.ViewColumn.One:"active"===t?l.ViewColumn.Active:l.ViewColumn.Beside}async getInteractiveMode(e){let n=this.configService.getSettings(e).interactiveWindowMode;if("multiple"===n&&e&&!this.globalMemento.get(t.AskedForPerFileSettingKey)&&1===this._windows.length&&(!this._windows[0].owner||!this.fs.arePathsSame(this._windows[0].owner,e))){this.globalMemento.update(t.AskedForPerFileSettingKey,!0).then(g.noop,g.noop);const r=[f.DataScience.interactiveWindowModeBannerSwitchYes,f.DataScience.interactiveWindowModeBannerSwitchNo];await this.appShell.showInformationMessage(f.DataScience.interactiveWindowModeBannerTitle,...r)===r[0]&&(n="perFile",this._windows[0].changeMode(n),await this.configService.updateSetting("interactiveWindow.creationMode",n,e,l.ConfigurationTarget.Global))}return n}_updateWindowCache(){const e=this._windows.map((e=>({owner:e.owner?.toString(),uriString:e.notebookUri.toString(),inputBoxUriString:e.inputUri.toString()})));this.workspaceMemento.update(t.InteractiveWindowCacheKey,e).then(g.noop,g.noop)}getExisting(e,t,n){return"single"===t?this._windows.length>0?this._windows[0]:void 0:"multiple"===t?e?this.activeWindow||this.lastActiveInteractiveWindow||this._windows[0]:void 0:this._windows.find((t=>!(e||t.owner||n)||!!(e&&t.owner&&this.fs.arePathsSame(e,t.owner))&&(!n||t.kernelConnectionMetadata?.id===n.id)))}raiseOnDidChangeActiveInteractiveWindow(){this.lastActiveInteractiveWindow=this.activeWindow?this.activeWindow:this.lastActiveInteractiveWindow,this._onDidChangeActiveInteractiveWindow.fire(this.activeWindow)}onInteractiveWindowClosed(e){(0,d.traceVerbose)(`Closing interactive window: ${e.notebookUri?.toString()}`),e.dispose(),this._windows=this._windows.filter((t=>t!==e)),this._updateWindowCache(),this.lastActiveInteractiveWindow===e&&(this.lastActiveInteractiveWindow=this._windows[0]),this.raiseOnDidChangeActiveInteractiveWindow()}getActiveOrAssociatedInteractiveWindow(){if(this.activeWindow)return this.activeWindow;if(void 0===l.window.activeTextEditor)return;const e=l.window.activeTextEditor.document.uri;return e.scheme!==b.NotebookCellScheme?this.get(e):void 0}findNotebookEditor(e){let t;if(e&&e.path.endsWith(".interactive"))t=this.get(e)?.notebookDocument;else{const n=this.configService.getSettings(e).interactiveWindowMode;t=this.getExisting(e,n)?.notebookDocument}return t?l.window.visibleNotebookEditors.find((e=>e.notebook===t)):void 0}findAssociatedNotebookDocument(e){const t=this._windows.find((t=>t.inputUri?.toString()===e.toString()));let n=t?.notebookDocument;return n}getInteractiveWindowWithNotebook(e){let t;return t=void 0!==e?this._windows.find((t=>t.notebookUri?.toString()===e.toString())):this.getActiveOrAssociatedInteractiveWindow(),t}getInteractiveWindowsWithSubmitter(e){return this._windows.filter((t=>t.submitters.find((t=>this.fs.arePathsSame(e,t)))))}};t.InteractiveWindowProvider=I,t.InteractiveWindowProvider=I=o([(0,c.injectable)(),a(0,(0,c.inject)(m.IServiceContainer)),a(1,(0,c.inject)(p.IDisposableRegistry)),a(2,(0,c.inject)(h.IFileSystem)),a(3,(0,c.inject)(p.IConfigurationService)),a(4,(0,c.inject)(p.IMemento)),a(4,(0,c.named)(p.GLOBAL_MEMENTO)),a(5,(0,c.inject)(p.IMemento)),a(5,(0,c.named)(p.WORKSPACE_MEMENTO)),a(6,(0,c.inject)(u.IApplicationShell)),a(7,(0,c.inject)(u.IWorkspaceService)),a(8,(0,c.inject)(v.INotebookEditorProvider)),a(9,(0,c.inject)(w.IInteractiveControllerHelper))],I)},25636:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveWindowTracebackFormatter=void 0;const o=n(26594),s=n(66828),a=n(74858),c=n(72728),l=n(11642),u=n(35412),d=n(83599),h=n(58323),p=n(15925),f=n(3522),g=/(;32m[ ->]*?)(\d+)(.*)/g;let m=class{constructor(e,t){this.storageFactory=e,this.platformService=t}format(e,t){if(e.notebook.notebookType!==p.InteractiveWindowView)return t;const n=this.storageFactory.get({notebook:e.notebook}),r=t.some((e=>/^[Input|Cell|File].*?\n.*/.test(e)));return r||n?t.map((e=>r?this.modifyTracebackFrameIPython8(e,n?.all):this.modifyTracebackFrameIPython7(e,n.all))):t}modifyTracebackFrameIPython8(e,t){let n,r;e=(e=(e=e.replace(/\u001b\[4\dm/g,"")).replace(/\u001b\[38;.*?\d+m/g,"[39m")).replace(/(;32m[ ->]*?)(\d+)(.*)\n/g,((e,t,n,r)=>`${t}${n}${r=r.replace(/\u001b\[3\d+m/g,"[39m")}\n`)),(0,l.traceInfoIfCI)(`Trace frame to match: ${e}`);const i=/^Input.*?\[.*32mIn\s+\[(\d+).*?0;36m(.*?)\n.*/.exec(e),o=/^Cell.*?\[.*32mIn\s*\[(\d+)\], (.*).\[0m\n/.exec(e);if(i&&i.length>1?(n=parseInt(i[1]),r=i[2]):o&&o.length>1&&(n=parseInt(o[1]),r=o[2]),t&&n){let i,o;for(let e of t)if(o=e.generatedCodes.find((e=>e.executionCount===n)),o){i=e.uri;break}if(o&&i)return e.replace(g,((e,t,n,r)=>{const s=parseInt(n,10),a=(o.hasCellMarker?o.line-1:o.line)-1+o.lineOffsetRelativeToIndexOfFirstLineInCell+s;return`${t}<a href='${i?.toString()}?line=${a-1}'>${a}</a>${r}`})).replace(/.*?\n/,`[1;32m${(0,u.getFilePath)(i)}[0m in [0;36m${r}\n`)}const a=/^File.*?\[\d;32m(.*):\d+.*\u001b.*\n/.exec(e);if(a&&a.length>1){const t=(0,c.untildify)(a[1],(0,u.getFilePath)(this.platformService.homeDir)),n=s.Uri.file(t);return e.replace(g,((e,t,r,i)=>{const o=parseInt(r,10);return`${t}<a href='${n?.toString()}?line=${o-1}'>${o}</a>${i}`}))}return e}modifyTracebackFrameIPython7(e,t){return t.map((e=>e.uri)).forEach((t=>{const n=(0,u.getFilePath)(t),r=(0,u.getDisplayPath)(t),i=this.storageFactory.get({fileUri:t});if(i){if(e.includes(n)&&new RegExp(`\\[.*?;32m${f(n)}`).test(e)||e.includes(r)&&new RegExp(`\\[.*?;32m${f(r)}`).test(e)){let n="";const r=/(;32m[ ->]*?)(\d+)(.*)/g;for(let t=r.exec(e);t&&t.length>3;t=r.exec(e))n=`${n}${(0,h.stripAnsi)(t[3]).substr(1)}\n`;const o=this.findCellOffset(i.getFileGeneratedCode(t),n);void 0!==o&&(e=e.replace(g,((e,n,r,i)=>{const s=parseInt(r,10),a=o+s-1;return`${n}<a href='${t.toString()}?line=${a}'>${a+1}</a>${i}`})))}if(e.includes(n)){const n=this.findCellOffset(i.getFileGeneratedCode(t),e);if(n)return e.replace(g,((e,r,i,o)=>{const s=parseInt(i,10),a=n+s-1;return`${r}<a href='${t.toString()}?line=${a}'>${a+1}</a>${o}`}))}}})),e}findCellOffset(e,t){if(e)for(const n of e)if(n.trimmedRightCode.indexOf(t)>=0)return n.firstNonBlankLineIndex}};t.InteractiveWindowTracebackFormatter=m,t.InteractiveWindowTracebackFormatter=m=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IGeneratedCodeStorageFactory)),i(1,(0,o.inject)(d.IPlatformService))],m)},95247:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(94062),i=n(52064),o=n(88232),s=n(2785),a=n(75463),c=n(65410),l=n(11633),u=n(74858),d=n(24145),h=n(135),p=n(2644),f=n(94671),g=n(74858),m=n(80246),v=n(25636),y=n(6821),b=n(64064),w=n(50016),S=n(42277),C=n(20327);t.registerTypes=function(e){e.addSingleton(h.IInteractiveWindowProvider,d.InteractiveWindowProvider),e.addSingleton(h.IInteractiveControllerHelper,C.InteractiveControllerHelper),e.addSingleton(i.IExtensionSyncActivationService,o.CommandRegistry),e.add(u.ICodeWatcher,c.CodeWatcher),e.addSingleton(u.ICodeLensFactory,s.CodeLensFactory),e.addSingleton(u.IDataScienceCodeLensProvider,a.DataScienceCodeLensProvider),e.addSingleton(i.IExtensionSyncActivationService,S.CodeLensProviderActivator),e.addSingleton(i.IExtensionSyncActivationService,w.PythonCellFoldingProvider),e.addSingleton(i.IExtensionSyncActivationService,l.Decorator),e.addSingleton(i.IExtensionSyncActivationService,m.GeneratedCodeStorageManager),e.addSingleton(u.ICodeGeneratorFactory,p.CodeGeneratorFactory,void 0,[i.IExtensionSyncActivationService]),e.addSingleton(g.IGeneratedCodeStorageFactory,f.GeneratedCodeStorageFactory),e.addSingleton(r.ITracebackFormatter,v.InteractiveWindowTracebackFormatter),e.addSingleton(h.IInteractiveWindowDebuggingManager,y.InteractiveWindowDebuggingManager,void 0,[i.IExtensionSyncActivationService]),e.addSingleton(i.IExtensionSyncActivationService,b.InteractiveWindowDebuggingStartupCodeProvider)}},53073:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemInfoCell=t.isSysInfoCell=t.getFinishConnectMessage=t.getStartConnectMessage=void 0;const r=n(66828),i=n(58880),o=n(15925),s=n(98729),a=n(30682),c=n(25251);function l(e){return e.kind===r.NotebookCellKind.Markup&&e.metadata.custom?.metadata&&e.metadata.custom.metadata.isInteractiveWindowMessageCell}t.getStartConnectMessage=function(e,t){const n=(0,s.getDisplayNameOrNameOfKernelConnection)(e);return n?t==a.SysInfoReason.Restart?c.DataScience.restartingKernelCustomHeader(n):c.DataScience.startingNewKernelCustomHeader(n):t==a.SysInfoReason.Restart?c.DataScience.restartingKernelHeader:c.DataScience.startingNewKernelHeader},t.getFinishConnectMessage=function(e,t){const n=(0,s.getDisplayNameOrNameOfKernelConnection)(e);return t==a.SysInfoReason.Restart?c.DataScience.restartedKernelHeader(n||""):c.DataScience.connectedKernelHeader(n||"")},t.isSysInfoCell=l,t.SystemInfoCell=class{constructor(e,t){if(this.notebookDocument=e,this.isDeleted=!1,e.cellCount){const n=e.cellAt(e.cellCount);l(n)&&(this.sysInfoCellPromise=Promise.resolve(n),this.sysInfoCellPromise=this.updateMessage(t))}void 0===this.sysInfoCellPromise&&(this.sysInfoCellPromise=this.createCell(t))}async createCell(e){let t;return await(0,i.chainWithPendingUpdates)(this.notebookDocument,(n=>{const i=new r.NotebookCellData(r.NotebookCellKind.Markup,e,o.MARKDOWN_LANGUAGE);i.metadata={custom:{metadata:{isInteractiveWindowMessageCell:!0}}},t=this.notebookDocument.cellCount;const s=r.NotebookEdit.insertCells(t,[i]);n.set(this.notebookDocument.uri,[s])})),t=t??this.notebookDocument.cellCount-1,this.notebookDocument.cellAt(t)}async updateMessage(e){const t=await this.sysInfoCellPromise;return await(0,i.chainWithPendingUpdates)(this.notebookDocument,(n=>{if(t.index>=0&&!this.isDeleted&&l(t))return n.replace(t.document.uri,new r.Range(0,0,t.document.lineCount,0),e),void n.set(this.notebookDocument.uri,[r.NotebookEdit.updateCellMetadata(t.index,{custom:{metadata:{isInteractiveWindowMessageCell:!0}}})])})),t}async deleteCell(){this.isDeleted=!0;const e=await this.sysInfoCellPromise;await(0,i.chainWithPendingUpdates)(this.notebookDocument,(t=>{if(e.index>=0&&l(e)){const n=r.NotebookEdit.deleteCells(new r.NotebookRange(e.index,e.index+1));t.set(this.notebookDocument.uri,[n])}}))}}},135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInteractiveWindowDebuggingManager=t.IInteractiveControllerHelper=t.IInteractiveWindowProvider=t.IInteractiveWindowDebugger=void 0,t.IInteractiveWindowDebugger=Symbol("IInteractiveWindowDebugger"),t.IInteractiveWindowProvider=Symbol("IInteractiveWindowProvider"),t.IInteractiveControllerHelper=Symbol("IInteractiveControllerHelper"),t.IInteractiveWindowDebuggingManager=Symbol("IInteractiveWindowDebuggingManager")},79806:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseJupyterSession=t.JupyterSessionStartError=t.suppressShutdownErrors=void 0;const s=n(4016),a=n(37875),c=n(66828),l=n(37853),u=n(20397),d=n(11642),h=n(43138),p=o(n(25251)),f=n(58681),g=n(71798),m=n(413),v=n(86563),y=n(72584),b=n(15925),w=n(61629),S=n(65864);function C(e){if((0,b.isTestExecution)()){const t=e;if(t&&t._futures){const e=t._futures;e.forEach&&e.forEach((e=>{void 0!==e._status&&(e._status|=4)}))}t&&t._reconnectLimit&&(t._reconnectLimit=0)}}t.suppressShutdownErrors=C;class _ extends l.WrappedError{constructor(e){super(e.message,e)}}t.JupyterSessionStartError=_,t.BaseJupyterSession=class{get path(){return this.session?.path||""}get name(){return this.session?.name||""}get type(){return this.session?.type||""}get serverSettings(){if(!this.session?.serverSettings)throw new S.SessionDisposedError;return this.session.serverSettings}get model(){if(!this.session?.serverSettings)throw new S.SessionDisposedError;return this.session.model}get isDisposed(){return!0===this._isDisposed}get onDidDispose(){return this._disposed.event}get onDidShutdown(){return this.didShutdown.event}get session(){return this._session}get id(){return this.session?.id||""}get kernel(){return this._wrappedKernel?this._wrappedKernel:this._session?.kernel?(this._wrappedKernel=new w.KernelConnectionWrapper(this._session.kernel,this.disposables),this._wrappedKernel):null}get kernelSocket(){return this._kernelSocket}get onSessionStatusChanged(){return this.onStatusChangedEvent.event}get status(){return this.getServerStatus()}get isConnected(){return this.connected}constructor(e,t,n,r){this.kind=e,this.resource=t,this.kernelConnectionMetadata=n,this.workingDirectory=r,this.propertyChanged=new s.Signal(this),this.kernelChanged=new s.Signal(this),this.statusChanged=new s.Signal(this),this.connectionStatusChanged=new s.Signal(this),this.iopubMessage=new s.Signal(this),this.unhandledMessage=new s.Signal(this),this.anyMessage=new s.Signal(this),this.disposed=new s.Signal(this),this._disposed=new c.EventEmitter,this.didShutdown=new c.EventEmitter,this.disposables=[],this.onStatusChangedEvent=new c.EventEmitter,this.connected=!1,this._kernelSocket=new a.ReplaySubject,this.statusHandler=this.onStatusChanged.bind(this),this.unhandledMessageHandler=(e,t)=>{(0,d.traceWarning)(`Unhandled message found: ${t.header.msg_type}`)}}onPropertyChanged(e,t){this.propertyChanged.emit(t)}onKernelChanged(e,t){this.kernelChanged.emit(t)}onStatusChanged(e,t){const n=this.getServerStatus();(0,d.traceInfoIfCI)(`Server Status = ${n}`),this.onStatusChangedEvent.fire(n),this.statusChanged.emit(t)}onConnectionStatusChanged(e,t){this.connectionStatusChanged.emit(t)}onIOPubMessage(e,t){this.iopubMessage.emit(t)}onUnhandledMessage(e,t){(0,d.traceWarning)(`Unhandled message found: ${t.header.msg_type}`),this.unhandledMessage.emit(t)}onAnyMessage(e,t){this.anyMessage.emit(t)}setPath(e){if(!this.session)throw new S.SessionDisposedError;return this.session.setPath(e)}setName(e){if(!this.session)throw new S.SessionDisposedError;return this.session.setName(e)}setType(e){if(!this.session)throw new S.SessionDisposedError;return this.session.setType(e)}changeKernel(e){if(!this.session)throw new S.SessionDisposedError;return this.session.changeKernel(e)}dispose(){this.disposeAsync().catch(f.noop).finally((()=>s.Signal.disconnectAll(this)))}async disposeAsync(){await this.shutdownImplementation(!1)}async waitForIdle(e,t){if(this.session)return this.waitForIdleOnSession(this.session,e,t)}async shutdown(){await this.shutdownImplementation(!0)}async restart(){if(this.session?.isRemoteSession&&this.session.kernel)return await this.session.kernel.restart(),this.setSession(this.session,!0),void(0,d.traceInfo)(`Restarted ${this.session?.kernel?.id}`);const e=this.session,t=this.statusHandler,n=await this.startRestartSession(!1);this.setSession(n),n.kernel&&((0,d.traceVerbose)(`New Session after restarting ${n.kernel.id}`),n.statusChanged.connect(this.statusHandler),n.kernel.connectionStatusChanged.connect(this.onKernelConnectionStatusHandler,this)),t&&e&&(e.statusChanged.disconnect(t),e.kernel&&e.kernel.connectionStatusChanged.disconnect(this.onKernelConnectionStatusHandler,this)),(0,d.traceInfo)(`Shutdown old session ${e?.kernel?.id}`),this.shutdownSession(e,void 0,!1).catch(f.noop)}async waitForIdleOnSession(e,t,n,r){if(!e||!e.kernel)throw new g.JupyterInvalidKernelError(this.kernelConnectionMetadata);{const i=r?void 0:y.KernelProgressReporter.reportProgress(this.resource,p.DataScience.waitingForJupyterSessionToBeIdle),o=[];i&&o.push(i);try{(0,d.traceVerbose)(`Waiting for ${t}ms idle on (kernel): ${e.kernel.id} -> ${e.kernel.status}`);const i=(0,h.createDeferred)();n&&n.onCancellationRequested((()=>i.reject(new c.CancellationError)),this,o);const s=(e,t)=>{(0,d.traceVerbose)(`Got status ${t} in waitForIdleOnSession`),"idle"==t&&i.resolve(t)};e.kernel.statusChanged?.connect(s),o.push(new c.Disposable((()=>(0,f.swallowExceptions)((()=>e.kernel?.statusChanged?.disconnect(s)))))),"idle"==e.kernel.status&&i.resolve(e.kernel.status);const a=(0,h.createDeferred)(),l=()=>a.resolve("");e.disposed.connect(l,a),o.push(new c.Disposable((()=>(0,f.swallowExceptions)((()=>e.disposed.disconnect(l,a)))))),a.promise.catch(f.noop),i.promise.catch(f.noop);const u=await(0,h.raceTimeout)(t,"",i.promise,a.promise);if(e.isDisposed)throw(0,d.traceError)("Session disposed while waiting for session to be idle."),new g.JupyterInvalidKernelError(this.kernelConnectionMetadata);if((0,d.traceVerbose)(`Finished waiting for idle on (kernel): ${e.kernel.id} -> ${e.kernel.status}`),"idle"==u)return;throw(0,d.traceError)(`Shutting down after failing to wait for idle on (kernel): ${e.kernel.id} -> ${e.kernel.status}`),this.shutdownSession(e,this.statusHandler,r).catch(f.noop),new m.JupyterWaitForIdleError(this.kernelConnectionMetadata)}catch(e){throw(0,d.traceInfoIfCI)("Error waiting for idle",e),e}finally{(0,u.dispose)(o)}}}setSession(e,t=!1){const r=this._session;this.previousAnyMessageHandler?.dispose(),e&&(0,d.traceInfo)(`Started new session ${e?.kernel?.id}`),r&&(this.unhandledMessageHandler&&r.unhandledMessage.disconnect(this.unhandledMessageHandler),this.statusHandler&&(r.statusChanged.disconnect(this.statusHandler),r.kernel?.connectionStatusChanged.disconnect(this.onKernelConnectionStatusHandler,this)),r.propertyChanged.disconnect(this.onPropertyChanged,this),r.kernelChanged.disconnect(this.onKernelChanged,this),r.connectionStatusChanged.disconnect(this.onConnectionStatusChanged,this),r.iopubMessage.disconnect(this.onIOPubMessage,this),r.unhandledMessage.disconnect(this.onUnhandledMessage,this),r.anyMessage.disconnect(this.onAnyMessage,this)),this._session=e,e&&(e.propertyChanged.connect(this.onPropertyChanged,this),e.kernelChanged.connect(this.onKernelChanged,this),e.statusChanged.connect(this.onStatusChanged,this),e.connectionStatusChanged.connect(this.onConnectionStatusChanged,this),e.iopubMessage.connect(this.onIOPubMessage,this),e.unhandledMessage.connect(this.onUnhandledMessage,this),e.anyMessage.connect(this.onAnyMessage,this),e.kernel&&this._wrappedKernel&&this._wrappedKernel.changeKernel(e.kernel),e.statusChanged.connect(this.statusHandler),e.kernel?.connectionStatusChanged.connect(this.onKernelConnectionStatusHandler,this),e.kernelSocketInformation.socket?.onAnyMessage&&(this.previousAnyMessageHandler=e.kernelSocketInformation.socket?.onAnyMessage((e=>{try{if(this._wrappedKernel){const t=n(86002),r="string"==typeof e.msg||e.msg instanceof ArrayBuffer?t.deserialize(e.msg):e.msg;this._wrappedKernel.anyMessage.emit({direction:e.direction,msg:r})}}catch(e){(0,d.traceWarning)("failed to deserialize message to broadcast anymessage signal")}}))),e.unhandledMessage&&e.unhandledMessage.connect(this.unhandledMessageHandler),(t||r!==e)&&e.kernel&&this._kernelSocket.next({options:{clientId:e.kernel.clientId,id:e.kernel.id,model:{...e.kernel.model},userName:e.kernel.username},socket:e.kernelSocketInformation.socket}))}async shutdownSession(e,t,n,r){if(e&&e.kernel){const i=`${e.kernel.id}, ${e.kernelConnectionMetadata?.id}`;(0,d.traceVerbose)(`shutdownSession ${i} - start`);try{if(t&&e.statusChanged.disconnect(t),!this.canShutdownSession(e,n,r))return(0,d.traceVerbose)(`Session cannot be shutdown ${e.kernelConnectionMetadata?.id}`),void e.dispose();try{(0,d.traceVerbose)(`Session can be shutdown ${e.kernelConnectionMetadata?.id}`),C(e.kernel),e.isDisposed||await(0,h.raceTimeout)(1e3,e.shutdown())}catch{(0,f.noop)()}e&&!e.isDisposed&&e.dispose()}catch(e){(0,d.traceWarning)(e)}(0,d.traceVerbose)(`shutdownSession ${i} - shutdown complete`)}}async shutdownImplementation(e){if(this._isDisposed=!0,this.session){try{if((0,d.traceVerbose)(`Shutdown session - current session, called from ${new Error("").stack}`),await this.shutdownSession(this.session,this.statusHandler,!1,e),(0,d.traceVerbose)("Shutdown session - get restart session"),this.restartSessionPromise){this.restartSessionPromise.token.cancel();const e=await this.restartSessionPromise.promise;this.restartSessionPromise.token.dispose(),(0,d.traceVerbose)("Shutdown session - shutdown restart session"),await this.shutdownSession(e,void 0,!0)}}catch{(0,f.noop)()}this.setSession(void 0),this.restartSessionPromise=void 0,this.onStatusChangedEvent.fire("dead"),this._disposed.fire(),this.didShutdown.fire(),this.didShutdown.dispose(),this._disposed.dispose(),this.onStatusChangedEvent.dispose(),this.previousAnyMessageHandler?.dispose()}(0,u.dispose)(this.disposables),(0,d.traceVerbose)("Shutdown session -- complete")}canShutdownSession(e,t,n){return!("connectToLiveRemoteKernel"===e.kernelConnectionMetadata?.kind&&!n||!t&&(!e.resource||"interactive"!==(0,v.getResourceType)(e.resource))&&e.resource&&"notebook"===(0,v.getResourceType)(e.resource)&&!0===e.isRemoteSession&&!n)}getServerStatus(){return this.isDisposed?"dead":this.session?.kernel?this.session.kernel.status:((0,d.traceInfoIfCI)(`Kernel status not started because real session is ${this.session?"defined":"undefined"} & real kernel is ${this.session?.kernel?"defined":"undefined"}`),"unknown")}onKernelConnectionStatusHandler(e,t){if((0,d.traceInfoIfCI)(`Server Kernel Status = ${t}`),"disconnected"===t){const e=this.getServerStatus();this.onStatusChangedEvent.fire(e)}}}},88701:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseJupyterSessionConnection=void 0;const r=n(4016),i=n(66828),o=n(37875),s=n(20397),a=n(11642),c=n(61629);t.BaseJupyterSessionConnection=class{get id(){return this.session.id}get path(){return this.session.path}get name(){return this.session.name}get type(){return this.session.type}get serverSettings(){return this.session.serverSettings}get model(){return this.session.model}constructor(e,t){this.kind=e,this.session=t,this.propertyChanged=new r.Signal(this),this.kernelChanged=new r.Signal(this),this.statusChanged=new r.Signal(this),this.connectionStatusChanged=new r.Signal(this),this.iopubMessage=new r.Signal(this),this.unhandledMessage=new r.Signal(this),this.anyMessage=new r.Signal(this),this.onStatusChangedEvent=new i.EventEmitter,this.disposables=[],this.disposed=new r.Signal(this),this._disposed=new i.EventEmitter,this.didShutdown=new i.EventEmitter,this._kernelSocket=new o.ReplaySubject,t.propertyChanged.connect(this.onPropertyChanged,this),t.kernelChanged.connect(this.onKernelChanged,this),t.statusChanged.connect(this.onStatusChanged,this),t.connectionStatusChanged.connect(this.onConnectionStatusChanged,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.anyMessage.connect(this.onAnyMessage,this),this.disposables.push({dispose:()=>{this.didShutdown.dispose(),this._disposed.dispose(),this.onStatusChangedEvent.dispose(),this.session.propertyChanged.disconnect(this.onPropertyChanged,this),this.session.kernelChanged.disconnect(this.onKernelChanged,this),this.session.statusChanged.disconnect(this.onStatusChanged,this),this.session.connectionStatusChanged.disconnect(this.onConnectionStatusChanged,this),this.session.iopubMessage.disconnect(this.onIOPubMessage,this),this.session.unhandledMessage.disconnect(this.onUnhandledMessage,this),this.session.anyMessage.disconnect(this.onAnyMessage,this)}})}get kernel(){return this.isDisposed||!this.session.kernel?null:(this._wrappedKernel?.originalKernel===this.session.kernel||(this._wrappedKernel=new c.KernelConnectionWrapper(this.session.kernel,this.disposables)),this._wrappedKernel)}get isDisposed(){return!0===this._isDisposed}get onDidDispose(){return this._disposed.event}get onDidShutdown(){return this.didShutdown.event}get kernelId(){return this.session?.kernel?.id||""}get kernelSocket(){return this._kernelSocket}get onSessionStatusChanged(){return this.onStatusChangedEvent.event}async disposeAsync(){this.dispose()}dispose(){this.disposeInvoked||(this.statusChanged.emit("dead"),this._disposed.fire(),this.disposed.emit(),this.previousAnyMessageHandler?.dispose(),(0,s.dispose)(this.disposables),r.Signal.disconnectAll(this))}async restart(){await(this.session.kernel?.restart()),this.initializeKernelSocket(),(0,a.traceInfo)(`Restarted ${this.session?.kernel?.id}`)}initializeKernelSocket(){if(!this.session.kernel)throw new Error("Kernel not initialized in Session");const e={kernel:this.session.kernel,options:{clientId:this.session.kernel.clientId,id:this.session.kernel.id,model:{...this.session.kernel.model},userName:this.session.kernel.username},socket:this.session.kernelSocketInformation.socket};JSON.stringify(this.previousKernelSocketInformation?.options)===JSON.stringify(e.options)&&this.previousKernelSocketInformation?.kernel===e.kernel&&this.previousKernelSocketInformation?.socket===e.socket||(this.previousKernelSocketInformation=e,this.previousAnyMessageHandler?.dispose(),this.session.kernel?.connectionStatusChanged.disconnect(this.onKernelConnectionStatusHandler,this),this.session.kernel?.connectionStatusChanged.connect(this.onKernelConnectionStatusHandler,this),this.session.kernelSocketInformation.socket?.onAnyMessage&&(this.previousAnyMessageHandler=this.session.kernelSocketInformation.socket?.onAnyMessage((e=>{try{if(this._wrappedKernel){const t=n(86002),r="string"==typeof e.msg||e.msg instanceof ArrayBuffer?t.deserialize(e.msg):e.msg;this._wrappedKernel.anyMessage.emit({direction:e.direction,msg:r})}}catch(e){(0,a.traceWarning)("failed to deserialize message to broadcast anymessage signal")}}))),this._kernelSocket.next(e))}onPropertyChanged(e,t){this.propertyChanged.emit(t)}onKernelChanged(e,t){this.kernelChanged.emit(t)}onStatusChanged(e,t){this.statusChanged.emit(t);const n=this.status;(0,a.traceInfoIfCI)(`Server Status = ${n}`),"dead"!==n&&this.onStatusChangedEvent.fire(n)}onConnectionStatusChanged(e,t){this.connectionStatusChanged.emit(t)}onIOPubMessage(e,t){this.iopubMessage.emit(t)}onUnhandledMessage(e,t){(0,a.traceWarning)(`Unhandled message found: ${t.header.msg_type}`),this.unhandledMessage.emit(t)}onAnyMessage(e,t){this.anyMessage.emit(t)}setPath(e){return this.session.setPath(e)}setName(e){return this.session.setName(e)}setType(e){return this.session.setType(e)}changeKernel(e){return this.session.changeKernel(e)}onKernelConnectionStatusHandler(e,t){(0,a.traceInfoIfCI)(`Server Kernel Status = ${t}`),"disconnected"===t&&"dead"!==this.status&&this.onStatusChangedEvent.fire(this.status)}}},50936:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChainingExecuteRequester=void 0;const r=n(53355);t.ChainingExecuteRequester=class{requestExecute(e,t,n,i){if(!t.store_history)return e.requestExecute(t,n,i);const o=this.previousExecute&&this.previousKernel?.id===e.id?new r.DelayedFutureExecute(e,this.previousExecute,t,n,i):e.requestExecute(t,n,i);return this.previousExecute=o,this.previousKernel=e,o.done.then((()=>{this.previousExecute==o&&(this.previousExecute=void 0,this.previousKernel=void 0)})).catch((()=>{this.previousExecute==o&&(this.previousExecute=void 0,this.previousKernel=void 0)})),o}}},53355:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelayedFutureExecute=void 0;const r=n(11642),i=n(43138),o=n(66828),s=n(58681);t.DelayedFutureExecute=class{constructor(e,t,n,r,a){this.kernelConnection=e,this.content=n,this.disposeOnDone=r,this.metadata=a,this.doneDeferred=(0,i.createDeferred)(),this.pendingHooks=[],this.pendingInputReplies=[],this.disposed=!1,this.doneDeferred.promise.catch(s.noop),t.done.then((()=>this.requestExecute())).catch((e=>this.doneDeferred.reject(e))),this.statusChangedHandler=(e,t)=>{"unknown"!==t&&"restarting"!==t&&"dead"!==t&&"autorestarting"!==t||this.doneDeferred.reject(new o.CancellationError)},e.statusChanged?.connect(this.statusChangedHandler),this.statusChangedHandler(e,e.status)}get msg(){return this.requestFuture?this.requestFuture.msg:{content:this.content,channel:"shell",header:{date:Date.now.toString(),msg_id:"1",session:this.kernelConnection.id,msg_type:"execute_request",username:"",version:"1"},parent_header:{},metadata:{}}}get done(){return this.doneDeferred.promise}set onReply(e){this.requestFuture?this.requestFuture.onReply=e:this.pendingOnReply=e}set onIOPub(e){this.requestFuture?this.requestFuture.onIOPub=e:this.pendingOnIOPub=e}set onStdin(e){this.requestFuture?this.requestFuture.onStdin=e:this.pendingOnStdin=e}registerMessageHook(e){this.requestFuture?this.requestFuture.registerMessageHook(e):this.pendingHooks.push(e)}removeMessageHook(e){this.pendingHooks=this.pendingHooks.filter((t=>t!=e)),this.requestFuture&&this.requestFuture.removeMessageHook(e)}sendInputReply(e){this.requestFuture?this.requestFuture.sendInputReply(e):this.pendingInputReplies.push(e)}get isDisposed(){return this.disposed}dispose(){this.disposed=!0,this.kernelConnection.statusChanged.disconnect(this.statusChangedHandler),this.requestFuture&&(this.requestFuture.dispose(),this.requestFuture=void 0,this.clear())}clear(){this.pendingInputReplies=[],this.pendingHooks=[],this.pendingOnReply=void 0,this.pendingOnIOPub=void 0,this.pendingOnStdin=void 0}requestExecute(){if(this.requestFuture)throw new Error("ChainedFuture already executed. Can't execute more than once.");(0,r.traceInfoIfCI)(`DelayedFuture is starting request now for ${this.content}.`),this.requestFuture=this.kernelConnection.requestExecute(this.content,this.disposeOnDone,this.metadata),this.requestFuture&&(this.pendingOnReply&&(this.requestFuture.onReply=this.pendingOnReply),this.pendingOnIOPub&&(this.requestFuture.onIOPub=this.pendingOnIOPub),this.pendingOnStdin&&(this.requestFuture.onStdin=this.pendingOnStdin),this.pendingHooks.length&&this.pendingHooks.forEach((e=>this.requestFuture?.registerMessageHook(e))),this.pendingInputReplies&&this.pendingInputReplies.forEach((e=>this.requestFuture?.sendInputReply(e))),this.requestFuture.done.then((e=>this.doneDeferred.resolve(e))).catch((e=>this.doneDeferred.reject(e))),this.clear())}}},12561:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waitForIdleOnSession=void 0;const r=n(66828),i=n(20397),o=n(43138),s=n(25251),a=n(58681),c=n(11642),l=n(72584),u=n(71798),d=n(413);t.waitForIdleOnSession=async function(e,t,n,h,p){if(!n.kernel)throw new u.JupyterInvalidKernelError(e);const f=l.KernelProgressReporter.reportProgress(t,s.DataScience.waitingForJupyterSessionToBeIdle),g=[];f&&g.push(f);try{(0,c.traceVerbose)(`Waiting for ${h}ms idle on (kernel): ${n.kernel.id} -> ${n.kernel.status}`);const t=(0,o.createDeferred)();p.onCancellationRequested((()=>t.reject(new r.CancellationError)),void 0,g);const i=(e,n)=>{(0,c.traceVerbose)(`Got status ${n} in waitForIdleOnSession`),"idle"==n&&t.resolve(n)};n.kernel.statusChanged?.connect(i),g.push(new r.Disposable((()=>(0,a.swallowExceptions)((()=>n.kernel?.statusChanged?.disconnect(i)))))),"idle"==n.kernel.status&&t.resolve(n.kernel.status);const s=(0,o.createDeferred)(),l=()=>s.resolve("");n.disposed.connect(l,s),g.push(new r.Disposable((()=>(0,a.swallowExceptions)((()=>n.disposed.disconnect(l,s)))))),s.promise.catch(a.noop),t.promise.catch(a.noop);const f=await(0,o.raceTimeout)(h,"",t.promise,s.promise);if(n.isDisposed)throw(0,c.traceError)("Session disposed while waiting for session to be idle."),new u.JupyterInvalidKernelError(e);if((0,c.traceVerbose)(`Finished waiting for idle on (kernel): ${n.kernel.id} -> ${n.kernel.status}`),"idle"==f)return;throw(0,c.traceError)(`Shutting down after failing to wait for idle on (kernel): ${n.kernel.id} -> ${n.kernel.status}`),new d.JupyterWaitForIdleError(e)}catch(e){throw(0,c.traceInfoIfCI)("Error waiting for idle",e),e}finally{(0,i.dispose)(g)}}},61629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnectionWrapper=void 0;const r=n(23429);class i extends r.BaseKernelConnectionWrapper{get possibleKernelConnection(){return this._kernelConnection}get kernel(){return this._kernelConnection}constructor(e,t){super(e,t),this._kernelConnection=e}changeKernel(e){this.kernel!==e&&(this.stopHandlingKernelMessages(this.possibleKernelConnection),this._kernelConnection=e,this.startHandleKernelMessages(e))}async shutdown(){await this._kernelConnection.shutdown()}dispose(){this._kernelConnection.dispose()}async interrupt(){await this._kernelConnection.interrupt()}async restart(){await this._kernelConnection.restart()}startHandleKernelMessages(e){super.startHandleKernelMessages(e),this._kernelConnection=e,e.connectionStatusChanged.connect(this.onConnectionStatusChanged,this),e.statusChanged.connect(this.onStatusChanged,this),e.disposed.connect(this.onDisposed,this)}stopHandlingKernelMessages(e){super.stopHandlingKernelMessages(e),e.connectionStatusChanged.disconnect(this.onConnectionStatusChanged,this),e.statusChanged.disconnect(this.onStatusChanged,this),e.disposed.disconnect(this.onDisposed,this)}onDisposed(e){e===this.possibleKernelConnection&&this.disposed.emit()}onStatusChanged(e,t){e===this.possibleKernelConnection&&this.statusChanged.emit(t)}onConnectionStatusChanged(e,t){e===this.possibleKernelConnection&&this.connectionStatusChanged.emit(t)}}t.KernelConnectionWrapper=i},17169:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSessionFactory=void 0;const o=n(26594),s=n(94062),a=n(99216),c=n(22202),l=n(42080),u=n(37825);let d=class{constructor(e,t,n,r,i,o){this.rawKernelSupported=e,this.rawKernelSessionFactory=t,this.jupyterSessionFactory=n,this.newRawKernelSessionFactory=r,this.newJupyterSessionFactory=i,this.experiments=o}async create(e){const t=e.kernelConnection;return this.rawKernelSupported.isSupported&&(0,s.isLocalConnection)(t)&&this.rawKernelSessionFactory&&this.newRawKernelSessionFactory?this.experiments.inExperiment(l.Experiments.NewJupyterSession)?this.newRawKernelSessionFactory.create({...e,kernelConnection:t}):this.rawKernelSessionFactory.create(e):this.experiments.inExperiment(l.Experiments.NewJupyterSession)?this.newJupyterSessionFactory.create(e):this.jupyterSessionFactory.create(e)}};t.KernelSessionFactory=d,t.KernelSessionFactory=d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IRawNotebookSupportedService)),i(1,(0,o.inject)(a.IOldRawKernelSessionFactory)),i(1,(0,o.optional)()),i(2,(0,o.inject)(u.OldJupyterKernelSessionFactory)),i(3,(0,o.inject)(a.IRawKernelSessionFactory)),i(3,(0,o.optional)()),i(4,(0,o.inject)(c.JupyterKernelSessionFactory)),i(5,(0,o.inject)(l.IExperimentService))],d)},56940:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSocketWrapper=void 0;const r=n(66828),i=n(11642);t.KernelSocketWrapper=function(e){return class extends e{constructor(...e){super(...e),this._onAnyMessage=new r.EventEmitter,this.onAnyMessage=this._onAnyMessage.event,this.msgChain=Promise.resolve(),this.sendChain=Promise.resolve(),this.receiveHooks=[],this.sendHooks=[]}patchSuperEmit(e){super.emit=e}sendToRealKernel(e,t){this._onAnyMessage.fire({msg:e,direction:"send"}),super.send(e,t)}send(e,t){this.sendHooks?this.sendChain=this.sendChain.then((()=>Promise.all(this.sendHooks.map((n=>n(e,t)))))).then((()=>super.send(e,t))):super.send(e,t)}handleEvent(e,t,...n){return"message"===t&&this.receiveHooks.length?(this.msgChain=this.msgChain.then((()=>Promise.all(this.receiveHooks.map((e=>e(n[0])))))).then((()=>e(t,...n))).catch((e=>(0,i.traceError)(`Exception while handling messages: ${e}`))),!0):e(t,...n)}emit(e,...t){return this.handleEvent(((e,...t)=>super.emit(e,...t)),e,...t)}addReceiveHook(e){this.receiveHooks.push(e)}removeReceiveHook(e){this.receiveHooks=this.receiveHooks.filter((t=>t!==e))}addSendHook(e){this.sendHooks.push(e)}removeSendHook(e){this.sendHooks=this.sendHooks.filter((t=>t!==e))}}}},88960:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayOptions=void 0;const r=n(66828);t.DisplayOptions=class{get disableUI(){return this._disableUI}set disableUI(e){const t=this._disableUI!==e;this._disableUI=e,t&&this._event.fire()}get onDidChangeDisableUI(){return this._event.event}constructor(e){this._event=new r.EventEmitter,this._disableUI=e}dispose(){this._event.dispose()}}},55134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidRemoteJupyterServerUriHandleError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e){super("invalidremotejupyterserverurihandle","Server handle not in list of known handles"),this.serverProviderHandle=e}}t.InvalidRemoteJupyterServerUriHandleError=i},71798:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterInvalidKernelError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.BaseKernelError{constructor(e){super("invalidkernel",r.DataScience.kernelInvalid((0,i.getDisplayNameOrNameOfKernelConnection)(e)),e)}}t.JupyterInvalidKernelError=s},3236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterKernelDependencyError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.BaseKernelError{constructor(e,t){super("noipykernel",r.DataScience.kernelInvalid((0,i.getDisplayNameOrNameOfKernelConnection)(t)),t),this.reason=e}}t.JupyterKernelDependencyError=s},413:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterWaitForIdleError=void 0;const r=n(25251),i=n(90541);class o extends i.BaseKernelError{constructor(e){super("timeout",r.DataScience.jupyterLaunchTimedOut,e)}}t.JupyterWaitForIdleError=o},91494:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnectionTimeoutError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.BaseKernelError{constructor(e){super("timeout",r.DataScience.rawKernelStartFailedDueToTimeout((0,i.getDisplayNameOrNameOfKernelConnection)(e)),e)}}t.KernelConnectionTimeoutError=s},66690:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDeadError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.WrappedKernelError{constructor(e){super(r.DataScience.kernelDiedWithoutError((0,i.getDisplayNameOrNameOfKernelConnection)(e)),void 0,e)}}t.KernelDeadError=s},36690:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDiedError=void 0;const r=n(90541);class i extends r.WrappedKernelError{constructor(e,t,n,r){super(e,n,r),this.stdErr=t}}t.KernelDiedError=i},71437:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceErrorHandler=void 0;const o=n(26594),s=n(41779),a=n(84079),c=n(66828),l=n(91494),u=n(36690),d=n(36723),h=n(80530),p=n(10053),f=n(11642),g=n(42080),m=n(25251),v=n(9959),y=n(15925),b=n(98729),w=n(22672),S=n(11602),C=n(530),_=n(94062),P=n(29629),E=n(30002),k=n(3236),I=n(37853),D=n(58681),T=n(47891),x=n(66690),O=n(88960),R=n(94433),M=n(46875),A=n(35412),N=n(6491),j=n(44501),F=n(54990),L=n(42751),K=n(55134),U=n(90541),W=n(47684),V=n(83599),H=n(84570),B=n(8646),q=n(79079),J=n(20397),$=n(20339),G=n(39796);let z=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d){this.applicationShell=e,this.dependencyManager=t,this.browser=n,this.configuration=r,this.kernelDependency=i,this.workspaceService=o,this.serverUriStorage=s,this.jupyterUriProviderRegistration=a,this.isWebExtension=c,this.extensions=l,this.fs=u,this.interpreterService=d,this.handledErrors=new WeakSet,this.handledKernelErrors=new WeakSet}async handleError(e){if((0,f.traceWarning)("DataScience Error",e),e=I.WrappedError.unwrap(e),!this.handledErrors.has(e))if(this.handledErrors.add(e),e instanceof s.JupyterInstallError)await(this.dependencyManager?.installMissingDependencies(e));else if(e instanceof a.JupyterSelfCertsError)await(0,M.handleSelfCertsError)(this.applicationShell,this.configuration,e.message);else if(e instanceof j.JupyterExpiredCertsError)await(0,M.handleExpiredCertsError)(this.applicationShell,this.configuration,e.message);else if((0,N.isCancellationError)(e));else if(e instanceof l.KernelConnectionTimeoutError||e instanceof d.KernelPortNotUsedTimeoutError)this.applicationShell.showErrorMessage(e.message).then(D.noop,D.noop);else if(e instanceof u.KernelDiedError||e instanceof h.KernelProcessExitedError||e instanceof q.JupyterNotebookNotInstalled||e instanceof E.JupyterConnectError)this.applicationShell.showErrorMessage(Q(e)).then(D.noop,D.noop);else if(e instanceof F.RemoteJupyterServerConnectionError&&this.isWebExtension)this.applicationShell.showErrorMessage(m.DataScience.jupyterNotebookRemoteConnectFailedWeb(e.baseUrl)).then(D.noop,D.noop);else if(e instanceof F.RemoteJupyterServerConnectionError){const t=await this.handleJupyterServerConnectionError(e,void 0);this.applicationShell.showErrorMessage(t).then(D.noop,D.noop)}else if(e instanceof L.RemoteJupyterServerUriProviderError){const t=await this.handleJupyterServerUriProviderError(e,void 0);this.applicationShell.showErrorMessage(t).then(D.noop,D.noop)}else{const t=X(e.message||e.toString());this.applicationShell.showErrorMessage(t).then(D.noop,D.noop)}}async getErrorMessageForDisplayInCell(e,t,n){if(e=I.WrappedError.unwrap(e),(0,N.isCancellationError)(e)||(0,f.traceError)("Error in execution (get message for cell)",e),e instanceof x.KernelDeadError)return"";if(e instanceof k.JupyterKernelDependencyError)return Z(e.kernelConnectionMetadata)||e.message;if(e instanceof s.JupyterInstallError)return function(e){const t=`${S.ProductNames.get(C.Product.jupyter)} ${m.Common.and} ${S.ProductNames.get(C.Product.notebook)}`,n=[C.Product.jupyter,C.Product.notebook].map(w.translateProductToModule).join(" "),r=`python -m pip install ${n} -U\nor\nconda install ${n} -U`,i=m.DataScience.installPackageInstructions(t,r);return e.message+"\n"+i+"\n"+m.Common.clickHereForMoreInfoWithHtml("https://aka.ms/installJupyterForVSCode")}(e)||e.message;if(e instanceof F.RemoteJupyterServerConnectionError&&!this.isWebExtension)return e.message;if(e instanceof F.RemoteJupyterServerConnectionError&&this.isWebExtension)return m.DataScience.jupyterNotebookRemoteConnectFailedWeb(e.baseUrl);if((0,N.isCancellationError)(e))return"";if(e instanceof B.PackageNotInstalledWindowsLongPathNotEnabledError){const t="string"==typeof e.product?e.product:S.ProductNames.get(e.product)||`${e.product}`,n=(0,G.getPythonEnvDisplayName)(e.interpreter)||e.interpreter.id||"",r=(0,A.getDisplayPath)("executable"in e.interpreter?e.interpreter.executable.uri:e.interpreter.uri);let i=n?` ${n} (${r})`:r;return m.DataScience.packageNotInstalledWindowsLongPathNotEnabledError(t,i)}if((e instanceof u.KernelDiedError||e instanceof h.KernelProcessExitedError)&&("startUsingLocalKernelSpec"===e.kernelConnectionMetadata.kind||"startUsingPythonInterpreter"===e.kernelConnectionMetadata.kind)&&e.kernelConnectionMetadata.interpreter&&!await this.fs.exists(e.kernelConnectionMetadata.interpreter.uri))return m.DataScience.failedToStartKernelDueToMissingPythonEnv(e.kernelConnectionMetadata.interpreter.displayName||e.kernelConnectionMetadata.interpreter.envName||(0,A.getDisplayPath)(e.kernelConnectionMetadata.interpreter.uri));if((e instanceof u.KernelDiedError||e instanceof h.KernelProcessExitedError)&&("startUsingLocalKernelSpec"===e.kernelConnectionMetadata.kind||"startUsingPythonInterpreter"===e.kernelConnectionMetadata.kind)&&e.kernelConnectionMetadata.interpreter&&this.kernelDependency&&!await this.kernelDependency.areDependenciesInstalled(e.kernelConnectionMetadata,void 0,!0))return Z(e.kernelConnectionMetadata)||e.message;if(e instanceof U.BaseKernelError||e instanceof U.WrappedKernelError){const t=await this.getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(n),r=(0,P.analyzeKernelErrors)(c.workspace.workspaceFolders||[],e,(0,b.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata),e.kernelConnectionMetadata.interpreter?.sysPrefix,t.map((e=>e.uri)));if(r){if(r.reason===P.KernelFailureReason.moduleNotFoundFailure&&["ipykernel_launcher","ipykernel"].includes(r.moduleName))return Z(e.kernelConnectionMetadata)||e.message;const t=[r.message];return r.moreInfoLink&&t.push(m.Common.clickHereForMoreInfoWithHtml(r.moreInfoLink)),(0,_.isLocalConnection)(e.kernelConnectionMetadata)&&r.reason===P.KernelFailureReason.moduleNotFoundFailure&&!["ipykernel_launcher","ipykernel"].includes(r.moduleName)&&await this.addErrorMessageIfPythonArePossiblyOverridingPythonModules(t,n),t.join("\n")}}else{if(e instanceof F.RemoteJupyterServerConnectionError)return this.handleJupyterServerConnectionError(e,t);if(e instanceof L.RemoteJupyterServerUriProviderError)return this.handleJupyterServerUriProviderError(e,t);if(e instanceof K.InvalidRemoteJupyterServerUriHandleError){const n=this.extensions.getExtension(e.serverProviderHandle.extensionId)?.packageJSON.displayName||e.serverProviderHandle.extensionId;return Q(m.DataScience.remoteJupyterServerProvidedBy3rdPartyExtensionNoLongerValid(n),t)}}return Q(e,t)}async handleJupyterServerUriProviderError(e,t){const n=await(0,$.getJupyterDisplayName)(e.serverProviderHandle,this.jupyterUriProviderRegistration),r=e.originalError?.message||e.message;return Q(m.DataScience.remoteJupyterConnectionFailedWithServerWithError(n,r),t)}async handleJupyterServerConnectionError(e,t){const n=await(0,$.getJupyterDisplayName)(e.serverProviderHandle,this.jupyterUriProviderRegistration,e.baseUrl),r=e.originalError.message||"";return Q(m.DataScience.remoteJupyterConnectionFailedWithServerWithError(n,r),t)}async handleJupyterServerProviderConnectionError(e,t){if(!t.getHandles)return!1;try{return(await t.getHandles()).includes(e.handle)||await this.serverUriStorage.remove(e).catch(D.noop),!0}catch(e){return!1}}async handleKernelError(e,t,n,r,i){if((0,N.isCancellationError)(e)||(0,f.traceWarning)(`Kernel Error, context = ${t}`,e),e=I.WrappedError.unwrap(e),(0,N.isCancellationError)(e))return this.sendKernelTelemetry(e,t,r,"cancelled"),_.KernelInterpreterDependencyResponse.cancel;if(e instanceof k.JupyterKernelDependencyError){if((0,f.traceWarning)(`Jupyter Kernel Dependency Error, reason=${e.reason}`,e),this.sendKernelTelemetry(e,t,r,e.category),e.reason!==_.KernelInterpreterDependencyResponse.uiHidden||!this.kernelDependency)return e.reason;{const e=new c.CancellationTokenSource;try{const t="3rdPartyExtension"===i;return this.kernelDependency.installMissingDependencies({resource:r,kernelConnection:n,ui:new O.DisplayOptions(!1),token:e.token,ignoreCache:!0,cannotChangeKernels:t})}finally{e.dispose()}}}else{if(("start"===t||"restart"===t)&&e instanceof s.JupyterInstallError)return this.sendKernelTelemetry(e,t,r,e.category),(this.dependencyManager?await this.dependencyManager.installMissingDependencies(e):R.JupyterInterpreterDependencyResponse.cancel)===R.JupyterInterpreterDependencyResponse.ok?_.KernelInterpreterDependencyResponse.ok:_.KernelInterpreterDependencyResponse.cancel;if(e instanceof F.RemoteJupyterServerConnectionError||e instanceof L.RemoteJupyterServerUriProviderError||e instanceof K.InvalidRemoteJupyterServerUriHandleError){this.sendKernelTelemetry(e,t,r,e.category);const n=e instanceof K.InvalidRemoteJupyterServerUriHandleError?"":e instanceof F.RemoteJupyterServerConnectionError?e.originalError.message||"":e.originalError?.message||e.message,o=await this.jupyterUriProviderRegistration.getProvider(e.serverProviderHandle.extensionId,e.serverProviderHandle.id).catch(D.noop);if(!o||await this.handleJupyterServerProviderConnectionError(e.serverProviderHandle,o))return _.KernelInterpreterDependencyResponse.selectDifferentKernel;const s=e instanceof F.RemoteJupyterServerConnectionError?e.baseUrl:"",a=await(0,$.getJupyterDisplayName)(e.serverProviderHandle,this.jupyterUriProviderRegistration,s),c=e instanceof K.InvalidRemoteJupyterServerUriHandleError?this.extensions.getExtension(e.serverProviderHandle.extensionId)?.packageJSON.displayName||e.serverProviderHandle.extensionId:"",l="jupyterExtension"===i?[m.DataScience.selectDifferentKernel]:[];switch(await this.applicationShell.showErrorMessage(e instanceof K.InvalidRemoteJupyterServerUriHandleError?m.DataScience.remoteJupyterServerProvidedBy3rdPartyExtensionNoLongerValid(c):m.DataScience.remoteJupyterConnectionFailedWithServer(a),{detail:n,modal:!0},m.DataScience.removeRemoteJupyterConnectionButtonText,m.DataScience.changeRemoteJupyterConnectionButtonText,...l)){case m.DataScience.removeRemoteJupyterConnectionButtonText:return await this.serverUriStorage.remove(e.serverProviderHandle).catch(D.noop),_.KernelInterpreterDependencyResponse.cancel;case m.DataScience.changeRemoteJupyterConnectionButtonText:return _.KernelInterpreterDependencyResponse.cancel;case m.DataScience.selectDifferentKernel:return _.KernelInterpreterDependencyResponse.selectDifferentKernel}return _.KernelInterpreterDependencyResponse.cancel}if(e instanceof a.JupyterSelfCertsError){this.sendKernelTelemetry(e,t,r,e.category);const n=m.DataScience.jupyterSelfCertEnable,i=m.DataScience.jupyterSelfCertClose;return this.applicationShell.showErrorMessage(m.DataScience.jupyterSelfCertFail(e.message),n,i).then((e=>{e===n?((0,v.sendTelemetryEvent)(v.Telemetry.SelfCertsMessageEnabled),this.configuration.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,c.ConfigurationTarget.Workspace).catch(D.noop)):e===i&&(0,v.sendTelemetryEvent)(v.Telemetry.SelfCertsMessageClose)})).then(D.noop,D.noop),_.KernelInterpreterDependencyResponse.failed}if(("start"===t||"restart"===t)&&"startUsingPythonInterpreter"===n.kind&&this.interpreterService&&!await this.fs.exists(n.interpreter.uri))return this.interpreterService.getInterpreterDetails(n.interpreter.id).then((async e=>{const t=await this.fs.exists(n.interpreter.uri);e?(0,W.sendKernelTelemetryEvent)(r,v.Telemetry.KernelStartFailureDueToMissingEnv,void 0,{envMissingReason:"Unknown",isEmptyCondaEnv:e.isCondaEnvWithoutPython,pythonEnvType:e.envType,fileExists:t}):(0,W.sendKernelTelemetryEvent)(r,v.Telemetry.KernelStartFailureDueToMissingEnv,void 0,{envMissingReason:"EmptyEnvDetailsFromPython",isEmptyCondaEnv:n.interpreter.isCondaEnvWithoutPython,pythonEnvType:n.interpreter.envType,fileExists:t})})).catch((async()=>{const e=await this.fs.exists(n.interpreter.uri);(0,W.sendKernelTelemetryEvent)(r,v.Telemetry.KernelStartFailureDueToMissingEnv,void 0,{envMissingReason:"FailedToGetEnvDetailsFromPython",isEmptyCondaEnv:n.interpreter.isCondaEnvWithoutPython,pythonEnvType:n.interpreter.envType,fileExists:e})})).catch(D.noop),this.sendKernelTelemetry(e,t,r,P.KernelFailureReason.pythonEnvironmentMissing),this.applicationShell.showErrorMessage(m.DataScience.failedToStartKernelDueToMissingPythonEnv(n.interpreter.displayName||n.interpreter.envName||(0,A.getDisplayPath)(n.interpreter.uri))).then(D.noop,D.noop),this.interpreterService.refreshInterpreters(!0).catch(D.noop),_.KernelInterpreterDependencyResponse.failed;if("start"!==t&&"restart"!==t||!this.kernelDependency||await this.kernelDependency.areDependenciesInstalled(n,void 0,!0)){const i=await this.getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(r),o=(0,P.analyzeKernelErrors)(this.workspaceService.workspaceFolders||[],e,(0,b.getDisplayNameOrNameOfKernelConnection)(n),n.interpreter?.sysPrefix,i.map((e=>e.uri)));return this.sendKernelTelemetry(e,t,r,o?.reason),o?this.showMessageWithMoreInfo(o.message,o?.moreInfoLink).catch(D.noop):this.showMessageWithMoreInfo(Q(e,t)).catch(D.noop),_.KernelInterpreterDependencyResponse.failed}{this.sendKernelTelemetry(e,t,r,"noipykernel");const o=new c.CancellationTokenSource;try{const e="3rdPartyExtension"===i;return this.kernelDependency.installMissingDependencies({resource:r,kernelConnection:n,ui:new O.DisplayOptions(!1),token:o.token,ignoreCache:!0,cannotChangeKernels:e})}finally{o.dispose()}}}}sendKernelTelemetry(e,t,n,r){this.handledKernelErrors.has(e)||(this.handledKernelErrors.add(e),"start"===t&&(0,W.sendKernelTelemetryEvent)(n,v.Telemetry.NotebookStart,void 0,{disableUI:!1,failureCategory:r},e))}async showMessageWithMoreInfo(e,t){e.includes(y.Commands.ViewJupyterOutput)||(e=`${e} \n${m.DataScience.viewJupyterLogForFurtherInfo}`);const n=t?[m.Common.learnMore]:[];await this.applicationShell.showErrorMessage(e,...n).then((e=>{e===m.Common.learnMore&&t&&this.browser.launch(t)}))}};t.DataScienceErrorHandler=z,t.DataScienceErrorHandler=z=r([i(0,(0,o.inject)(p.IApplicationShell)),i(1,(0,o.inject)(R.IJupyterInterpreterDependencyManager)),i(1,(0,o.optional)()),i(2,(0,o.inject)(g.IBrowserService)),i(3,(0,o.inject)(g.IConfigurationService)),i(4,(0,o.inject)(_.IKernelDependencyService)),i(4,(0,o.optional)()),i(5,(0,o.inject)(p.IWorkspaceService)),i(6,(0,o.inject)(R.IJupyterServerUriStorage)),i(7,(0,o.inject)(R.IJupyterUriProviderRegistration)),i(8,(0,o.inject)(g.IsWebExtension)),i(9,(0,o.inject)(g.IExtensions)),i(10,(0,o.inject)(V.IFileSystem)),i(11,(0,o.inject)(H.IInterpreterService)),i(11,(0,o.optional)())],z);const Y={restart:m.DataScience.failedToRestartKernel,start:m.DataScience.failedToStartKernel,interrupt:m.DataScience.failedToInterruptKernel,execution:""};function Q(e,t){e="string"==typeof e?e:I.WrappedError.unwrap(e);const n=t?Y[t]:"";let r="";return r=e instanceof q.JupyterNotebookNotInstalled?m.DataScience.jupyterNotebookNotInstalledOrNotFound(e.interpreter):e instanceof I.BaseError?(0,P.getErrorMessageFromPythonTraceback)(e.stdErr)||e.stdErr||e.message:"string"==typeof e?e:e.message,X(n,r)}function X(e="",t=""){e&&t.startsWith(e.substring(0,e.length-1))&&(e="");const n=[e,t].map((e=>e.trim())).filter((e=>e.length>0)).join(" \n");return!function(e){const t=new RegExp(/\[([^\[]+)\]\((.*)\)/);return(t.exec(e)?.length??0)>0}(n)&&n.length&&-1===n.indexOf("command:jupyter.viewOutput")?`${n.endsWith(".")?n:n+"."} \n${m.DataScience.viewJupyterLogForFurtherInfo}`:n}function Z(e){if("connectToLiveRemoteKernel"===e.kind||"startUsingRemoteKernelSpec"===e.kind||!e.interpreter)return;const t=e.interpreter.displayName||(0,A.getFilePath)(e.interpreter.uri),n=S.ProductNames.get(C.Product.ipykernel),r=(0,w.translateProductToModule)(C.Product.ipykernel);let i=`${(0,J.fileToCommandArgument)((0,A.getFilePath)(e.interpreter.uri))} -m pip install ${r} -U --force-reinstall`;return e.interpreter?.envType===T.EnvironmentType.Conda?e.interpreter?.envName?i=`conda install -n ${e.interpreter?.envName} ${r} --update-deps --force-reinstall`:e.interpreter?.envPath&&(i=`conda install -p ${(0,A.getFilePath)(e.interpreter?.envPath)} ${r} --update-deps --force-reinstall`):e.interpreter?.envType===T.EnvironmentType.Unknown&&(i=`${(0,J.fileToCommandArgument)((0,A.getFilePath)(e.interpreter.uri))} -m pip install ${r} -U --user --force-reinstall`),m.DataScience.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreter(t,S.ProductNames.get(C.Product.ipykernel))+"\n"+m.DataScience.installPackageInstructions(n,i)}},26320:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceErrorHandlerWeb=void 0;const i=n(26594),o=n(71437);let s=class extends o.DataScienceErrorHandler{async addErrorMessageIfPythonArePossiblyOverridingPythonModules(e,t){}async getFilesInWorkingDirectoryThatCouldPotentiallyOverridePythonModules(e){return[]}};t.DataScienceErrorHandlerWeb=s,t.DataScienceErrorHandlerWeb=s=r([(0,i.injectable)()],s)},33525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelInterruptTimeoutError=void 0;const r=n(25251),i=n(90541);class o extends i.BaseKernelError{constructor(e){super("kernelpromisetimeout",r.DataScience.interruptingKernelFailed,e)}}t.KernelInterruptTimeoutError=o},36723:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelPortNotUsedTimeoutError=void 0;const r=n(25251),i=n(98729),o=n(90541);class s extends o.BaseKernelError{constructor(e){super("timeout",r.DataScience.rawKernelStartFailedDueToTimeoutWaitingForPort((0,i.getDisplayNameOrNameOfKernelConnection)(e)),e)}}t.KernelPortNotUsedTimeoutError=s},80530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelProcessExitedError=void 0;const r=n(25251),i=n(90541);class o extends i.BaseKernelError{constructor(e=-1,t,n){super("kerneldied",r.DataScience.kernelDied(t.trim()),n),this.exitCode=e,this.stdErr=t}}t.KernelProcessExitedError=o},36065:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecNotTrustedError=void 0;const r=n(66828),i=n(35412),o=n(25251),s=n(98729),a=n(90541);class c extends a.WrappedKernelError{constructor(e){super(o.DataScience.failedToStartAnUntrustedKernelSpec((0,s.getDisplayNameOrNameOfKernelConnection)(e),e.kernelSpec.specFile?(0,i.getDisplayPath)(r.Uri.file(e.kernelSpec.specFile)):""),void 0,e)}}t.KernelSpecNotTrustedError=c},42751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteJupyterServerUriProviderError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e,t){super("remotejupyterserveruriprovider",t.message||t.toString()),this.serverProviderHandle=e,this.originalError=t}}t.RemoteJupyterServerUriProviderError=i},90541:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedKernelError=t.BaseKernelError=t.IDataScienceErrorHandler=void 0;const r=n(37853);t.IDataScienceErrorHandler=Symbol("IDataScienceErrorHandler");class i extends r.BaseError{constructor(e,t,n){super(e,t),this.kernelConnectionMetadata=n}}t.BaseKernelError=i;class o extends r.WrappedError{constructor(e,t,n){super(e,t),this.kernelConnectionMetadata=n}}t.WrappedKernelError=o},81296:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CellOutputDisplayIdTracker=void 0;const s=n(26594),a=n(66828),c=n(20397),l=n(42080),u=n(86563);let d=r=class{static dispose(){(0,c.dispose)(r.disposables)}constructor(e){e.push({dispose:()=>{r.dispose()}})}activate(){a.workspace.onDidChangeNotebookDocument((e=>{(0,u.isJupyterNotebook)(e.notebook)&&e.cellChanges.filter((e=>0===e.outputs?.length)).map((t=>{const n=r.cellToDisplayIdMapping.get(t.cell);n&&(r.cellToDisplayIdMapping.delete(t.cell),r.displayIdCellOutputMappingPerDocument.get(e.notebook)?.delete(n))}))}))}static trackOutputByDisplayId(e,t,n,i){let o=r.displayIdCellOutputMappingPerDocument.get(e.notebook);o||(o=new Map,r.displayIdCellOutputMappingPerDocument.set(e.notebook,o)),o.set(t,{outputContainer:n,cell:e,outputItems:i}),r.cellToDisplayIdMapping.set(e,t)}static getMappedOutput(e,t){const n=r.displayIdCellOutputMappingPerDocument.get(e);if(!n)return;const i=n.get(t);return i?.cell.document.isClosed?void 0:i}};t.CellOutputDisplayIdTracker=d,d.displayIdCellOutputMappingPerDocument=new WeakMap,d.cellToDisplayIdMapping=new WeakMap,d.disposables=[],t.CellOutputDisplayIdTracker=d=r=i([(0,s.injectable)(),o(0,(0,s.inject)(l.IDisposableRegistry))],d)},1988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecution=t.CellExecutionFactory=void 0;const r=n(66828),i=n(9016),o=n(29629),s=n(37853),a=n(20397),c=n(11642),l=n(43138),u=n(58681),d=n(98729),h=n(6491),p=n(67572),f=n(94062),g=n(14154),m=n(35412),v=n(65864),y=n(22021);t.CellExecutionFactory=class{constructor(e,t){this.controller=e,this.requestListener=t}create(e,t,n,r){return b.fromCell(e,t,n,this.controller,this.requestListener,r)}};class b{get result(){return this._result.promise}get preExecute(){return this._preExecuteEmitter.event}constructor(e,t,n,o,s,a){if(this.cell=e,this.codeOverride=t,this.kernelConnection=n,this.controller=o,this.requestListener=s,this.resumeExecution=a,this._result=(0,l.createDeferred)(),this.cancelHandled=!1,this.disposables=[],this._preExecuteEmitter=new r.EventEmitter,r.workspace.onDidCloseTextDocument((e=>{if(e===this.cell.document){(0,c.traceVerbose)(`Disposing request as the cell was deleted ${(0,m.getDisplayPath)(this.cell.notebook.uri)}`);try{this.request?.dispose()}catch(e){(0,c.traceError)(`Error during cell execution dispose: ${e}`)}this.started&&!this._completed&&this.completedDueToCancellation()}}),this,this.disposables),g.NotebookCellStateTracker.setCellState(e,r.NotebookCellExecutionState.Idle),this.canExecuteCell())this.execution=i.CellExecutionCreator.getOrCreate(e,this.controller,!a?.msg_id),g.NotebookCellStateTracker.setCellState(e,r.NotebookCellExecutionState.Pending);else{const t=i.CellExecutionCreator.get(e);t&&(t.start(),t.end(void 0))}}static fromCell(e,t,n,r,i,o){return new b(e,t,n,r,i,o)}async start(e){if(this.session=e,this.resumeExecution?.msg_id)return this.resume(e,this.resumeExecution);if(this.cancelHandled)(0,g.traceCellMessage)(this.cell,"Not starting as it was cancelled");else{if((0,g.traceCellMessage)(this.cell,"Start execution"),(0,c.traceInfoIfCI)(`Cell Exec contents ${this.cell.document.getText().substring(0,50)}...`),!this.canExecuteCell())return this.execution?.end(void 0),this.execution=void 0,void this._result.resolve();if("remoteJupyter"===e.kind&&"unknown"===e.status&&(!e.kernel||e.kernel.isDisposed||e.isDisposed))return this.execution?.start(),this.execution?.clearOutput().then(u.noop,u.noop),void this.completedWithErrors(new v.SessionDisposedError);if(this.started)return(0,g.traceCellMessage)(this.cell,"Cell has already been started yet CellExecution.Start invoked again"),(0,c.traceError)(`Cell has already been started yet CellExecution.Start invoked again ${this.cell.index}`),this.result;this.started=!0,p.activeNotebookCellExecution.set(this.cell.notebook,this.execution),g.NotebookCellStateTracker.setCellState(this.cell,r.NotebookCellExecutionState.Executing),this.execute(this.codeOverride||this.cell.document.getText().replace(/\r\n/g,"\n"),e).catch((e=>this.completedWithErrors(e))).catch(u.noop)}}async resume(e,t){if(this.cancelHandled)(0,g.traceCellMessage)(this.cell,"Not resuming as it was cancelled");else{if(!e.kernel)throw new Error("Kernel not available to resume execution");if((0,g.traceCellMessage)(this.cell,"Start resuming execution"),(0,c.traceInfoIfCI)(`Cell Exec (resuming) contents ${this.cell.document.getText().substring(0,50)}...`),!this.canExecuteCell())return this.execution?.end(void 0),this.execution=void 0,void this._result.resolve();if(this.started)return(0,c.traceError)(`Cell has already been started yet CellExecution.resume invoked again ${this.cell.index}`),this.result;this.started=!0,p.activeNotebookCellExecution.set(this.cell.notebook,this.execution),this.execution?.start(t.startTime),t.executionCount&&this.execution&&(this.execution.executionOrder=t.executionCount),g.NotebookCellStateTracker.setCellState(this.cell,r.NotebookCellExecutionState.Executing),this.cellExecutionHandler=this.requestListener.registerListenerForResumingExecution(this.cell,{kernel:e.kernel,cellExecution:this.execution,msg_id:t.msg_id}),this.cellExecutionHandler.onErrorHandlingExecuteRequestIOPubMessage((e=>{(0,c.traceError)(`Cell (index = ${this.cell.index}) execution completed with errors (2).`,e),this.completedWithErrors(e.error)}),this,this.disposables),this.cellExecutionHandler.completed.finally((()=>this.completedSuccessfully())).catch(u.noop)}}async cancel(e=!1){if(!this.cancelHandled){if(this.cancelRequested=!0,this.started&&!e&&this.execution?.started)return(0,g.traceCellMessage)(this.cell,"Cell is already running, waiting for it to finish or kernel to start"),void await this.result;this.cancelHandled||this._completed||((0,g.traceCellMessage)(this.cell,"Execution cancelled"),this.cancelHandled=!0,this.completedDueToCancellation(),this.dispose())}}dispose(){this.disposed||(this.disposed=!0,(0,g.traceCellMessage)(this.cell,"Execution disposed"),(0,a.dispose)(this.disposables))}completedWithErrors(e){if(this.cancelHandled)return;let t,n;if(this.disposed||this.cancelRequested?(0,c.traceWarning)(`Cell completed with errors (${this.disposed?"disposed":"cancelled"})`):(0,c.traceWarning)("Cell completed with errors",e),(0,g.traceCellMessage)(this.cell,"Completed with errors"),(0,g.traceCellMessage)(this.cell,"Update with error state & output"),!(e instanceof s.BaseError)&&e.message?.includes("Canceled future for execute_request message before replies were done")&&this.session&&(0,y.isKernelSessionDead)(this.session)&&(e=new v.SessionDisposedError),e instanceof s.BaseError){const n=(0,o.analyzeKernelErrors)(r.workspace.workspaceFolders||[],e,(0,d.getDisplayNameOrNameOfKernelConnection)(this.kernelConnection),this.kernelConnection.interpreter?.sysPrefix);t=n?.message}else t=e.message||e.name||e.stack;n=(0,o.createOutputWithErrorMessageForDisplay)(t||""),n&&this.execution?.appendOutput(n).then(u.noop,u.noop),this.endCellTask("failed"),(0,g.traceCellMessage)(this.cell,"Completed with errors, & resolving"),this._result.resolve(f.NotebookCellRunState.Error)}get isEmptyCodeCell(){return 0===this.cell.document.getText().trim().length}completedSuccessfully(e){(0,g.traceCellMessage)(this.cell,"Completed successfully");let t=this.isEmptyCodeCell?f.NotebookCellRunState.Idle:f.NotebookCellRunState.Success,n="success";this.cellExecutionHandler?.hasErrorOutput&&(n="failed",t=f.NotebookCellRunState.Error),this.endCellTask(n,e),(0,g.traceCellMessage)(this.cell,`Completed successfully & resolving with status = ${n}`),this._result.resolve(t)}endCellTask(e,t=(new Date).getTime()){if(!this._completed){if(this._completed=!0,this.isEmptyCodeCell)this.execution&&(this.execution.executionOrder=void 0),this.execution?.end(void 0);else if("success"===e||"failed"===e)this.endTime=t,this.execution?.end("success"===e,this.endTime);else{try{this.request?.dispose()}catch{}this.execution?.end(void 0)}p.activeNotebookCellExecution.get(this.cell.notebook)===this.execution&&p.activeNotebookCellExecution.set(this.cell.notebook,void 0),g.NotebookCellStateTracker.setCellState(this.cell,r.NotebookCellExecutionState.Idle),this.execution=void 0}}completedDueToCancellation(){(0,g.traceCellMessage)(this.cell,"Completed due to cancellation"),this.endCellTask("cancelled"),(0,g.traceCellMessage)(this.cell,"Cell cancelled & resolving"),this._result.resolve(f.NotebookCellRunState.Idle)}canExecuteCell(){return"raw"!==this.cell.document.languageId&&!this.cell.document.isClosed}async execute(e,t){if(!t.kernel)throw new Error("No kernel available to execute code");if((0,g.traceCellMessage)(this.cell,"Send code for execution"),0===e.trim().length||this.cell.document.isClosed)return 0===e.trim().length&&(this.execution?.start(this.resumeExecution?.startTime),this.execution?.clearOutput()?.then(u.noop,u.noop)),(0,g.traceCellMessage)(this.cell,"Empty cell execution"),this.completedSuccessfully();const n={cellId:this.cell.document.uri.toString(),...this.cell.metadata?.custom?.metadata||{}},r=t.kernel;try{this._preExecuteEmitter.fire(this.cell),(0,c.traceVerbose)(`Execution Request Sent to Kernel for cell ${this.cell.index}`),this.request=r.requestExecute({code:e,silent:!1,stop_on_error:!1,allow_stdin:!0,store_history:!0},!1,n)}catch(e){return(0,c.traceError)(`Cell execution failed without request, for cell Index ${this.cell.index}`,e),this.completedWithErrors(e)}this.cellExecutionHandler=this.requestListener.registerListenerForExecution(this.cell,{kernel:r,cellExecution:this.execution,request:this.request}),this.cellExecutionHandler.onErrorHandlingExecuteRequestIOPubMessage((e=>{(0,c.traceError)(`Cell (index = ${this.cell.index}) execution completed with errors (2).`,e),this.completedWithErrors(e.error)}),this,this.disposables);try{(0,g.traceCellMessage)(this.cell,"Wait for jupyter execution"),await this.request.done;const e=(new Date).getTime();(0,g.traceCellMessage)(this.cell,"Jupyter execution completed"),this.completedSuccessfully(e),(0,g.traceCellMessage)(this.cell,"Executed successfully in executeCell")}catch(e){if(this.cancelHandled)return;this.disposed||this.cancelRequested||(0,c.traceError)("Error in waiting for cell to complete",e),(0,g.traceCellMessage)(this.cell,"Some other execution error"),e&&e instanceof Error&&(0,h.isCancellationError)(e,!0)?this.completedWithErrors({message:e.message}):this.completedWithErrors(e)}}}t.CellExecution=b},9016:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecutionCreator=t.NotebookCellExecutionWrapper=void 0;const r=n(11642),i=n(58681);class o{constructor(e,t,n,r=!1){this._impl=e,this.controllerId=t,this._endCallback=n,this.clearOutputOnStartWithTime=r,this.started=!1}get cell(){return this._impl.cell}get token(){return this._impl.token}get executionOrder(){return this._impl.executionOrder}set executionOrder(e){this._impl.executionOrder=e}startIfNecessary(){this.started||this._impl.start()}start(e){this.started||(this.started=!0,this._impl.start(e),this._startTime=e,this.clearOutputOnStartWithTime?((0,r.traceVerbose)(`Start cell ${this.cell.index} execution @ ${e} (clear output)`),this._impl.clearOutput().then(i.noop,i.noop)):(0,r.traceVerbose)(`Start cell ${this.cell.index} execution @ ${e}`))}end(e,t){if(this._endCallback)try{this._impl.end(e,t),(0,r.traceInfo)(`End cell ${this.cell.index} execution @ ${t}, started @ ${this._startTime}, elapsed time = ${((t||0)-(this._startTime||0))/1e3}s`)}finally{this._endCallback(),this._endCallback=void 0}}clearOutput(e){return this.startIfNecessary(),this._impl.clearOutput(e)}replaceOutput(e,t){return this.startIfNecessary(),this._impl.replaceOutput(e,t)}appendOutput(e,t){return this.startIfNecessary(),this._impl.appendOutput(e,t)}replaceOutputItems(e,t){return this.startIfNecessary(),this._impl.replaceOutputItems(e,t)}appendOutputItems(e,t){return this.startIfNecessary(),this._impl.appendOutputItems(e,t)}}t.NotebookCellExecutionWrapper=o;class s{static getOrCreate(e,t,n=!1){let r;const i=e.document;if(r=this.get(e),r){if(r.controllerId!==t.id){const o=r;o.end(void 0),r=s.create(i,e,t,n),o.started&&r.start((new Date).getTime())}}else r=s.create(i,e,t,n);return r}static get(e){const t=e.document;return s._map.get(t)}static create(e,t,n,r=!1){const i=new o(n.createNotebookCellExecution(t),n.id,(()=>{s._map.delete(e)}),r);return s._map.set(e,i),i}}t.CellExecutionCreator=s,s._map=new WeakMap},67572:function(e,t,n){"use strict";var r=n(48764).lW,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecutionMessageHandler=t.getParentHeaderMsgId=t.activeNotebookCellExecution=void 0;const s=o(n(64063)),a=n(66828),c=n(9016),l=n(20397),u=n(11642),d=n(86563),h=n(14154),p=n(85446),f=n(58681),g=n(79821),m=n(15925),v=n(81296),y=n(43138);function b(e){if(e.parent_header&&"msg_id"in e.parent_header)return e.parent_header.msg_id}t.activeNotebookCellExecution=new WeakMap,t.getParentHeaderMsgId=b;class w{get hasErrorOutput(){return!0===this.cellHasErrorsInOutput}get completed(){return this._completed.promise}constructor(e,t,n,r,i,o,s,c,l){this.cell=e,this.applicationService=t,this.controller=n,this.context=r,this.formatters=i,this.kernel=o,this.request=s,this._onErrorHandlingIOPubMessage=new a.EventEmitter,this.onErrorHandlingExecuteRequestIOPubMessage=this._onErrorHandlingIOPubMessage.event,this.outputsAreSpecificToAWidget=[],this.commIdsMappedToParentWidgetModel=new Map,this.disposables=[],this.prompts=new Set,this.ownedCommIds=new Set,this.commIdsMappedToWidgetOutputModels=new Set,this.ownedRequestMsgIds=new Set,this._completed=(0,y.createDeferred)(),this.gotIdleIOPubStatus=!1,this.gotShellReply=!1,this.streamsReAttachedToExecutingCell=!1,this._completed.promise.catch(f.noop),this.executeRequestMessageId=l,this.ownedRequestMsgIds.add(l),a.workspace.onDidChangeNotebookDocument((e=>{if(!(0,d.isJupyterNotebook)(e.notebook))return;const t=e.cellChanges.find((({cell:e})=>e===this.cell));t&&0===t.outputs?.length&&(this.clearLastUsedStreamOutput(),this.cellHasErrorsInOutput=!1)}),this,this.disposables),this.execution=c,this.kernel.anyMessage.connect(this.onKernelAnyMessage,this),this.kernel.iopubMessage.connect(this.onKernelIOPubMessage,this),s&&(s.onIOPub=()=>{this.cell.document.isClosed&&!this.completedExecution&&s.dispose()},s.onReply=e=>{this.cell.document.isClosed?s.dispose():this.handleReply(e)},s.onStdin=this.handleInputRequest.bind(this),s.done.finally((()=>{this.completedExecution=!0,this.endCellExecution()})).catch(f.noop))}dispose(){this.disposed||(this.disposed=!0,(0,h.traceCellMessage)(this.cell,"Execution Message Handler disposed"),(0,l.dispose)(this.disposables),this.prompts.forEach((e=>e.dispose())),this.prompts.clear(),this.request&&this.clearLastUsedStreamOutput(),this.execution=void 0,this.kernel.anyMessage.disconnect(this.onKernelAnyMessage,this),this.kernel.iopubMessage.disconnect(this.onKernelIOPubMessage,this),this._onErrorHandlingIOPubMessage.dispose())}endCellExecution(){this.prompts.forEach((e=>e.dispose())),this.prompts.clear(),this.request&&this.clearLastUsedStreamOutput(),this.execution=void 0,this._completed.resolve()}onKernelAnyMessage(e,{direction:t,msg:r}){if(this.cell.document.isClosed)return this.endCellExecution();const i=n(76240);if(!this.request&&"recv"===t){const e=b(r);i.KernelMessage.isStatusMsg(r)&&"idle"===r.content.execution_state&&e===this.executeRequestMessageId&&(this.gotIdleIOPubStatus=!0),"shell"===r.channel&&e===this.executeRequestMessageId&&(this.gotShellReply=!0);const t=i.KernelMessage.isStatusMsg(r)&&"idle"!==r.content.execution_state&&e!==this.executeRequestMessageId;"object"==typeof r.parent_header&&r.parent_header&&"msg_type"in r.parent_header&&r.parent_header.msg_type;const n=!!e&&e!==this.executeRequestMessageId&&!t,o="object"==typeof r.parent_header&&r.parent_header&&"msg_type"in r.parent_header&&"interrupt_request"===r.parent_header.msg_type,s=this.gotIdleIOPubStatus&&this.gotShellReply,c=["kernel_info_reply","execute_input","execute_reply"],l="msg_type"in r&&"string"==typeof r.msg_type&&c.includes(r.msg_type);if(!this.completedExecution&&s)return this.completedExecution=!0,this.endAbnormallyTimeout&&clearTimeout(this.endAbnormallyTimeout),this.endCellExecution();if(!this.completedExecution&&(l||n))return this.endAbnormallyTimeout&&clearTimeout(this.endAbnormallyTimeout),this.endAbnormallyTimeout=setTimeout((()=>(this.completedExecution=!0,this.endAbnormallyTimeout=void 0,this.endCellExecution())),o?1e3:100),void this.disposables.push(new a.Disposable((()=>{clearTimeout(this.endAbnormallyTimeout),this.endAbnormallyTimeout=void 0})))}"send"===t&&this.completedExecution&&i.KernelMessage.isCommMsgMsg(r)&&this.ownedCommIds.has(r.content.comm_id)&&this.ownedRequestMsgIds.add(r.header.msg_id)}onKernelIOPubMessage(e,t){if(this.cell.document.isClosed)return this.endCellExecution();if(t.parent_header&&"msg_id"in t.parent_header&&this.ownedRequestMsgIds.has(t.parent_header.msg_id)&&"iopub"===t.channel)try{this.handleIOPub(t)}catch(e){(0,u.traceError)("Failed to handle iopub message as a result of some comm message",t,e),this.completedExecution||this.cell.document.isClosed||this._onErrorHandlingIOPubMessage.fire(e)}}clearLastUsedStreamOutput(){this.lastUsedStreamOutput=void 0}createTemporaryTask(){if(this.cell.document.isClosed)return;return t.activeNotebookCellExecution.get(this.cell.notebook)||(this.previousResultsToRestore={...this.cell.executionSummary||{}},this.temporaryExecution=c.CellExecutionCreator.getOrCreate(this.cell,this.controller),this.temporaryExecution?.start(),this.previousResultsToRestore?.executionOrder&&this.execution&&(this.execution.executionOrder=this.previousResultsToRestore.executionOrder),this.temporaryExecution)}endTemporaryTask(){this.previousResultsToRestore?.executionOrder&&this.execution&&(this.execution.executionOrder=this.previousResultsToRestore.executionOrder),this.previousResultsToRestore&&this.temporaryExecution?(this.previousResultsToRestore.executionOrder&&(this.temporaryExecution.executionOrder=this.previousResultsToRestore.executionOrder),this.temporaryExecution.end(this.previousResultsToRestore.success,this.previousResultsToRestore.timing?.endTime)):this.temporaryExecution?.end(void 0),this.previousResultsToRestore=void 0,this.temporaryExecution=void 0}handleIOPub(e){this.startTime||(this.startTime=(new Date).getTime(),this.execution?.start(this.startTime),(0,u.traceInfo)(`Kernel acknowledged execution of cell ${this.cell.index} @ ${this.startTime}`));const t=n(76240);if(t.KernelMessage.isCommOpenMsg(e))this.handleCommOpen(e);else if(t.KernelMessage.isExecuteResultMsg(e))this.handleExecuteResult(e);else if(t.KernelMessage.isExecuteInputMsg(e))this.handleExecuteInput(e);else if(t.KernelMessage.isStatusMsg(e)){const t=e;this.handleStatusMessage(t)}else t.KernelMessage.isStreamMsg(e)?this.handleStreamMessage(e):t.KernelMessage.isDisplayDataMsg(e)?this.handleDisplayData(e):t.KernelMessage.isUpdateDisplayDataMsg(e)?this.handleUpdateDisplayDataMessage(e):t.KernelMessage.isClearOutputMsg(e)?this.handleClearOutput(e):t.KernelMessage.isErrorMsg(e)?this.handleError(e):t.KernelMessage.isCommOpenMsg(e)||(t.KernelMessage.isCommMsgMsg(e)?this.handleCommMsg(e):t.KernelMessage.isCommCloseMsg(e)||(0,u.traceWarning)(`Unknown message ${e.header.msg_type} : hasData=${"data"in e.content}`));"execution_count"in e.content&&"number"==typeof e.content.execution_count&&this.execution&&(this.execution.executionOrder=e.content.execution_count)}handleCommOpen(e){this.ownedCommIds.add(e.content.comm_id);const t=e.content.data?.state||void 0;e.content.target_name===m.Identifiers.DefaultCommTarget&&t&&"@jupyter-widgets/output"===t._model_module&&this.commIdsMappedToWidgetOutputModels.add(e.content.comm_id)}handleCommMsg(e){const t=e.content.data;if(t&&"update"===t.method&&"object"==typeof t.state)if("msg_id"in t.state&&"string"==typeof t.state.msg_id){const n="msg_id"in e.parent_header?e.parent_header:void 0;(this.ownedRequestMsgIds.has(e.content.comm_id)||n&&this.ownedRequestMsgIds.has(n.msg_id))&&(t.state.msg_id?this.outputsAreSpecificToAWidget.push({handlingCommId:e.content.comm_id,msgIdsToSwallow:t.state.msg_id}):this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].handlingCommId===e.content.comm_id&&this.outputsAreSpecificToAWidget.pop())}else if("children"in t.state&&Array.isArray(t.state.children)&&this.ownedCommIds.has(e.content.comm_id)){const n="IPY_MODEL_";t.state.children.forEach((t=>{if("string"!=typeof t)return(0,u.traceWarning)("Came across a comm update message a child that isn't a string",t);if(!t.startsWith(n))return(0,u.traceWarning)(`Came across a comm update message a child that start start with ${n}`,t);const r=t.substring(n.length);this.ownedCommIds.add(r),this.commIdsMappedToParentWidgetModel.set(r,e.content.comm_id)}))}}clearOutputIfNecessary(e){return this.clearOutputOnNextUpdateToOutput?((0,h.traceCellMessage)(this.cell,"Clear cell output"),this.clearLastUsedStreamOutput(),e?.clearOutput().then(f.noop,f.noop),this.clearOutputOnNextUpdateToOutput=!1,{previousValueOfClearOutputOnNextUpdateToOutput:!0}):{previousValueOfClearOutputOnNextUpdateToOutput:!1}}addToCellData(e,t){if(e.data&&"object"==typeof e.data&&m.WIDGET_MIMETYPE in e.data){const t=e.data[m.WIDGET_MIMETYPE];if(t&&this.context.extensionMode===a.ExtensionMode.Test&&(t._vsc_test_cellIndex=this.cell.index),t&&"model_id"in t){const e=w.modelIdsOwnedByCells.get(this.cell)||new Set;e.add(t.model_id),w.modelIdsOwnedByCells.set(this.cell,e)}}const n=(0,h.cellOutputToVSCCellOutput)(e),r="transient"in e&&"object"==typeof e.transient&&e.transient&&"display_id"in e.transient&&"string"==typeof e.transient?.display_id?e.transient?.display_id:void 0;if(this.cell.document.isClosed)return;(0,h.traceCellMessage)(this.cell,"Update output");const i=this.execution||this.createTemporaryTask();this.clearOutputIfNecessary(i),r&&v.CellOutputDisplayIdTracker.trackOutputByDisplayId(this.cell,r,n,n.items),this.clearLastUsedStreamOutput(),(0,h.traceCellMessage)(this.cell,"Append output in addToCellData");let o=!0;const s=b(t);if(this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow===s&&n.items.every((e=>this.canMimeTypeBeRenderedByWidgetManager(e))))o=!1;else if(this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow===s){const e=this.updateJupyterOutputWidgetWithOutput({commId:this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].handlingCommId,outputToAppend:n},i);e?.outputAdded&&(o=!1)}o&&i?.appendOutput([n]).then(f.noop,f.noop),this.endTemporaryTask()}canMimeTypeBeRenderedByWidgetManager(e){const t=e.mime;if(t==h.CellOutputMimeTypes.stderr||t==h.CellOutputMimeTypes.stdout||t==h.CellOutputMimeTypes.error)return!0;if(t===m.WIDGET_MIMETYPE){const t=JSON.parse(r.from(e.data).toString());return"string"!=typeof t.model_id||!this.commIdsMappedToWidgetOutputModels.has(t.model_id)}return!t.startsWith("application/vnd")}updateJupyterOutputWidgetWithOutput(e,t){const n=this.outputsAreSpecificToAWidget.length?this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].handlingCommId:void 0,i="commId"in e?e.commId:n;if(!i)return;const o="outputToAppend"in e?e.outputToAppend:void 0,s=this.commIdsMappedToParentWidgetModel.get(i)||i,a=this.cell.notebook.getCells().find((e=>w.modelIdsOwnedByCells.get(e)?.has(s)));if(!a)return void(0,u.traceWarning)(`Unable to find a cell that owns the model ${s}`);const c=a.outputs.find((e=>e.items.find((e=>{if(e.mime!==m.WIDGET_MIMETYPE)return!1;try{return JSON.parse(r.from(e.data).toString()).model_id===s}catch(e){(0,u.traceWarning)("Failed to deserialize the widget data",e)}return!1}))));if(!c)return;const l=w.outputsOwnedByWidgetModel.get(s)||new Set,d="clearOutput"in e&&e.clearOutput||!!this.outputsAreSpecificToAWidget.length&&!0===this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].clearOutputOnNextUpdateToOutput;this.outputsAreSpecificToAWidget.length&&(this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].clearOutputOnNextUpdateToOutput=!1);const h=a.outputs.slice().filter((e=>!d||!l.has(e.id))),p=h.slice(0,h.indexOf(c)+1),g=h.slice(h.indexOf(c)+1);w.outputsOwnedByWidgetModel.set(s,l),o&&l.add(o.id);const v=o?p.concat(o).concat(g):p.concat(g);return 0===g.length&&o?t?.appendOutput(o,a).then(f.noop,f.noop):d&&!o&&0===g.length||t?.replaceOutput(v,a).then(f.noop,f.noop),{outputAdded:!0}}async handleInputRequest(e){if(e.content&&"prompt"in e.content){const t=new a.CancellationTokenSource;this.prompts.add(t);const n=null!==e.content.password&&e.content.password;await this.applicationService.showInputBox({prompt:e.content.prompt?e.content.prompt.toString():"",ignoreFocusOut:!0,password:n},t.token).then((e=>{this.kernel.sendInputReply({value:e||"",status:"ok"})}),f.noop),this.prompts.delete(t)}}handleExecuteResult(e){this.addToCellData({output_type:"execute_result",data:e.content.data,metadata:e.content.metadata,transient:e.content.transient,execution_count:e.content.execution_count},e)}handleExecuteReply(e){const t=e.content;t.payload&&t.payload.forEach((n=>{n.source&&"set_next_input"===n.source&&"text"in n&&"replace"in n&&this.handleSetNextInput(n),n.data&&n.data.hasOwnProperty("text/plain")&&this.addToCellData({output_type:"stream",text:n.data["text/plain"].toString(),name:"stdout",metadata:{},execution_count:t.execution_count},e)}))}handleSetNextInput(e){const t=new a.WorkspaceEdit;if(e.replace)t.replace(this.cell.document.uri,new a.Range(this.cell.document.lineAt(0).range.start,this.cell.document.lineAt(this.cell.document.lineCount-1).range.end),e.text);else{(0,h.traceCellMessage)(this.cell,"Create new cell after current");const n=new a.NotebookCellData(a.NotebookCellKind.Code,e.text,this.cell.document.languageId);n.outputs=[],n.metadata={};const r=a.NotebookEdit.insertCells(this.cell.index+1,[n]);t.set(this.cell.notebook.uri,[r])}a.workspace.applyEdit(t).then(f.noop,f.noop)}handleExecuteInput(e){e.content.execution_count&&this.execution&&(this.execution.executionOrder=e.content.execution_count)}handleStatusMessage(e){(0,h.traceCellMessage)(this.cell,`Kernel switching to ${e.content.execution_state}`)}handleStreamMessage(e){if(b(e)&&this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow==b(e))return;(0,h.traceCellMessage)(this.cell,`Update streamed output, new output '${e.content.text.substring(0,100)}'`);const t=this.execution||this.createTemporaryTask(),n="stdout"===e.content.name?a.NotebookCellOutputItem.stdout("").mime:a.NotebookCellOutputItem.stderr("").mime;this.request||this.streamsReAttachedToExecutingCell||this.lastUsedStreamOutput||this.cell.outputs.length&&this.cell.outputs[this.cell.outputs.length-1].items.length>=1&&this.cell.outputs[this.cell.outputs.length-1].items.every((e=>e.mime===n))&&(this.lastUsedStreamOutput={output:this.cell.outputs[0],stream:e.content.name}),this.streamsReAttachedToExecutingCell=!0;const{previousValueOfClearOutputOnNextUpdateToOutput:r}=this.clearOutputIfNecessary(t);if(this.lastUsedStreamOutput?.stream===e.content.name){const n=(0,h.cellOutputToVSCCellOutput)({output_type:"stream",name:e.content.name,text:e.content.text});(0,h.traceCellMessage)(this.cell,`Append output items '${e.content.text.substring(0,100)}`),t?.appendOutputItems(n.items,this.lastUsedStreamOutput.output).then(f.noop,f.noop)}else if(r){const n=(0,d.concatMultilineString)(e.content.text),r=(0,h.cellOutputToVSCCellOutput)({output_type:"stream",name:e.content.name,text:n});this.lastUsedStreamOutput={output:r,stream:e.content.name},(0,h.traceCellMessage)(this.cell,`Replace output with '${n.substring(0,100)}'`),t?.replaceOutput([r]).then(f.noop,f.noop)}else{const n=(0,d.formatStreamText)((0,d.concatMultilineString)(e.content.text)),r=(0,h.cellOutputToVSCCellOutput)({output_type:"stream",name:e.content.name,text:n});this.lastUsedStreamOutput={output:r,stream:e.content.name},(0,h.traceCellMessage)(this.cell,`Append new output '${n.substring(0,100)}'`),t?.appendOutput([r]).then(f.noop,f.noop)}this.endTemporaryTask()}handleDisplayData(e){const t={output_type:"display_data",data:(0,g.handleTensorBoardDisplayDataOutput)(e.content.data),metadata:e.content.metadata,transient:e.content.transient};this.addToCellData(t,e)}handleClearOutput(e){if(this.outputsAreSpecificToAWidget.length&&this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].msgIdsToSwallow===b(e))if(e.content.wait)this.outputsAreSpecificToAWidget.length&&(this.outputsAreSpecificToAWidget[this.outputsAreSpecificToAWidget.length-1].clearOutputOnNextUpdateToOutput=!0);else{const e=this.execution||this.createTemporaryTask();this.updateJupyterOutputWidgetWithOutput({clearOutput:!0},e),this.endTemporaryTask()}else if(e.content.wait)this.clearOutputOnNextUpdateToOutput=!0;else{const e=this.execution||this.createTemporaryTask();this.clearLastUsedStreamOutput(),e?.clearOutput().then(f.noop,f.noop),this.endTemporaryTask()}}handleError(e){let t=e.content.traceback;(0,u.traceInfoIfCI)(`Traceback for error ${t}`),this.formatters.forEach((e=>{t=e.format(this.cell,t)})),(0,u.traceInfoIfCI)(`Traceback for error after formatting ${t}`);const n={output_type:"error",ename:e.content.ename,evalue:e.content.evalue,traceback:t};this.addToCellData(n,e),this.cellHasErrorsInOutput=!0}handleReply(e){n(76240).KernelMessage.isExecuteReplyMsg(e)&&(this.handleExecuteReply(e),"execution_count"in e.content&&"number"==typeof e.content.execution_count&&this.execution&&(this.execution.executionOrder=e.content.execution_count))}handleUpdateDisplayDataMessage(e){const t=e.content.transient.display_id;if(!t)return void(0,u.traceWarning)("Update display data message received, but no display id",e.content);const n=v.CellOutputDisplayIdTracker.getMappedOutput(this.cell.notebook,t);if(!n)return void(0,u.traceWarning)("Update display data message received, but no output found to update",e.content);if(n.cell.document.isClosed)return void(0,u.traceWarning)("Update display data message received, but output cell is closed",e.content);const r=(0,h.translateCellDisplayOutput)(new a.NotebookCellOutput(n.outputItems,n.outputContainer.metadata)),i=(0,h.cellOutputToVSCCellOutput)({...r,data:e.content.data,metadata:e.content.metadata});if(0===n.outputItems.length&&0===i.items.length)return void(0,u.traceVerbose)("Update display data message received, but no output to update",e.content);let o=!1;if(n.outputItems.length===i.items.length){let t=!0;if((0,s.default)(n.outputContainer.metadata||{},i.metadata||{})||(o=!0,t=!1),t)for(let e=0;e<n.outputItems.length;e++)if(!(0,s.default)(n.outputItems[e],i.items[e])){t=!1;break}if(t)return void(0,u.traceVerbose)("Update display data message received, but no output to update (data is the same)",e.content)}const c=this.execution||this.createTemporaryTask();if((0,h.traceCellMessage)(this.cell,`Replace output items in display data ${i.items.length}`),o){const e=n.cell.outputs.map((e=>{const n=(0,h.translateCellDisplayOutput)(e);return"display_data"===n.output_type&&"transient"in n&&n.transient&&"object"==typeof n.transient&&"display_id"in n.transient&&"string"==typeof n.transient.display_id&&n.transient.display_id===t?i:e}));c?.replaceOutput(e,n.cell).then(f.noop,f.noop),v.CellOutputDisplayIdTracker.trackOutputByDisplayId(n.cell,t,i,i.items)}else c?.replaceOutputItems(i.items,n.outputContainer).then(f.noop,f.noop),v.CellOutputDisplayIdTracker.trackOutputByDisplayId(n.cell,t,n.outputContainer,i.items);this.endTemporaryTask()}}t.CellExecutionMessageHandler=w,w.modelIdsOwnedByCells=new WeakMap,w.outputsOwnedByWidgetModel=new Map,i([(0,p.swallowExceptions)()],w.prototype,"handleReply",null)},3130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecutionMessageHandlerService=void 0;const r=n(66828),i=n(20397),o=n(67572);t.CellExecutionMessageHandlerService=class{constructor(e,t,n,i,o){this.appShell=e,this.controller=t,this.context=n,this.formatters=i,this.notebook=o,this.disposables=[],this.messageHandlers=new WeakMap,r.workspace.onDidChangeNotebookDocument((e=>{e.notebook===this.notebook&&e.contentChanges.forEach((e=>e.removedCells.forEach((e=>this.messageHandlers.get(e)?.dispose()))))}),this,this.disposables)}dispose(){(0,i.dispose)(this.disposables),this.notebook&&this.notebook.getCells().forEach((e=>this.messageHandlers.get(e)?.dispose()))}registerListenerForExecution(e,t){this.messageHandlers.get(e)?.dispose();const n=new o.CellExecutionMessageHandler(e,this.appShell,this.controller,this.context,this.formatters,t.kernel,t.request,t.cellExecution,t.request.msg.header.msg_id);return this.messageHandlers.set(e,n),n}registerListenerForResumingExecution(e,t){this.messageHandlers.get(e)?.dispose();const n=new o.CellExecutionMessageHandler(e,this.appShell,this.controller,this.context,this.formatters,t.kernel,void 0,t.cellExecution,t.msg_id);return this.messageHandlers.set(e,n),n}}},14644:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CellExecutionQueue=void 0;const r=n(66828),i=n(11642),o=n(58681),s=n(14154),a=n(94062);t.CellExecutionQueue=class{get isEmpty(){return 0===this.queueOfCellsToExecute.length}get failed(){return this.cancelledOrCompletedWithErrors}get queue(){return this.queueOfCellsToExecute.map((e=>e.cell))}constructor(e,t,n,i){this.session=e,this.executionFactory=t,this.metadata=n,this.resourceUri=i,this.queueOfCellsToExecute=[],this.cancelledOrCompletedWithErrors=!1,this.startedRunningCells=!1,this._onPreExecute=new r.EventEmitter,this._onPostExecute=new r.EventEmitter,this.disposables=[]}dispose(){this.disposables.forEach((e=>e.dispose())),this.lastCellExecution?.dispose()}get onPreExecute(){return this._onPreExecute.event}get onPostExecute(){return this._onPostExecute.event}queueCell(e,t){if(this.queueOfCellsToExecute.find((t=>t.cell===e)))return void(0,s.traceCellMessage)(e,"Use existing cell execution");const n=this.executionFactory.create(e,t,this.metadata);this.disposables.push(n),n.preExecute((e=>this._onPreExecute.fire(e)),this,this.disposables),this.queueOfCellsToExecute.push(n),(0,s.traceCellMessage)(e,"User queued cell for execution"),this.startExecutingCells()}resumeCell(e,t){if(this.queueOfCellsToExecute.find((t=>t.cell===e)))return void(0,s.traceCellMessage)(e,"Use existing cell execution");const n=this.executionFactory.create(e,"",this.metadata,t);this.disposables.push(n),this.queueOfCellsToExecute.push(n),(0,s.traceCellMessage)(e,"User queued cell for execution"),this.startExecutingCells()}async cancel(e){this.cancelledOrCompletedWithErrors=!0,(0,i.traceVerbose)("Cancel pending cells"),await Promise.all(this.queueOfCellsToExecute.map((t=>t.cancel(e)))),this.lastCellExecution?.dispose(),this.queueOfCellsToExecute.splice(0,this.queueOfCellsToExecute.length)}async waitForCompletion(e){const t=Array.isArray(e)&&e.length>0?this.queueOfCellsToExecute.filter((t=>e.includes(t.cell))):this.queueOfCellsToExecute;return Promise.all(t.map((e=>e.result)))}startExecutingCells(){this.startedRunningCells||this.start().catch(o.noop),this.startedRunningCells=!0}async start(){try{await this.executeQueuedCells()}catch(e){(0,i.traceError)("Failed to execute cells in CellExecutionQueue",e),this.cancelledOrCompletedWithErrors=!0,await this.cancel()}}async executeQueuedCells(){let e;const t=await this.session;for(this.queueOfCellsToExecute.forEach((e=>(0,s.traceCellMessage)(e.cell,"Ready to execute")));this.queueOfCellsToExecute.length;){this.lastCellExecution?.dispose();const n=this.queueOfCellsToExecute[0];let r;this.lastCellExecution=n,(0,s.traceCellMessage)(n.cell,"Before Execute individual cell");try{n.cell.notebook.isClosed?e=!0:this.cancelledOrCompletedWithErrors||(await n.start(t),r=await n.result)}finally{(0,s.traceCellMessage)(n.cell,`After Execute individual cell ${r}`);const e=this.queueOfCellsToExecute.indexOf(n);e>=0&&this.queueOfCellsToExecute.splice(e,1),this._onPostExecute.fire(n.cell)}if(e||this.cancelledOrCompletedWithErrors||r===a.NotebookCellRunState.Error){this.cancelledOrCompletedWithErrors=!0;const t=[];this.cancelledOrCompletedWithErrors&&t.push("cancellation or failure in execution"),e&&t.push("Notebook being closed"),"number"==typeof r&&r===a.NotebookCellRunState.Error&&t.push("failure in cell execution"),0===t.length&&t.push("an unknown reason"),(0,i.traceWarning)(`Cancel all remaining cells due to ${t.join(" or ")}`),await this.cancel();break}if("dead"===t.status||"terminating"===t.status){this.cancelledOrCompletedWithErrors=!0,(0,i.traceWarning)("Cancel all remaining cells due to dead kernel"),await this.cancel();break}}}}},79821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleTensorBoardDisplayDataOutput=void 0,t.handleTensorBoardDisplayDataOutput=function(e){if(e.hasOwnProperty("text/html")){const t=e["text/html"];"string"==typeof t&&t.includes('<iframe id="tensorboard-frame-')&&(e["text/html"]=t.replace(/new URL\((.*), window.location\)/,'new URL("http://localhost")'))}return e}},14154:function(e,t,n){"use strict";var r=n(48764).lW,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.endCellAndDisplayErrorsInCell=t.updateNotebookMetadata=t.hasErrorOutput=t.getTextOutputValues=t.getTextOutputValue=t.translateCellDisplayOutput=t.translateCellErrorOutput=t.cellOutputToVSCCellOutput=t.traceCellMessage=t.NotebookCellStateTracker=t.createJupyterCellFromVSCNotebookCell=t.CellOutputMimeTypes=void 0;const c=n(66828),l=a(n(50361)),u=a(n(64063)),d=s(n(15948)),h=s(n(52859)),p=n(15925),f=n(86563),g=n(11642),m=n(9959),v=n(29629),y=n(9016),b=n(98729),w=n(11386);var S;!function(e){e.error="application/vnd.code.notebook.error",e.stderr="application/vnd.code.notebook.stderr",e.stdout="application/vnd.code.notebook.stdout"}(S||(t.CellOutputMimeTypes=S={})),t.createJupyterCellFromVSCNotebookCell=function(e){let t;return t=e.kind===c.NotebookCellKind.Markup?function(e){const t=e.metadata?.custom,n={cell_type:"markdown",source:(0,f.splitMultilineString)("document"in e?e.document.getText():e.value),metadata:t?.metadata||{}};return t?.attachments&&(n.attachments=t.attachments),n}(e):"document"in e&&"raw"===e.document.languageId||"languageId"in e&&"raw"===e.languageId?function(e){const t=e.metadata?.custom,n={cell_type:"raw",source:(0,f.splitMultilineString)("document"in e?e.document.getText():e.value),metadata:t?.metadata||{}};return t?.attachments&&(n.attachments=t.attachments),n}(e):function(e){const t=e.metadata?.custom,n="document"in e?e.document.getText():e.value;return{cell_type:"code",execution_count:e.executionSummary?.executionOrder??null,source:(0,f.splitMultilineString)(n),outputs:(e.outputs||[]).map(A),metadata:t?.metadata||{}}}(e),t};const C=["application/vnd.*","application/vdom.*","application/geo+json","application/x-nteract-model-debug+json","text/html","application/javascript","image/gif","text/latex","text/markdown","image/png","image/svg+xml","image/jpeg","application/json","text/plain"];function _(e){if(e.mime.startsWith("application/vnd."))try{return 0===r.from(e.data).toString().length}catch{}return!1}class P{static getCellState(e){return P.cellStates.get(e)?.state}static getCellStatus(e){return(P.cellStates.get(e)?.stateTransition||[]).join(", ")||""}static setCellState(e,t){const n=P.cellStates.get(e)?.start||new w.StopWatch,r=P.cellStates.get(e)?.stateTransition||[];r.push(`${t} ${0===r.length?"@ start":`After ${n.elapsedTime}ms`}`),P.cellStates.set(e,{stateTransition:r,state:t,start:n})}}t.NotebookCellStateTracker=P,P.cellStates=new WeakMap,t.traceCellMessage=function(e,t){(0,g.traceInfoIfCI)(`Cell Index:${e.index}, of document ${h.basename(e.notebook.uri)} with state:${P.getCellStatus(e)}, exec: ${e.executionSummary?.executionOrder}. ${t}.`)};const E=new Map;function k(e){const t={outputType:e.output_type};switch(e.transient&&(t.transient=e.transient),e.output_type){case"display_data":case"execute_result":case"update_display_data":t.executionCount=e.execution_count,t.metadata=e.metadata?(0,l.default)(e.metadata):{}}return t}function I(e){const t=k(e);("image/svg+xml"in e.data||"image/png"in e.data)&&(t.__displayOpenPlotIcon=!0);const n=[];if(e.data)for(const t in e.data)n.push(R(t,e.data[t]));return new c.NotebookCellOutput(n.sort(((e,t)=>{const n=(e,t)=>(e.endsWith(".*")&&(e=e.substr(0,e.indexOf(".*"))),t.startsWith(e));let r=C.findIndex((t=>n(t,e.mime))),i=C.findIndex((e=>n(e,t.mime)));return _(e)&&(r=-1),_(t)&&(i=-1),r=-1==r?100:r,i=-1==i?100:i,r-i})),t)}function D(e){const t=e.items[0];if(!t.data)return{output_type:"error",ename:"",evalue:"",traceback:[]};const n=e.metadata?.originalError,i=JSON.parse(r.from(t.data).toString("utf8"));return{output_type:"error",ename:i.name,evalue:i.message,traceback:n?.traceback||(0,f.splitMultilineString)(i.stack||i.message||"")}}E.set("display_data",I),E.set("error",(function(e){return e=e||{output_type:"error",ename:"",evalue:"",traceback:[]},new c.NotebookCellOutput([c.NotebookCellOutputItem.error({name:e?.ename||"",message:e?.evalue||"",stack:(e?.traceback||[]).join("\n")})],{...k(e),originalError:e})})),E.set("execute_result",I),E.set("stream",(function(e){const t=(0,f.concatMultilineString)(e.text),n="stderr"===e.name?c.NotebookCellOutputItem.stderr:c.NotebookCellOutputItem.stdout;return new c.NotebookCellOutput([n(t)],k(e))})),E.set("update_display_data",I),t.cellOutputToVSCCellOutput=function(e){const t=E.get(e.output_type);let n;return t?n=t(e):((0,g.traceWarning)(`Unable to translate cell from ${e.output_type} to NotebookCellData for VS Code.`),n=I(e)),n},t.translateCellErrorOutput=D;const T=new TextDecoder,x=["text/plain","text/markdown",S.stderr,S.stdout];function O(e,t){if(!t)return"";try{if(e===S.error){const e=T.decode(t);return JSON.parse(e)}if(e.startsWith("text/")||x.includes(e)){const e=T.decode(t);return(0,f.splitMultilineString)(e)}if(e.startsWith("image/")&&"image/svg+xml"!==e){if(void 0!==r&&"function"==typeof r.from)return r.from(t).toString("base64");{const e=T.decode(t);return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number.parseInt("0x"+t))})))}}if(!e.toLowerCase().startsWith("application/vnd.holoviews_load.v")||!e.toLowerCase().endsWith("+json")){if(e.toLowerCase().includes("json")){const e=T.decode(t);return e.length>0?JSON.parse(e):e}return T.decode(t)}{const e=T.decode(t);try{return e.length>0?JSON.parse(e):e}catch{return e}}}catch(n){return(0,g.traceError)(`Failed to convert ${e} output from a buffer ${typeof t}, ${t}`,n),""}}function R(e,t){if(!t)return c.NotebookCellOutputItem.text("",e);try{if(!e.startsWith("text/")&&!x.includes(e)||!Array.isArray(t)&&"string"!=typeof t){if(e.startsWith("image/")&&"string"==typeof t&&"image/svg+xml"!==e){if(void 0!==r&&"function"==typeof r.from)return new c.NotebookCellOutputItem(r.from(t,"base64"),e);{const n=Uint8Array.from(atob(t),(e=>e.charCodeAt(0)));return new c.NotebookCellOutputItem(n,e)}}return"object"!=typeof t||null===t||Array.isArray(t)?(t=Array.isArray(t)?(0,f.concatMultilineString)(t):t,c.NotebookCellOutputItem.text(t,e)):c.NotebookCellOutputItem.text(JSON.stringify(t),e)}{const n=Array.isArray(t)?(0,f.concatMultilineString)(t):t;return c.NotebookCellOutputItem.text(n,e)}}catch(n){return(0,g.traceError)(`Failed to convert ${e} output to a buffer ${typeof t}, ${t}`,n),c.NotebookCellOutputItem.text("")}}function M(e){const t=[];e.items.filter((e=>e.mime===S.stderr||e.mime===S.stdout)).map((e=>T.decode(e.data))).forEach((e=>{const n=e.split("\n");t.length&&n.length&&n[0].length>0&&(t[t.length-1]=`${t[t.length-1]}${n.shift()}`);for(const e of n)t.push(e)}));for(let e=0;e<t.length-1;e++)t[e]=`${t[e]}\n`;t.length&&0===t[t.length-1].length&&t.pop();const n=function(e){if(e.items.length>0)return e.items[0].mime===S.stderr?"stderr":"stdout"}(e)||"stdout";return{output_type:"stream",name:n,text:t}}function A(e){const t=e.metadata;let n;const r=t?.outputType;switch(r){case"error":n=D(e);break;case"stream":n=M(e);break;case"display_data":n={output_type:"display_data",data:e.items.reduce(((e,t)=>(e[t.mime]=O(t.mime,t.data),e)),{}),metadata:t?.metadata||{}};break;case"execute_result":n={output_type:"execute_result",data:e.items.reduce(((e,t)=>(e[t.mime]=O(t.mime,t.data),e)),{}),metadata:t?.metadata||{},execution_count:"number"==typeof t?.executionCount?t?.executionCount:null};break;case"update_display_data":n={output_type:"update_display_data",data:e.items.reduce(((e,t)=>(e[t.mime]=O(t.mime,t.data),e)),{}),metadata:t?.metadata||{}};break;default:{const r=1===e.items.length&&e.items.every((e=>e.mime===S.error)),i=e.items.every((e=>e.mime===S.stderr||e.mime===S.stdout));if(r)return D(e);const o=t?.outputType||(i?"stream":"display_data");let s;(0,m.sendTelemetryEvent)(m.Telemetry.VSCNotebookCellTranslationFailed,void 0,{outputType:o}),s="stream"===o?M(e):"display_data"===o?{data:{},metadata:{},output_type:"display_data"}:{output_type:o},t?.metadata&&(s.metadata=t.metadata),e.items.length>0&&(s.data=e.items.reduce(((e,t)=>(e[t.mime]=O(t.mime,t.data),e)),{})),n=s;break}}return n&&t&&t.transient&&(n.transient=t.transient),n}function N(e){return(e?.items?.filter((e=>e.mime===S.stdout||e.mime===S.stderr||"text/plain"===e.mime||"text/markdown"===e.mime))||[]).map((e=>O(e.mime,e.data))).join("")}t.translateCellDisplayOutput=A,t.getTextOutputValue=N,t.getTextOutputValues=function(e){return e.outputs.map(N).join("")},t.hasErrorOutput=function(e){return!!e.find((e=>e.items.length&&!e.items.some((e=>e.mime!==S.error))))},t.updateNotebookMetadata=async function(e,t,n){let r,i,o=!1;if(!e)return{changed:o,kernelId:r};switch(e?.language_info?.name||(e.language_info=e.language_info||{name:""}),t?.kind){case"connectToLiveRemoteKernel":i=t.kernelModel.language;break;case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":i=t.kernelSpec.language;break;case"startUsingPythonInterpreter":i=p.PYTHON_LANGUAGE}if(e.language_info.name!==i&&i&&(e.language_info.name=i,o=!0),n&&"language_info"in n&&n.language_info)(0,u.default)(e.language_info,n.language_info)||(e.language_info=(0,l.default)(n.language_info),o=!0);else{const n=(0,b.isPythonKernelConnection)(t),r=n?(0,b.getInterpreterFromKernelConnectionMetadata)(t):void 0,i=r?.version?`${r.version.major}.${r.version.minor}.${r.version.patch}`:"";r&&r.version&&e&&e.language_info&&e.language_info.version!==i?(e.language_info.version=i,o=!0):!r&&e?.language_info&&n&&(e.language_info=void 0,o=!0)}const s=t&&(0,b.kernelConnectionMetadataHasKernelModel)(t)?t.kernelModel:t&&"kernelSpec"in t?t.kernelSpec:void 0;if("startUsingPythonInterpreter"===t?.kind){const n=t.kernelSpec;let r=n.display_name||t.interpreter.displayName||"",i="";switch((0,b.getKernelRegistrationInfo)(n)){case"registeredByOldVersionOfExt":case"registeredByNewVersionOfExt":i="python3";break;case"registeredByNewVersionOfExtForCustomKernelSpec":i=(n.metadata?.vscode?.originalSpecFile?d.basename(d.dirname(n.metadata.vscode.originalSpecFile)):void 0)||n.name,r=n.metadata?.vscode?.originalDisplayName||r;break;default:i=n.name}e.kernelspec?.name!==i&&(o=!0,e.kernelspec={name:i,language:p.PYTHON_LANGUAGE,display_name:r},"vscode"in e&&delete e.vscode,"interpreter"in e&&delete e.interpreter)}else if(s&&!e.kernelspec){const t=s.metadata?.vscode?.originalSpecFile?d.basename(d.dirname(s.metadata.vscode.originalSpecFile)):void 0;e.kernelspec={name:t||s.name||s.display_name||"",display_name:s.metadata?.vscode?.originalDisplayName||s.display_name||s.name||""},s.language&&(e.kernelspec.language=s.language),r=s.id,o=!0}else if(s&&e.kernelspec){const t=(s.metadata?.vscode?.originalSpecFile?d.basename(d.dirname(s.metadata.vscode.originalSpecFile)):void 0)||s.name||s.display_name||"",n=s.metadata?.vscode?.originalDisplayName||s.display_name||s.name||"",i=s.language||s.language||"";e.kernelspec.name===t&&e.kernelspec.language===i&&e.kernelspec.display_name===n&&r===s.id||(o=!0,e.kernelspec.name=t,e.kernelspec.display_name=n,e.kernelspec.language=i,r=s.id);try{delete e.kernelspec.metadata}catch{}}return{changed:o,kernelId:r}},t.endCellAndDisplayErrorsInCell=async function(e,t,n,r){const i=y.CellExecutionCreator.getOrCreate(e,t),o=(0,v.createOutputWithErrorMessageForDisplay)(n);o?(i.started||(i.start(e.executionSummary?.timing?.endTime),i.executionOrder=e.executionSummary?.executionOrder),await i.appendOutput(o),i.end(!!r&&void 0,e.executionSummary?.timing?.endTime)):i.started&&i.end(!!r&&void 0,e.executionSummary?.timing?.endTime)}},61254:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelCompletionsPreWarmer=void 0;const o=n(26594),s=n(42080),a=n(58681),c=n(98729),l=n(94062);let u=class{constructor(e,t){this.kernelProvider=e,this.disposables=t}activate(){this.kernelProvider.onDidStartKernel((e=>{e.session?.kernel&&(0,c.isPythonKernelConnection)(e.kernelConnectionMetadata)&&e.session.kernel.requestComplete({code:"__file__.",cursor_pos:9}).catch(a.noop)}),this,this.disposables)}};t.KernelCompletionsPreWarmer=u,t.KernelCompletionsPreWarmer=u=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IKernelProvider)),i(1,(0,o.inject)(s.IDisposableRegistry))],u)},57550:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LastCellExecutionTracker=void 0;const o=n(26594),s=n(42080),a=n(86563),c=n(94062),l=n(20397),u=n(66828),d=n(58681),h=n(67572),p=n(94433),f=n(83599),g=n(46875),m=1728e5;let v=class extends a.Disposables{constructor(e,t,n,r){super(),this.serverStorage=t,this.context=n,this.fs=r,this.executedCells=new WeakMap,this.chainedPromises=Promise.resolve(),n.globalStorageUri,e.push(this),this.storageFile=u.Uri.joinPath(this.context.globalStorageUri,"lastExecutedRemoteCell.json")}activate(){this.serverStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables)}async getLastTrackedCellExecution(e,t){if(e.isUntitled)return;if(!(0,c.isRemoteConnection)(t.kernelConnectionMetadata)||!t.session?.id)return;if(this.staleState&&this.staleState[e.uri.toString()])return this.staleState[e.uri.toString()];const n=await this.getStorageFile();let r={};try{const e=await this.fs.readFile(n);r=JSON.parse(e.toString()),this.staleState=r}catch{return}return r[e.uri.toString()]}trackCellExecution(e,t){if(!(0,c.isRemoteConnection)(t.kernelConnectionMetadata)||e.document.isUntitled)return;let n;this.executedCells.delete(e);const r=[],i=(n,i)=>{if("send"===i.direction){const n=i.msg;if("execute_request"===n.header.msg_type&&n.metadata&&"object"==typeof n.metadata&&n.metadata&&"cellId"in n.metadata&&"string"==typeof n.metadata.cellId&&n.metadata.cellId===e.document.uri.toString()){const r=n.header.msg_id;this.executedCells.set(e,{msg_id:r,kernelId:t.session?.kernel?.id||"",cellIndex:e.index})}}else if("recv"===i.direction){const n=i.msg,o=this.executedCells.get(e);if(o?.msg_id&&(0,h.getParentHeaderMsgId)(n)===o.msg_id){if(!o.startTime){o.startTime=(new Date).getTime();try{o.startTime=new Date(n.header.date).getTime()}catch{}this.executedCells.set(e,o)}"execution_count"in n.content&&"number"==typeof n.content.execution_count&&!o.executionCount&&o.executionCount!==n.content.execution_count&&(o.executionCount=n.content.execution_count,this.executedCells.set(e,o),this.trackLastExecution(e,t,o),(0,l.dispose)(r))}}},o=()=>{const e=t.session;e&&(e.anyMessage.connect(i),n=new u.Disposable((()=>(0,d.swallowExceptions)((()=>e.anyMessage?.disconnect(i))))),r.push(n))};t.onStarted((()=>o()),r),t.session&&o()}deleteTrackedCellExecution(e,t){e.notebook.isUntitled||(0,c.isRemoteConnection)(t.kernelConnectionMetadata)&&t.session?.id&&(this.chainedPromises=this.chainedPromises.finally((async()=>{let t={};try{const e=await this.getStorageFile().then((()=>this.fs.readFile(this.storageFile)));t=JSON.parse(e.toString())}catch{return}const n=e.notebook.uri.toString();t[n].cellIndex===e.index&&(delete t[n],this.staleState=t,await this.fs.writeFile(this.storageFile,JSON.stringify(t)))})))}getStorageFile(){return this.ensureStorageExistsPromise=this.ensureStorageExistsPromise||(async()=>(await this.fs.createDirectory(this.context.globalStorageUri),this.storageFile))(),this.ensureStorageExistsPromise}trackLastExecution(e,t,n){if(!n.executionCount||!n.msg_id||!n.startTime)return;if(!(0,c.isRemoteConnection)(t.kernelConnectionMetadata)||!t.session?.id)return;const r={cellIndex:e.index,executionCount:n.executionCount,kernelId:t.session?.kernel?.id||"",msg_id:n.msg_id,serverId:(0,g.generateIdFromRemoteProvider)(t.kernelConnectionMetadata.serverProviderHandle),sessionId:t.session?.id,startTime:n.startTime};this.chainedPromises=this.chainedPromises.finally((async()=>{let t={};try{const e=await this.getStorageFile().then((()=>this.fs.readFile(this.storageFile)));t=JSON.parse(e.toString())}catch{}t[e.notebook.uri.toString()]=r,this.removeOldItems(t),this.staleState=t,await this.fs.writeFile(this.storageFile,JSON.stringify(t))}))}onDidRemoveServers(e){0!==e.length&&(this.chainedPromises=this.chainedPromises.finally((async()=>{await this.getStorageFile();let t={};try{const e=await this.fs.readFile(this.storageFile);t=JSON.parse(e.toString())}catch{}let n=!1;const r=new Set(e.map((e=>(0,g.generateIdFromRemoteProvider)(e))));Object.keys(t).forEach((e=>{const i=t[e];(r.has(i.serverId)||Date.now()-i.startTime>m)&&(delete t[e],n=!0)})),n&&(this.removeOldItems(t),this.staleState=t,await this.fs.writeFile(this.storageFile,JSON.stringify(t)))})))}removeOldItems(e){Object.keys(e).forEach((t=>{const n=e[t];n&&Date.now()-n.startTime>m&&delete e[t]}))}};t.LastCellExecutionTracker=v,t.LastCellExecutionTracker=v=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDisposableRegistry)),i(1,(0,o.inject)(p.IJupyterServerUriStorage)),i(2,(0,o.inject)(s.IExtensionContext)),i(3,(0,o.inject)(f.IFileSystem))],v)},58880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearPendingChainedUpdatesForTests=t.chainWithPendingUpdates=void 0;const r=n(25472),i=n(66828),o=n(43138),s=n(58681),a=new WeakMap;t.chainWithPendingUpdates=async function(e,t){const n=e;if(e.isClosed)return!0;const c=a.has(n)?a.get(n):Promise.resolve(),l=(0,o.createDeferred)(),u=c.finally((async()=>{const e=new i.WorkspaceEdit,n=t(e);(0,r.isPromise)(n)&&await n,await i.workspace.applyEdit(e).then((e=>l.resolve(e)),(e=>l.reject(e)))})).catch(s.noop);return a.set(n,u),l.promise},t.clearPendingChainedUpdatesForTests=function(){const e=i.window.activeNotebookEditor;e?.notebook&&a.delete(e.notebook)}},98729:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.executeSilently=t.isLocalHostConnection=t.detectDefaultKernelName=t.areKernelConnectionsEqual=t.getKernelRegistrationInfo=t.getInterpreterKernelSpecName=t.autoGeneratedKernelNameIdentifier=t.getLanguageInKernelSpec=t.getLanguageInNotebookMetadata=t.getKernelConnectionLanguage=t.isPythonKernelSpec=t.isPythonKernelConnection=t.isUserRegisteredKernelSpecConnection=t.getInterpreterFromKernelConnectionMetadata=t.getKernelConnectionDisplayPath=t.getRemoteKernelSessionInformation=t.getKernelDisplayPathFromKernelConnection=t.getNameOfKernelConnection=t.getDisplayNameOrNameOfKernelConnection=t.getKernelId=t.kernelConnectionMetadataHasKernelModel=t.kernelConnectionMetadataHasKernelSpec=t.removeNotebookSuffixAddedByExtension=t.isDefaultKernelSpec=t.isPythonNotebook=t.cleanEnvironment=t.createInterpreterKernelSpecWithName=t.createInterpreterKernelSpec=t.isDefaultPythonKernelSpecName=t.jvscIdentifier=t.findIndexOfConnectionFile=t.connectionFilePlaceholder=void 0;const a=o(n(15948)),c=o(n(52859)),l=s(n(50361)),u=s(n(84564)),d=n(66828),h=n(15925),p=n(11642),f=n(35412),g=n(25251),m=n(46031),v=n(96434),y=n(47891),b=n(24353),w=n(47028),S=n(9959),C=n(20397),_=n(39796);function P(e,n,r){const i=n?{path:(0,f.getFilePath)(n.uri)}:{},o={name:e,language:"python",display_name:n?.displayName||"Python 3",metadata:{interpreter:i},argv:["python","-m","ipykernel_launcher","-f",t.connectionFilePlaceholder],env:{},resources:{}},s=r&&o.name?c.joinPath(r,o.name,"kernel.json"):void 0;return new w.JupyterKernelSpec(o,s?(0,f.getFilePath)(s):void 0,(0,f.getFilePath)(n?.uri),"registeredByNewVersionOfExt")}function E(e){const n=e.metadata?.vscode?.originalSpecFile||e.metadata?.originalSpecFile,r=n?a.basename(a.dirname(n)):e.name||"",i=e.metadata?.vscode?.originalDisplayName||e.display_name||"";return!(!r.toLowerCase().match(t.isDefaultPythonKernelSpecName)&&"python 3 (ipykernel)"!==i.toLowerCase()&&"python 3"!==i.toLowerCase())}function k(e){if(e.includes(t.jvscIdentifier)){const n=/[a-f0-9]$/;if(-1!==e.substring(e.lastIndexOf(t.jvscIdentifier)+t.jvscIdentifier.length).search(n)){const n=e.substring(0,e.lastIndexOf(t.jvscIdentifier));return n.toLowerCase().endsWith(".ipynb")?n:`${n}.ipynb`}}return e}function I(e){return"connectToLiveRemoteKernel"!==e.kind}function D(e){return"connectToLiveRemoteKernel"===e.kind}function T(e){if(!e)return;const t=D(e)?e.kernelModel:void 0,n=I(e)?e.kernelSpec:void 0;if("startUsingPythonInterpreter"===e.kind||("startUsingRemoteKernelSpec"===e.kind||"startUsingLocalKernelSpec"===e.kind)&&e.kernelSpec.language===h.PYTHON_LANGUAGE){const t=n?.metadata?.interpreter?.path||n?.interpreterPath||n?.executable;return"/python"===t||"python"===t?e.interpreter?.displayPath:t?d.Uri.file(t):void 0}{const e=t?.executable||n?.executable||n?.metadata?.interpreter?.path||n?.interpreterPath;return e?d.Uri.file(e):void 0}}function x(e){return(e?.language||"").toLowerCase()===h.PYTHON_LANGUAGE}function O(e){return e?.language}async function R(e){const n=(e?.sysVersion?(0,v.getTelemetrySafeVersion)(e.sysVersion)||"3":"").replace(/\./g,"");return e?`${e?`python${n}`:""}${t.autoGeneratedKernelNameIdentifier}${await(0,m.getInterpreterHash)(e)}`:"python3"}function M(e){if(e.isRegisteredByVSC)return e.isRegisteredByVSC;if(!e.name)return;const n=e.metadata?.vscode?.originalSpecFile||e.metadata?.originalSpecFile,r=n?a.basename(a.dirname(n)):e.name,i=E({...e,name:r})?Object.keys(e.env||{}).length>0:"string"==typeof n&&!n.includes(t.autoGeneratedKernelNameIdentifier);return e.name.includes(t.autoGeneratedKernelNameIdentifier)?i?"registeredByNewVersionOfExtForCustomKernelSpec":"registeredByNewVersionOfExt":e.metadata?.interpreter&&-1!==e.name.toLowerCase().search(/[a-f0-9]{32}$/)?"registeredByOldVersionOfExt":void 0}t.connectionFilePlaceholder="{connection_file}",t.findIndexOfConnectionFile=function(e){return e.argv.findIndex((e=>e.includes(t.connectionFilePlaceholder)))},t.jvscIdentifier="-jvsc-",t.isDefaultPythonKernelSpecName=/^python\d*.?\d*$/,t.createInterpreterKernelSpec=async function(e,t){return P(await R(e),e,t)},t.createInterpreterKernelSpecWithName=P,t.cleanEnvironment=function(e){const t=(0,l.default)(e);return t.env&&Object.keys(t.env).forEach((e=>{if(t.env){const n=t.env[e];null!=n&&(t.env[e]=n.toString())}})),t},t.isPythonNotebook=function(e){const t=e?.kernelspec;return!(e?.language_info?.name&&e.language_info.name!==h.PYTHON_LANGUAGE||!t?.name?.includes(h.PYTHON_LANGUAGE)&&t?.language!==h.PYTHON_LANGUAGE&&e?.language_info?.name!==h.PYTHON_LANGUAGE)},t.isDefaultKernelSpec=E,t.removeNotebookSuffixAddedByExtension=k,t.kernelConnectionMetadataHasKernelSpec=I,t.kernelConnectionMetadataHasKernelModel=D,t.getKernelId=function(e,n,r){n=x(e)?n:void 0;let i=e.name;const o=M(e);if(o&&i.includes(t.autoGeneratedKernelNameIdentifier)&&(i=i.substring(i.indexOf(t.autoGeneratedKernelNameIdentifier)),"registeredByNewVersionOfExtForCustomKernelSpec"===o)){const t=e.metadata?.vscode?.originalSpecFile||e.metadata?.originalSpecFile;t&&(i=`${i}#${a.basename(a.dirname(t))}`)}let s="";s=x(e)?e.argv.slice(1).filter((e=>!["-f","{connection_file}"].includes(e))).join("#").toLowerCase():e.argv.join("#").toLowerCase();const c=r?`${r}.`:"",l=(0,f.getFilePath)((0,m.getNormalizedInterpreterPath)(e.interpreterPath?d.Uri.file(e.interpreterPath):d.Uri.file(e.executable))),u=(0,f.getFilePath)((0,m.getNormalizedInterpreterPath)(n?.uri))||"";return`${c}${e.id||""}.${i}.${l}.${u}.${s}`},t.getDisplayNameOrNameOfKernelConnection=function(e){const t=function(e){if(!e)return"";return["connectToLiveRemoteKernel"===e.kind?e.kernelModel.display_name:e.kernelSpec?.display_name,"connectToLiveRemoteKernel"===e.kind?e.kernelModel.name:e.kernelSpec?.name,"startUsingPythonInterpreter"===e.kind?e.interpreter.displayName:void 0,""].find((e=>"string"==typeof e&&e.length>0))||""}(e);if(!e)return t;switch(e.kind){case"connectToLiveRemoteKernel":{const n=k(e.kernelModel?.notebook?.path||e.kernelModel?.model?.path||"");return n?`${t} (${n})`:t}case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":if(e.interpreter?.envType&&e.interpreter.envType!==y.EnvironmentType.Unknown){const n=(0,_.getPythonEnvironmentName)(e.interpreter);if(e.kernelSpec.language===h.PYTHON_LANGUAGE){const n=`Python ${(0,v.getTelemetrySafeVersion)(e.interpreter.version?.raw||"")||""}`.trim();return e.interpreter.envName?`${t} (${n})`:t}return n?`${t} (${n})`:t}return t;case"startUsingPythonInterpreter":const n=((0,v.getTelemetrySafeVersion)(e.interpreter.version?.raw||"")||"").trim();if(e.interpreter.envType&&e.interpreter.envType!==y.EnvironmentType.Unknown){if(e.kernelSpec.display_name&&"registeredByNewVersionOfExtForCustomKernelSpec"===M(e.kernelSpec))return e.kernelSpec.display_name;const t=e.interpreter.envType===y.EnvironmentType.Conda&&!0===e.interpreter.isCondaEnvWithoutPython,r=n.trim()?`Python ${n}`:"Python",i=(0,_.getPythonEnvironmentName)(e.interpreter);return t&&i?i:i?`${i} (${r})`:r}return`Python ${n}`.trim()}return t},t.getNameOfKernelConnection=function(e,t=""){return e?"connectToLiveRemoteKernel"===e.kind?e.kernelModel.name:e.kernelSpec?.name:t},t.getKernelDisplayPathFromKernelConnection=T,t.getRemoteKernelSessionInformation=function(e,t=""){return"connectToLiveRemoteKernel"===e?.kind?g.DataScience.jupyterSelectLiveRemoteKernelDescription(e.kernelModel.lastActivityTime,e.kernelModel.numberOfConnections):t},t.getKernelConnectionDisplayPath=function(e,t,n){if("connectToLiveRemoteKernel"===e?.kind)return;const r=T(e),i=t.workspaceFolders?t.workspaceFolders:[];return r?(0,f.getDisplayPath)(r,i,n.homeDir):""},t.getInterpreterFromKernelConnectionMetadata=function(e){if(!e)return;if(e.interpreter)return e.interpreter;const t=D(e)?e.kernelModel:void 0;if(t?.metadata?.interpreter)return(0,b.deserializePythonEnvironment)(t?.metadata?.interpreter,"");const n=I(e)?e.kernelSpec:void 0;return(0,b.deserializePythonEnvironment)(n?.metadata?.interpreter,"")},t.isUserRegisteredKernelSpecConnection=function(e){return"startUsingLocalKernelSpec"===e.kind||"startUsingPythonInterpreter"===e.kind&&e.kernelSpec&&"registeredByNewVersionOfExtForCustomKernelSpec"===M(e.kernelSpec)},t.isPythonKernelConnection=function(e){if(!e)return!1;if("startUsingPythonInterpreter"===e.kind)return!0;const t=D(e)?e.kernelModel:void 0,n=I(e)?e.kernelSpec:void 0;return t?.language===h.PYTHON_LANGUAGE||x(n)},t.isPythonKernelSpec=x,t.getKernelConnectionLanguage=function(e){if(!e)return;if("startUsingPythonInterpreter"===e.kind)return h.PYTHON_LANGUAGE;const t=D(e)?e.kernelModel:void 0,n=I(e)?e.kernelSpec:void 0;return t?.language||O(n)},t.getLanguageInNotebookMetadata=function(e){if(e)return O(e.kernelspec)||e.language_info?.name},t.getLanguageInKernelSpec=O,t.autoGeneratedKernelNameIdentifier="jvsc74a57bd0",t.getInterpreterKernelSpecName=R,t.getKernelRegistrationInfo=M,t.areKernelConnectionsEqual=function(e,t){return!((e||t)&&(!e&&t||e&&!t||e?.id!==t?.id))},t.detectDefaultKernelName=function(e){return new RegExp("python\\s*(?<version>(\\d+))","g").exec(e.toLowerCase())},t.isLocalHostConnection=function(e){if("connectToLiveRemoteKernel"===e.kind||"startUsingRemoteKernelSpec"===e.kind){const t=new u.default(e.baseUrl);return"localhost"===t.hostname.toLocaleLowerCase()||"127.0.0.1"===t.hostname}return!1},t.executeSilently=async function(e,t,r){(0,p.traceVerbose)(`Executing silently Code (${e.status}) = ${(0,C.splitLines)(t.substring(0,100)).join("\\n")}`);const i=n(76240),o=e.requestExecute({code:t.replace(/\r\n/g,"\n"),silent:!1,stop_on_error:!1,allow_stdin:!0,store_history:!1},!0),s=[];o.onIOPub=e=>{if(i.KernelMessage.isStreamMsg(e))if((0,p.traceInfoIfCI)(`Got io pub message (stream), ${(0,C.splitLines)(e.content.text.substr(0,100)).join("\\n")}`),s.length>0&&"stream"===s[s.length-1].output_type&&s[s.length-1].name===e.content.name)s[s.length-1].text+=e.content.text;else{const t={name:e.content.name,text:e.content.text,output_type:"stream"};s.push(t)}else if(i.KernelMessage.isExecuteResultMsg(e)){(0,p.traceInfoIfCI)("Got io pub message (execresult)}");const t={data:e.content.data,execution_count:e.content.execution_count,metadata:e.content.metadata,output_type:"execute_result"};s.push(t)}else if(i.KernelMessage.isDisplayDataMsg(e)){(0,p.traceInfoIfCI)("Got io pub message (displaydata)}");const t={data:e.content.data,metadata:e.content.metadata,output_type:"display_data"};s.push(t)}else if(i.KernelMessage.isErrorMsg(e)){if((0,p.traceInfoIfCI)(`Got io pub message (error), ${e.content.ename},${e.content.evalue}, ${e.content.traceback.join().substring(0,100)}}`),r?.traceErrors){const n=`${r.traceErrorsMessage||"Failed to execute (silent) code against the kernel"}, \nCode = ${t}\nError details: `;(0,p.traceError)(`${n} ${e.content.ename},${e.content.evalue}, ${e.content.traceback.join()}`)}const n={ename:e.content.ename,evalue:e.content.evalue,traceback:e.content.traceback,output_type:"error"};s.push(n)}else(0,p.traceInfoIfCI)(`Got io pub message (${e.header.msg_type})`)},await o.done;const a=(0,C.splitLines)(t.substring(0,100)).join("\\n");return r&&function(e,t,n){e.filter((e=>"error"===e.output_type)).forEach((e=>{const r=e,i=`${r.ename}: ${r.evalue} \n ${r.traceback.map((e=>`    ${e}`)).join("\n")}`,o=`${t.traceErrorsMessage||""} ${n} ${i}`;t.traceErrors?(0,p.traceError)(o):(0,p.traceWarning)(o),t.telemetryName&&(0,S.sendTelemetryEvent)(t.telemetryName)}))}(s,r,a),(0,p.traceVerbose)(`Executing silently Code (completed) = ${a} with ${s.length} output(s)`),s}},38994:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ContributedKernelFinderKind=void 0,function(e){e.Remote="remote",e.LocalKernelSpec="localKernelSpec",e.LocalPythonEnvironment="localPythonEnvironment"}(n||(t.ContributedKernelFinderKind=n={}))},23429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseKernelConnectionWrapper=void 0;const r=n(4016),i=n(66828),o=n(50936);t.BaseKernelConnectionWrapper=class{get serverSettings(){return(this.possibleKernelConnection||this._previousKernelConnection).serverSettings}getKernelConnection(){if(!this.possibleKernelConnection)throw new Error(`Kernel connection is not available, status = ${this.status}, connection = ${this.connectionStatus}`);return this.possibleKernelConnection}constructor(e,t){this._previousKernelConnection=e,this.chainingExecute=new o.ChainingExecuteRequester,this.statusChanged=new r.Signal(this),this.connectionStatusChanged=new r.Signal(this),this.iopubMessage=new r.Signal(this),this.unhandledMessage=new r.Signal(this),this.anyMessage=new r.Signal(this),this.disposed=new r.Signal(this),this.originalKernel=e,this.startHandleKernelMessages(e),t.push(new i.Disposable((()=>{this.possibleKernelConnection&&this.stopHandlingKernelMessages(this.possibleKernelConnection)})))}get id(){return(this.possibleKernelConnection||this._previousKernelConnection).id}get name(){return(this.possibleKernelConnection||this._previousKernelConnection).name}get isDisposed(){return!this.possibleKernelConnection||!0===this.possibleKernelConnection?.isDisposed}get model(){return(this.possibleKernelConnection||this._previousKernelConnection).model}get username(){return(this.possibleKernelConnection||this._previousKernelConnection).username}get clientId(){return(this.possibleKernelConnection||this._previousKernelConnection).clientId}get status(){return this.possibleKernelConnection?.status||"dead"}get connectionStatus(){return this.possibleKernelConnection?.connectionStatus||"disconnected"}get info(){return(this.possibleKernelConnection||this._previousKernelConnection).info}get spec(){return(this.possibleKernelConnection||this._previousKernelConnection).spec}get handleComms(){return(this.possibleKernelConnection||this._previousKernelConnection).handleComms}sendShellMessage(e,t,n){return this.getKernelConnection().sendShellMessage(e,t,n)}sendControlMessage(e,t,n){return this.getKernelConnection().sendControlMessage(e,t,n)}reconnect(){return this.getKernelConnection().reconnect()}requestKernelInfo(){return this.getKernelConnection().requestKernelInfo()}requestComplete(e){return this.getKernelConnection().requestComplete(e)}requestInspect(e){return this.getKernelConnection().requestInspect(e)}requestHistory(e){return this.getKernelConnection().requestHistory(e)}requestExecute(e,t,n){return this.chainingExecute.requestExecute(this.getKernelConnection(),e,t,n)}requestDebug(e,t){return this.getKernelConnection().requestDebug(e,t)}requestIsComplete(e){return this.getKernelConnection().requestIsComplete(e)}requestCommInfo(e){return this.getKernelConnection().requestCommInfo(e)}sendInputReply(e){return this.getKernelConnection().sendInputReply(e)}createComm(e,t){return this.getKernelConnection().createComm(e,t)}hasComm(e){return this.getKernelConnection().hasComm(e)}registerCommTarget(e,t){return this.getKernelConnection().registerCommTarget(e,t)}removeCommTarget(e,t){return this.getKernelConnection().removeCommTarget(e,t)}registerMessageHook(e,t){return this.getKernelConnection().registerMessageHook(e,t)}removeMessageHook(e,t){return this.getKernelConnection().removeMessageHook(e,t)}clone(e){throw new Error("Method not implemented.")}startHandleKernelMessages(e){e.anyMessage.connect(this.onAnyMessage,this),e.iopubMessage.connect(this.onIOPubMessage,this),e.unhandledMessage.connect(this.onUnhandledMessage,this)}stopHandlingKernelMessages(e){e.anyMessage.disconnect(this.onAnyMessage,this),e.iopubMessage.disconnect(this.onIOPubMessage,this),e.unhandledMessage.disconnect(this.onUnhandledMessage,this)}onAnyMessage(e,t){e===this.possibleKernelConnection&&this.anyMessage.emit(t)}onIOPubMessage(e,t){e===this.possibleKernelConnection&&this.iopubMessage.emit(t)}onUnhandledMessage(e,t){e===this.possibleKernelConnection&&this.unhandledMessage.emit(t)}}},85434:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClearJupyterServersCommand=void 0;const o=n(26594),s=n(10053),a=n(15925),c=n(42080),l=n(94433),u=n(58681),d=n(66828);let h=class{constructor(e,t,n,r){this.commandManager=e,this.serverUriStorage=t,this.registrations=n,this.disposables=r}activate(){this.disposables.push(this.commandManager.registerCommand(a.Commands.ClearSavedJupyterUris,(async()=>{await this.serverUriStorage.clear().catch(u.noop),await Promise.all(this.registrations.jupyterCollections.filter((e=>e.id.startsWith("_builtin")||e.extensionId===a.JVSC_EXTENSION_ID)).map((async e=>{if(!e.serverProvider||!e.serverProvider.removeJupyterServer)return;const t=new d.CancellationTokenSource,n=await Promise.resolve(e.serverProvider.provideJupyterServers(t.token));await Promise.all((n||[]).map((t=>e.serverProvider.removeJupyterServer(t).catch(u.noop))))}))).catch(u.noop),await this.commandManager.executeCommand("dataScience.ClearUserProviderJupyterServerCache").then(u.noop,u.noop)}),this))}};t.ClearJupyterServersCommand=h,t.ClearJupyterServersCommand=h=r([(0,o.injectable)(),i(0,(0,o.inject)(s.ICommandManager)),i(1,(0,o.inject)(l.IJupyterServerUriStorage)),i(2,(0,o.inject)(l.IJupyterServerProviderRegistry)),i(3,(0,o.inject)(c.IDisposableRegistry))],h)},70798:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterConnection=void 0;const o=n(26594),s=n(58681),a=n(42751),c=n(37853),l=n(46875),u=n(94433),d=n(84079),h=n(50689),p=n(90541),f=n(10053),g=n(42080),m=n(54990),v=n(66828),y=n(78624);let b=class{constructor(e,t,n,r,i,o){this.jupyterPickerRegistration=e,this.applicationShell=t,this.configService=n,this.errorHandler=r,this.requestAgentCreator=i,this.requestCreator=o}async createConnectionInfo(e){const t=await this.getJupyterServerUri(e);return(0,l.createJupyterConnectionInfo)(e,t,this.requestCreator,this.requestAgentCreator,this.configService,!1,v.Uri.file(""))}async validateRemoteUri(e,t,n){let r;t=t||await this.getJupyterServerUri(e);const i=(0,l.createJupyterConnectionInfo)(e,t,this.requestCreator,this.requestAgentCreator,this.configService,!1,v.Uri.file(""));try{r=y.JupyterLabHelper.create(i.settings),await Promise.all([r.getRunningKernels(),r.getKernelSpecs()])}catch(r){if(d.JupyterSelfCertsError.isSelfCertsError(r)){if(!await(0,l.handleSelfCertsError)(this.applicationShell,this.configService,r.message))throw r}else{if(!h.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(r))throw t&&!n?(await this.errorHandler.handleError(new m.RemoteJupyterServerConnectionError(t.baseUrl,e,r)),r):r;if(!await(0,l.handleExpiredCertsError)(this.applicationShell,this.configService,r.message))throw r}}finally{i.dispose(),r&&r.dispose().catch(s.noop)}}async getJupyterServerUri(e){try{return await this.jupyterPickerRegistration.getJupyterServerUri(e)}catch(t){if(t instanceof c.BaseError)throw t;throw new a.RemoteJupyterServerUriProviderError(e,t)}}};t.JupyterConnection=b,t.JupyterConnection=b=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IJupyterUriProviderRegistration)),i(1,(0,o.inject)(f.IApplicationShell)),i(2,(0,o.inject)(g.IConfigurationService)),i(3,(0,o.inject)(p.IDataScienceErrorHandler)),i(4,(0,o.inject)(u.IJupyterRequestAgentCreator)),i(4,(0,o.optional)()),i(5,(0,o.inject)(u.IJupyterRequestCreator))],b)},24112:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterRemoteCachedKernelValidator=void 0;const o=n(26594),s=n(11642),a=n(94433),c=n(58681);let l=class{constructor(e,t){this.liveKernelConnectionTracker=e,this.providerRegistration=t}async isValid(e){if(!this.liveKernelConnectionTracker.wasKernelUsed(e))return!1;const t=await this.providerRegistration.getProvider(e.serverProviderHandle.extensionId,e.serverProviderHandle.id).catch(c.noop);return t?!t.getHandles||(!!(await t.getHandles()).includes(e.serverProviderHandle.handle)||((0,s.traceWarning)(`Hiding remote kernel ${e.id} for ${t.id} as the remote Jupyter Server ${e.serverProviderHandle.id}:${e.serverProviderHandle.handle} is no longer available`),!1)):((0,s.traceWarning)(`Extension may have been uninstalled for provider ${e.serverProviderHandle.id}, handle ${e.serverProviderHandle.handle}`),!1)}};t.JupyterRemoteCachedKernelValidator=l,t.JupyterRemoteCachedKernelValidator=l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ILiveRemoteKernelConnectionUsageTracker)),i(1,(0,o.inject)(a.IJupyterUriProviderRegistration))],l)},87130:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterServerProviderRegistry=t.JupyterServerCollectionImpl=void 0;const o=n(66828),s=n(86563),a=n(94433),c=n(42080),l=n(26594),u=n(20397),d=n(11642),h=n(15925);class p extends s.Disposables{set serverProvider(e){this._serverProvider=e,this._onDidChangeProvider.fire()}get serverProvider(){return this._serverProvider}set commandProvider(e){this._commandProvider=e,this._onDidChangeProvider.fire()}get commandProvider(){return this._commandProvider}constructor(e,t,n){super(),this.extensionId=e,this.id=t,this.label=n,this._onDidChangeProvider=new o.EventEmitter,this.onDidChangeProvider=this._onDidChangeProvider.event}}t.JupyterServerCollectionImpl=p;class f extends s.Disposables{get displayName(){return this.provider.label}get documentation(){return this.provider.documentation}get servers(){return Array.from(this._servers.values())}constructor(e,t){super(),this.provider=e,this.extensionId=t,this._servers=new Map,this._onDidChangeHandles=new o.EventEmitter,this.onDidChangeHandles=this._onDidChangeHandles.event,this.providerChanges=[],this.commands=new Map,this.id=e.id,this.hookupProviders(),this.provider.extensionId===h.JVSC_EXTENSION_ID&&(this.getServerUriWithoutAuthInfo=this.getServerUriWithoutAuthInfoImpl.bind(this))}dispose(){super.dispose(),(0,u.dispose)(this.providerChanges)}hookupProviders(){(0,u.dispose)(this.providerChanges),this.provider.serverProvider?.onDidChangeServers&&this.provider.serverProvider.onDidChangeServers((()=>{this._servers.clear(),this._onDidChangeHandles.fire()}),this,this.providerChanges)}async getQuickPickEntryItems(e){if(!this.provider.commandProvider)return[];const t=new o.CancellationTokenSource;try{let n=[];return this.provider.commandProvider.provideCommands?(n=await this.provider.commandProvider.provideCommands(e||"",t.token),n&&n.length||!Array.isArray(this.provider.commandProvider.commands)||!this.provider.commandProvider.commands.length||(n=this.provider.commandProvider.commands)):n=this.provider.commandProvider.commands||[],e||this.commands.clear(),n.forEach((e=>this.commands.set(e.label||e.title||"",e))),n.map((e=>({label:(0,u.stripCodicons)(e.label||e.title),detail:(0,u.stripCodicons)(e.description||e.detail),command:e})))}catch(e){return(0,d.traceError)(`Failed to get Jupyter Server Commands from ${this.provider.extensionId}#${this.provider.id}`,e),[]}finally{t.dispose()}}async handleQuickPick(e,t){if(!this.provider.commandProvider)throw new Error(`No Jupyter Server Command Provider for ${this.provider.extensionId}#${this.provider.id}`);const n=new o.CancellationTokenSource;try{const t=e.command;if(!t)throw new Error(`Jupyter Server Command ${e.label} not found in Command Provider ${this.provider.extensionId}#${this.provider.id}`);try{const e=await Promise.resolve(this.provider.commandProvider.handleCommand(t,n.token));return e?e.id:"back"}catch(t){if(t instanceof o.CancellationError)return;(0,d.traceError)(`Failed to execute Jupyter Server Command ${e.label} in Command Provider ${this.provider.extensionId}#${this.provider.id}`,t)}}finally{n.dispose()}}async getServerUri(e){const t=new o.CancellationTokenSource;if(!this.provider.serverProvider)throw new Error(`Server Provider not initialized, Extension: ${this.extensionId}:${this.id}, Server ${e}`);try{const n=await this.getServer(e,t.token);if(n.connectionInformation){const e=n.connectionInformation;return{baseUrl:e.baseUrl.toString(),displayName:n.label,token:e.token||"",authorizationHeader:e.headers,mappedRemoteNotebookDir:e.mappedRemoteNotebookDir?.toString(),webSocketProtocols:e.webSocketProtocols}}if(this.provider.serverProvider?.resolveJupyterServer){const e=await Promise.resolve(this.provider.serverProvider?.resolveJupyterServer(n,t.token)),r=e?.connectionInformation||n.connectionInformation;if(!r?.baseUrl)throw new Error(`Jupyter Provider ${this.id} does not implement the method resolveJupyterServer and/or baseUrl not returned`);return{baseUrl:r.baseUrl.toString(),displayName:n.label,token:r.token||"",authorizationHeader:r.headers,mappedRemoteNotebookDir:r.mappedRemoteNotebookDir?.toString(),webSocketProtocols:r.webSocketProtocols}}throw new Error("Jupyter Provider does not implement the method resolveJupyterServer")}finally{t.dispose()}}async getHandles(){if(!this.provider.serverProvider)return[];{const e=new o.CancellationTokenSource;try{return(await Promise.resolve(this.getServers(e.token))||[]).map((e=>e.id))}catch(e){return(0,d.traceError)(`Failed to get Jupyter Servers from ${this.provider.extensionId}#${this.provider.id}`,e),[]}finally{e.dispose()}}}async getServerUriWithoutAuthInfoImpl(e){const t=new o.CancellationTokenSource;try{return{baseUrl:"",token:"",displayName:(await this.getServer(e,t.token)).label}}finally{t.dispose()}}async getServer(e,t){const n=this._servers.get(e)||await Promise.resolve(this.getServers(t)).then((t=>(t||[]).find((t=>t.id===e))));if(n)return n;throw new Error(`Jupyter Server ${e} not found in Provider ${this.provider.extensionId}#${this.provider.id}`)}async getServers(e){if(this._servers.size)return Array.from(this._servers.values());if(!this.provider.serverProvider)throw new Error(`No Jupyter Server Provider for ${this.provider.extensionId}#${this.provider.id}`);const t=await Promise.resolve(this.provider.serverProvider.provideJupyterServers(e));return this._servers.clear(),(t||[]).forEach((e=>this._servers.set(e.id,e))),t}}let g=class extends s.Disposables{get onDidChangeCollections(){return this._onDidChangeCollections.event}get jupyterCollections(){return Array.from(this._collections.values())}constructor(e,t){super(),this.jupyterUriProviderRegistration=t,this._onDidChangeCollections=new o.EventEmitter,this._collections=new Map,e.push(this)}createJupyterServerCollection(e,t,n){const r=`${e}#${t}`;if(this._collections.has(r)&&e!==h.JVSC_EXTENSION_ID)throw new Error(`Jupyter Server Provider with id ${r} already exists`);const i=new p(e,t,n);let o,s;return this._collections.set(r,i),i.onDidChangeProvider((()=>{i.serverProvider&&(s?.dispose(),o?.dispose(),s=new f(i,e),o=this.jupyterUriProviderRegistration.registerProvider(s,e),this.disposables.push(o),this._onDidChangeCollections.fire({added:[i],removed:[]}))}),this,this.disposables),i.onDidDispose((()=>{s?.dispose(),o?.dispose(),this._collections.delete(r),this._onDidChangeCollections.fire({removed:[i],added:[]})}),this,this.disposables),i}};t.JupyterServerProviderRegistry=g,t.JupyterServerProviderRegistry=g=r([(0,l.injectable)(),i(0,(0,l.inject)(c.IDisposableRegistry)),i(1,(0,l.inject)(a.IJupyterUriProviderRegistration))],g)},20339:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getJupyterDisplayName=t.JupyterUriProviderRegistration=t.REGISTRATION_ID_EXTENSION_OWNER_MEMENTO_KEY=void 0;const c=n(26594),l=n(66828),u=n(15925),d=n(42080),h=n(85446),p=s(n(25251)),f=n(58681),g=n(9959),m=n(11642),v=n(86563),y=n(46875),b=n(20397);function w(e,t){return`${e}-${t}`}t.REGISTRATION_ID_EXTENSION_OWNER_MEMENTO_KEY="REGISTRATION_ID_EXTENSION_OWNER_MEMENTO_KEY";let S=class extends v.Disposables{get providers(){return this.loadOtherExtensions().catch(f.noop),Array.from(this._providers.values())}constructor(e,t,n){super(),this.extensions=e,this.globalMemento=n,this._onProvidersChanged=new l.EventEmitter,this._providers=new Map,this.extensionIdsThatHaveProviders=new Set,this.cachedDisplayNames=new Map,this.onDidChangeProviders=this._onProvidersChanged.event,t.push(this),this.disposables.push(this._onProvidersChanged),this.disposables.push(new l.Disposable((()=>this._providers.forEach((e=>e.dispose())))))}activate(){}async getProvider(e,t){this.loadOtherExtensions().catch(f.noop);const n=this._providers.get(w(e,t));if(n)return n;try{await this.loadExtension(e,t)}catch(t){return void(0,m.traceError)(`Failed to load the extension ${e}`,t)}return this._providers.get(w(e,t))}registerProvider(e,t){const n=w(t,e.id);if(this._providers.has(n))throw new Error(`IJupyterUriProvider already exists with id ${n}`);this.trackExtensionWithProvider(t).catch(f.noop),this._providers.set(n,new _(e,t)),this._onProvidersChanged.fire();const r={dispose:()=>{this._providers.get(n)?.dispose(),this._providers.delete(n),this._onProvidersChanged.fire()}};return this.disposables.push(r),r}async getJupyterServerUri(e,t){const n=w(e.extensionId,e.id);this._providers.get(n)||await this.loadExtension(e.extensionId,e.id);const r=this._providers.get(n);if(!r)throw new Error(`Provider Id=${n} and handle=${e.handle} not registered. Did you uninstall the extension ${e.extensionId}?`);const i=await r.getServerUri(e.handle,t);return this.cachedDisplayNames.set((0,y.generateIdFromRemoteProvider)(e),i.displayName),i}async getDisplayNameIfProviderIsLoaded(e){if(this.cachedDisplayNames.has((0,y.generateIdFromRemoteProvider)(e)))return this.cachedDisplayNames.get((0,y.generateIdFromRemoteProvider)(e));const t=w(e.extensionId,e.id);this._providers.get(t)||await this.loadExtension(e.extensionId,e.id);const n=this._providers.get(t);if(!n)return void(0,m.traceVerbose)(`Provider Id=${t} and handle=${e.handle} not registered. Extension ${e.extensionId} may not have yet loaded or provider not yet registered?`);const r=await n.getServerUri(e.handle,!0);return this.cachedDisplayNames.set((0,y.generateIdFromRemoteProvider)(e),r.displayName),r.displayName}async loadExtension(e,t){if(e===u.JVSC_EXTENSION_ID)return;this.loadOtherExtensions().catch(f.noop);const n=this.extensions.getExtension(e);if(!n)throw new Error(`Extension '${e}' that provides Jupyter Server '${t}' not found`);n.isActive||await n.activate().then(f.noop,f.noop)}loadOtherExtensions(){return this.loadedOtherExtensionsPromise||(this.loadedOtherExtensionsPromise=this.loadOtherExtensionsImpl()),this.loadedOtherExtensionsPromise}async loadOtherExtensionsImpl(){this.loadListOfExtensionsWithProviders();const e=new Set;this.globalMemento.get(t.REGISTRATION_ID_EXTENSION_OWNER_MEMENTO_KEY,[]).forEach((t=>e.add(t.extensionId)));const n=this.extensions.all.filter((t=>t.packageJSON?.contributes?.pythonRemoteServerProvider||e.has(t.id))).filter((e=>e.id!==u.JVSC_EXTENSION_ID));await Promise.all(n.map((e=>e.isActive?Promise.resolve():e.activate().then(f.noop,f.noop))))}async trackExtensionWithProvider(e){this.loadListOfExtensionsWithProviders(),this.extensionIdsThatHaveProviders.add(e);const n=Array.from(this.extensionIdsThatHaveProviders.values()).map((e=>({extensionId:e})));await this.globalMemento.update(t.REGISTRATION_ID_EXTENSION_OWNER_MEMENTO_KEY,n)}loadListOfExtensionsWithProviders(){this.globalMemento.get(t.REGISTRATION_ID_EXTENSION_OWNER_MEMENTO_KEY,[]).forEach((e=>this.extensionIdsThatHaveProviders.add(e.extensionId)))}};t.JupyterUriProviderRegistration=S,o([(0,h.swallowExceptions)()],S.prototype,"trackExtensionWithProvider",null),t.JupyterUriProviderRegistration=S=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IExtensions)),a(1,(0,c.inject)(d.IDisposableRegistry)),a(2,(0,c.inject)(d.IMemento)),a(2,(0,c.named)(d.GLOBAL_MEMENTO))],S);const C=new Set;class _ extends v.Disposables{get displayName(){return(0,b.stripCodicons)(this.provider.displayName)}get detail(){return(0,b.stripCodicons)(this.provider.detail)}get documentation(){return this.provider.documentation}get servers(){return this.provider.servers}get onDidChangeHandles(){return this.provider.onDidChangeHandles}constructor(e,t){super(),this.provider=e,this.extensionId=t,this.id=this.provider.id,e.getHandles&&(this.getHandles=async()=>e.getHandles())}async getQuickPickEntryItems(e){return this.provider.getQuickPickEntryItems?(await this.provider.getQuickPickEntryItems(e)).map((e=>(e.label=(0,b.stripCodicons)(e.label),e.detail=(0,b.stripCodicons)(e.detail),{...e,description:p.DataScience.uriProviderDescriptionFormat(e.description||"",this.extensionId),original:e}))):[]}async handleQuickPick(e,t){if(this.provider.handleQuickPick)return"original"in e&&e.original?this.provider.handleQuickPick(e.original,t):this.provider.handleQuickPick(e,t)}async getServerUri(e,t){const n=this.provider;if(t&&this.id.startsWith("_builtin")&&n.getServerUriWithoutAuthInfo)return n.getServerUriWithoutAuthInfo(e);const r=await this.provider.getServerUri(e);if(!this.id.startsWith("_builtin")&&!C.has(e)){C.add(e);const t=[];Object.keys(r).forEach((e=>{const n=r[e];n&&("object"!=typeof n||0!==Object.keys(n).length||n instanceof Date)&&t.push(e)})),(0,g.sendTelemetryEvent)(u.Telemetry.JupyterServerProviderResponseApi,void 0,{providerId:this.id,extensionId:this.extensionId,pemUsed:t})}return r}}t.getJupyterDisplayName=async function(e,t,n){return await t.getDisplayNameIfProviderIsLoaded(e)||n||`${e.id}:${e.handle}`}},21493:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveRemoteKernelConnectionUsageTracker=t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources=void 0;const o=n(26594),s=n(42080),a=n(58681),c=n(46875),l=n(94433);t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources="removeKernelUrisAndSessionsUsedByResources";let u=class{constructor(e,t,n){this.disposables=e,this.uriStorage=t,this.memento=n,this.usedRemoteKernelServerIdsAndSessions={}}activate(){this.usedRemoteKernelServerIdsAndSessions=this.memento.get(t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources,{}),this.uriStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables)}wasKernelUsed(e){const t=(0,c.generateIdFromRemoteProvider)(e.serverProviderHandle);return t in this.usedRemoteKernelServerIdsAndSessions&&"string"==typeof e.kernelModel.id&&e.kernelModel.id in this.usedRemoteKernelServerIdsAndSessions[t]}trackKernelIdAsUsed(e,n,r){const i=(0,c.generateIdFromRemoteProvider)(n);this.usedRemoteKernelServerIdsAndSessions[i]=this.usedRemoteKernelServerIdsAndSessions[i]||{},this.usedRemoteKernelServerIdsAndSessions[i][r]=this.usedRemoteKernelServerIdsAndSessions[i][r]||[];const o=this.usedRemoteKernelServerIdsAndSessions[i][r];o.includes(e.toString())||(o.push(e.toString()),this.memento.update(t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources,this.usedRemoteKernelServerIdsAndSessions).then(a.noop,a.noop))}trackKernelIdAsNotUsed(e,n,r){const i=(0,c.generateIdFromRemoteProvider)(n);if(!(i in this.usedRemoteKernelServerIdsAndSessions))return;if(!(r in this.usedRemoteKernelServerIdsAndSessions[i]))return;const o=this.usedRemoteKernelServerIdsAndSessions[i][r];Array.isArray(o)&&o.includes(e.toString())&&(o.splice(o.indexOf(e.toString()),1),0===o.length&&delete this.usedRemoteKernelServerIdsAndSessions[i][r],0===Object.keys(this.usedRemoteKernelServerIdsAndSessions[i]).length&&delete this.usedRemoteKernelServerIdsAndSessions[i],this.memento.update(t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources,this.usedRemoteKernelServerIdsAndSessions).then(a.noop,a.noop))}onDidRemoveServers(e){e.forEach((e=>{const n=(0,c.generateIdFromRemoteProvider)(e);delete this.usedRemoteKernelServerIdsAndSessions[n],this.memento.update(t.mementoKeyToTrackRemoveKernelUrisAndSessionsUsedByResources,this.usedRemoteKernelServerIdsAndSessions).then(a.noop,a.noop)}))}};t.LiveRemoteKernelConnectionUsageTracker=u,t.LiveRemoteKernelConnectionUsageTracker=u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDisposableRegistry)),i(1,(0,o.inject)(l.IJupyterServerUriStorage)),i(2,(0,o.inject)(s.IMemento)),i(2,(0,o.named)(s.GLOBAL_MEMENTO))],u)},6428:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PreferredRemoteKernelIdProvider=t.MaximumKernelIdListSize=t.ActiveKernelIdList=void 0;const s=n(26594),a=o(n(50361)),c=n(11642),l=n(35412),u=n(42080);t.ActiveKernelIdList="Active_Kernel_Id_List",t.MaximumKernelIdListSize=100;let d=class{constructor(e,t){this.globalMemento=e,this.crypto=t}async getPreferredRemoteKernelId(e){const n=this.globalMemento.get(t.ActiveKernelIdList,[]);if(n.length){const t=await this.crypto.createHash(e.toString()),r=n.find((e=>e.fileHash===t));return(0,c.traceVerbose)(`Preferred Remote kernel for ${(0,l.getDisplayPath)(e)} is ${r?.kernelId}`),r?.kernelId}}async clearPreferredRemoteKernelId(e){await this.updatePreferredRemoteKernelIdInternal(e)}async storePreferredRemoteKernelId(e,t){await this.updatePreferredRemoteKernelIdInternal(e,t)}async updatePreferredRemoteKernelIdInternal(e,n){let r=!1;const i=(0,a.default)(this.globalMemento.get(t.ActiveKernelIdList,[])),o=await this.crypto.createHash(e.toString()),s=i.findIndex((e=>e.fileHash===o));for(s>=0&&(r=!0,i.splice(s,1)),n&&(r=!0,i.push({fileHash:o,kernelId:n}),(0,c.traceVerbose)(`Storing Preferred remote kernel for ${(0,l.getDisplayPath)(e)} is ${n}`));i.length>t.MaximumKernelIdListSize;)r=!0,i.shift();r&&await this.globalMemento.update(t.ActiveKernelIdList,i)}};t.PreferredRemoteKernelIdProvider=d,t.PreferredRemoteKernelIdProvider=d=r([(0,s.injectable)(),i(0,(0,s.inject)(u.IMemento)),i(0,(0,s.named)(u.GLOBAL_MEMENTO)),i(1,(0,s.inject)(u.ICryptoUtils))],d)},64676:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteJupyterServerMruUpdate=void 0;const o=n(26594),s=n(66828),a=n(20397),c=n(42080),l=n(58681),u=n(94433),d=n(94062);let h=class{constructor(e,t,n){this.serverStorage=e,this.kernelProvider=t,this.disposables=[],this.monitoredKernels=new WeakSet,this.timeouts=new Set,n.push(this)}dispose(){(0,a.dispose)(this.disposables),(0,a.dispose)(Array.from(this.timeouts.values()))}activate(){this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposables),this.kernelProvider.onDidRestartKernel(this.onDidStartKernel,this,this.disposables)}onDidStartKernel(e){const t=e.kernelConnectionMetadata;if(!(0,d.isRemoteConnection)(t)||this.monitoredKernels.has(e))return;this.monitoredKernels.add(e);const n=[];this.disposables.push(new s.Disposable((()=>(0,a.dispose)(n))));const r=()=>{if((0,a.dispose)(n),e.disposed||e.disposing)return;const r=setTimeout((()=>{this.serverStorage.update(t.serverProviderHandle).catch(l.noop)}),1e3);n.push(new s.Disposable((()=>clearTimeout(r))))};this.kernelProvider.getKernelExecution(e).onPreExecute(r,this,this.disposables),r()}};t.RemoteJupyterServerMruUpdate=h,t.RemoteJupyterServerMruUpdate=h=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IJupyterServerUriStorage)),i(1,(0,o.inject)(d.IKernelProvider)),i(2,(0,o.inject)(c.IDisposableRegistry))],h)},77806:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterServerSelector=void 0;const o=n(26594),s=n(10053),a=n(11642),c=n(94433),l=n(42080),u=n(70798),d=n(15925);let h=class{constructor(e,t,n,r,i){this.serverUriStorage=e,this.jupyterConnection=t,this.workspaceService=n,this.disposableRegistry=r,this.serverProviderRegistry=i}async addJupyterServer(e){try{await this.jupyterConnection.validateRemoteUri(e)}catch(t){return void(0,a.traceError)(`Error in validating the Remote Uri ${e.id}.${e.handle}`,t)}(e.extensionId!==d.JVSC_EXTENSION_ID||e.id!==d.TestingKernelPickerProviderId)&&([d.JVSC_EXTENSION_ID,d.JUPYTER_HUB_EXTENSION_ID].includes(e.extensionId)||this.serverProviderRegistry.jupyterCollections.some((t=>t.extensionId===e.extensionId)))||await this.serverUriStorage.add(e)}};t.JupyterServerSelector=h,t.JupyterServerSelector=h=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IJupyterServerUriStorage)),i(1,(0,o.inject)(u.JupyterConnection)),i(2,(0,o.inject)(s.IWorkspaceService)),i(3,(0,o.inject)(l.IDisposableRegistry)),i(4,(0,o.inject)(c.IJupyterServerProviderRegistry))],h)},37594:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterServerUriStorage=void 0;const c=n(66828),l=n(26594),u=n(10053),d=n(15925),h=n(42080),p=n(11642),f=n(46875),g=n(83599),m=s(n(52859)),v=n(58681),y=n(86563);let b=class extends y.Disposables{get onDidLoad(){return this._onDidLoad.event}get onDidChange(){return this._onDidChangeUri.event}get onDidRemove(){return this._onDidRemoveUris.event}get onDidAdd(){return this._onDidAddUri.event}get all(){return this._all}constructor(e,t,n,r,i){super(),this.context=r,this._onDidLoad=new c.EventEmitter,this._onDidChangeUri=new c.EventEmitter,this._onDidRemoveUris=new c.EventEmitter,this._onDidAddUri=new c.EventEmitter,this._all=[],i.push(this);const o=c.Uri.joinPath(this.context.globalStorageUri,"remoteServersMRUList.json");this.oldStorage=new w(e,t),this.newStorage=new S(n,o,this.oldStorage,t),this.disposables.push(this._onDidLoad),this.disposables.push(this._onDidAddUri),this.disposables.push(this._onDidChangeUri),this.disposables.push(this._onDidRemoveUris),this.disposables.push(this.newStorage)}hookupStorageEvents(){this.storageEventsHooked||(this.storageEventsHooked=!0,this.newStorage.onDidAdd((e=>this._onDidAddUri.fire(e)),this,this.disposables),this.newStorage.onDidChange((e=>this._onDidChangeUri.fire(e)),this,this.disposables),this.newStorage.onDidRemove((e=>this._onDidRemoveUris.fire(e)),this,this.disposables))}async getAll(){this.hookupStorageEvents(),await this.newStorage.migrateMRU();const e=this._all;return this._all=await this.newStorage.getAll(),e.length===this._all.length&&JSON.stringify(this._all)===JSON.stringify(e)||this._onDidLoad.fire(),this._all}async clear(){this.hookupStorageEvents(),await this.newStorage.migrateMRU(),await Promise.all([this.oldStorage.clear(),this.newStorage.clear()]),this._all=[],this._onDidLoad.fire()}async add(e,t){this.hookupStorageEvents(),await this.newStorage.migrateMRU(),(0,p.traceInfoIfCI)(`setUri: ${e.id}.${e.handle}`);const n={time:t?.time??Date.now(),displayName:"",provider:e};await this.newStorage.add(n),this.getAll().catch(v.noop)}async update(e){this.hookupStorageEvents(),await this.newStorage.migrateMRU(),await this.newStorage.update(e),this.getAll().catch(v.noop)}async remove(e){this.hookupStorageEvents(),await this.newStorage.migrateMRU(),await this.newStorage.remove(e),this.getAll().catch(v.noop)}};t.JupyterServerUriStorage=b,t.JupyterServerUriStorage=b=o([(0,l.injectable)(),a(0,(0,l.inject)(u.IEncryptedStorage)),a(1,(0,l.inject)(h.IMemento)),a(1,(0,l.named)(h.GLOBAL_MEMENTO)),a(2,(0,l.inject)(g.IFileSystem)),a(3,(0,l.inject)(h.IExtensionContext)),a(4,(0,l.inject)(h.IDisposableRegistry))],b);let w=class{constructor(e,t){this.encryptedStorage=e,this.globalMemento=t}async getAllRaw(){const e=this.globalMemento.get(d.Settings.JupyterServerUriList);if(!Array.isArray(e)||0===e.length)return[];const t=await this.encryptedStorage.retrieve(d.Settings.JupyterServerRemoteLaunchService,d.Settings.JupyterServerRemoteLaunchUriListKey);if(!t)return[];const n=t.split(d.Settings.JupyterServerRemoteLaunchUriSeparator),r=[];return await Promise.all(n.slice(0,Math.min(n.length,e.length)).map((async(t,n)=>{const i=t.split(d.Settings.JupyterServerRemoteLaunchNameSeparator),o=i[0];if(o!==d.Settings.JupyterServerLocalLaunch)try{const t=(0,f.extractJupyterServerHandleAndId)(o),s=i[1]!==d.Settings.JupyterServerRemoteLaunchUriEqualsDisplayName&&i[1]?i[1]:o;r.push({time:e[n].time,displayName:s,provider:t})}catch(e){o.startsWith(d.Identifiers.REMOTE_URI)&&(0,p.traceError)("Failed to parse stored Uri information",e)}}))),(0,p.traceVerbose)(`Found ${r.length} saved URIs, ${JSON.stringify(r)}`),r}async clear(){await this.globalMemento.update(d.Settings.JupyterServerUriList,[]).then(v.noop,v.noop),await this.encryptedStorage.store(d.Settings.JupyterServerRemoteLaunchService,d.Settings.JupyterServerRemoteLaunchUriListKey,void 0).then(v.noop,v.noop)}};w=o([a(0,(0,l.inject)(u.IEncryptedStorage)),a(1,(0,l.inject)(h.IMemento)),a(1,(0,l.named)(h.GLOBAL_MEMENTO))],w);class S{get onDidChange(){return this._onDidChangeUri.event}get onDidRemove(){return this._onDidRemoveUris.event}get onDidAdd(){return this._onDidAddUri.event}constructor(e,t,n,r){this.fs=e,this.storageFile=t,this.oldStorage=n,this.memento=r,this._onDidChangeUri=new c.EventEmitter,this._onDidRemoveUris=new c.EventEmitter,this._onDidAddUri=new c.EventEmitter,this.updatePromise=Promise.resolve(),this.mementoKey=`MEMENTO_KEY_FOR_STORING_USED_JUPYTER_PROVIDERS_${c.env.machineId}`}dispose(){this._onDidAddUri.dispose(),this._onDidChangeUri.dispose(),this._onDidRemoveUris.dispose()}async migrateMRU(){if(!this.migration){if(this.memento.get(this.mementoKey))return void(this.migration=Promise.resolve());this.migration=this.migrateToStorageFile().then((()=>this.migrateToMemento()))}return this.migration}async migrateToStorageFile(){if(await this.fs.exists(this.storageFile))return;const e=await this.oldStorage.getAllRaw(),t=m.dirname(this.storageFile);await this.fs.exists(t)||await this.fs.createDirectory(t);const n=e.map((e=>({serverHandle:e.provider,displayName:e.displayName||"",time:e.time})));await this.fs.writeFile(this.storageFile,JSON.stringify(n))}async migrateToMemento(){if(this.memento.get(this.mementoKey))return;if(!await this.fs.exists(this.storageFile))return void await this.memento.update(this.mementoKey,[]);const e=await this.fs.readFile(this.storageFile),t=[];JSON.parse(e).map((e=>{e.serverHandle.extensionId=e.serverHandle.extensionId||(0,f.getOwnerExtensionOfProviderHandle)(e.serverHandle.id)||"",e.serverHandle.extensionId&&t.push(e)})),await Promise.all([this.fs.delete(this.storageFile).catch(v.noop),this.memento.update(this.mementoKey,t)])}async add(e){return this.updatePromise=this.updatePromise.then((async()=>{const t=this.getAll(),n=t.find((t=>(0,f.generateIdFromRemoteProvider)(t.provider)===(0,f.generateIdFromRemoteProvider)(e.provider))),r=[{displayName:e.displayName||n?.displayName||(0,f.generateIdFromRemoteProvider)(e.provider),serverHandle:e.provider,time:e.time}].concat(t.sort(((e,t)=>t.time-e.time)).filter((t=>(0,f.generateIdFromRemoteProvider)(t.provider)!==(0,f.generateIdFromRemoteProvider)(e.provider))).map((e=>({displayName:e.displayName,serverHandle:e.provider,time:e.time})))),i=r.splice(d.Settings.JupyterServerUriListMax);if(await this.memento.update(this.mementoKey,r),n||this._onDidAddUri.fire(e),i.length){const e=i.map((e=>({provider:e.serverHandle,time:e.time,displayName:e.displayName||""})));this._onDidRemoveUris.fire(e.map((e=>e.provider)))}this._onDidChangeUri.fire()})).catch(v.noop)}async update(e){const t=this.getAll().find((t=>t.provider.id===e.id&&t.provider.handle===e.handle));if(!t&&e.extensionId!==d.JVSC_EXTENSION_ID&&e.extensionId!==d.JUPYTER_HUB_EXTENSION_ID)throw new Error(`Uri not found for Server Id ${JSON.stringify(e)}`);const n={provider:e,time:Date.now(),displayName:t?.displayName||""};await this.add(n)}async remove(e){await(this.updatePromise=this.updatePromise.then((async()=>{let t=!1;try{const n=this.getAll();if(0===n.length)return;const r=n.filter((t=>t.provider.id!==e.id||t.provider.handle!==e.handle)),i=n.filter((t=>t.provider.id===e.id&&t.provider.handle===e.handle));if(0===r.length)await this.clear();else if(i.length){const e=r.map((e=>({displayName:e.displayName,serverHandle:e.provider,time:e.time})));t=!0,await this.memento.update(this.mementoKey,e),this._onDidRemoveUris.fire(i.map((e=>e.provider)))}}finally{t||this._onDidRemoveUris.fire([e])}})).catch((e=>{console.error(e)})))}getAll(){const e=this.memento.get(this.mementoKey,[]),t=[];return e.forEach((async e=>{const n=(0,f.generateIdFromRemoteProvider)(e.serverHandle),r={time:e.time,displayName:e.displayName||n,provider:e.serverHandle};t.push(r)})),t}async clear(){const e=this.getAll();await this.memento.update(this.mementoKey,[]),e.length&&this._onDidRemoveUris.fire(e.map((e=>e.provider)))}}},97480:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelSpecCacheFileName=void 0,t.RemoteKernelSpecCacheFileName="remoteKernelSpecCache.json"},89566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelFinder=void 0;const r=n(66828),i=n(98729),o=n(94062),s=n(85493),a=n(11642),c=n(6491),l=n(58681),u=n(38994),d=n(20397),h=n(74075),p=n(35412),f=n(72584),g=n(25251),m=n(15925),v=n(46875),y=n(97480),b=n(78624);t.RemoteKernelFinder=class{get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._onDidChangeStatus.fire())}get lastError(){return this._lastError}get kernels(){return this.cache}get items(){return this.kernels}get title(){return this.displayName}constructor(e,t,n,i,o,s,a,c,l,d){this.id=e,this.displayName=t,this.env=n,this.cachedRemoteKernelValidator=i,this.kernelProvider=s,this.serverProviderHandle=a,this.jupyterConnection=c,this.fs=l,this.context=d,this._status="idle",this._onDidChangeStatus=new r.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this.promiseMonitor=new h.PromiseMonitor,this.kernelIdsToHide=new Set,this.kind=u.ContributedKernelFinderKind.Remote,this.cache=[],this._onDidChangeKernels=new r.EventEmitter,this.onDidChangeKernels=this._onDidChangeKernels.event,this._onDidChange=new r.EventEmitter,this.onDidChange=this._onDidChange.event,this.disposables=[],this.cacheFile=r.Uri.joinPath(d.globalStorageUri,y.RemoteKernelSpecCacheFileName),this.cacheKey=(0,v.generateIdFromRemoteProvider)(a),this.disposables.push(o.registerKernelFinder(this)),this._onDidChangeKernels.event((()=>this._onDidChange.fire()),this,this.disposables),this.disposables.push(this._onDidChangeKernels),this.disposables.push(this._onDidChange),this.disposables.push(this._onDidChangeStatus),this.disposables.push(this.promiseMonitor)}dispose(){this.kernelDisposeDelayTimer&&clearTimeout(this.kernelDisposeDelayTimer),(0,d.dispose)(this.disposables)}async activate(){this.promiseMonitor.onStateChange((()=>{this.status=this.promiseMonitor.isComplete?"idle":"discovering"})),this.loadCache().then(l.noop,l.noop),this.kernelProvider.onDidStartKernel((e=>{(0,o.isRemoteConnection)(e.kernelConnectionMetadata)&&this.updateCache().then(l.noop,l.noop)}),this,this.disposables),this.kernelProvider.onDidDisposeKernel((e=>{if(e&&(0,o.isRemoteConnection)(e.kernelConnectionMetadata)){this.kernelDisposeDelayTimer&&(clearTimeout(this.kernelDisposeDelayTimer),this.kernelDisposeDelayTimer=void 0);const e=setTimeout((()=>{this.updateCache().then(l.noop,l.noop)}),2e3);return this.kernelDisposeDelayTimer=e,e}}),this,this.disposables)}async refresh(){await this.loadCache(!0,!0)}getListOfKernelsWithCachedConnection(e,t=!1){const n=!!this.cachedConnection;return this.cachedConnection=this.cachedConnection||this.getRemoteConnectionInfo(e),this.cachedConnection.then((e=>(e&&!n&&(this.cachedConnection=Promise.resolve(e)),e?this.listKernelsFromConnection(e):Promise.resolve([])))).catch((r=>n?this.getListOfKernelsWithCachedConnection(e,t):(this.cachedConnection=void 0,Promise.reject(r))))}async loadCache(e=!1,t=!1){(0,a.traceInfoIfCI)(`Remote Kernel Finder load cache Server: ${this.id}`);const n=(async()=>{const n=e?[]:await this.getFromCache();let i=[];if(!e&&Array.isArray(n)&&n.length>0)i=n,this.updateCache().then(l.noop,l.noop),this.loadCache(!0).then(l.noop,l.noop);else try{i=await this.getListOfKernelsWithCachedConnection(t),this._lastError=void 0}catch(e){e instanceof r.CancellationError||((0,a.traceError)("UniversalRemoteKernelFinder: Failed to get kernels without cache",e),this._lastError=e,this._onDidChange.fire())}await this.writeToCache(i)})();this.promiseMonitor.push(n),await n}async updateCache(){const e=(async()=>{let e=[];this._cacheUpdateCancelTokenSource?.dispose();const t=new r.CancellationTokenSource;this._cacheUpdateCancelTokenSource=t;try{e=await this.getListOfKernelsWithCachedConnection(!1)}catch(n){(0,a.traceWarning)(`Could not fetch kernels from the ${this.kind} server, falling back to cache: ${n}`),e=await this.getFromCache(t.token),e=e.filter((e=>"connectToLiveRemoteKernel"===e.kind))}t.token.isCancellationRequested||await this.writeToCache(e)})();this.promiseMonitor.push(e),await e}async getRemoteConnectionInfo(e=!0){const t=[];return e&&t.push(f.KernelProgressReporter.createProgressReporter(void 0,g.DataScience.connectingToJupyter)),this.jupyterConnection.createConnectionInfo(this.serverProviderHandle).finally((()=>(0,d.dispose)(t)))}async getFromCache(e){try{let t=this.cache;t&&0!==t.length||(t=await this.getCacheContents());const n=[],r=Promise.all(t.map((async e=>{await this.isValidCachedKernel(e)&&n.push(e)})));return await(0,c.raceCancellation)(e,r),n}catch(e){(0,a.traceError)("UniversalRemoteKernelFinder: Failed to get from cache",e)}return[]}async getCacheContents(){try{const e=await this.fs.readFile(this.cacheFile),t=JSON.parse(e);if(t.extensionVersion!==this.env.extensionVersion)return[];const n=t.data[this.cacheKey]||[];return Array.isArray(n)?n.map((e=>o.BaseKernelConnectionMetadata.fromJSON(e))):[]}catch{return[]}}async listKernelsFromConnection(e){const t=[];try{const n=b.JupyterLabHelper.create(e.settings);t.push(n);const[r,a,c,l]=await Promise.all([n.getRunningKernels(),n.getKernelSpecs(),n.getRunningSessions(),(0,v.computeServerId)(e.serverProviderHandle)]),u=a.map((t=>((0,s.sendKernelSpecTelemetry)(t,"remote"),o.RemoteKernelSpecConnectionMetadata.create({kernelSpec:t,id:(0,i.getKernelId)(t,void 0,l),baseUrl:e.baseUrl,serverProviderHandle:e.serverProviderHandle}))));return[...c.map((t=>{const n=t.kernel,i=n.last_activity?new Date(Date.parse(n.last_activity.toString())):new Date,s=n.connections?parseInt(n.connections.toString(),10):0,c=r.find((e=>e.id===t.kernel?.id))||{},l=a.find((e=>e.name===t.kernel?.name))||{};return o.LiveRemoteKernelConnectionMetadata.create({kernelModel:{...t.kernel,...l,...c,name:t.kernel?.name||"",lastActivityTime:i,numberOfConnections:s,model:t},baseUrl:e.baseUrl,id:t.kernel?.id||"",serverProviderHandle:e.serverProviderHandle})})).filter((e=>!this.kernelIdsToHide.has(e.kernelModel.id||""))),...u]}catch(t){throw(0,a.traceError)(`Error fetching kernels from ${e.baseUrl} (${e.displayName}):`,t),t}finally{await Promise.all(t.map((e=>e.dispose().catch(l.noop))))}}async writeToCache(e){try{(0,a.traceVerbose)(`UniversalRemoteKernelFinder: Writing ${e.length} remote kernel connection metadata to cache`);const t=this.cache,n=new Map(t.map((e=>[e.id,e]))),i=new Map(e.map((e=>[e.id,e]))),o=e.filter((e=>!n.has(e.id))),s=e.filter((e=>n.has(e.id)&&!(0,l.areObjectsWithUrisTheSame)(e,n.get(e.id)))),c=t.filter((e=>!i.has(e.id))),u=this.cacheKey;this.cache=t.filter((e=>i.has(e.id))).concat(o),this.cache.forEach((e=>{const t=i.get(e.id);e!==t&&"connectToLiveRemoteKernel"===t.kind&&"connectToLiveRemoteKernel"===e.kind&&e.updateModel(t.kernelModel)}));const d=e.map((e=>e.toJSON()));let h={extensionVersion:this.env.extensionVersion,data:{}};try{const e=await this.fs.readFile(this.cacheFile),t=JSON.parse(e);t.extensionVersion===this.env.extensionVersion&&(h=t)}catch{}h.data[u]=d,await this.fs.createDirectory(this.context.globalStorageUri).then((()=>this.fs.writeFile(this.cacheFile,JSON.stringify(h)))).catch((e=>{(0,a.traceError)("Failed to cache the remote kernels.",e)})),(o.length||s.length||c.length)&&this._onDidChangeKernels.fire({removed:c}),e.length&&(this.cacheLoggingTimeout&&clearTimeout(this.cacheLoggingTimeout),this.cacheLoggingTimeout=setTimeout((()=>{(0,a.traceVerbose)(`Updating cache with Remote kernels ${e.map((e=>`${e.kind}:'${e.id} (interpreter id = ${(0,p.getDisplayPath)(e.interpreter?.id)})'`)).join(", ")}, Added = ${o.map((e=>`${e.kind}:'${e.id} (interpreter id = ${(0,p.getDisplayPath)(e.interpreter?.id)})'`)).join(", ")}, Updated = ${s.map((e=>`${e.kind}:'${e.id} (interpreter id = ${(0,p.getDisplayPath)(e.interpreter?.id)})'`)).join(", ")}, Removed = ${c.map((e=>`${e.kind}:'${e.id} (interpreter id = ${(0,p.getDisplayPath)(e.interpreter?.id)})'`)).join(", ")}`)}),(0,m.isUnitTestExecution)()?0:15e3),this.disposables.push(new r.Disposable((()=>clearTimeout(this.cacheLoggingTimeout)))))}catch(e){(0,a.traceError)("UniversalRemoteKernelFinder: Failed to write to cache",e)}}async isValidCachedKernel(e){switch(e.kind){case"startUsingRemoteKernelSpec":return!1;case"connectToLiveRemoteKernel":return this.cachedRemoteKernelValidator.isValid(e)}}}},30416:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelFinderController=void 0;const o=n(26594),s=n(94062),a=n(42080),c=n(94433),l=n(58681),u=n(10053),d=n(89566),h=n(70798),p=n(83599),f=n(38994),g=n(46875),m=n(85446),v=n(66828),y=n(11642);let b=class{constructor(e,t,n,r,i,o,s,a,c,l,u){this.serverUriStorage=e,this.env=t,this.cachedRemoteKernelValidator=n,this.kernelFinder=r,this.kernelProvider=i,this.jupyterConnection=o,this.disposables=s,this.fs=a,this.context=c,this.jupyterPickerRegistration=l,this.jupyterServerProviderRegistry=u,this.serverFinderMapping=new Map,this.handledProviders=new WeakSet,this.mappedProviders=new WeakSet,this.mappedServers=new Set}activate(){this.serverUriStorage.onDidAdd((e=>this.validateAndCreateFinder(e)),this,this.disposables),this.serverUriStorage.onDidChange(this.buildListOfFinders,this,this.disposables),this.serverUriStorage.onDidLoad(this.handleProviderChanges,this,this.disposables),this.jupyterPickerRegistration.onDidChangeProviders(this.handleProviderHandleChanges,this,this.disposables),this.serverUriStorage.onDidRemove(this.urisRemoved,this,this.disposables),this.jupyterServerProviderRegistry.onDidChangeCollections(this.handleProviderChanges,this,this.disposables),this.buildListOfFinders(),this.handleProviderChanges().catch(l.noop)}buildListOfFinders(){this.serverUriStorage.getAll().then((e=>e.map((e=>this.validateAndCreateFinder(e).catch(l.noop))))).catch(l.noop)}handleProviderHandleChanges(){this.jupyterPickerRegistration.providers.forEach((e=>{this.handledProviders.has(e)||(this.handledProviders.add(e),e.onDidChangeHandles&&e.onDidChangeHandles(this.buildListOfFinders,this,this.disposables))})),this.buildListOfFinders()}async handleProviderChanges(){if(!this.serverUriStorage.all.length)return;const e=new v.CancellationTokenSource;this.disposables.push(e),await Promise.all(this.jupyterServerProviderRegistry.jupyterCollections.map((e=>{const t=e.serverProvider;if(t&&!this.mappedProviders.has(t))return this.mappedProviders.add(t),t?.onDidChangeServers&&t?.onDidChangeServers((()=>this.lookForServersInCollection(e)),this,this.disposables),this.serverUriStorage.onDidLoad((()=>this.lookForServersInCollection(e)),this,this.disposables),this.lookForServersInCollection(e).catch(l.noop)}))),e.dispose()}async lookForServersInCollection(e){if(!this.serverUriStorage.all.length)return;const t=new Set(this.serverUriStorage.all.map((e=>(0,g.generateIdFromRemoteProvider)(e.provider)))),n=e.serverProvider;if(!n)return;const r=new v.CancellationTokenSource;try{(await Promise.resolve(n.provideJupyterServers(r.token))||[]).forEach((n=>{const r={extensionId:e.extensionId,handle:n.id,id:e.id},i=(0,g.generateIdFromRemoteProvider)(r);!this.mappedServers.has(i)&&t.has(i)&&(this.mappedServers.add(i),this.createRemoteKernelFinder(r,n.label))}))}catch(t){(0,y.traceError)(`Failed to get servers for Collection ${e.id} in ${e.extensionId}`,t)}finally{r.dispose()}}async validateAndCreateFinder(e){const t=(0,g.generateIdFromRemoteProvider)(e.provider);if(this.serverFinderMapping.has(t))return;const n=new v.CancellationTokenSource;await Promise.all([(async()=>{const t=this.jupyterServerProviderRegistry.jupyterCollections.find((t=>t.extensionId===e.provider.extensionId&&t.id===e.provider.id));if(!t||!t.serverProvider)return;const r=await t.serverProvider.provideJupyterServers(n.token),i=r?.find((t=>t.id===e.provider.handle))?.label;i&&this.createRemoteKernelFinder(e.provider,i)})().catch(l.noop),(async()=>{const t=await this.jupyterPickerRegistration.getDisplayNameIfProviderIsLoaded(e.provider);t&&this.createRemoteKernelFinder(e.provider,t)})().catch(l.noop)]),n.dispose()}getOrCreateRemoteKernelFinder(e,t){const n=(0,g.generateIdFromRemoteProvider)(e);if(!this.serverFinderMapping.has(n)){const r=new d.RemoteKernelFinder(`${f.ContributedKernelFinderKind.Remote}-${n}`,t,this.env,this.cachedRemoteKernelValidator,this.kernelFinder,this.kernelProvider,e,this.jupyterConnection,this.fs,this.context);this.disposables.push(r),this.serverFinderMapping.set(n,r),r.activate().then(l.noop,l.noop)}return this.serverFinderMapping.get(n)}createRemoteKernelFinder(e,t){this.getOrCreateRemoteKernelFinder(e,t)}urisRemoved(e){e.forEach((e=>{const t=(0,g.generateIdFromRemoteProvider)(e),n=this.serverFinderMapping.get(t);n&&n.dispose(),this.serverFinderMapping.delete(t)}))}dispose(){this.serverFinderMapping.forEach((e=>e.dispose()))}};t.RemoteKernelFinderController=b,r([(0,m.swallowExceptions)("Handle Jupyter Provider Changes")],b.prototype,"handleProviderChanges",null),r([(0,m.swallowExceptions)("Check Servers in Jupyter Server Provider")],b.prototype,"lookForServersInCollection",null),r([(0,m.swallowExceptions)("Failed to create a Remote Kernel Finder")],b.prototype,"validateAndCreateFinder",null),t.RemoteKernelFinderController=b=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IJupyterServerUriStorage)),i(1,(0,o.inject)(u.IApplicationEnvironment)),i(2,(0,o.inject)(c.IJupyterRemoteCachedKernelValidator)),i(3,(0,o.inject)(s.IKernelFinder)),i(4,(0,o.inject)(s.IKernelProvider)),i(5,(0,o.inject)(h.JupyterConnection)),i(6,(0,o.inject)(a.IDisposableRegistry)),i(7,(0,o.inject)(p.IFileSystem)),i(8,(0,o.inject)(a.IExtensionContext)),i(9,(0,o.inject)(c.IJupyterUriProviderRegistration)),i(10,(0,o.inject)(c.IJupyterServerProviderRegistry))],b)},7976:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IRemoteKernelFinderController=void 0,t.IRemoteKernelFinderController=Symbol("RemoteKernelFinderController")},60436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJupyterConnectionDisplayName=void 0,t.getJupyterConnectionDisplayName=function(e,t){return`${t}${e.length>0?`?token=${e}`:""}`}},47028:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterKernelSpec=void 0,t.JupyterKernelSpec=class{constructor(e,t,n,r){this.specFile=t,this.interpreterPath=n,this.isRegisteredByVSC=r,this.name=e.name,this.argv=e.argv,this.language=e.language,this.executable=e.argv&&e.argv.length>0?e.argv[0]:"",this.display_name=e.display_name,this.metadata=e.metadata,this.env=e.env,this.interrupt_mode=e.interrupt_mode}}},46875:function(e,t,n){"use strict";var r=n(34155),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getOwnerExtensionOfProviderHandle=t.extractJupyterServerHandleAndId=t.generateIdFromRemoteProvider=t.computeServerId=t.createJupyterConnectionInfo=t.handleExpiredCertsError=t.handleSelfCertsError=t.expandWorkingDir=void 0;const a=n(76240),c=s(n(15948)),l=n(66828),u=n(60436),d=n(35412),h=n(25251),p=n(9959),f=n(15925),g=n(46729),m=n(11642);t.expandWorkingDir=function(e,t,n,i){if(e)return i.createSystemVariables(t).resolve(e);if(t)return c.dirname((0,d.getFilePath)(t));const o=n.getWorkspaceFolder(void 0);return o?(0,d.getFilePath)(o.uri):r.cwd()},t.handleSelfCertsError=async function(e,t,n){const r=h.DataScience.jupyterSelfCertEnable,i=h.DataScience.jupyterSelfCertClose,o=await e.showErrorMessage(h.DataScience.jupyterSelfCertFail(n),{modal:!0},r,i);return o===r?((0,p.sendTelemetryEvent)(f.Telemetry.SelfCertsMessageEnabled),await t.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,l.ConfigurationTarget.Workspace),!0):(o===i&&(0,p.sendTelemetryEvent)(f.Telemetry.SelfCertsMessageClose),!1)},t.handleExpiredCertsError=async function(e,t,n){const r=h.DataScience.jupyterSelfCertEnable,i=h.DataScience.jupyterSelfCertClose,o=await e.showErrorMessage(h.DataScience.jupyterExpiredCertFail(n),{modal:!0},r,i);return o===r?((0,p.sendTelemetryEvent)(f.Telemetry.SelfCertsMessageEnabled),await t.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,l.ConfigurationTarget.Workspace),!0):(o===i&&(0,p.sendTelemetryEvent)(f.Telemetry.SelfCertsMessageClose),!1)},t.createJupyterConnectionInfo=function(e,t,n,r,i,o,s,c){const l=t.baseUrl,d=t.token,h=new URL(t.baseUrl).hostname,p=(t?.webSocketProtocols||[]).length&&t?.webSocketProtocols||[],f=t.authorizationHeader&&Object.keys(t?.authorizationHeader??{}).length>0?t.authorizationHeader:void 0,g=f?()=>f:void 0,m=p?()=>p:()=>[];let v={baseUrl:l,appUrl:"",wsUrl:l.replace("http","ws")},y=n.getRequestInit();(""===d||"null"===d)&&!g||(v={...v,token:d,appendToken:!0});const b=i.getSettings(void 0).allowUnauthorizedRemoteConnection;if(l.startsWith("https")&&b&&r){const e=r.createHttpRequestAgent();y={...y,agent:e}}return v={...v,init:y,WebSocket:n.getWebsocketCtor(void 0,b,g,m),fetch:n.getFetchMethod(),Request:n.getRequestCtor(void 0,b,g),Headers:n.getHeadersCtor()},{baseUrl:l,providerId:e.id,serverProviderHandle:e,token:d,hostName:h,localLaunch:o,displayName:t&&t.displayName?t.displayName:(0,u.getJupyterConnectionDisplayName)(d,l),dispose:()=>c?.dispose(),rootDirectory:s,mappedRemoteNotebookDir:t?.mappedRemoteNotebookDir||t?.workingDirectory,getAuthHeader:g,getWebsocketProtocols:m,settings:a.ServerConnection.makeSettings(v)}},t.computeServerId=async function(e){const t=y(e);return(0,g.computeHash)(t,"SHA-256")};const v=new Set([f.JVSC_EXTENSION_ID,"ms-toolsai.vscode-ai","GitHub.codespaces"].map((e=>e.toLowerCase())));function y(e){return v.has(e.extensionId.toLowerCase())?`${f.Identifiers.REMOTE_URI}?${f.Identifiers.REMOTE_URI_ID_PARAM}=${e.id}&${f.Identifiers.REMOTE_URI_HANDLE_PARAM}=${encodeURI(e.handle)}`:`${f.Identifiers.REMOTE_URI}?${f.Identifiers.REMOTE_URI_ID_PARAM}=${e.id}&${f.Identifiers.REMOTE_URI_HANDLE_PARAM}=${encodeURI(e.handle)}&${f.Identifiers.REMOTE_URI_EXTENSION_ID_PARAM}=${encodeURI(e.extensionId)}`}t.generateIdFromRemoteProvider=y;class b extends Error{}function w(e){if(e)return(0,f.isBuiltInJupyterProvider)(e)?f.JVSC_EXTENSION_ID:e.startsWith("azureml_compute_instances")||e.startsWith("azureml_connected_compute_instances")?"ms-toolsai.vscode-ai":"github-codespaces"===e?"GitHub.codespaces":void(0,m.traceWarning)(`Extension Id not found for server Id ${e}`)}t.extractJupyterServerHandleAndId=function(e){try{const t=new URL(e),n=t.searchParams.get(f.Identifiers.REMOTE_URI_ID_PARAM),r=t.searchParams.get(f.Identifiers.REMOTE_URI_HANDLE_PARAM),i=t.searchParams.get(f.Identifiers.REMOTE_URI_EXTENSION_ID_PARAM)||w(n||"");if(n&&r){if(!i)throw new b(`Unable to determine the extension id for the remote server handle', { ${n}, ${r} }`);return{handle:r,id:n,extensionId:i}}throw new Error("Invalid remote URI")}catch(t){if(t instanceof b)throw t;throw new Error(`'Failed to parse remote URI ${function(e){if((e||"").trim().toLowerCase().startsWith(f.Identifiers.REMOTE_URI.toLowerCase()))return e;try{const t=new URL(e),n="localhost"===t.hostname.toLocaleLowerCase()||"127.0.0.1"===t.hostname;return`${t.protocol}//${n?t.hostname:"<REMOTE SERVER>"}:${t.port}`}catch{return e}}(e)}`)}},t.getOwnerExtensionOfProviderHandle=w},85259:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterServerProvider=void 0;const i=n(26594);let o=class{async getOrStartServer(e){throw new Error("Invalid Operation in Web")}};t.JupyterServerProvider=o,t.JupyterServerProvider=o=r([(0,i.injectable)()],o)},24150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52064),i=n(26320),o=n(90541),s=n(94062),a=n(70798),c=n(73713),l=n(24112),u=n(20339),d=n(85259),h=n(37594),p=n(21493),f=n(77806),g=n(58851),m=n(15352),v=n(19785),y=n(94433),b=n(30416),w=n(17169),S=n(37825),C=n(22202),_=n(87130),P=n(7976);t.registerTypes=function(e,t){e.addSingleton(y.IOldJupyterSessionManagerFactory,v.JupyterSessionManagerFactory),e.addSingleton(f.JupyterServerSelector,f.JupyterServerSelector),e.addSingleton(y.IJupyterKernelService,c.JupyterKernelService),e.addSingleton(y.IJupyterUriProviderRegistration,u.JupyterUriProviderRegistration),e.addBinding(y.IJupyterUriProviderRegistration,r.IExtensionSyncActivationService),e.addSingleton(y.IJupyterServerUriStorage,h.JupyterServerUriStorage),e.addSingleton(s.IKernelSessionFactory,w.KernelSessionFactory),e.addSingleton(S.OldJupyterKernelSessionFactory,S.OldJupyterKernelSessionFactory),e.addSingleton(C.JupyterKernelSessionFactory,C.JupyterKernelSessionFactory),e.addSingleton(y.IJupyterBackingFileCreator,g.BackingFileCreator),e.addSingleton(y.IJupyterServerProvider,d.JupyterServerProvider),e.addSingleton(y.IJupyterRequestCreator,m.JupyterRequestCreator),e.addSingleton(a.JupyterConnection,a.JupyterConnection),e.addSingleton(y.ILiveRemoteKernelConnectionUsageTracker,p.LiveRemoteKernelConnectionUsageTracker),e.addBinding(y.ILiveRemoteKernelConnectionUsageTracker,r.IExtensionSyncActivationService),e.addSingleton(y.IJupyterRemoteCachedKernelValidator,l.JupyterRemoteCachedKernelValidator),e.addSingleton(o.IDataScienceErrorHandler,i.DataScienceErrorHandlerWeb),e.addSingleton(P.IRemoteKernelFinderController,b.RemoteKernelFinderController),e.addBinding(P.IRemoteKernelFinderController,r.IExtensionSyncActivationService),e.addSingleton(y.IJupyterServerProviderRegistry,_.JupyterServerProviderRegistry)}},7958:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBackingFileCreator=t.generateBackingIPyNbFileName=void 0;const a=s(n(71171)),c=n(11642),l=n(25251),u=n(98729),d=n(94062),h=o(n(52859)),p=o(n(15948));function f(e){const t=`${u.jvscIdentifier}${(0,a.default)()}${(0,a.default)()}.ipynb`;return e?`${h.basename(e,".ipynb")}${t}`:`${l.DataScience.defaultNotebookName}${t}`}t.generateBackingIPyNbFileName=f,t.BaseBackingFileCreator=class{async createBackingFile(e,t,n,r,i){let o;const s=h.relativePath(r.rootDirectory,t)?.replace(/\\/g,"/"),a=(0,d.isLocalConnection)(n)&&s&&!s.startsWith("..")?{type:"notebook",path:s}:{type:"notebook"},l=f(e);try{o=await i.newUntitled(a);const e=p.dirname(o.path);o=await i.rename(o.path,e.length&&"."!==e?`${e}/${l}`:l)}catch(e){if((0,d.isLocalConnection)(n))try{o=await i.newUntitled({type:"notebook"});const e=p.dirname(o.path);o=await i.rename(o.path,e.length&&"."!==e?`${e}/${l}`:l)}catch(e){}else(0,c.traceError)(`Backing file not supported: ${e}`)}if(o){const e=o.path;return{filePath:e,dispose:()=>i.delete(e)}}}}},58851:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BackingFileCreator=void 0;const i=n(26594),o=n(7958);let s=class extends o.BaseBackingFileCreator{};t.BackingFileCreator=s,t.BackingFileCreator=s=r([(0,i.injectable)()],s)},73713:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterKernelService=void 0;const o=n(26594),s=n(11642);let a=class{async ensureKernelIsUsable(e,t,n,r,i){(0,s.traceVerbose)("Check if a kernel is usable")}};t.JupyterKernelService=a,r([i(1,(0,s.logValue)("id")),i(2,(0,s.logValue)("disableUI")),i(3,(0,s.ignoreLogging)())],a.prototype,"ensureKernelIsUsable",null),t.JupyterKernelService=a=r([(0,o.injectable)()],a)},22202:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterKernelSessionFactory=void 0;const l=n(66828),u=n(6491),d=c(n(71171)),h=s(n(52859)),p=s(n(52859)),f=n(94062),g=n(94433),m=n(11642),v=n(10053),y=n(26594),b=n(58681),w=n(65864),S=n(54990),C=n(20397),_=n(84079),P=n(50689),E=n(95739),k=n(37853),I=n(9959),D=n(42080),T=n(70798),x=n(72584),O=n(25251),R=n(79806),M=n(12561),A=n(71798),N=n(98729),j=n(43138),F=n(78624),L=n(82341);let K=class{constructor(e,t,n,r,i,o,s,a){this.jupyterNotebookProvider=e,this.jupyterConnection=t,this.asyncDisposables=n,this.workspaceService=r,this.requestCreator=i,this.backingFileCreator=o,this.kernelService=s,this.configService=a}async create(e){const t=[];let n;const r=()=>{e.ui.disableUI||n||(n=x.KernelProgressReporter.createProgressReporter(e.resource,(0,f.isRemoteConnection)(e.kernelConnection)?O.DataScience.connectingToJupyter:O.DataScience.startingJupyter),t.push(n))};let i;e.ui.disableUI&&e.ui.onDidChangeDisableUI(r,this,t),r();const o=[],s=this.configService.getSettings(e.resource).jupyterLaunchTimeout;try{i=(0,f.isRemoteConnection)(e.kernelConnection)?await(0,u.raceCancellationError)(e.token,this.jupyterConnection.createConnectionInfo(e.kernelConnection.serverProviderHandle)):await this.jupyterNotebookProvider.getOrStartServer({resource:e.resource,token:e.token,ui:e.ui}),await(0,u.raceCancellationError)(e.token,this.validateLocalKernelDependencies(e));const t=F.JupyterLabHelper.create(i.settings);this.asyncDisposables.push(t),o.push(new l.Disposable((()=>t.dispose().catch(b.noop)))),await(0,u.raceCancellationError)(e.token,this.validateRemoteServer(e,t));const n=(0,f.isLocalConnection)(e.kernelConnection)?await(0,u.raceCancellationError)(e.token,this.workspaceService.computeWorkingDirectory(e.resource)):"",r=await this.connectToOrCreateSession({...e,contentsManager:t.contentsManager,sessionManager:t.sessionManager,kernelManager:t.kernelManager,kernelSpecManager:t.kernelSpecManager,idleTimeout:s,connection:i});e.token.isCancellationRequested&&(await r.shutdown().catch(b.noop),(0,b.swallowExceptions)((()=>r.dispose()))),u.Cancellation.throwIfCanceled(e.token),(0,m.traceInfo)(`Started session for kernel ${e.kernelConnection.kind}:${e.kernelConnection.id}`);const a=new L.JupyterSessionWrapper(r,e.resource,e.kernelConnection,l.Uri.file(n),i,this.kernelService,e.creator),c=r.disposed,d=()=>{t.dispose().catch(b.noop),c.disconnect(d)};this.asyncDisposables.push({dispose:()=>a.shutdown().finally((()=>a.dispose()))}),r.disposed.connect(d);const h=a.onDidDispose(d);return this.asyncDisposables.push(h),a}catch(t){throw(0,C.dispose)(o),(0,f.isRemoteConnection)(e.kernelConnection)?i?_.JupyterSelfCertsError.isSelfCertsError(t)?new _.JupyterSelfCertsError(i.baseUrl):P.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(t)?new P.JupyterSelfCertsExpiredError(i.baseUrl):new S.RemoteJupyterServerConnectionError(i.baseUrl,e.kernelConnection.serverProviderHandle,t):t:t instanceof k.BaseError?t:new E.LocalJupyterServerConnectionError(t)}finally{(0,C.dispose)(t)}}async validateRemoteServer(e,t){if(t.isDisposed)throw new w.SessionDisposedError;if(!(0,f.isLocalConnection)(e.kernelConnection))try{await Promise.all([t.getRunningKernels(),t.getKernelSpecs()])}catch(t){throw(0,m.traceError)("Failed to fetch running kernels from remote server, connection may be outdated or remote server may be unreachable",t),new S.RemoteJupyterServerConnectionError(e.kernelConnection.baseUrl,e.kernelConnection.serverProviderHandle,t)}}async validateLocalKernelDependencies(e){if(e.token.isCancellationRequested)throw new l.CancellationError;e.kernelConnection?.interpreter&&(0,f.isLocalConnection)(e.kernelConnection)&&this.kernelService&&await this.kernelService.ensureKernelIsUsable(e.resource,e.kernelConnection,e.ui,e.token,"3rdPartyExtension"===e.creator)}async connectToOrCreateSession(e){if(e.token.isCancellationRequested)throw new l.CancellationError;let t;try{if(e.kernelConnection&&"connectToLiveRemoteKernel"===e.kernelConnection.kind&&e.kernelConnection.kernelModel.id&&e.kernelConnection.kernelModel.model){if(!e.kernelConnection.kernelModel.model)throw new Error("Kernel model not defined when connecting to an existing session");t=e.sessionManager.connectTo({...e.kernelConnection.kernelModel,model:e.kernelConnection.kernelModel.model});const n=this.requestCreator;t.kernelSocketInformation={get socket(){return n.getWebsocket(e.kernelConnection.id)},options:{clientId:"",id:e.kernelConnection.id,model:{...e.kernelConnection.kernelModel.model},userName:""}},await(0,u.raceCancellationError)(e.token,(0,j.waitForCondition)((async()=>"connected"===t.kernel?.connectionStatus||e.token.isCancellationRequested),e.idleTimeout,100))}else(0,m.traceVerbose)(`createNewKernelSession ${e.kernelConnection?.id}`),t=await this.createNewSession(e),await(0,M.waitForIdleOnSession)(e.kernelConnection,e.resource,t,e.idleTimeout,e.token).catch(b.noop);if(e.token.isCancellationRequested)throw new l.CancellationError;return t}catch(t){const n=e.ui.disableUI?m.traceVerbose:m.traceError;throw t instanceof k.BaseError?(n("Failed to change kernel, re-throwing",t),t):(n("Failed to change kernel",t),new A.JupyterInvalidKernelError(e.kernelConnection))}}async createNewSession(e){const t={failedWithoutBackingFile:!1,failedWithBackingFile:!1,localHost:e.connection.localLaunch};try{return await this.createNewSessionImpl({...e,createBakingFile:!1})}catch(n){(0,m.traceWarning)("Failed to create a session without a backing file, trying again with a backing file",n);try{return t.failedWithoutBackingFile=!0,await this.createNewSessionImpl({...e,createBakingFile:!0})}catch(e){throw t.failedWithBackingFile=!0,e}}finally{(0,I.sendTelemetryEvent)(I.Telemetry.StartedRemoteJupyterSessionWithBackingFile,void 0,t)}}async createNewSessionImpl(e){const t=(0,L.getRemoteSessionOptions)(e.connection,e.resource);let n,r=t?.path;!r&&e.createBakingFile&&(n=await this.backingFileCreator.createBackingFile(e.resource,l.Uri.file(""),e.kernelConnection,e.connection,e.contentsManager),r=n?.filePath);const i=(0,N.getNameOfKernelConnection)(e.kernelConnection)??e.kernelSpecManager?.specs?.default??"";let o;if(t?.name)o=t.name;else{const t=e.resource?p.extname(e.resource):"";o=`${e.resource?p.basename(e.resource,t):""}-${(0,d.default)()}${t}`}const s={path:r||U(e.resource),kernel:{name:i},name:o,type:(e.resource?.path||"").toLowerCase().endsWith(".ipynb")?"notebook":"console"},a=this.requestCreator;try{const t=await(0,u.raceCancellationError)(e.token,e.sessionManager.startNew(s,{kernelConnectionOptions:{handleComms:!0}}));if(!t.kernel)throw new R.JupyterSessionStartError(new Error("No kernel created"));(0,m.traceInfo)(O.DataScience.createdNewKernel(e.connection.baseUrl,t?.kernel?.id||""));const n=t;return n.kernelSocketInformation={get socket(){return a.getWebsocket(t.kernel.id)},options:{clientId:t.kernel.clientId,id:t.kernel.id,model:{...t.kernel.model},userName:t.kernel.username}},n}catch(e){if(e instanceof R.JupyterSessionStartError)throw e;throw new R.JupyterSessionStartError(e)}finally{n&&e.contentsManager.delete(n.filePath).catch(b.noop)}}};function U(e){const t=`${N.jvscIdentifier}${(0,d.default)()}${(0,d.default)()}.ipynb`;return e?`${h.basename(e,".ipynb")}${t}`:`${O.DataScience.defaultNotebookName}${t}`}t.JupyterKernelSessionFactory=K,t.JupyterKernelSessionFactory=K=o([(0,y.injectable)(),a(0,(0,y.inject)(g.IJupyterServerProvider)),a(1,(0,y.inject)(T.JupyterConnection)),a(2,(0,y.inject)(D.IAsyncDisposableRegistry)),a(3,(0,y.inject)(v.IWorkspaceService)),a(4,(0,y.inject)(g.IJupyterRequestCreator)),a(5,(0,y.inject)(g.IJupyterBackingFileCreator)),a(6,(0,y.inject)(g.IJupyterKernelService)),a(6,(0,y.optional)()),a(7,(0,y.inject)(D.IConfigurationService))],K)},78624:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterLabHelper=void 0;const r=n(66828),i=n(11642),o=n(65864),s=n(98729),a=n(47028),c=n(43138),l=n(9959),u=n(20397),d=n(11386),h=n(58681);class p{get isDisposed(){return!0===this.disposed}get jupyterlab(){return this._jupyterlab||(this._jupyterlab=n(76240)),this._jupyterlab}constructor(e){this.serverSettings=e,this.kernelSpecManager=new this.jupyterlab.KernelSpecManager({serverSettings:this.serverSettings}),this.kernelManager=new this.jupyterlab.KernelManager({serverSettings:this.serverSettings}),this.sessionManager=new this.jupyterlab.SessionManager({serverSettings:this.serverSettings,kernelManager:this.kernelManager}),this.contentsManager=new this.jupyterlab.ContentsManager({serverSettings:this.serverSettings})}static create(e){return new p(e)}async dispose(){if(!this.disposed){this.disposed=!0,(0,i.traceVerbose)("Disposing Jupyter Lab Helper");try{this.contentsManager&&((0,i.traceVerbose)("SessionManager - dispose contents manager"),this.contentsManager.dispose()),this.sessionManager&&!this.sessionManager.isDisposed&&((0,i.traceVerbose)("ShutdownSessionAndConnection - dispose session manager"),await(0,c.raceTimeout)(1e4,this.sessionManager.ready),this.sessionManager.dispose()),this.kernelManager?.isDisposed||this.kernelManager?.dispose(),this.kernelSpecManager?.isDisposed||this.kernelSpecManager?.dispose()}catch(e){(0,i.traceError)("Exception on Jupyter Lab Helper shutdown: ",e)}finally{(0,i.traceVerbose)("Finished disposing Jupyter Lab Helper")}}}async getRunningSessions(){if(!this.sessionManager)return[];await(0,c.raceTimeout)(1e4,this.sessionManager.ready).catch(h.noop),await this.sessionManager.refreshRunning();const e=[],t=this.sessionManager.running();let n=t.next();for(;n;)e.push(n),n=t.next();return e}async getRunningKernels(){const e=await this.jupyterlab.KernelAPI.listRunning(this.serverSettings),t=new Set;return e.map((e=>{const t=e;return{id:e.id,name:e.name,lastActivityTime:t.last_activity?new Date(Date.parse(t.last_activity.toString())):new Date,numberOfConnections:t.connections?parseInt(t.connections.toString(),10):0}})).filter((e=>!t.has(e.id)&&(t.add(e.id),!0)))}async getKernelSpecs(){if(!this.serverSettings||!this.sessionManager||!this.contentsManager)throw new o.SessionDisposedError;try{const e=new d.StopWatch,t=this.kernelSpecManager;if(!t)return(0,i.traceError)(`No SessionManager to enumerate kernelspecs (no specs manager). Returning a default kernel. Specs ${JSON.stringify(this.kernelSpecManager?.specs?.kernelspecs||{})}.`),(0,l.sendTelemetryEvent)(l.Telemetry.JupyterKernelSpecEnumeration,void 0,{failed:!0,reason:"NoSpecsManager"}),[await(0,s.createInterpreterKernelSpec)()];const n={wasSessionManagerReady:this.sessionManager.isReady,wasSpecsManagerReady:t.isReady,sessionManagerReady:this.sessionManager.isReady,specsManagerReady:t.isReady,waitedForChangeEvent:!1},o=(e={})=>t.specs&&Object.keys(t.specs.kernelspecs).length?t.specs.kernelspecs:e,h=o();await(0,c.raceTimeout)(1e4,this.sessionManager.ready),n.sessionManagerReady=this.sessionManager.isReady,await(0,c.raceTimeout)(1e4,t.refreshSpecs()),n.specsManagerReady=t.isReady;let p=!1;if(t&&0===Object.keys(t.specs?.kernelspecs||{}).length){const e=[],i=(0,c.createDeferred)(),o=i.resolve.bind(i);t.specsChanged.connect(o),e.push(new r.Disposable((()=>t.specsChanged.disconnect(o))));const s=Promise.all([i.promise,t.ready,t.refreshSpecs(),this.sessionManager.ready]);await(0,c.raceTimeout)(1e4,s),n.waitedForChangeEvent=!0,i.completed||(p=!0,(0,l.sendTelemetryEvent)(l.Telemetry.JupyterKernelSpecEnumeration,void 0,{failed:!0,sessionManagerReady:this.sessionManager.isReady,specsManagerReady:t.isReady,reason:t.isReady?this.sessionManager.isReady?"SpecsDidNotChangeInTime":"SessionManagerIsNotReady":"SpecManagerIsNotReady"})),(0,u.dispose)(e)}const f=o(h);if(Object.keys(f||{}).length){const t=[];return Object.entries(f).forEach((([e,n])=>{n&&t.push(new a.JupyterKernelSpec(n))})),(0,l.sendTelemetryEvent)(l.Telemetry.JupyterKernelSpecEnumeration,{duration:e.elapsedTime},n),t}return(0,i.traceError)(`Jupyter Lab Helper cannot enumerate kernelspecs. Returning a default kernel. Specs ${JSON.stringify(f)}.`),p||(0,l.sendTelemetryEvent)(l.Telemetry.JupyterKernelSpecEnumeration,void 0,{failed:!0,reason:"NoSpecsEventAfterRefresh"}),[await(0,s.createInterpreterKernelSpec)()]}catch(e){return(0,i.traceError)("Jupyter Lab Helper:getKernelSpecs failure: ",e),[]}}}t.JupyterLabHelper=p},15352:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterRequestCreator=void 0;const o=n(26594),s=i(n(46792)),a=n(11642),c=n(56940),l=new Map;let u=class{getRequestCtor(e,t,n){class r extends Request{constructor(t,r){super(t,r);const i=this.headers;if(n){const e=n();Object.keys(e).forEach((t=>i.append(t,e[t].toString()))),i.set("Content-Type","application/json");const t=i.append.bind(i);i.append=(e,n)=>{"authorization"!==e.toLowerCase()&&t(e,n)}}e&&this.headers.append("Cookie",e)}}return r}getWebsocketCtor(e,t,n,r){class i extends((0,c.KernelSocketWrapper)(s.default)){constructor(e,t){super(e,(e=>{const t=r?r():void 0;if(t||e)return!e&&t?t:(e&&!t||(e=e?"string"==typeof e?[e]:e:[],Array.isArray(t)?e.push(...t):"string"==typeof t&&e.push(t)),e)})(t)),this.timer=0,this.boundOpenHandler=this.openHandler.bind(this);const n=/.*\/kernels\/(.*)\/.*/.exec(e);n&&n.length>1&&(this.kernelId=n[1]),this.kernelId?(l.set(this.kernelId,this),this.onclose=()=>{l.get(this.kernelId)===this&&l.delete(this.kernelId)}):(0,a.traceError)("KernelId not extracted from Kernel WebSocket URL"),this.addEventListener("open",this.boundOpenHandler)}openHandler(){const e=this.onmessage;this.onmessage=t=>{this.handleEvent(((t,...n)=>{const r={data:n[0],type:t.toString(),target:this};return e(r),!0}),"message",t.data)},this.removeEventListener("open",this.boundOpenHandler)}}return i}getWebsocket(e){return l.get(e)}getFetchMethod(){return fetch}getHeadersCtor(){return Headers}getRequestInit(){return{cache:"no-store"}}};t.JupyterRequestCreator=u,t.JupyterRequestCreator=u=r([(0,o.injectable)()],u)},82341:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoteSessionOptions=t.JupyterSessionWrapper=void 0;const s=n(66828),a=n(11642),c=n(43138),l=n(79806),u=n(94062),d=n(88960),h=n(58681),p=o(n(52859)),f=n(86563),g=n(12561),m=n(88701),v=n(20397);class y extends m.BaseJupyterSessionConnection{get status(){return this.isDisposed?"dead":this.session?.kernel?this.session.kernel.status:((0,a.traceInfoIfCI)(`Kernel status not started because real session is ${this.session?"defined":"undefined"} & real kernel is ${this.session?.kernel?"defined":"undefined"}`),"unknown")}constructor(e,t,n,r,i,o,s){super(i.localLaunch?"localJupyter":"remoteJupyter",e),this.resource=t,this.kernelConnectionMetadata=n,this.workingDirectory=r,this.kernelService=o,this.creator=s,this.initializeKernelSocket()}dispose(){this.restartToken?.cancel(),this.restartToken?.dispose(),this.shutdownImplementation(!1).catch(h.noop)}async disposeAsync(){await this.shutdownImplementation(!1).catch(h.noop),await super.disposeAsync()}async waitForIdle(e,t){try{await(0,g.waitForIdleOnSession)(this.kernelConnectionMetadata,this.resource,this.session,e,t)}catch(e){throw(0,a.traceInfoIfCI)("Error waiting for idle",e),await this.shutdown().catch(h.noop),e}}async restart(){const e=[],t=new s.CancellationTokenSource;this.restartToken=t;const n=new d.DisplayOptions(!1);e.push(n),e.push(t);try{await this.validateLocalKernelDependencies(t.token,n),await super.restart()}finally{(0,v.dispose)(e)}}async validateLocalKernelDependencies(e,t){if(this.kernelConnectionMetadata?.interpreter&&(0,u.isLocalConnection)(this.kernelConnectionMetadata)&&this.kernelService){if(e.isCancellationRequested)throw new s.CancellationError;await this.kernelService.ensureKernelIsUsable(this.resource,this.kernelConnectionMetadata,t,e,"3rdPartyExtension"===this.creator)}}async shutdown(){return this.restartToken?.cancel(),this.restartToken?.dispose(),this.shutdownImplementation(!0)}async shutdownImplementation(e){if(this._isDisposed)return;this._isDisposed=!0,(0,a.traceVerbose)(`Shutdown session - current session, called from ${new Error("").stack}`);const t=`${this.session.kernel?.id}, ${this.kernelConnectionMetadata.id}`;(0,a.traceVerbose)(`shutdownSession ${t} - start`);try{if(e||this.canShutdownSession())try{(0,a.traceVerbose)(`Session can be shutdown ${this.kernelConnectionMetadata.id}`),(0,l.suppressShutdownErrors)(this.session.kernel),this.session.isDisposed||await(0,c.raceTimeout)(1e3,this.session.shutdown().catch(h.noop))}catch{try{this.session.isDisposed||this.session.dispose()}catch(e){(0,a.traceWarning)("Failures in disposing the session",e)}}finally{this.didShutdown.fire()}else(0,a.traceVerbose)(`Session cannot be shutdown ${this.kernelConnectionMetadata.id}`);try{this.session.isDisposed||this.session.dispose()}catch(e){(0,a.traceWarning)("Failures in disposing the session",e)}super.dispose(),(0,a.traceVerbose)("Shutdown session -- complete")}catch(e){(0,a.traceWarning)("Failures in disposing the session",e)}(0,a.traceVerbose)(`shutdownSession ${t} - shutdown complete`)}canShutdownSession(){return!(!(0,u.isLocalConnection)(this.kernelConnectionMetadata)&&("connectToLiveRemoteKernel"===this.kernelConnectionMetadata.kind||(!this.resource||"interactive"!==(0,f.getResourceType)(this.resource))&&this.resource&&"notebook"===(0,f.getResourceType)(this.resource)&&(0,u.isRemoteConnection)(this.kernelConnectionMetadata)))}}t.JupyterSessionWrapper=y,t.getRemoteSessionOptions=function(e,t){if(!t||"untitled"===t.scheme||!e.mappedRemoteNotebookDir)return;const n=s.Uri.file(t.path),r=s.Uri.file(e.mappedRemoteNotebookDir);if(!p.isEqualOrParent(n,r))return;const i=p.relativePath(r,n),o=p.basename(t);return o&&i?{path:i,name:o}:void 0}},28866:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSessionManager=void 0;const r=n(11642),i=n(24768),o=n(43138);t.JupyterSessionManager=class{get isDisposed(){return!0===this.disposed}get jupyterlab(){return this._jupyterlab||(this._jupyterlab=n(76240)),this._jupyterlab}constructor(e,t,n,r,i,o){this.outputChannel=e,this.configService=t,this.kernelService=n,this.backingFileCreator=r,this.requestCreator=i,this.connInfo=o;const s=o.settings;this.specsManager=new this.jupyterlab.KernelSpecManager({serverSettings:s}),this.kernelManager=new this.jupyterlab.KernelManager({serverSettings:s}),this.sessionManager=new this.jupyterlab.SessionManager({serverSettings:s,kernelManager:this.kernelManager}),this.contentsManager=new this.jupyterlab.ContentsManager({serverSettings:s})}async dispose(){if(!this.disposed){this.disposed=!0,(0,r.traceVerbose)("Disposing session manager");try{(0,r.traceVerbose)("SessionManager - dispose contents manager"),this.contentsManager.dispose(),this.sessionManager.isDisposed||((0,r.traceVerbose)("ShutdownSessionAndConnection - dispose session manager"),await(0,o.raceTimeout)(1e4,this.sessionManager.ready),this.sessionManager.dispose()),this.kernelManager.isDisposed||this.kernelManager.dispose(),this.specsManager.isDisposed||this.specsManager.dispose()}catch(e){(0,r.traceError)("Exception on session manager shutdown: ",e)}finally{(0,r.traceVerbose)("Finished disposing jupyter session manager")}}}async startNew(e,t,n,r,o,s){const a=new i.OldJupyterSession(e,this.connInfo,t,this.specsManager,this.sessionManager,this.contentsManager,this.outputChannel,n,this.configService.getSettings(e).jupyterLaunchTimeout,this.kernelService,this.backingFileCreator,this.requestCreator,s);try{await a.connect({token:o,ui:r})}finally{a.isConnected||await a.disposeAsync()}return a}}},19785:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSessionManagerFactory=void 0;const o=n(26594),s=n(28866),a=n(15925),c=n(42080),l=n(94433);let u=class{constructor(e,t,n,r,i,o){this.config=e,this.jupyterOutput=t,this.kernelService=n,this.backingFileCreator=r,this.requestCreator=i,this.asyncDisposables=o}create(e){const t=new s.JupyterSessionManager(this.jupyterOutput,this.config,this.kernelService,this.backingFileCreator,this.requestCreator,e);return this.asyncDisposables.push(t),t}};t.JupyterSessionManagerFactory=u,t.JupyterSessionManagerFactory=u=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IConfigurationService)),i(1,(0,o.inject)(c.IOutputChannel)),i(1,(0,o.named)(a.JUPYTER_OUTPUT_CHANNEL)),i(2,(0,o.inject)(l.IJupyterKernelService)),i(2,(0,o.optional)()),i(3,(0,o.inject)(l.IJupyterBackingFileCreator)),i(4,(0,o.inject)(l.IJupyterRequestCreator)),i(5,(0,o.inject)(c.IAsyncDisposableRegistry))],u)},37825:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OldJupyterKernelSessionFactory=void 0;const o=n(66828),s=n(6491),a=n(94062),c=n(94433),l=n(11642),u=n(10053),d=n(26594),h=n(58681),p=n(65864),f=n(54990),g=n(20397),m=n(84079),v=n(50689),y=n(95739),b=n(37853),w=n(42080),S=n(70798),C=n(72584),_=n(25251),P=n(78624);let E=class{constructor(e,t,n,r,i){this.jupyterNotebookProvider=e,this.sessionManagerFactory=t,this.jupyterConnection=n,this.asyncDisposables=r,this.workspaceService=i}async create(e){const t=[];let n;const r=()=>{e.ui.disableUI||n||(n=C.KernelProgressReporter.createProgressReporter(e.resource,(0,a.isRemoteConnection)(e.kernelConnection)?_.DataScience.connectingToJupyter:_.DataScience.startingJupyter),t.push(n))};let i;e.ui.disableUI&&e.ui.onDidChangeDisableUI(r,this,t),r();const c=[];try{i=(0,a.isRemoteConnection)(e.kernelConnection)?await this.jupyterConnection.createConnectionInfo(e.kernelConnection.serverProviderHandle):await this.jupyterNotebookProvider.getOrStartServer({resource:e.resource,token:e.token,ui:e.ui}),s.Cancellation.throwIfCanceled(e.token);const n=this.sessionManagerFactory.create(i);this.asyncDisposables.push(n),c.push(new o.Disposable((()=>n.dispose().catch(h.noop))));const r=P.JupyterLabHelper.create(i.settings);t.push(new o.Disposable((()=>r.dispose()))),s.Cancellation.throwIfCanceled(e.token);const l=await this.createSession(e,r,n);return l.onDidShutdown((()=>n.dispose())),l}catch(t){throw(0,g.dispose)(c),(0,a.isRemoteConnection)(e.kernelConnection)?i?m.JupyterSelfCertsError.isSelfCertsError(t)?new m.JupyterSelfCertsError(i.baseUrl):v.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(t)?new v.JupyterSelfCertsExpiredError(i.baseUrl):new f.RemoteJupyterServerConnectionError(i.baseUrl,e.kernelConnection.serverProviderHandle,t):t:t instanceof b.BaseError?t:new y.LocalJupyterServerConnectionError(t)}finally{(0,g.dispose)(t)}}async createSession(e,t,n){if(n.isDisposed)throw new p.SessionDisposedError;if((0,a.isRemoteConnection)(e.kernelConnection))try{await Promise.all([t.getRunningKernels(),t.getKernelSpecs()])}catch(t){throw(0,l.traceError)("Failed to fetch running kernels from remote server, connection may be outdated or remote server may be unreachable",t),new f.RemoteJupyterServerConnectionError(e.kernelConnection.baseUrl,e.kernelConnection.serverProviderHandle,t)}s.Cancellation.throwIfCanceled(e.token);const r=(0,a.isLocalConnection)(e.kernelConnection)?await this.workspaceService.computeWorkingDirectory(e.resource):"";s.Cancellation.throwIfCanceled(e.token);const i=await n.startNew(e.resource,e.kernelConnection,o.Uri.file(r),e.ui,e.token,e.creator);return e.token.isCancellationRequested&&i.shutdown().catch(h.noop),s.Cancellation.throwIfCanceled(e.token),(0,l.traceInfo)(`Started session for kernel ${e.kernelConnection.kind}:${e.kernelConnection.id}`),i}};t.OldJupyterKernelSessionFactory=E,t.OldJupyterKernelSessionFactory=E=r([(0,d.injectable)(),i(0,(0,d.inject)(c.IJupyterServerProvider)),i(1,(0,d.inject)(c.IOldJupyterSessionManagerFactory)),i(2,(0,d.inject)(S.JupyterConnection)),i(3,(0,d.inject)(w.IAsyncDisposableRegistry)),i(4,(0,d.inject)(u.IWorkspaceService))],E)},24768:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoteSessionOptions=t.OldJupyterSession=void 0;const a=n(66828),c=s(n(71171)),l=n(6491),u=n(37853),d=n(11642),h=n(43138),p=n(25251),f=n(71798),g=n(65864),m=n(9959),v=n(79806),y=n(98729),b=n(94062),w=n(88960),S=n(7958),C=n(58681),_=o(n(52859));class P extends v.BaseJupyterSession{constructor(e,t,n,r,i,o,s,a,c,l,u,d,h){super(t.localLaunch?"localJupyter":"remoteJupyter",e,n,a),this.connInfo=t,this.specsManager=r,this.sessionManager=i,this.contentsManager=o,this.outputChannel=s,this.workingDirectory=a,this.idleTimeout=c,this.kernelService=l,this.backingFileCreator=u,this.requestCreator=d,this.sessionCreator=h}async connect(e){this.setSession(await this.createNewKernelSession(e)),this.session?.statusChanged.connect(this.statusHandler),this.connected=!0}async createNewKernelSession(e){let t;try{if(this.kernelConnectionMetadata&&"connectToLiveRemoteKernel"===this.kernelConnectionMetadata.kind&&this.kernelConnectionMetadata.kernelModel.id&&this.kernelConnectionMetadata.kernelModel.model){if(t=this.sessionManager.connectTo({...this.kernelConnectionMetadata.kernelModel,model:this.kernelConnectionMetadata.kernelModel.model}),t.kernelConnectionMetadata=this.kernelConnectionMetadata,t.kernelSocketInformation={socket:this.requestCreator.getWebsocket(this.kernelConnectionMetadata.id),options:{clientId:"",id:this.kernelConnectionMetadata.id,model:{...this.kernelConnectionMetadata.kernelModel.model},userName:""}},t.isRemoteSession=!0,t.resource=this.resource,await(0,h.waitForCondition)((async()=>"connected"===t?.kernel?.connectionStatus||e.token.isCancellationRequested),this.idleTimeout,100),e.token.isCancellationRequested)throw new a.CancellationError}else(0,d.traceVerbose)(`createNewKernelSession ${this.kernelConnectionMetadata?.id}`),t=await this.createSession(e),t.resource=this.resource,await this.waitForIdleOnSession(t,this.idleTimeout,e.token)}catch(t){const n=e.ui.disableUI?d.traceVerbose:d.traceError;throw t instanceof u.BaseError?(n("Failed to change kernel, re-throwing",t),t):(n("Failed to change kernel",t),new f.JupyterInvalidKernelError(this.kernelConnectionMetadata))}return t}setSession(e,t){const n=this.requestCreator.getWebsocket(this.kernelConnectionMetadata.id);return e?.kernelSocketInformation?.socket&&t&&n&&(e.kernelSocketInformation.socket=n),super.setSession(e,t)}async createRestartSession(e,t,n){if(!t||!this.contentsManager||!this.sessionManager)throw new g.SessionDisposedError;let r;const i=new w.DisplayOptions(e);try{return(0,d.traceVerbose)(`JupyterSession.createNewKernelSession 0, id is ${this.kernelConnectionMetadata?.id}`),r=await this.createSession({token:n,ui:i}),await this.waitForIdleOnSession(r,this.idleTimeout,n),r}catch(e){throw(0,d.traceWarning)(`Error waiting for restart session: ${e}`),r&&this.shutdownSession(r,void 0,!0).catch(C.noop),r=void 0,e}finally{i.dispose()}}startRestartSession(e){if(!this.session)throw new Error("Session disposed or not initialized");const t=new a.CancellationTokenSource,n=this.createRestartSession(e,this.session,t.token);return this.restartSessionPromise={token:t,promise:n},n.finally((()=>{t.dispose(),this.restartSessionPromise?.promise===n&&(this.restartSessionPromise=void 0)})).catch(C.noop),n}async createSession(e){const t={failedWithoutBackingFile:!1,failedWithBackingFile:!1,localHost:this.connInfo.localLaunch};try{return await this.createSessionImpl({...e,createBakingFile:!1})}catch(n){(0,d.traceWarning)("Failed to create a session without a backing file, trying again with a backing file",n);try{return t.failedWithoutBackingFile=!0,await this.createSessionImpl({...e,createBakingFile:!0})}catch(e){throw t.failedWithBackingFile=!0,e}}finally{(0,m.sendTelemetryEvent)(m.Telemetry.StartedRemoteJupyterSessionWithBackingFile,void 0,t)}}async createSessionImpl(e){const t=E(this.connInfo,this.resource);let n,r=t?.path;if(!r&&e.createBakingFile&&(n=await this.backingFileCreator.createBackingFile(this.resource,this.workingDirectory,this.kernelConnectionMetadata,this.connInfo,this.contentsManager),r=n?.filePath),this.kernelConnectionMetadata?.interpreter&&(0,b.isLocalConnection)(this.kernelConnectionMetadata)&&this.kernelService)try{await this.kernelService.ensureKernelIsUsable(this.resource,this.kernelConnectionMetadata,e.ui,e.token,"3rdPartyExtension"===this.sessionCreator)}catch(e){throw this.connInfo&&n&&this.contentsManager.delete(n.filePath).catch(C.noop),e}const i=(0,y.getNameOfKernelConnection)(this.kernelConnectionMetadata)??this.specsManager?.specs?.default??"";let o;if(t?.name)o=t.name;else{const e=this.resource?_.extname(this.resource):"";o=`${this.resource?_.basename(this.resource,e):""}-${(0,c.default)()}${e}`}const s={path:r||(0,S.generateBackingIPyNbFileName)(this.resource),kernel:{name:i},name:o,type:(this.resource?.path||"").toLowerCase().endsWith(".ipynb")?"notebook":"console"},a=this.requestCreator;return(0,l.raceCancellationError)(e.token,(()=>this.sessionManager.startNew(s,{kernelConnectionOptions:{handleComms:!0}}).then((async e=>{if(e.kernel){this.logRemoteOutput(p.DataScience.createdNewKernel(this.connInfo.baseUrl,e?.kernel?.id||""));const t=e;return t.resource=this.resource,t.kernelConnectionMetadata=this.kernelConnectionMetadata,t.kernelSocketInformation={get socket(){return a.getWebsocket(e.kernel.id)},options:{clientId:e.kernel.clientId,id:e.kernel.id,model:{...e.kernel.model},userName:e.kernel.username}},(0,b.isLocalConnection)(this.kernelConnectionMetadata)||(t.isRemoteSession=!0),t}throw new v.JupyterSessionStartError(new Error("No kernel created"))})).catch((e=>Promise.reject(new v.JupyterSessionStartError(e)))).finally((async()=>{this.connInfo&&n&&this.contentsManager.delete(n.filePath).catch(C.noop)})))())}logRemoteOutput(e){(0,b.isLocalConnection)(this.kernelConnectionMetadata)||this.outputChannel.appendLine(e)}}function E(e,t){if(!t||"untitled"===t.scheme||!e.mappedRemoteNotebookDir)return;const n=a.Uri.file(t.path),r=a.Uri.file(e.mappedRemoteNotebookDir);if(!_.isEqualOrParent(n,r))return;const i=_.relativePath(r,n),o=_.basename(t);return o&&i?{path:i,name:o}:void 0}t.OldJupyterSession=P,t.getRemoteSessionOptions=E},94433:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IJupyterServerProviderRegistry=t.IJupyterRemoteCachedKernelValidator=t.ILiveRemoteKernelConnectionUsageTracker=t.INotebookStarter=t.IJupyterRequestCreator=t.IJupyterRequestAgentCreator=t.IJupyterKernelService=t.IJupyterBackingFileCreator=t.IJupyterServerUriStorage=t.IJupyterUriProviderRegistration=t.IJupyterServerProvider=t.INbConvertExportToPythonService=t.INbConvertInterpreterDependencyChecker=t.IJupyterInterpreterDependencyManager=t.INotebookExporter=t.INotebookImporter=t.IOldJupyterSessionManagerFactory=t.IJupyterServerHelper=t.JupyterInterpreterDependencyResponse=void 0,function(e){e[e.ok=0]="ok",e[e.selectAnotherInterpreter=1]="selectAnotherInterpreter",e[e.cancel=2]="cancel"}(n||(t.JupyterInterpreterDependencyResponse=n={})),t.IJupyterServerHelper=Symbol("JupyterServerHelper"),t.IOldJupyterSessionManagerFactory=Symbol("IOldJupyterSessionManagerFactory"),t.INotebookImporter=Symbol("INotebookImporter"),t.INotebookExporter=Symbol("INotebookExporter"),t.IJupyterInterpreterDependencyManager=Symbol("IJupyterInterpreterDependencyManager"),t.INbConvertInterpreterDependencyChecker=Symbol("INbConvertInterpreterDependencyChecker"),t.INbConvertExportToPythonService=Symbol("INbConvertExportToPythonService"),t.IJupyterServerProvider=Symbol("IJupyterServerProvider"),t.IJupyterUriProviderRegistration=Symbol("IJupyterUriProviderRegistration"),t.IJupyterServerUriStorage=Symbol("IJupyterServerUriStorage"),t.IJupyterBackingFileCreator=Symbol("IJupyterBackingFileCreator"),t.IJupyterKernelService=Symbol("IJupyterKernelService"),t.IJupyterRequestAgentCreator=Symbol("IJupyterRequestAgentCreator"),t.IJupyterRequestCreator=Symbol("IJupyterRequestCreator"),t.INotebookStarter=Symbol("INotebookStarter"),t.ILiveRemoteKernelConnectionUsageTracker=Symbol("ILiveRemoteKernelConnectionUsageTracker"),t.IJupyterRemoteCachedKernelValidator=Symbol("IJupyterRemoteCachedKernelValidator"),t.IJupyterServerProviderRegistry=Symbol("IJupyterServerProviderRegistry")},22021:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPlainTextOrStreamOutput=t.Kernel=t.ThirdPartyKernel=t.isKernelSessionDead=t.isKernelDead=t.shouldMessageBeMirroredWithRenderer=void 0;const i=r(n(71171)),o=n(37875),s=n(66828),a=n(15925),c=n(37853),l=n(20397),u=n(11642),d=n(35412),h=n(42080),p=n(43138),f=n(25251),g=n(58681),m=n(11386),v=n(86563),y=n(30002),b=n(47684),w=n(61239),S=n(9959),C=n(98729),_=n(94062),P=n(6491),E=n(72584),k=n(88960),I=r(n(66518)),D=n(46305),T=n(33525),x="e976ee50-99ed-4aba-9b6b-9dcd5634d07d:IPyWidgets:";t.shouldMessageBeMirroredWithRenderer=function(e){let t="string"==typeof e?e:"";return"string"!=typeof e&&"content"in e&&"code"in e.content&&"string"==typeof e.content.code&&(t=e.content.code),!t.includes(x)},t.isKernelDead=function(e){return"dead"===e.status||"terminating"===e.status&&!e.disposed&&!e.disposing||!e.disposed&&!e.disposing&&("unknown"==e.session?.status||"unknown"==e.session?.kernel?.status)&&(e.session.kernel?.isDisposed||e.session.isDisposed)},t.isKernelSessionDead=function(e){return"dead"===e.status||"terminating"===e.status&&!e.isDisposed||!e.isDisposed&&("unknown"==e.status||"unknown"==e.kernel?.status)&&(e.kernel?.isDisposed||e.isDisposed)};class O{get ipywidgetsVersion(){return this._ipywidgetsVersion}get onIPyWidgetVersionResolved(){return this._onIPyWidgetVersionResolved.event}get onStatusChanged(){return this._onStatusChanged.event}get onRestarted(){return this._onRestarted.event}get onStarted(){return this._onStarted.event}get onDisposed(){return this._onDisposed.event}get creator(){return this._creator}get startedAtLeastOnce(){return this._startedAtLeastOnce}get info(){return this._info}get status(){return this._jupyterSessionPromise&&!this._session?"starting":this._session?.status??(this.isKernelDead?"dead":"unknown")}get disposed(){return!0===this._disposed||!0===this._session?.isDisposed}get disposing(){return!0===this._disposing}get kernelSocket(){return this._kernelSocket.asObservable()}get session(){return this._session}get restarting(){return this._restartPromise||Promise.resolve()}constructor(e,t,n,r,i,a,c,l,u,d,h){this.id=e,this.uri=t,this.resourceUri=n,this.kernelConnectionMetadata=r,this.sessionCreator=i,this.kernelSettings=a,this.appShell=c,this.startupCodeProviders=l,this._creator=u,this.workspaceMemento=d,this.experiments=h,this.disposables=[],this._onIPyWidgetVersionResolved=new s.EventEmitter,this._kernelSocket=new o.ReplaySubject,this._onStatusChanged=new s.EventEmitter,this._onRestarted=new s.EventEmitter,this._onStarted=new s.EventEmitter,this._onDisposed=new s.EventEmitter,this.hookedSessionForEvents=new WeakSet,this.hooks=new Map,this.startCancellation=new s.CancellationTokenSource,this.startupUI=new k.DisplayOptions(!0),this.disposables.push(this._onStatusChanged),this.disposables.push(this._onRestarted),this.disposables.push(this._onStarted),this.disposables.push(this._onDisposed),this.disposables.push(this._onIPyWidgetVersionResolved),this.disposables.push({dispose:()=>this._kernelSocket.unsubscribe()}),(0,w.trackKernelResourceInformation)(this.resourceUri,{kernelConnection:this.kernelConnectionMetadata,actionSource:this.creator,disableUI:this.startupUI.disableUI}).catch(g.noop),this.startupUI.onDidChangeDisableUI((()=>{this.startupUI.disableUI||(0,w.trackKernelResourceInformation)(this.resourceUri,{disableUI:!1}).catch(g.noop)}),this.disposables)}addHook(e,t,n,r){const i=this.hooks.get(e)||new Set;this.hooks.set(e,i),t=n?t.bind(n):t,i.add(t);const o={dispose:()=>{i.delete(t)}};return r&&r.push(o),o}async start(e){return this.startCancellation.token.isCancellationRequested&&(this.startCancellation.dispose(),this.startCancellation=new s.CancellationTokenSource),this.startJupyterSession(e)}async interrupt(){const e=Promise.all(Array.from(this.hooks.get("willInterrupt")||new Set).map((e=>e())));let t;(0,u.traceInfo)(`Interrupt requested ${(0,d.getDisplayPath)(this.resourceUri||this.uri)}`);try{const n=this._jupyterSessionPromise?await this._jupyterSessionPromise.catch((()=>{})):void 0;(0,u.traceInfo)("Interrupt kernel execution"),n?(t=this._interruptPromise?await this._interruptPromise:await(this._interruptPromise=this.interruptExecution(n,e)),this._interruptPromise=void 0):((0,u.traceInfo)("No kernel session to interrupt"),this._interruptPromise=void 0,t=_.InterruptResult.Success)}finally{await Promise.all(Array.from(this.hooks.get("interruptCompleted")||new Set).map((e=>e()))).catch(g.noop)}if((0,u.traceInfo)(`Interrupt requested & sent for ${(0,d.getDisplayPath)(this.uri)} in notebookEditor.`),t===_.InterruptResult.TimedOut){const e=f.DataScience.restartKernelAfterInterruptMessage,t=f.DataScience.restartKernelMessageYes;await this.appShell.showInformationMessage(e,{modal:!0},t)===t&&await this.restart()}}async dispose(){if((0,u.traceInfo)(`Dispose Kernel '${(0,d.getDisplayPath)(this.uri)}' associated with '${(0,d.getDisplayPath)(this.resourceUri)}'`),this._disposing=!0,this.disposingPromise)return this.disposingPromise;this._ignoreJupyterSessionDisposedErrors=!0,this.startCancellation.cancel(),this.disposingPromise=(async()=>{const e=[];e.push(Promise.all(Array.from(this.hooks.get("willCancel")||new Set).map((e=>e()))).then(g.noop).catch(g.noop)),this._session=this._session?this._session:this._jupyterSessionPromise?await this._jupyterSessionPromise.catch((()=>{})):void 0,this._jupyterSessionPromise=void 0,this._session&&(e.push(this._session.disposeAsync().catch(g.noop)),this._session=void 0),this._disposed=!0,this._onDisposed.fire(),this._onStatusChanged.fire("dead");try{await Promise.all(e)}finally{this.startCancellation.dispose(),(0,l.dispose)(this.disposables)}})(),await this.disposingPromise}async restart(){try{const e=(0,v.getResourceType)(this.resourceUri);(0,u.traceInfo)(`Restart requested ${(0,d.getDisplayPath)(this.uri)}`),await Promise.all(Array.from(this.hooks.get("willRestart")||new Set).map((e=>e(this._jupyterSessionPromise)))),this.startCancellation.cancel(),this.startCancellation.dispose();const t=new m.StopWatch;try{const n=this._jupyterSessionPromise?await this._jupyterSessionPromise.catch((()=>{})):void 0;n?(this._restartPromise||(this._restartPromise=n.restart(),this._restartPromise.finally((()=>this._restartPromise=void 0)).catch(g.noop)),await this._restartPromise,this.startCancellation=new s.CancellationTokenSource):await this.start(new k.DisplayOptions(!1)),(0,b.sendKernelTelemetryEvent)(this.resourceUri,S.Telemetry.NotebookRestart,{duration:t.elapsedTime},{resourceType:e})}catch(e){(0,u.traceError)(`Restart failed ${(0,d.getDisplayPath)(this.uri)}`,e),this._ignoreJupyterSessionDisposedErrors=!0;const n=this._session;throw this._session=void 0,this._jupyterSessionPromise=void 0,(0,b.sendKernelTelemetryEvent)(this.resourceUri,S.Telemetry.NotebookRestart,{duration:t.elapsedTime},void 0,e),await(n?.disposeAsync().catch(g.noop)),this._ignoreJupyterSessionDisposedErrors=!1,e}await this.initializeAfterStart(this._session),this._onRestarted.fire()}catch(e){throw(0,u.traceError)(`Failed to restart kernel ${(0,d.getDisplayPath)(this.uri)}`,e),e}finally{Promise.all(Array.from(this.hooks.get("restartCompleted")||new Set).map((e=>e()))).catch(g.noop)}}async startJupyterSession(e=new k.DisplayOptions(!1)){if(this._startedAtLeastOnce=!0,e.disableUI||(this.startupUI.disableUI=!1),e.onDidChangeDisableUI((()=>{!e.disableUI&&this.startupUI.disableUI&&(this.startupUI.disableUI=!1)})),this.startupUI.disableUI?this.startupUI.onDidChangeDisableUI((()=>{this.disposing||this.disposed||this.startupUI.disableUI||(0,w.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(this.resourceUri,this.kernelConnectionMetadata).catch(g.noop)}),this,this.disposables):await(0,w.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(this.resourceUri,this.kernelConnectionMetadata),this.disposing)throw new s.CancellationError;if(P.Cancellation.throwIfCanceled(this.startCancellation.token),!this._jupyterSessionPromise){const e=new m.StopWatch;if(await(0,w.trackKernelResourceInformation)(this.resourceUri,{kernelConnection:this.kernelConnectionMetadata,actionSource:this.creator}),this.disposing)throw new s.CancellationError;P.Cancellation.throwIfCanceled(this.startCancellation.token),this._jupyterSessionPromise=this.createJupyterSession().then((t=>((0,b.sendKernelTelemetryEvent)(this.resourceUri,S.Telemetry.PerceivedJupyterStartupNotebook,{duration:e.elapsedTime}),t))).catch((e=>{throw(0,u.traceInfoIfCI)(`Failed to create Jupyter Session in Kernel.startNotebook for ${(0,d.getDisplayPath)(this.uri)}`),this.startCancellation.cancel(),this._jupyterSessionPromise=void 0,e}))}return this._jupyterSessionPromise.finally((()=>this.sendKernelStartedTelemetry())).catch(g.noop),this._jupyterSessionPromise}async interruptExecution(e,t){const n=(0,p.createDeferred)(),r=new m.StopWatch,i=[],o=e=>{"restarting"!==e&&"autorestarting"!==e||((0,u.traceWarning)("Kernel restarting during interrupt"),n.resolve(!0))};if(this.experiments.inExperiment(h.Experiments.NewJupyterSession)){const t=(e,t)=>o(t);e.statusChanged.connect(t),i.push(new s.Disposable((()=>(0,g.swallowExceptions)((()=>e.statusChanged.disconnect(t))))))}else e.onSessionStatusChanged(o,this,i);return e&&e.kernel&&((0,u.traceInfo)(`Interrupting kernel: ${e.kernel.name}`),await(0,p.raceTimeoutError)(this.kernelSettings.interruptTimeout,new T.KernelInterruptTimeoutError(this.kernelConnectionMetadata),e.kernel.interrupt()).catch((e=>{(0,u.traceWarning)(`Error during interrupt: ${e}`),n.resolve(!0)}))),(async()=>{try{return await(0,p.raceTimeout)(this.kernelSettings.interruptTimeout,_.InterruptResult.TimedOut,t.then((()=>_.InterruptResult.Success)),n.promise.then((()=>_.InterruptResult.Restarted)))}catch(e){if(n.completed)return _.InterruptResult.Restarted;throw(0,b.sendKernelTelemetryEvent)(this.resourceUri,S.Telemetry.NotebookInterrupt,{duration:r.elapsedTime},void 0,e),e}finally{(0,l.dispose)(i)}})().then((e=>((0,b.sendKernelTelemetryEvent)(this.resourceUri,S.Telemetry.NotebookInterrupt,{duration:r.elapsedTime},{result:e}),e)))}async createJupyterSession(){if(this.disposing)throw new s.CancellationError;P.Cancellation.throwIfCanceled(this.startCancellation.token);let e=[];try{let t="";const n=this.kernelConnectionMetadata.interpreter;if(n){const e=[];e.push(`Python Path: ${(0,d.getDisplayPath)(n.uri)}`),e.push(n.envType||""),e.push(n.envName||""),n.version&&e.push(`${n.version.major}.${n.version.minor}.${n.version.patch}`),t=` (${e.filter((e=>e)).join(", ")})`}(0,u.traceInfo)(`Starting Kernel ${this.kernelConnectionMetadata.kind}, ${this.kernelConnectionMetadata.id} ${t} for '${(0,d.getDisplayPath)(this.uri)}' (disableUI=${this.startupUI.disableUI})`),this.createProgressIndicator(e),this.isKernelDead=!1,this._onStatusChanged.fire("starting");const r=await this.sessionCreator.create({resource:this.resourceUri,ui:this.startupUI,kernelConnection:this.kernelConnectionMetadata,token:this.startCancellation.token,creator:this.creator});if(this.disposing)throw new s.CancellationError;if(P.Cancellation.throwIfCanceled(this.startCancellation.token),await this.initializeAfterStart(r),this.disposing)throw new s.CancellationError;return this.sendKernelStartedTelemetry(),this._session=r,this._onStarted.fire(),r}catch(e){if(this.startupUI.disableUI?(0,u.traceVerbose)(`failed to create IJupyterKernelConnectionSession in kernel, UI Disabled = ${this.startupUI.disableUI}`,e):this.startCancellation.token||(0,P.isCancellationError)(e)||(0,u.traceError)(`failed to create IJupyterKernelConnectionSession in kernel, UI Disabled = ${this.startupUI.disableUI}`,e),P.Cancellation.throwIfCanceled(this.startCancellation.token),e instanceof y.JupyterConnectError)throw e;const t=f.DataScience.sessionStartFailedWithKernel((0,C.getDisplayNameOrNameOfKernelConnection)(this.kernelConnectionMetadata));throw c.WrappedError.from(t+" "+("message"in e?e.message:e.toString()),e)}finally{(0,l.dispose)(e)}}sendKernelStartedTelemetry(){this.uiWasDisabledWhenKernelStartupTelemetryWasLastSent&&this.uiWasDisabledWhenKernelStartupTelemetryWasLastSent===this.startupUI.disableUI||this.startTelemetrySent&&!this.startupUI.disableUI||(this.uiWasDisabledWhenKernelStartupTelemetryWasLastSent=!0===this.startupUI.disableUI,this.startTelemetrySent=!0,(0,b.sendKernelTelemetryEvent)(this.resourceUri,S.Telemetry.NotebookStart,void 0,{disableUI:this.startupUI.disableUI}))}createProgressIndicator(e){const t=E.KernelProgressReporter.createProgressReporter(this.resourceUri,f.DataScience.connectingToKernel((0,C.getDisplayNameOrNameOfKernelConnection)(this.kernelConnectionMetadata)),this.startupUI.disableUI);e.push(t),this.startupUI.disableUI&&this.startupUI.onDidChangeDisableUI((()=>{this.disposing||this.disposed||this.startupUI.disableUI||t.show&&t.show()}),this,e)}async initializeAfterStart(e){if(await Promise.all(Array.from(this.hooks.get("didStart")||new Set).map((t=>t(e,this.startCancellation.token).catch(g.noop)))),(0,u.traceVerbose)(`Started running kernel initialization for ${(0,d.getDisplayPath)(this.uri)}`),e){if(!this.hookedSessionForEvents.has(e))if(this.hookedSessionForEvents.add(e),e.kernelSocket.subscribe(this._kernelSocket),e.onDidDispose((()=>{if((0,u.traceInfoIfCI)(`Kernel got disposed as a result of session.onDisposed (1) ${(0,d.getDisplayPath)(this.resourceUri||this.uri)}`),!this._ignoreJupyterSessionDisposedErrors){(0,u.traceInfo)(`Kernel got disposed as a result of session.onDisposed ${(0,d.getDisplayPath)(this.resourceUri||this.uri)} & _ignoreJupyterSessionDisposedErrors = false.`);const t=this._session===e;this._jupyterSessionPromise=void 0,this._session=void 0,t&&(this.isKernelDead=!0,this._onStatusChanged.fire("dead"))}})),this.experiments.inExperiment(h.Experiments.NewJupyterSession)){const t=(e,t)=>this._onStatusChanged.fire(t);e.statusChanged.connect(t),this.disposables.push(new s.Disposable((()=>(0,g.swallowExceptions)((()=>e.statusChanged.disconnect(t))))))}else{const t=e=>{this._onStatusChanged.fire(e)};this.disposables.push(e.onSessionStatusChanged(t))}if(e.kernel?.registerCommTarget(a.Identifiers.DefaultCommTarget,g.noop),"connectToLiveRemoteKernel"===this.kernelConnectionMetadata.kind)this.determineVersionOfIPyWidgets(e).catch((e=>(0,u.traceError)("Failed to determine IPyWidget version",e))),this.gatherInternalStartupCode().then((t=>this.executeSilently(e,t,{traceErrors:!0,traceErrorsMessage:"Error executing jupyter extension internal startup code"}))).catch((e=>(0,u.traceError)("Failed to execute internal startup code",e)));else{await this.determineVersionOfIPyWidgets(e);const t=await this.gatherInternalStartupCode();await this.executeSilently(e,t,{traceErrors:!0,traceErrorsMessage:"Error executing jupyter extension internal startup code"}),await this.executeSilently(e,this.getUserStartupCommands(),{traceErrors:!1})}try{(0,u.traceVerbose)("Requesting Kernel info"),this._info=await(0,D.getKernelInfo)(e,this.kernelConnectionMetadata,this.workspaceMemento)}catch(e){(0,u.traceWarning)("Failed to request KernelInfo",e)}"connectToLiveRemoteKernel"!==this.kernelConnectionMetadata.kind&&((0,u.traceVerbose)("End running kernel initialization, now waiting for idle"),await e.waitForIdle(this.kernelSettings.launchTimeout,this.startCancellation.token),(0,u.traceVerbose)("End running kernel initialization, session is idle"))}else(0,u.traceVerbose)("Not running kernel initialization")}async determineVersionOfIPyWidgets(e){if(!(0,C.isPythonKernelConnection)(this.kernelConnectionMetadata))return this._ipywidgetsVersion,a.WIDGET_VERSION_NON_PYTHON_KERNELS,void this._onIPyWidgetVersionResolved.fire(a.WIDGET_VERSION_NON_PYTHON_KERNELS);const t=async()=>{const t=I.default`
        try:
            import ipywidgets as _VSCODE_ipywidgets
            print("${x}" + _VSCODE_ipywidgets.__version__)
            del _VSCODE_ipywidgets
        except:
            pass
        `,n=await this.executeSilently(e,[t]).catch((e=>(0,u.traceError)("Failed to determine version of IPyWidgets",e)));if(Array.isArray(n)){const e=n.some((e=>(e.text||"")?.toString().includes(`${x}8.`))),t=n.some((e=>(e.text||"")?.toString().includes(`${x}7.`))),r=this._ipywidgetsVersion=t?7:e?8:void 0;(0,u.traceVerbose)(`Determined IPyWidgets Version as ${r} and event fired`),this._ipywidgetsVersion,this._onIPyWidgetVersionResolved.fire(r)}else(0,u.traceWarning)("Failed to determine IPyKernel Version",JSON.stringify(n))};if(await t(),!this._ipywidgetsVersion&&this.session?.kernel){const e=(n,r)=>{if("send"===r.direction)return;const i=r.msg;i.content&&"data"in i.content&&i.content.data&&(i.content.data[a.WIDGET_MIMETYPE]||"target_name"in i.content&&i.content.target_name===a.Identifiers.DefaultCommTarget)&&(this._ipywidgetsVersion||(t().catch(g.noop),this.session?.kernel&&this.session.kernel.anyMessage.disconnect(e,this)))};this.session.kernel.anyMessage.connect(e,this)}}async gatherInternalStartupCode(){const e=[],t=await Promise.all(this.startupCodeProviders.sort(((e,t)=>t.priority-e.priority)).map((e=>e.getCode(this))));for(let n of t)e.push(...n);if((0,C.isPythonKernelConnection)(this.kernelConnectionMetadata)&&"connectToLiveRemoteKernel"!==this.kernelConnectionMetadata.kind){const t=(0,d.getFilePath)(this.resourceUri);t&&e.push(`__vsc_ipynb_file__ = "${t.replace(/\\/g,"\\\\")}"`),this.kernelSettings.enableExtendedKernelCompletions||e.push(a.CodeSnippets.DisableJedi),e.push(...(n=this.getMatplotLibInitializeCode(),n&&0!==n.length?((n=n.map((e=>`    ${e}`))).unshift("try:"),n.push("except:","    print('Failed to initialize matplotlib startup code. Matplotlib might be missing.')"),n):n))}var n;return e}getMatplotLibInitializeCode(){const e=[];if(this.kernelSettings.themeMatplotlibPlots){(0,u.traceInfoIfCI)(`Initialize config for plots for ${(0,d.getDisplayPath)(this.resourceUri||this.uri)}`);const t=a.CodeSnippets.MatplotLibInit;(0,u.traceVerbose)(`Initialize matplotlib for ${(0,d.getDisplayPath)(this.resourceUri||this.uri)}`),e.push(...(0,l.splitLines)(t,{trim:!1}));const n=this.appShell.activeColorTheme.kind===s.ColorThemeKind.Dark;this.kernelSettings.ignoreVscodeTheme||e.push(n?"matplotlib.style.use('dark_background')":`matplotlib.rcParams.update(${a.Identifiers.MatplotLibDefaultParams})`)}return this.kernelSettings.generateSVGPlots&&(e.push(...(0,l.splitLines)(a.CodeSnippets.AppendSVGFigureFormat,{trim:!1})),(0,u.traceVerbose)("Add SVG to matplotlib figure formats")),e}getUserStartupCommands(){let e=this.kernelSettings.runStartupCommands;if(Array.isArray(e)&&(e=e.join("\n")),e){const t=e.replace(/\\n/g,"\n");return(0,l.splitLines)(t,{trim:!1})}return[]}async executeSilently(e,t,n){if(0!==t.join("").trim().length){if(e.kernel)return(0,C.executeSilently)(e.kernel,t.join("\n"),n);(0,u.traceVerbose)(`Not executing startup as there is no session, code: ${t}`)}}}t.ThirdPartyKernel=class extends O{get creator(){return"3rdPartyExtension"}constructor(e,t,n,r,o,s,a,c,l){super(`3rdPartyKernel_${(0,i.default)()}`,e,t,n,r,s,o,a,"3rdPartyExtension",c,l)}},t.Kernel=class extends O{get creator(){return"jupyterExtension"}constructor(e,t,n,r,o,s,a,c,l,u){super((0,i.default)(),t.uri,e,n,r,o,s,c,"jupyterExtension",l,u),this.notebook=t,this.controller=a}},t.getPlainTextOrStreamOutput=function(e){if(e.length>0){const t=e[0].data;if(t&&t.hasOwnProperty("text/plain"))return(0,v.concatMultilineString)(t["text/plain"]);if("stream"===e[0].output_type){const t=e[0];return(0,v.concatMultilineString)(t.text)}}}},57410:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelAutoReconnectMonitor=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(42080),l=n(43138),u=n(86563),d=n(25251),h=n(58681),p=n(9959),f=n(14154),g=n(98729),m=n(47684),v=n(94062),y=n(94433);let b=class{constructor(e,t,n,r,i){this.appShell=e,this.disposableRegistry=t,this.kernelProvider=n,this.serverUriStorage=r,this.jupyterUriProviderRegistration=i,this.kernelsStartedSuccessfully=new WeakSet,this.kernelConnectionToKernelMapping=new WeakMap,this.kernelsRestarting=new WeakSet,this.kernelReconnectProgress=new WeakMap,this.lastExecutedCellPerKernel=new WeakMap}activate(){this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposableRegistry),this.disposableRegistry.push(this.kernelProvider.onDidDisposeKernel((e=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)}),this)),this.disposableRegistry.push(this.kernelProvider.onDidRestartKernel((e=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)}),this)),this.disposableRegistry.push(s.notebooks.onDidChangeNotebookCellExecutionState((e=>{if(!(0,u.isJupyterNotebook)(e.cell.notebook))return;if(e.state!==s.NotebookCellExecutionState.Idle)return;const t=this.kernelProvider.get(e.cell.notebook);t&&this.lastExecutedCellPerKernel.get(t)===e.cell&&this.lastExecutedCellPerKernel.delete(t)})))}onDidStartKernel(e){if(!this.kernelsStartedSuccessfully.has(e)){if(this.kernelProvider.getKernelExecution(e).onPreExecute((t=>this.lastExecutedCellPerKernel.set(e,t)),this,this.disposableRegistry),!e.session?.kernel)return;this.kernelsStartedSuccessfully.add(e),this.kernelConnectionToKernelMapping.set(e.session.kernel,e),e.session?.kernel?.connectionStatusChanged.connect(this.onKernelStatusChanged,this),e.onDisposed((()=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)}),this,this.disposableRegistry),e.addHook("willRestart",(async()=>{this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e),this.kernelsRestarting.add(e)}),this,this.disposableRegistry),e.onRestarted((()=>this.kernelsRestarting.delete(e)),this,this.disposableRegistry)}}onKernelStatusChanged(e,t){const n=this.kernelConnectionToKernelMapping.get(e);if(n&&!this.kernelsRestarting.has(n))switch(t){case"connected":return this.kernelReconnectProgress.get(n)?.dispose(),void this.kernelReconnectProgress.delete(n);case"disconnected":return void(this.kernelReconnectProgress.has(n)&&(this.kernelReconnectProgress.get(n)?.dispose(),this.kernelReconnectProgress.delete(n),this.onKernelDisconnected(n)?.catch(h.noop)));case"connecting":return void(this.kernelReconnectProgress.has(n)||this.onKernelConnecting(n)?.catch(h.noop));default:return}}async onKernelConnecting(e){const t=(0,l.createDeferred)(),n=new s.Disposable((()=>t.resolve()));if(this.kernelReconnectProgress.set(e,n),(0,v.isRemoteConnection)(e.kernelConnectionMetadata)&&await this.handleRemoteServerShutdown(e,e.kernelConnectionMetadata))return;const r=d.DataScience.automaticallyReconnectingToAKernelProgressMessage((0,g.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata));this.appShell.withProgress({location:s.ProgressLocation.Notification,title:r},(async()=>t.promise)).then(h.noop,h.noop),this.disposableRegistry.push(n)}async onKernelDisconnected(e){if(e.disposed||e.disposing)return;if((0,m.sendKernelTelemetryEvent)(e.resourceUri,p.Telemetry.KernelCrash),(0,v.isRemoteConnection)(e.kernelConnectionMetadata)&&await this.handleRemoteServerShutdown(e,e.kernelConnectionMetadata))return;const t=(0,v.isLocalConnection)(e.kernelConnectionMetadata)?d.DataScience.kernelDisconnected((0,g.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata)):d.DataScience.remoteJupyterConnectionFailedWithServer(e.kernelConnectionMetadata.baseUrl);this.appShell.showErrorMessage(t).then(h.noop,h.noop);try{const n=this.lastExecutedCellPerKernel.get(e);if(!n||n.document.isClosed||n.notebook.isClosed)return;if(!1===n.executionSummary?.success)return;await(0,f.endCellAndDisplayErrorsInCell)(n,e.controller,t,!1)}finally{await e.dispose()}}async handleRemoteServerShutdown(e,t){const n=await this.jupyterUriProviderRegistration.getProvider(t.serverProviderHandle.extensionId,t.serverProviderHandle.id);if(!n||!n.getHandles)return!1;try{return(await n.getHandles()).includes(t.serverProviderHandle.handle)||(await this.serverUriStorage.remove(t.serverProviderHandle),this.kernelReconnectProgress.get(e)?.dispose(),this.kernelReconnectProgress.delete(e)),!0}catch(e){return!1}}};t.KernelAutoReconnectMonitor=b,t.KernelAutoReconnectMonitor=b=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell)),i(1,(0,o.inject)(c.IDisposableRegistry)),i(2,(0,o.inject)(v.IKernelProvider)),i(3,(0,o.inject)(y.IJupyterServerUriStorage)),i(4,(0,o.inject)(y.IJupyterUriProviderRegistration))],b)},35631:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelController=void 0,t.KernelController=class{constructor(e){this.controller=e}get id(){return this.controller.id}createNotebookCellExecution(e){return this.controller.createNotebookCellExecution(e)}}},24649:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelCrashMonitor=void 0;const o=n(26594),s=n(10053),a=n(15925),c=n(42080),l=n(25251),u=n(58681),d=n(47684),h=n(14154),p=n(98729),f=n(94062),g=n(85446);let m=class{constructor(e,t,n){this.disposableRegistry=e,this.applicationShell=t,this.kernelProvider=n,this.lastExecutedCellPerKernel=new WeakMap,this.kernelsStartedSuccessfully=new WeakSet}activate(){this.kernelProvider.onKernelStatusChanged(this.onKernelStatusChanged,this,this.disposableRegistry),this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposableRegistry)}onDidStartKernel(e){this.kernelsStartedSuccessfully.add(e),this.kernelProvider.getKernelExecution(e).onPreExecute((t=>this.lastExecutedCellPerKernel.set(e,t)),this,this.disposableRegistry)}async onKernelStatusChanged({kernel:e}){this.kernelsStartedSuccessfully.has(e)&&(e.disposed||e.disposing||!e.session||("localRaw"===e.session.kind&&"dead"===e.status&&(this.applicationShell.showErrorMessage(l.DataScience.kernelDiedWithoutError((0,p.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata))).then(u.noop,u.noop),await this.endCellAndDisplayErrorsInCell(e)),"localRaw"!==e.session.kind&&"autorestarting"===e.status&&(this.applicationShell.showErrorMessage(l.DataScience.kernelDiedWithoutErrorAndAutoRestarting((0,p.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata))).then(u.noop,u.noop),await this.endCellAndDisplayErrorsInCell(e))))}async endCellAndDisplayErrorsInCell(e){const t=this.lastExecutedCellPerKernel.get(e);if((0,d.sendKernelTelemetryEvent)(e.resourceUri,a.Telemetry.KernelCrash),t)return(0,h.endCellAndDisplayErrorsInCell)(t,e.controller,l.DataScience.kernelCrashedDueToCodeInCurrentOrPreviousCell,!1)}};t.KernelCrashMonitor=m,r([(0,g.swallowExceptions)()],m.prototype,"onKernelStatusChanged",null),t.KernelCrashMonitor=m=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(s.IApplicationShell)),i(2,(0,o.inject)(f.IKernelProvider))],m)},67276:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDependencyService=void 0;const i=n(26594),o=n(94062);let s=class{async installMissingDependencies(e){return o.KernelInterpreterDependencyResponse.cancel}async areDependenciesInstalled(e,t,n){return!1}};t.KernelDependencyService=s,t.KernelDependencyService=s=r([(0,i.injectable)()],s)},82323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookKernelExecution=void 0;const r=n(66828),i=n(10152),o=n(35412),s=n(11642),a=n(9959),c=n(88960),l=n(1988),u=n(3130),d=n(14644),h=n(14154),p=n(98729),f=n(61239),g=n(47684),m=n(94062),v=n(65864);t.NotebookKernelExecution=class{get executionCount(){return this._visibleExecutionCount}constructor(e,t,n,i,o){this.kernel=e,this.notebook=o,this.disposables=[],this._visibleExecutionCount=0,this._onPreExecute=new r.EventEmitter,this.onPreExecute=this._onPreExecute.event,this._onPostExecute=new r.EventEmitter,this.onPostExecute=this._onPostExecute.event,this.documentExecutions=new WeakMap;const s=new u.CellExecutionMessageHandlerService(t,e.controller,n,i,o);this.disposables.push(s),this.executionFactory=new l.CellExecutionFactory(e.controller,s),r.notebooks.onDidChangeNotebookCellExecutionState((t=>{t.cell.notebook===e.notebook&&t.state===r.NotebookCellExecutionState.Idle&&t.cell.executionSummary?.executionOrder&&(this._visibleExecutionCount=Math.max(this._visibleExecutionCount,t.cell.executionSummary.executionOrder))})),e.onRestarted((()=>this._visibleExecutionCount=0),this,this.disposables),e.onStarted((()=>this._visibleExecutionCount=0),this,this.disposables),e.addHook("willInterrupt",this.onWillInterrupt,this,this.disposables),e.addHook("willCancel",this.onWillCancel,this,this.disposables),e.addHook("willRestart",(e=>this.onWillRestart(e)),this,this.disposables),this.disposables.push(this._onPreExecute)}get pendingCells(){return this.documentExecutions.get(this.notebook)?.queue||[]}async resumeCellExecution(e,t){if((0,h.traceCellMessage)(e,`NotebookKernelExecution.resumeCellExecution (start), ${(0,o.getDisplayPath)(e.notebook.uri)}`),e.kind==i.NotebookCellKind.Markup)return m.NotebookCellRunState.Success;await(0,f.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(this.kernel.resourceUri,this.kernel.kernelConnectionMetadata),(0,g.sendKernelTelemetryEvent)(this.kernel.resourceUri,a.Telemetry.ResumeCellExecution);const n=this.kernel.start(new c.DisplayOptions(!1)),r=this.getOrCreateCellExecutionQueue(e.notebook,n);r.resumeCell(e,t);const l=await r.waitForCompletion([e]);return(0,h.traceCellMessage)(e,`NotebookKernelExecution.resumeCellExecution (completed), ${(0,o.getDisplayPath)(e.notebook.uri)}`),(0,s.traceVerbose)(`Cell ${e.index} executed with state ${l[0]}`),l[0]}async executeCell(e,t){if((0,h.traceCellMessage)(e,`NotebookKernelExecution.executeCell (1), ${(0,o.getDisplayPath)(e.notebook.uri)}`),e.kind==i.NotebookCellKind.Markup)return m.NotebookCellRunState.Success;(0,h.traceCellMessage)(e,`NotebookKernelExecution.executeCell, ${(0,o.getDisplayPath)(e.notebook.uri)}`),await(0,f.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(this.kernel.resourceUri,this.kernel.kernelConnectionMetadata),(0,g.sendKernelTelemetryEvent)(this.kernel.resourceUri,a.Telemetry.ExecuteCell);const n=this.kernel.start(new c.DisplayOptions(!1));await this.kernel.restarting,(0,h.traceCellMessage)(e,`NotebookKernelExecution.executeCell (2), ${(0,o.getDisplayPath)(e.notebook.uri)}`);const r=this.getOrCreateCellExecutionQueue(e.notebook,n);r.queueCell(e,t);const l=await r.waitForCompletion([e]);return(0,h.traceCellMessage)(e,`NotebookKernelExecution.executeCell completed (3), ${(0,o.getDisplayPath)(e.notebook.uri)}`),(0,s.traceVerbose)(`Cell ${e.index} executed with state ${l[0]}`),l[0]}executeHidden(e){return this.kernel.start().then((t=>t.kernel?(0,p.executeSilently)(t.kernel,e):Promise.reject(new v.SessionDisposedError)))}async onWillInterrupt(){const e=this.documentExecutions.get(this.notebook);(e||"connectToLiveRemoteKernel"===this.kernel.kernelConnectionMetadata.kind)&&((0,s.traceInfo)("Interrupt kernel execution"),e&&(await e.cancel(),await e.waitForCompletion()))}async onWillCancel(){const e=this.documentExecutions.get(this.notebook);e&&await e.cancel(!0)}async onWillRestart(e){const t=this.documentExecutions.get(this.notebook),n=e?await e.catch((()=>{})):void 0,r=t?t.cancel(!0).then((()=>t.waitForCompletion())):Promise.resolve();n||((0,s.traceInfo)("No kernel session to interrupt"),await r)}getOrCreateCellExecutionQueue(e,t){const n=this.documentExecutions.get(e);if(n&&!n.isEmpty&&!n.failed)return n;const i=new d.CellExecutionQueue(t,this.executionFactory,this.kernel.kernelConnectionMetadata,this.kernel.resourceUri);return this.disposables.push(i),r.workspace.onDidCloseNotebookDocument((async t=>{t===e&&((0,s.traceVerbose)(`Cancel executions after closing notebook ${(0,o.getDisplayPath)(t.uri)}`),i.failed&&i.isEmpty||await i.cancel(!0))}),this,this.disposables),i.onPreExecute((e=>this._onPreExecute.fire(e)),this,this.disposables),i.onPostExecute((e=>this._onPostExecute.fire(e)),this,this.disposables),this.documentExecutions.set(e,i),i}}},30038:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelFinder=void 0;const o=n(26594),s=n(66828),a=n(42080),c=n(11642),l=n(38994);let u=class{get status(){return this._status}set status(e){this._status!=e&&(this._status=e,this._onDidChangeStatus.fire())}get onDidChangeStatus(){return this._onDidChangeStatus.event}constructor(e){this.disposables=e,this._onDidChangeRegistrations=new s.EventEmitter,this.onDidChangeRegistrations=this._onDidChangeRegistrations.event,this._finders=[],this.connectionFinderMapping=new Map,this._onDidChangeKernels=new s.EventEmitter,this.onDidChangeKernels=this._onDidChangeKernels.event,this._status="idle",this._onDidChangeStatus=new s.EventEmitter,e.push(this._onDidChangeStatus),e.push(this._onDidChangeRegistrations)}registerKernelFinder(e){this._finders.push(e),"discovering"===e.status&&(this.status="discovering");const t=e.onDidChangeStatus((()=>this.status=this._finders.every((e=>"idle"===e.status))?"idle":"discovering"),this,this.disposables),n=e.onDidChangeKernels((()=>this._onDidChangeKernels.fire()));return this.disposables.push(n),this._onDidChangeKernels.fire(),this._onDidChangeRegistrations.fire({added:[e],removed:[]}),{dispose:()=>{const r=this._finders.findIndex((t=>t===e));this._finders.splice(r,1),n.dispose(),t.dispose(),this._onDidChangeKernels.fire(),this._onDidChangeRegistrations.fire({added:[],removed:[e]})}}}get kernels(){const e=[];this.connectionFinderMapping.clear();const t=new Set;this._finders.filter((e=>e.kind===l.ContributedKernelFinderKind.LocalPythonEnvironment)).forEach((n=>{n.kernels.forEach((r=>{"startUsingLocalKernelSpec"!==r.kind&&"startUsingPythonInterpreter"!==r.kind||!r.kernelSpec.specFile||t.add(r.kernelSpec.specFile),e.push(r),this.connectionFinderMapping.set(r.id,n)}))})),this._finders.filter((e=>e.kind===l.ContributedKernelFinderKind.LocalKernelSpec)).forEach((n=>{n.kernels.forEach((r=>{("startUsingLocalKernelSpec"===r.kind||"startUsingPythonInterpreter"===r.kind)&&r.kernelSpec.specFile&&t.has(r.kernelSpec.specFile)||(e.push(r),this.connectionFinderMapping.set(r.id,n))}))}));const n=this._finders.filter((e=>e.kind===l.ContributedKernelFinderKind.Remote));for(const t of n){const n=t.kernels;n.forEach((e=>{this.connectionFinderMapping.set(e.id,t)})),e.push(...n)}return(0,c.traceInfoIfCI)(`list kernel specs ${e.length}: ${e.map((e=>`${e.id}, ${e.kind}, ${e.interpreter?.uri}`)).join("\n")}`),e}getFinderForConnection(e){return this.connectionFinderMapping.get(e.id)}get registered(){return this._finders}};t.KernelFinder=u,t.KernelFinder=u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IDisposableRegistry))],u)},46305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKernelInfo=void 0;const r=n(94062),i=n(11642),o=n(58681),s=n(43138),a="KERNEL_INFO";async function c(e,t,n){if(!n||!(0,r.isRemoteConnection)(t))return;const i=e.get(a,[]).filter((e=>Date.now()-e.age<1728e5)).filter((e=>e.id!==t.id));i.push({id:t.id,age:Date.now(),info:n}),await e.update(a,i)}t.getKernelInfo=async function(e,t,n){const l=[],u={banner:"",help_links:[],implementation:"",implementation_version:"",language_info:{name:"",version:""},protocol_version:"",status:"ok"};if(!e.kernel)return;e.kernel?.info&&(l.push(e.kernel.info),e.kernel.info.then((e=>c(n,t,e))).catch(o.noop));const d=e.kernel.requestKernelInfo().then((e=>e?.content));if(l.push(d),d.then((e=>c(n,t,e))).catch(o.noop),"connectToLiveRemoteKernel"===t.kind){const e=function(e,t){if((0,r.isRemoteConnection)(t))return e.get(a,[]).find((e=>e.id===t.id))?.info}(n,t);e?l.push(Promise.resolve(e)):l.push((0,s.sleep)(5e3).then((()=>u)))}const h=await Promise.race(l);return h===u?(0,i.traceWarning)("Failed to Kernel info in a timely manner, defaulting to empty info!"):(0,i.traceVerbose)("Got Kernel info"),h}},2055:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseThirdPartyKernelProvider=t.BaseCoreKernelProvider=void 0;const r=n(66828),i=n(11642),o=n(35412),s=n(58681);t.BaseCoreKernelProvider=class{get kernels(){const e=new Set;return this.notebook.notebookDocuments.forEach((t=>{const n=this.get(t);n&&e.add(n)})),Array.from(e)}constructor(e,t,n){this.asyncDisposables=e,this.disposables=t,this.notebook=n,this.executions=new WeakMap,this.kernelsByNotebook=new WeakMap,this.kernelsById=new Map,this.pendingDisposables=new Set,this._onDidRestartKernel=new r.EventEmitter,this._onDidStartKernel=new r.EventEmitter,this._onDidCreateKernel=new r.EventEmitter,this._onDidDisposeKernel=new r.EventEmitter,this._onKernelStatusChanged=new r.EventEmitter,this.onKernelStatusChanged=this._onKernelStatusChanged.event,this.asyncDisposables.push(this),this.notebook.onDidCloseNotebookDocument((e=>this.disposeOldKernel(e)),this,t),t.push(this._onDidDisposeKernel),t.push(this._onDidRestartKernel),t.push(this._onKernelStatusChanged),t.push(this._onDidStartKernel),t.push(this._onDidCreateKernel)}get onDidDisposeKernel(){return this._onDidDisposeKernel.event}get onDidRestartKernel(){return this._onDidRestartKernel.event}get onDidStartKernel(){return this._onDidStartKernel.event}get onDidCreateKernel(){return this._onDidCreateKernel.event}get(e){if((0,s.isUri)(e)){const t=this.notebook.notebookDocuments.find((t=>t.uri.toString()===e.toString()));return t?this.get(t):void 0}return"string"==typeof e?this.kernelsById.get(e)?.kernel:this.kernelsByNotebook.get(e)?.kernel}getKernelExecution(e){return this.executions.get(e)}getInternal(e){return this.kernelsByNotebook.get(e)}async dispose(){(0,i.traceInfoIfCI)("Disposing all kernels from kernel provider");const e=Array.from(this.pendingDisposables.values());this.pendingDisposables.clear(),await Promise.all(e),await Promise.all(this.kernels.map((e=>e.dispose())))}storeKernel(e,t,n){this.kernelsByNotebook.set(e,{options:t,kernel:n}),this.kernelsById.set(n.id,{options:t,kernel:n}),this._onDidCreateKernel.fire(n)}deleteMappingIfKernelIsDisposed(e){e.onDisposed((()=>{this.get(e.notebook)===e&&(this.kernelsByNotebook.delete(e.notebook),this.kernelsById.delete(e.id),(0,i.traceVerbose)(`Kernel got disposed, hence there is no longer a kernel associated with ${(0,o.getDisplayPath)(e.uri)}`)),this.pendingDisposables.delete(e)}),this,this.disposables)}disposeOldKernel(e){const t=this.kernelsByNotebook.get(e);t&&((0,i.traceInfoIfCI)(`Disposing kernel associated with ${(0,o.getDisplayPath)(e.uri)}, isClosed=${e.isClosed}`),this.kernelsById.delete(t.kernel.id),this.pendingDisposables.add(t.kernel),t.kernel.dispose().catch((e=>(0,i.traceWarning)("Failed to dispose old kernel",e))).finally((()=>this.pendingDisposables.delete(t.kernel))).catch(s.noop)),this.kernelsByNotebook.delete(e)}handleServerRemoval(e){this.notebook.notebookDocuments.forEach((t=>{const n=this.kernelsByNotebook.get(t);if(n){const r=n.options.metadata;"connectToLiveRemoteKernel"!==r.kind&&"startUsingRemoteKernelSpec"!==r.kind||e.find((e=>e.id===r.serverProviderHandle.id&&e.handle===r.serverProviderHandle.handle))&&(this.kernelsByNotebook.delete(t),this.kernelsById.delete(n.kernel.id))}}))}},t.BaseThirdPartyKernelProvider=class{get kernels(){return Array.from(this.kernelsByUri.values()).map((e=>e.kernel))}constructor(e,t,n){this.asyncDisposables=e,this.disposables=t,this.notebook=n,this.kernelsByUri=new Map,this.kernelsById=new Map,this.pendingDisposables=new Set,this._onDidRestartKernel=new r.EventEmitter,this._onDidStartKernel=new r.EventEmitter,this._onDidCreateKernel=new r.EventEmitter,this._onDidDisposeKernel=new r.EventEmitter,this._onKernelStatusChanged=new r.EventEmitter,this.onKernelStatusChanged=this._onKernelStatusChanged.event,this.asyncDisposables.push(this),this.notebook.onDidCloseNotebookDocument((e=>this.disposeOldKernel(e.uri)),this,t),t.push(this._onDidDisposeKernel),t.push(this._onDidRestartKernel),t.push(this._onKernelStatusChanged),t.push(this._onDidStartKernel),t.push(this._onDidCreateKernel)}get onDidDisposeKernel(){return this._onDidDisposeKernel.event}get onDidRestartKernel(){return this._onDidRestartKernel.event}get onDidStartKernel(){return this._onDidStartKernel.event}get onDidCreateKernel(){return this._onDidCreateKernel.event}get(e){return this.kernelsByUri.get(e.toString())?.kernel||this.kernelsById.get(e.toString())?.kernel}getInternal(e){return this.kernelsByUri.get(e.toString())}async dispose(){(0,i.traceInfoIfCI)("Disposing all kernels from kernel provider");const e=Array.from(this.pendingDisposables.values());this.pendingDisposables.clear(),await Promise.all(e),await Promise.all(this.kernels.map((e=>e.dispose())))}storeKernel(e,t,n){this.kernelsByUri.set(e.toString(),{options:t,kernel:n}),this.kernelsById.set(n.id,{options:t,kernel:n}),this._onDidCreateKernel.fire(n)}deleteMappingIfKernelIsDisposed(e,t){t.onDisposed((()=>{this.get(e)===t&&(this.kernelsByUri.delete(e.toString()),this.kernelsById.delete(t.id),(0,i.traceVerbose)(`Kernel got disposed, hence there is no longer a kernel associated with ${(0,o.getDisplayPath)(e)}`)),this.pendingDisposables.delete(t)}),this,this.disposables)}disposeOldKernel(e){const t=this.kernelsByUri.get(e.toString());t&&((0,i.traceInfoIfCI)(`Disposing kernel associated with ${(0,o.getDisplayPath)(e)}`),this.kernelsById.delete(t.kernel.id),this.pendingDisposables.add(t.kernel),t.kernel.dispose().catch((e=>(0,i.traceWarning)("Failed to dispose old kernel",e))).finally((()=>this.pendingDisposables.delete(t.kernel))).catch(s.noop)),this.kernelsByUri.delete(e.toString())}}},38404:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThirdPartyKernelProvider=t.KernelProvider=void 0;const o=n(26594),s=n(10053),a=n(15925),c=n(42080),l=n(2055),u=n(22021),d=n(94062),h=n(94433),p=n(52006),f=n(82323);let g=class extends l.BaseCoreKernelProvider{constructor(e,t,n,r,i,o,s,a,c,l,u,d){super(e,t,o),this.sessionCreator=n,this.configService=r,this.appShell=i,this.context=s,this.formatters=c,this.startupCodeProviders=l,this.workspaceStorage=u,this.experiments=d,t.push(a.onDidRemove(this.handleServerRemoval.bind(this)))}getOrCreate(e,t){const n=this.getInternal(e);if(n&&n.options.metadata.id===t.metadata.id)return n.kernel;this.disposeOldKernel(e);const r=e?.notebookType===a.InteractiveWindowView?t.resourceUri:e.uri,i=(0,p.createKernelSettings)(this.configService,r),o=e.uri.path.endsWith(".interactive")||t.resourceUri?.path.endsWith(".interactive")?a.InteractiveWindowView:a.JupyterNotebookView,s=new u.Kernel(r,e,t.metadata,this.sessionCreator,i,this.appShell,t.controller,this.startupCodeProviders.getProviders(o),this.workspaceStorage,this.experiments);return s.onRestarted((()=>this._onDidRestartKernel.fire(s)),this,this.disposables),s.onDisposed((()=>this._onDidDisposeKernel.fire(s)),this,this.disposables),s.onStarted((()=>this._onDidStartKernel.fire(s)),this,this.disposables),s.onStatusChanged((e=>this._onKernelStatusChanged.fire({kernel:s,status:e})),this,this.disposables),this.executions.set(s,new f.NotebookKernelExecution(s,this.appShell,this.context,this.formatters,e)),this.asyncDisposables.push(s),this.storeKernel(e,t,s),this.deleteMappingIfKernelIsDisposed(s),s}};t.KernelProvider=g,t.KernelProvider=g=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IAsyncDisposableRegistry)),i(1,(0,o.inject)(c.IDisposableRegistry)),i(2,(0,o.inject)(d.IKernelSessionFactory)),i(3,(0,o.inject)(c.IConfigurationService)),i(4,(0,o.inject)(s.IApplicationShell)),i(5,(0,o.inject)(s.IVSCodeNotebook)),i(6,(0,o.inject)(c.IExtensionContext)),i(7,(0,o.inject)(h.IJupyterServerUriStorage)),i(8,(0,o.multiInject)(d.ITracebackFormatter)),i(9,(0,o.inject)(d.IStartupCodeProviders)),i(10,(0,o.inject)(c.IMemento)),i(10,(0,o.named)(c.WORKSPACE_MEMENTO)),i(11,(0,o.inject)(c.IExperimentService))],g);let m=class extends l.BaseThirdPartyKernelProvider{constructor(e,t,n,r,i,o,s,a,c){super(e,t,o),this.sessionCreator=n,this.configService=r,this.appShell=i,this.startupCodeProviders=s,this.workspaceStorage=a,this.experiments=c}getOrCreate(e,t){const n=this.getInternal(e);if(n&&n.options.metadata.id===t.metadata.id)return n.kernel;this.disposeOldKernel(e);const r=e,i=(0,p.createKernelSettings)(this.configService,r),o=e.path.endsWith(".interactive")||t.resourceUri?.path.endsWith(".interactive")?a.InteractiveWindowView:a.JupyterNotebookView,s=new u.ThirdPartyKernel(e,r,t.metadata,this.sessionCreator,this.appShell,i,this.startupCodeProviders.getProviders(o),this.workspaceStorage,this.experiments);return s.onRestarted((()=>this._onDidRestartKernel.fire(s)),this,this.disposables),s.onDisposed((()=>this._onDidDisposeKernel.fire(s)),this,this.disposables),s.onStarted((()=>this._onDidStartKernel.fire(s)),this,this.disposables),s.onStatusChanged((e=>this._onKernelStatusChanged.fire({kernel:s,status:e})),this,this.disposables),this.asyncDisposables.push(s),this.storeKernel(e,t,s),this.deleteMappingIfKernelIsDisposed(e,s),s}};t.ThirdPartyKernelProvider=m,t.ThirdPartyKernelProvider=m=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IAsyncDisposableRegistry)),i(1,(0,o.inject)(c.IDisposableRegistry)),i(2,(0,o.inject)(d.IKernelSessionFactory)),i(3,(0,o.inject)(c.IConfigurationService)),i(4,(0,o.inject)(s.IApplicationShell)),i(5,(0,o.inject)(s.IVSCodeNotebook)),i(6,(0,o.inject)(d.IStartupCodeProviders)),i(7,(0,o.inject)(c.IMemento)),i(7,(0,o.named)(c.WORKSPACE_MEMENTO)),i(8,(0,o.inject)(c.IExperimentService))],m)},40465:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelRefreshIndicator=void 0;const o=n(26594),s=n(66828),a=n(15925),c=n(20397),l=n(42080),u=n(11642),d=n(94062);let h=class{constructor(e,t){this.kernelFinder=t,this.disposables=[],e.push(this)}dispose(){(0,c.dispose)(this.disposables)}activate(){this.startRefresh()}startRefresh(){if(!this.refreshedOnceBefore)return"discovering"===this.kernelFinder.status?this.displayProgressIndicator():void this.kernelFinder.onDidChangeStatus((()=>{"discovering"===this.kernelFinder.status&&this.displayProgressIndicator()}),this,this.disposables)}displayProgressIndicator(){const e=Date.now().toString();(0,u.traceInfo)(`Start refreshing Kernel Picker (${e})`);const t=s.notebooks.createNotebookControllerDetectionTask(a.JupyterNotebookView),n=s.notebooks.createNotebookControllerDetectionTask(a.InteractiveWindowView);this.disposables.push(t),this.disposables.push(n),this.kernelFinder.onDidChangeStatus((()=>{"idle"===this.kernelFinder.status&&((0,u.traceInfo)(`End refreshing Kernel Picker (${e})`),t.dispose(),n.dispose())}),this,this.disposables)}};t.KernelRefreshIndicator=h,t.KernelRefreshIndicator=h=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IDisposableRegistry)),i(1,(0,o.inject)(d.IKernelFinder))],h)},52006:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createKernelSettings=void 0,t.createKernelSettings=function(e,t){return{get enableExtendedKernelCompletions(){return e.getSettings(t).enableExtendedKernelCompletions},get generateSVGPlots(){return e.getSettings(t).generateSVGPlots},get ignoreVscodeTheme(){return e.getSettings(t).ignoreVscodeTheme},get interruptTimeout(){return e.getSettings(t).jupyterInterruptTimeout},get launchTimeout(){return e.getSettings(t).jupyterLaunchTimeout},get runStartupCommands(){return e.getSettings(t).runStartupCommands},get themeMatplotlibPlots(){return e.getSettings(t).themeMatplotlibPlots}}}},87989:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelStartupCodeProviders=void 0;const i=n(26594);let o=class{constructor(){this.providers=new Map}getProviders(e){return(this.providers.get(e)||[]).slice()}register(e,t){this.providers.set(t,this.providers.get(t)||[]),this.providers.get(t).push(e)}};t.KernelStartupCodeProviders=o,t.KernelStartupCodeProviders=o=r([(0,i.injectable)()],o)},97102:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelStatusProvider=void 0;const o=n(26594),s=n(20397),a=n(42080),c=n(25251),l=n(72584),u=n(98729),d=n(94062);let h=class{constructor(e,t){this.kernelProvider=e,this.disposables=[],this.restartProgress=new WeakMap,this.interruptProgress=new WeakMap,t.push(this)}dispose(){(0,s.dispose)(this.disposables)}activate(){this.kernelProvider.onDidCreateKernel(this.onDidCreateKernel,this,this.disposables),this.kernelProvider.onDidDisposeKernel((e=>{this.restartProgress.get(e)?.dispose(),this.interruptProgress.get(e)?.dispose()}),this,this.disposables)}onDidCreateKernel(e){e.addHook("willRestart",(async()=>{this.restartProgress.get(e)?.dispose();const t=l.KernelProgressReporter.createProgressReporter(e.resourceUri,c.DataScience.restartingKernelStatus(`: ${(0,u.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata)}`));this.restartProgress.set(e,t)}),this,this.disposables),e.addHook("restartCompleted",(async()=>{this.restartProgress.get(e)?.dispose(),this.interruptProgress.get(e)?.dispose()}),this,this.disposables),e.addHook("willInterrupt",(async()=>{const t=l.KernelProgressReporter.createProgressReporter(e.resourceUri,c.DataScience.interruptKernelStatus);this.interruptProgress.set(e,t)}),this,this.disposables),e.addHook("interruptCompleted",(async()=>this.interruptProgress.get(e)?.dispose()),this,this.disposables)}};t.KernelStatusProvider=h,t.KernelStatusProvider=h=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IKernelProvider)),i(1,(0,o.inject)(a.IDisposableRegistry))],h)},85493:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendKernelSpecTelemetry=void 0;const r=n(15925),i=n(9959),o=["/bin/sh","/bin/bash","/bin/zsh"];t.sendKernelSpecTelemetry=function(e,t){const n=(e.argv||[]).some((e=>(e=e.toLowerCase(),o.some((t=>e.includes(t))))));(0,i.sendTelemetryEvent)(r.Telemetry.KernelSpecLanguage,void 0,{language:e.language,kind:t,usesShell:n})}},15467:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TrustedKernelPaths=void 0;const i=n(26594);let o=class{isTrusted(e){return!0}};t.TrustedKernelPaths=o,t.TrustedKernelPaths=o=r([(0,i.injectable)()],o)},32378:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITrustedKernelPaths=void 0,t.ITrustedKernelPaths=Symbol("ITrustedKernelPaths")},99216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IRawKernelSessionFactory=t.IOldRawKernelSessionFactory=t.IRawNotebookSupportedService=t.IKernelLauncher=void 0,t.IKernelLauncher=Symbol("IKernelLauncher"),t.IRawNotebookSupportedService=Symbol("IRawNotebookSupportedService"),t.IOldRawKernelSessionFactory=Symbol("IOldRawKernelSessionFactory"),t.IRawKernelSessionFactory=Symbol("IRawKernelSessionFactory")},9086:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const i=n(52064),o=n(77886),s=n(15925),a=n(9959),c=n(99216),l=n(24649),u=n(24150),d=n(26594),h=n(94062),p=n(38404),f=n(30038),g=n(6428),m=n(7214),v=n(43719),y=n(75e3),b=n(68650),w=n(81296),S=n(57410),C=n(15467),_=n(32378),P=n(97102),E=n(61254),k=n(40465),I=n(64676),D=n(67276),T=n(87989),x=n(57550),O=n(85434);let R=class{constructor(){this.isSupported=!1}};R=r([(0,d.injectable)()],R),t.registerTypes=function(e,t){e.addSingleton(c.IRawNotebookSupportedService,R),(0,a.setSharedProperty)("isInsiderExtension",(0,s.isPreReleaseVersion)());const n=e.get(o.IPythonExtensionChecker);(0,a.setSharedProperty)("isPythonExtensionInstalled",n.isPythonExtensionInstalled?"true":"false");const r=e.get(c.IRawNotebookSupportedService);(0,a.setSharedProperty)("rawKernelSupported",r.isSupported?"true":"false"),e.addSingleton(h.IStartupCodeProviders,T.KernelStartupCodeProviders),e.addSingleton(m.IKernelVariableRequester,b.PythonVariablesRequester,s.Identifiers.PYTHON_VARIABLES_REQUESTER),e.addSingleton(m.IJupyterVariables,y.JupyterVariables,s.Identifiers.ALL_VARIABLES),e.addSingleton(m.IJupyterVariables,v.KernelVariables,s.Identifiers.KERNEL_VARIABLES),e.addSingleton(i.IExtensionSyncActivationService,l.KernelCrashMonitor),e.addSingleton(i.IExtensionSyncActivationService,k.KernelRefreshIndicator),e.addSingleton(i.IExtensionSyncActivationService,P.KernelStatusProvider),e.addSingleton(i.IExtensionSyncActivationService,S.KernelAutoReconnectMonitor),e.addSingleton(i.IExtensionSyncActivationService,E.KernelCompletionsPreWarmer),e.addSingleton(i.IExtensionSyncActivationService,I.RemoteJupyterServerMruUpdate),e.addSingleton(h.IKernelProvider,p.KernelProvider),e.addSingleton(_.ITrustedKernelPaths,C.TrustedKernelPaths),e.addSingleton(h.IThirdPartyKernelProvider,p.ThirdPartyKernelProvider),e.addSingleton(g.PreferredRemoteKernelIdProvider,g.PreferredRemoteKernelIdProvider),e.addSingleton(h.IKernelFinder,f.KernelFinder),e.addSingleton(h.IKernelDependencyService,D.KernelDependencyService),e.addSingleton(i.IExtensionSyncActivationService,O.ClearJupyterServersCommand),e.addSingleton(x.LastCellExecutionTracker,x.LastCellExecutionTracker),e.addBinding(x.LastCellExecutionTracker,i.IExtensionSyncActivationService),(0,u.registerTypes)(e,t),e.addSingleton(i.IExtensionSyncActivationService,w.CellOutputDisplayIdTracker)}},61239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeInteractiveOrNotebookTelemetryBasedOnUserAction=t.trackKernelResourceInformation=void 0;const r=n(17835),i=n(15925),o=n(96434),s=n(46031),a=n(86563),c=n(52859),l=n(35412),u=n(10499);async function d(e,t){if(!e)return;const n=(0,c.getComparisonKey)(e),[d,h]=u.trackedInfo.get(n)||[{resourceType:(0,a.getResourceType)(e),resourceHash:e?await(0,o.getTelemetrySafeHashedString)(e.toString()):void 0,kernelSessionId:await(0,o.getTelemetrySafeHashedString)(Date.now().toString()),capturedEnvVars:void 0,userExecutedCell:void 0,disableUI:void 0,kernelLanguage:void 0,kernelId:void 0,kernelSpecHash:void 0,isUsingActiveInterpreter:void 0,pythonEnvironmentType:void 0,pythonEnvironmentPath:void 0,pythonEnvironmentVersion:void 0,kernelConnectionType:void 0},{previouslySelectedKernelConnectionId:""}];"boolean"==typeof t.capturedEnvVars&&(d.capturedEnvVars=t.capturedEnvVars),t.userExecutedCell&&(d.userExecutedCell=!0),"boolean"==typeof t.disableUI&&(d.disableUI=t.disableUI);const p=t.kernelConnection;if(p){const n=p.id;let a;switch(h.previouslySelectedKernelConnectionId!==n&&(d.userExecutedCell=t.userExecutedCell,d.disableUI=t.disableUI),h.previouslySelectedKernelConnectionId&&h.previouslySelectedKernelConnectionId!==n&&(d.kernelSessionId=await(0,o.getTelemetrySafeHashedString)(Date.now().toString())),p.kind){case"connectToLiveRemoteKernel":a=p.kernelModel.language;break;case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":a=p.kernelSpec.language;break;case"startUsingPythonInterpreter":a=i.PYTHON_LANGUAGE}const c="kernelSpec"in p&&p.kernelSpec.specFile?(0,o.getTelemetrySafeHashedString)(p.kernelSpec.specFile):Promise.resolve("");[d.kernelLanguage,d.kernelId,d.kernelSpecHash]=await Promise.all([a,(0,o.getTelemetrySafeHashedString)(p.id),c]),h.previouslySelectedKernelConnectionId=p.id;const f=p.interpreter;if(f){if(d.isUsingActiveInterpreter=r.WorkspaceInterpreterTracker.isActiveWorkspaceInterpreter(e,f),d.pythonEnvironmentType=f.envType,d.pythonEnvironmentPath=await(0,o.getTelemetrySafeHashedString)((0,l.getFilePath)((0,s.getNormalizedInterpreterPath)(f.uri))),u.pythonEnvironmentsByHash.set(d.pythonEnvironmentPath,f),f.version){const{major:e,minor:t,patch:n}=f.version;d.pythonEnvironmentVersion=`${e}.${t}.${n}`}else d.pythonEnvironmentVersion=void 0;(0,u.updatePythonPackages)(d)}d.kernelConnectionType=d.kernelConnectionType||p?.kind}else h.previouslySelectedKernelConnectionId="";u.trackedInfo.set(n,[d,h])}t.trackKernelResourceInformation=d,t.initializeInteractiveOrNotebookTelemetryBasedOnUserAction=async function(e,t){await d(e,{kernelConnection:t,userExecutedCell:!0})}},47684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendKernelTelemetryEvent=void 0;const r=n(9959),i=n(10499),o=n(58681);t.sendKernelTelemetryEvent=function(e,t,n,s,a){(0,i.getContextualPropsForTelemetry)(e).then((e=>{Object.assign(e,s||{}),(0,r.sendTelemetryEvent)(t,n,e,a)})).catch(o.noop)}},94062:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.IStartupCodeProviders=t.ITracebackFormatter=t.IKernelFinder=t.IKernelDependencyService=t.KernelInterpreterDependencyResponse=t.IKernelSessionFactory=t.IJupyterServerConnector=t.InterruptResult=t.IThirdPartyKernelProvider=t.IKernelProvider=t.isRemoteConnection=t.isLocalConnection=t.PythonKernelConnectionMetadata=t.RemoteKernelSpecConnectionMetadata=t.LocalKernelSpecConnectionMetadata=t.LiveRemoteKernelConnectionMetadata=t.BaseKernelConnectionMetadata=t.NotebookCellRunState=void 0;const s=o(n(15948)),a=n(24353),c=n(58681),l=n(96434),u=n(46031),d=n(15925),h=n(9959),p=n(46875);var f,g,m;async function v(e){if(!(0,c.isWeb)()&&e.interpreter?.uri){const t=e.interpreter.uri.fsPath,n=(0,u.getNormalizedInterpreterPath)(e.interpreter.uri).fsPath,r=e.id.replace(t,n);return(0,l.getTelemetrySafeHashedString)(r)}return(0,l.getTelemetrySafeHashedString)(e.id)}!function(e){e.Idle="Idle",e.Success="Success",e.Error="Error"}(f||(t.NotebookCellRunState=f={}));class y{static fromJSON(e){const t=Object.assign(e,{});switch(t.interpreter&&(t.interpreter=(0,a.deserializePythonEnvironment)(t.interpreter,"")),e.kind){case"startUsingLocalKernelSpec":return w.create(t);case"connectToLiveRemoteKernel":return b.create(t);case"startUsingRemoteKernelSpec":return S.create(t);case"startUsingPythonInterpreter":return C.create(t);default:throw new Error(`Invalid object to be deserialized into a connection, kind = ${t.kind}`)}}}t.BaseKernelConnectionMetadata=y;class b{constructor(e){this.kind="connectToLiveRemoteKernel",this.kernelModel=e.kernelModel,this.interpreter=e.interpreter,this.baseUrl=e.baseUrl,this.id=e.id,this.serverProviderHandle=e.serverProviderHandle,k(this)}static create(e){return new b(e)}updateModel(e){Object.assign(this.kernelModel,e)}getHashId(){return v(this)}toJSON(){return{id:this.id,kind:this.kind,baseUrl:this.baseUrl,interpreter:(0,a.serializePythonEnvironment)(this.interpreter),kernelModel:this.kernelModel,serverProviderHandle:this.serverProviderHandle}}static fromJSON(e){return y.fromJSON(e)}}t.LiveRemoteKernelConnectionMetadata=b;class w{constructor(e){this.kind="startUsingLocalKernelSpec",this.kernelSpec=e.kernelSpec,this.interpreter=e.interpreter,this.id=e.id,k(this)}static create(e){return new w(e)}getHashId(){return v(this)}toJSON(){return{id:this.id,kernelSpec:this.kernelSpec,interpreter:(0,a.serializePythonEnvironment)(this.interpreter),kind:this.kind}}static fromJSON(e){return y.fromJSON(e)}}t.LocalKernelSpecConnectionMetadata=w;class S{constructor(e){this.kind="startUsingRemoteKernelSpec",this.interpreter=e.interpreter,this.kernelSpec=e.kernelSpec,this.baseUrl=e.baseUrl,this.id=e.id,this.serverProviderHandle=e.serverProviderHandle,k(this)}static create(e){return new S(e)}getHashId(){return v(this)}toJSON(){return{id:this.id,kernelSpec:this.kernelSpec,interpreter:(0,a.serializePythonEnvironment)(this.interpreter),baseUrl:this.baseUrl,kind:this.kind,serverProviderHandle:this.serverProviderHandle}}static fromJSON(e){return y.fromJSON(e)}}t.RemoteKernelSpecConnectionMetadata=S;class C{constructor(e){this.kind="startUsingPythonInterpreter",this.kernelSpec=e.kernelSpec,this.interpreter=e.interpreter,this.id=e.id,k(this)}static create(e){return new C(e)}getHashId(){return v(this)}toJSON(){return{id:this.id,kernelSpec:this.kernelSpec,interpreter:(0,a.serializePythonEnvironment)(this.interpreter),kind:this.kind}}updateInterpreter(e){Object.assign(this.interpreter,e)}static fromJSON(e){return y.fromJSON(e)}}function _(e){return"startUsingLocalKernelSpec"===e.kind||"startUsingPythonInterpreter"===e.kind}function P(e){return!_(e)}t.PythonKernelConnectionMetadata=C,t.isLocalConnection=_,t.isRemoteConnection=P,t.IKernelProvider=Symbol("IKernelProvider"),t.IThirdPartyKernelProvider=Symbol("IThirdPartyKernelProvider"),function(e){e.Success="success",e.TimedOut="timeout",e.Restarted="restart"}(g||(t.InterruptResult=g={})),t.IJupyterServerConnector=Symbol("IJupyterServerConnector"),t.IKernelSessionFactory=Symbol("IKernelSessionFactory"),function(e){e[e.ok=0]="ok",e[e.cancel=1]="cancel",e[e.failed=2]="failed",e[e.selectDifferentKernel=3]="selectDifferentKernel",e[e.uiHidden=4]="uiHidden"}(m||(t.KernelInterpreterDependencyResponse=m={})),t.IKernelDependencyService=Symbol("IKernelDependencyService"),t.IKernelFinder=Symbol("IKernelFinder"),t.ITracebackFormatter=Symbol("ITracebackFormatter"),t.IStartupCodeProviders=Symbol("IStartupCodeProviders");const E=new Set;function k(e){if(E.has(e.id))return;E.add(e.id);const t="kernelSpec"in e?e.kernelSpec:void 0,n=t?.language||("startUsingPythonInterpreter"===e.kind?d.PYTHON_LANGUAGE:void 0);let r="",i="";const o="interpreter"in e?e.interpreter:void 0;let a;t&&Array.isArray(t.argv)&&t.argv.length>0&&(r=t.argv[0],a=r.toLowerCase()===o?.uri?.fsPath?.toLowerCase(),s.basename(r)!==r&&(r=`<P>${s.basename(r)}`),i=t.argv.map((e=>e.includes("/")||e.includes("\\")?`<P>${s.basename(e)}`:e)).join("<#>"));const u="kernelSpec"in e&&e.kernelSpec.specFile?(0,l.getTelemetrySafeHashedString)(e.kernelSpec.specFile):Promise.resolve(""),f=(0,l.getTelemetrySafeHashedString)(e.id),g=P(e)?(0,l.getTelemetrySafeHashedString)((0,p.generateIdFromRemoteProvider)(e.serverProviderHandle)):Promise.resolve(""),m=P(e)?e.serverProviderHandle.extensionId:d.JVSC_EXTENSION_ID,v=P(e)?(0,l.getTelemetrySafeHashedString)(e.baseUrl.toLowerCase()):Promise.resolve("");Promise.all([u,f,g,v]).then((([t,s,c,l])=>(0,h.sendTelemetryEvent)(d.Telemetry.KernelSpec,void 0,{kernelId:s,serverIdHash:c,kernelSpecHash:t,baseUrlHash:l,providerExtensionId:m,kernelConnectionType:e.kind,kernelLanguage:n,envType:o?.envType,isArgv0SameAsInterpreter:a,argv0:r,argv:i}))).catch(c.noop)}},50068:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertDebugProtocolVariableToIJupyterVariable=t.DataViewableTypes=void 0,t.DataViewableTypes=new Set(["DataFrame","list","dict","ndarray","Series","Tensor","EagerTensor","DataArray"]),t.convertDebugProtocolVariableToIJupyterVariable=function(e){return{name:e.evaluateName??e.name,type:e.type,count:0,shape:"",size:0,supportsDataExplorer:t.DataViewableTypes.has(e.type||""),value:e.value,truncated:!0,frameId:e.variablesReference}}},75e3:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterVariables=void 0;const o=n(26594),s=n(66828),a=n(42080),c=n(15925),l=n(9959),u=n(7214);let d=class{constructor(e,t,n){this.kernelVariables=t,this.debuggerVariables=n,this.refreshEventEmitter=new s.EventEmitter,e.push(n.refreshRequired(this.fireRefresh.bind(this))),e.push(t.refreshRequired(this.fireRefresh.bind(this)))}get refreshRequired(){return this.refreshEventEmitter.event}async getVariables(e,t){return this.variableHandler.getVariables(e,t)}async getFullVariable(e,t){return this.variableHandler.getFullVariable(e,t)}async getMatchingVariable(e,t,n){return this.variableHandler.getMatchingVariable(e,t,n)}async getDataFrameInfo(e,t,n,r){return this.variableHandler.getDataFrameInfo(e,t,n,r)}async getDataFrameRows(e,t,n,r,i){return this.variableHandler.getDataFrameRows(e,t,n,r,i)}get variableHandler(){return this.debuggerVariables.active?this.debuggerVariables:this.kernelVariables}fireRefresh(){this.refreshEventEmitter.fire()}};t.JupyterVariables=d,r([(0,l.capturePerfTelemetry)(l.Telemetry.VariableExplorerFetchTime)],d.prototype,"getVariables",null),t.JupyterVariables=d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IDisposableRegistry)),i(1,(0,o.inject)(u.IJupyterVariables)),i(1,(0,o.named)(c.Identifiers.KERNEL_VARIABLES)),i(2,(0,o.inject)(u.IJupyterVariables)),i(2,(0,o.named)(c.Identifiers.DEBUGGER_VARIABLES))],d)},43719:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelVariables=void 0;const o=n(26594),s=n(66828),a=n(15925),c=n(42080),l=n(43138),u=n(58323),d=n(98729),h=n(94062),p=n(7214),f=/Type:\s*(\w+)/,g=/Value:\s*(.*)/,m=/String form:\s*([\s\S]+?)\n/,v=/Docstring:\s*(.*)/,y=/Length:\s+(.*)/,b=/^\s+\[(\d+) rows x (\d+) columns\]/m,w=new Set(["DataFrame","list","dict","ndarray","Series","Tensor","EagerTensor","DataArray"]);let S=class{constructor(e,t,n,r){this.configService=e,this.disposables=n,this.kernelProvider=r,this.variableRequesters=new Map,this.cachedVariables=new Map,this.refreshEventEmitter=new s.EventEmitter,this.variableRequesters.set(a.PYTHON_LANGUAGE,t)}get refreshRequired(){return this.refreshEventEmitter.event}async getVariables(e,t){return this.getVariablesBasedOnKernel(t,e)}async getMatchingVariable(e,t,n){const r=this.cachedVariables.get(t.uri.toString());if(r){let i=r.variables.find((t=>t.name===e));return i&&!i.value&&(i=await this.getVariableValueFromKernel(i,t,n)),i}{const r=await this.getVariableNamesAndTypesFromKernel(t,n);if(r){const i=r.find((t=>t.name===e));if(i)return this.getVariableValueFromKernel({name:e,value:void 0,supportsDataExplorer:!1,type:i.type,size:0,count:0,shape:"",truncated:!0},t,n)}}}async getDataFrameInfo(e,t,n,r){if(!t)return e;const i=(0,d.getKernelConnectionLanguage)(t?.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,o=this.variableRequesters.get(i);if(o){r&&(e=await this.getFullVariable(e,t));let i=e.name;return n&&(i=`${e.name}${n}`),o.getDataFrameInfo(e,t,i)}return e}async getDataFrameRows(e,t,n,r,i){const o=(0,d.getKernelConnectionLanguage)(r?.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,s=this.variableRequesters.get(o);if(s){let o=e.name;return i&&(o=`${e.name}${i}`),s.getDataFrameRows(t,n,r,o)}return{data:[]}}async getFullVariable(e,t,n){const r=(0,d.getKernelConnectionLanguage)(t?.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,i=this.variableRequesters.get(r);return i?i.getFullVariable(e,t,n):e}async getVariablesBasedOnKernel(e,t){let n=this.cachedVariables.get(e.uri.toString());const r=this.kernelProvider.getKernelExecution(e).pendingCells.length>0,i=this.kernelProvider.getKernelExecution(e);n&&(r||n.currentExecutionCount===t.executionCount&&n.currentExecutionCount===i.executionCount)||(n={currentExecutionCount:i.executionCount,variables:(await this.getVariableNamesAndTypesFromKernel(e)).map((e=>({name:e.name,value:void 0,supportsDataExplorer:!1,type:e.type,size:0,shape:"",count:0,truncated:!0})))});const o=this.configService.getSettings(e.resourceUri).variableExplorerExclude?this.configService.getSettings().variableExplorerExclude?.split(";"):[],s={executionCount:i.executionCount,pageStartIndex:-1,pageResponse:[],totalCount:0,refreshCount:t.refreshCount};if(n){const r=t.sortColumn,i=(e,n)=>{const i=e[r]?e[r]:"",o=n[r]?n[r]:"";return t.sortAscending?i.localeCompare(o,void 0,{sensitivity:"base"}):o.localeCompare(i,void 0,{sensitivity:"base"})};n.variables.sort(i);const a=t.startIndex?t.startIndex:0,c=t.pageSize?t.pageSize:100;s.pageStartIndex=a;for(let t=a;t<a+c&&t<n.variables.length;){if(o&&o.indexOf(n.variables[t].type)>=0){n.variables.splice(t,1);continue}const r="string"==typeof n.variables[t].value?n.variables[t]:await this.getVariableValueFromKernel(n.variables[t],e);n.variables[t]=r,s.pageResponse.push(r),t+=1}this.cachedVariables.set(e.uri.toString(),n),s.totalCount=n.variables.length}return s}async getVariableProperties(e,t,n){const r=await this.getMatchingVariable(e,t,n),i=(0,d.getKernelConnectionLanguage)(t.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,o=this.variableRequesters.get(i);return o?o.getVariableProperties(e,n,r):{}}async getVariableNamesAndTypesFromKernel(e,t){const n=(0,d.getKernelConnectionLanguage)(e.kernelConnectionMetadata)||a.PYTHON_LANGUAGE,r=this.variableRequesters.get(n);return r?r.getVariableNamesAndTypesFromKernel(e,t):[]}inspect(e,t,n=0,r){const i=(0,l.createDeferred)();try{e.requestInspect({code:t,cursor_pos:n,detail_level:0}).then((e=>{e&&"ok"===e.content.status?i.resolve(e.content.data):i.resolve(void 0)})).catch((e=>{i.reject(e)}))}catch(e){i.reject(e)}return r&&this.disposables.push(r.onCancellationRequested((()=>i.reject(new s.CancellationError)))),i.promise}async getVariableValueFromKernel(e,t,n){let r={...e};if(!t.disposed&&t.session?.kernel){const i=await this.inspect(t.session.kernel,e.name,0,n);if(i&&i.hasOwnProperty("text/plain")){const e=(0,u.stripAnsi)(i["text/plain"].toString()),t=f.exec(e),n=y.exec(e),o=b.exec(e);t&&(r.type=t[1]),r.value=[g,m,v].reduce(((t,n)=>t||n.exec(e)?.[1]||""),""),n&&(r.count=parseInt(n[1],10)),o&&(r.shape=`(${o[1]}, ${o[2]})`)}i&&i.type&&(r.type=i.type.toString()),i&&i.value&&(r.value=i.value.toString()),w.has(r.type)&&(r.supportsDataExplorer=!0)}return r.type&&r.count&&!r.shape&&(0,d.isPythonKernelConnection)(t.kernelConnectionMetadata)&&r.supportsDataExplorer&&"list"!==r.type&&(r=await this.getFullVariable(r,t)),r}};t.KernelVariables=S,t.KernelVariables=S=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IConfigurationService)),i(1,(0,o.inject)(p.IKernelVariableRequester)),i(1,(0,o.named)(a.Identifiers.PYTHON_VARIABLES_REQUESTER)),i(2,(0,o.inject)(c.IDisposableRegistry)),i(3,(0,o.inject)(h.IKernelProvider))],S)},68650:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonVariablesRequester=t.parseDataFrame=void 0;const o=n(26594),s=n(11642),a=n(25251),c=n(58323),l=n(89112),u=n(9959),d=n(98729),h=n(42080),p=n(65864);function f(e){const t=e.index,n=e.columns;return{data:e.data.map(((e,r)=>{const i={index:t[r]};return n.forEach(((t,n)=>{i[t]=e[n]})),i}))}}async function g(e,{code:t,initializeCode:n,cleanupCode:r},i){if(e.disposed||e.disposing||!e.session?.kernel||!e.session.kernel||e.session.isDisposed)return[];try{return n&&await(0,d.executeSilently)(e.session.kernel,n,i),await(0,d.executeSilently)(e.session.kernel,t,i)}catch(e){if(e instanceof p.SessionDisposedError)return[];throw e}finally{r&&await(0,d.executeSilently)(e.session.kernel,r,i)}}t.parseDataFrame=f;let m=class{constructor(e,t){this.varScriptGenerator=e,this.dfScriptGenerator=t}async getDataFrameInfo(e,t,n){const{code:r,cleanupCode:i,initializeCode:o}=await this.dfScriptGenerator.generateCodeToGetDataFrameInfo({isDebugging:!1,variableName:n}),s=await g(t,{code:r,cleanupCode:i,initializeCode:o},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getDataFrameInfo",telemetryName:u.Telemetry.PythonVariableFetchingCodeFailure}),a=t.notebook?.uri||t.resourceUri||t.uri;return{...e,...this.deserializeJupyterResult(s),fileName:a}}async getDataFrameRows(e,t,n,r){const{code:i,cleanupCode:o,initializeCode:s}=await this.dfScriptGenerator.generateCodeToGetDataFrameRows({isDebugging:!1,variableName:r,startIndex:e,endIndex:t}),a=await g(n,{code:i,cleanupCode:o,initializeCode:s},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getDataFrameRows",telemetryName:u.Telemetry.PythonVariableFetchingCodeFailure});return f(this.deserializeJupyterResult(a))}async getVariableProperties(e,t,n){let r={};return n&&n.value&&(r[`${e}`]=n.value),r}async getVariableNamesAndTypesFromKernel(e,t){if(e.session){const{code:t,cleanupCode:n,initializeCode:r}=await this.varScriptGenerator.generateCodeToGetVariableTypes({isDebugging:!1}),i=await g(e,{code:t,cleanupCode:n,initializeCode:r},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getVariableNamesAndTypesFromKernel",telemetryName:u.Telemetry.PythonVariableFetchingCodeFailure});if(e.disposed||e.disposing)return[];const o=this.deserializeJupyterResult(i),s=[];for(const[e,t]of Object.entries(o)){const n={name:e,value:void 0,supportsDataExplorer:!1,type:t||"",size:0,shape:"",count:0,truncated:!0};s.push(n)}return s}return[]}async getFullVariable(e,t,n){const{code:r,cleanupCode:i,initializeCode:o}=await this.varScriptGenerator.generateCodeToGetVariableInfo({isDebugging:!1,variableName:e.name}),s=await g(t,{code:r,cleanupCode:i,initializeCode:o},{traceErrors:!0,traceErrorsMessage:"Failure in execute_request for getFullVariable",telemetryName:u.Telemetry.PythonVariableFetchingCodeFailure});return{...e,...this.deserializeJupyterResult(s)}}extractJupyterResultText(e){if(e.length>0){const t=e[0];if(t&&"stream"===t.output_type&&"stderr"===t.name&&t.hasOwnProperty("text")){const e=t.text;if(e.includes("iopub_data_rate_limit"))throw new l.JupyterDataRateLimitError;{const t=a.DataScience.jupyterGetVariablesExecutionError(e);throw(0,s.traceError)(t),new Error(t)}}if(t&&"execute_result"===t.output_type){const e=t.data;if(e&&e.hasOwnProperty("text/plain"))return e["text/plain"]}if(t&&"stream"===t.output_type&&t.hasOwnProperty("text"))return t.text;if(t&&"error"===t.output_type&&t.hasOwnProperty("traceback")){const e=t.traceback.map(c.stripAnsi).join("\r\n"),n=a.DataScience.jupyterGetVariablesExecutionError(e);throw(0,s.traceError)(n),new Error(n)}}throw new Error(a.DataScience.jupyterGetVariablesBadResults)}deserializeJupyterResult(e){const t=this.extractJupyterResultText(e);return JSON.parse(t)}};t.PythonVariablesRequester=m,t.PythonVariablesRequester=m=r([(0,o.injectable)(),i(0,(0,o.inject)(h.IVariableScriptGenerator)),i(1,(0,o.inject)(h.IDataFrameScriptGenerator))],m)},7214:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IKernelVariableRequester=t.IJupyterVariables=void 0,t.IJupyterVariables=Symbol("IJupyterVariables"),t.IKernelVariableRequester=Symbol("IKernelVariableRequester")},30682:(e,t)=>{"use strict";var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.IInteractiveWindowMapping=t.SharedMessages=t.SysInfoReason=t.IPyWidgetMessages=t.InteractiveWindowMessages=void 0,function(e){e.FinishCell="finish_cell",e.RestartKernel="restart_kernel",e.SettingsUpdated="settings_updated",e.Started="started",e.ConvertUriForUseInWebViewRequest="ConvertUriForUseInWebViewRequest",e.ConvertUriForUseInWebViewResponse="ConvertUriForUseInWebViewResponse",e.Activate="activate",e.ShowDataViewer="show_data_explorer",e.GetVariablesRequest="get_variables_request",e.GetVariablesResponse="get_variables_response",e.VariableExplorerToggle="variable_explorer_toggle",e.SetVariableExplorerHeight="set_variable_explorer_height",e.VariableExplorerHeightResponse="variable_explorer_height_response",e.ForceVariableRefresh="force_variable_refresh",e.UpdateVariableViewExecutionCount="update_variable_view_execution_count",e.OpenLink="open_link",e.SavePng="save_png",e.VariablesComplete="variables_complete",e.IPyWidgetLoadSuccess="ipywidget_load_success",e.IPyWidgetLoadFailure="ipywidget_load_failure",e.IPyWidgetRenderFailure="ipywidget_render_failure",e.IPyWidgetUnhandledKernelMessage="ipywidget_unhandled_kernel_message",e.IPyWidgetWidgetVersionNotSupported="ipywidget_widget_version_not_supported",e.GetHTMLByIdRequest="get_html_by_id_request",e.GetHTMLByIdResponse="get_html_by_id_response"}(n||(t.InteractiveWindowMessages=n={})),function(e){e.IPyWidgets_logMessage="IPyWidgets_logMessage",e.IPyWidgets_IsReadyRequest="IPyWidgets_IsReadyRequest",e.IPyWidgets_AttemptToDownloadFailedWidgetsAgain="IPyWidgets_AttemptToDownloadFailedWidgetsAgain",e.IPyWidgets_IsOnline="IPyWidgets_IsOnline",e.IPyWidgets_Ready="IPyWidgets_Ready",e.IPyWidgets_Request_Widget_Version="IPyWidgets_Request_Widget_Version",e.IPyWidgets_Reply_Widget_Version="IPyWidgets_Reply_Widget_Version",e.IPyWidgets_onRestartKernel="IPyWidgets_onRestartKernel",e.IPyWidgets_onKernelChanged="IPyWidgets_onKernelChanged",e.IPyWidgets_WidgetScriptSourceRequest="IPyWidgets_WidgetScriptSourceRequest",e.IPyWidgets_WidgetScriptSourceResponse="IPyWidgets_WidgetScriptSource_Response",e.IPyWidgets_BaseUrlResponse="IPyWidgets_BaseUrl_Response",e.IPyWidgets_msg="IPyWidgets_msg",e.IPyWidgets_binary_msg="IPyWidgets_binary_msg",e.IPyWidgets_msg_received="IPyWidgets_msg_received",e.IPyWidgets_iopub_msg_handled="IPyWidgets_iopub_msg_handled",e.IPyWidgets_kernelOptions="IPyWidgets_kernelOptions",e.IPyWidgets_registerCommTarget="IPyWidgets_registerCommTarget",e.IPyWidgets_RegisterMessageHook="IPyWidgets_RegisterMessageHook",e.IPyWidgets_ExtensionOperationHandled="IPyWidgets_ExtensionOperationHandled",e.IPyWidgets_RemoveMessageHook="IPyWidgets_RemoveMessageHook",e.IPyWidgets_MessageHookCall="IPyWidgets_MessageHookCall",e.IPyWidgets_MessageHookResult="IPyWidgets_MessageHookResult",e.IPyWidgets_mirror_execute="IPyWidgets_mirror_execute"}(r||(t.IPyWidgetMessages=r={})),function(e){e[e.Start=0]="Start",e[e.Restart=1]="Restart"}(i||(t.SysInfoReason=i={})),function(e){e.UpdateSettings="update_settings",e.Started="started",e.LocInit="loc_init"}(o||(t.SharedMessages=o={})),t.IInteractiveWindowMapping=class{},r.IPyWidgets_kernelOptions,r.IPyWidgets_WidgetScriptSourceRequest,r.IPyWidgets_WidgetScriptSourceResponse,r.IPyWidgets_Ready,r.IPyWidgets_IsOnline,r.IPyWidgets_logMessage,r.IPyWidgets_onRestartKernel,r.IPyWidgets_onKernelChanged,r.IPyWidgets_registerCommTarget,r.IPyWidgets_binary_msg,r.IPyWidgets_msg,r.IPyWidgets_msg_received,r.IPyWidgets_iopub_msg_handled,r.IPyWidgets_RegisterMessageHook,r.IPyWidgets_ExtensionOperationHandled,r.IPyWidgets_RemoveMessageHook,r.IPyWidgets_MessageHookCall,r.IPyWidgets_MessageHookResult,r.IPyWidgets_mirror_execute,n.ForceVariableRefresh,n.UpdateVariableViewExecutionCount,n.FinishCell,n.RestartKernel,n.SettingsUpdated,n.Started,n.Activate,n.ShowDataViewer,n.GetVariablesRequest,n.GetVariablesResponse,n.VariableExplorerToggle,n.SetVariableExplorerHeight,n.VariableExplorerHeightResponse,n.OpenLink,n.SavePng,n.VariablesComplete,o.UpdateSettings,o.LocInit,n.IPyWidgetLoadSuccess,n.IPyWidgetLoadFailure,n.IPyWidgetWidgetVersionNotSupported,n.ConvertUriForUseInWebViewRequest,n.ConvertUriForUseInWebViewResponse,n.IPyWidgetRenderFailure,n.IPyWidgetUnhandledKernelMessage,n.GetHTMLByIdRequest,n.GetHTMLByIdResponse},97838:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKernelConnectionCategorySync=t.getKernelConnectionCategory=t.ConnectionDisplayData=void 0;const r=n(66828),i=n(98729),o=n(25251),s=n(47891);function a(e){switch(e.kind){case"startUsingLocalKernelSpec":return o.DataScience.kernelCategoryForJupyterKernel;case"startUsingPythonInterpreter":if("registeredByNewVersionOfExtForCustomKernelSpec"===(0,i.getKernelRegistrationInfo)(e.kernelSpec))return o.DataScience.kernelCategoryForJupyterKernel;switch(e.interpreter.envType){case s.EnvironmentType.Conda:return e.interpreter.isCondaEnvWithoutPython?o.DataScience.kernelCategoryForCondaWithoutPython:o.DataScience.kernelCategoryForConda;case s.EnvironmentType.Pipenv:return o.DataScience.kernelCategoryForPipEnv;case s.EnvironmentType.Poetry:return o.DataScience.kernelCategoryForPoetry;case s.EnvironmentType.Pyenv:return o.DataScience.kernelCategoryForPyEnv;case s.EnvironmentType.Venv:case s.EnvironmentType.VirtualEnv:case s.EnvironmentType.VirtualEnvWrapper:return o.DataScience.kernelCategoryForVirtual;default:return o.DataScience.kernelCategoryForGlobal}default:return""}}t.ConnectionDisplayData=class{get description(){return this.getDescription?.()||this._description}set description(e){this._description=e}constructor(e,t,n,i,o,s){this.label=e,this._description=t,this.detail=n,this.category=i,this.serverDisplayName=o,this.getDescription=s,this._onDidChange=new r.EventEmitter,this.onDidChange=this._onDidChange.event}dispose(){this._onDidChange.dispose()}triggerChange(){this._onDidChange.fire(this)}},t.getKernelConnectionCategory=function(e){switch(e.kind){case"connectToLiveRemoteKernel":return o.DataScience.kernelCategoryForJupyterSession;case"startUsingRemoteKernelSpec":return o.DataScience.kernelCategoryForRemoteJupyterKernel;default:return a(e)}},t.getKernelConnectionCategorySync=a},22265:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionDisplayDataProvider=void 0;const o=n(26594),s=n(98729),a=n(94433),c=n(10053),l=n(83599),u=n(42080),d=n(58681),h=n(97838),p=n(20339),f=n(25251);let g=class{constructor(e,t,n,r){this.workspace=e,this.platform=t,this.jupyterUriProviderRegistration=n,this.disposables=r,this.details=new Map}getDisplayData(e){if(!this.details.get(e.id)){const t=(0,s.getDisplayNameOrNameOfKernelConnection)(e);let n=(0,s.getKernelConnectionDisplayPath)(e,this.workspace,this.platform);"connectToLiveRemoteKernel"===e.kind&&(n=(0,s.getRemoteKernelSessionInformation)(e));const r="connectToLiveRemoteKernel"===e.kind?()=>(0,s.getRemoteKernelSessionInformation)(e):void 0,i=(0,h.getKernelConnectionCategorySync)(e),o=new h.ConnectionDisplayData(t,n,"",i,void 0,r);this.disposables.push(o),this.details.set(e.id,o)}const t=this.details.get(e.id);this.details.set(e.id,t),"connectToLiveRemoteKernel"!==e.kind&&"startUsingRemoteKernelSpec"!==e.kind||(0,p.getJupyterDisplayName)(e.serverProviderHandle,this.jupyterUriProviderRegistration,f.DataScience.kernelDefaultRemoteDisplayName).then((e=>{if(t.serverDisplayName!==e)return t.serverDisplayName=e,void t.triggerChange()})).catch(d.noop);const n=(0,h.getKernelConnectionCategory)(e);return t.category!==n&&(t.category=n,t.triggerChange()),t}};t.ConnectionDisplayDataProvider=g,t.ConnectionDisplayDataProvider=g=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IWorkspaceService)),i(1,(0,o.inject)(l.IPlatformService)),i(2,(0,o.inject)(a.IJupyterUriProviderRegistration)),i(3,(0,o.inject)(u.IDisposableRegistry))],g)},25928:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ControllerRegistration=void 0;const o=n(26594),s=n(66828),a=n(94433),c=n(94062),l=n(77886),u=n(10053),d=n(6491),h=n(15925),p=n(42080),f=n(58681),g=n(41778),m=n(11642),v=n(20402),y=n(26657),b=n(79250),w=n(50867),S=n(60322);let C=class{get onDidChange(){return this.changeEmitter.event}get registered(){return[...this.registeredControllers.values()]}get all(){return this.metadatas}get metadatas(){return[...this.registeredMetadatas.values()]}get onControllerSelected(){return this.selectedEmitter.event}get onControllerSelectionChanged(){return this.selectionChangedEmitter.event}constructor(e,t,n,r,i,o,a,c){this.notebook=e,this.disposables=t,this.pythonEnvFilter=n,this.workspace=r,this.extensionChecker=i,this.serviceContainer=o,this.serverUriStorage=a,this.kernelFinder=c,this.registeredControllers=new Map,this.changeEmitter=new s.EventEmitter,this.registeredMetadatas=new Map,this.selectedEmitter=new s.EventEmitter,this.selectionChangedEmitter=new s.EventEmitter,this.selectedControllers=new Map,this._activeInterpreterControllerIds=new Set}activate(){this.kernelFinder.onDidChangeKernels((()=>this.loadControllers()),this,this.disposables),this.kernelFinder.registered.forEach((e=>this.monitorDeletionOfConnections(e))),this.kernelFinder.onDidChangeRegistrations((e=>e.added.forEach((e=>this.monitorDeletionOfConnections(e)))),this,this.disposables),this.pythonEnvFilter.onDidChange(this.onDidChangeFilter,this,this.disposables),this.serverUriStorage.onDidChange(this.onDidChangeFilter,this,this.disposables),this.serverUriStorage.onDidChange(this.onDidChangeUri,this,this.disposables),this.serverUriStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables),this.onDidChange((({added:e})=>{e.forEach((e=>{e.onNotebookControllerSelectionChanged((t=>{!t.selected&&this.isFiltered(e.connection)&&this.canControllerBeDisposed(e)&&((0,m.traceWarning)(`Removing controller ${e.id} for ${e.connection.kind} from kernel list`),e.dispose())}),this,this.disposables)}))}),this,this.disposables),this.notebook.onDidOpenNotebookDocument(this.onDidOpenNotebookDocument,this,this.disposables),this.notebook.notebookDocuments.forEach((e=>this.onDidOpenNotebookDocument(e).catch(f.noop))),this.loadControllers()}loadControllers(){this.controllersPromise=this.loadControllersImpl(),(0,y.sendKernelListTelemetry)(this.registered.map((e=>e.connection))),(0,m.traceInfoIfCI)(`Providing notebook controllers with length ${this.registered.length}.`)}get loaded(){return this.controllersPromise}async onDidOpenNotebookDocument(e){(e.notebookType===h.JupyterNotebookView||e.notebookType===h.InteractiveWindowView)&&this.workspace.isTrusted}async loadControllersImpl(){const e=this.kernelFinder.kernels;this.createNotebookControllers(e),(0,m.traceInfoIfCI)(`Kernels found in kernel finder include ${e.map((e=>`${e.kind}:${e.id}`)).join("\n")} \n and currently registered controllers include ${this.registered.map((e=>`${e.connection.kind}:${e.connection.id}`)).join("\n")}`),(0,m.traceInfoIfCI)(`Active Interpreter Kernels include ${Array.from(this._activeInterpreterControllerIds).join("\n")}`),Array.from(this.registered).filter((t=>{const n=e.some((e=>e.id===t.connection.id))||h.isCI&&this._activeInterpreterControllerIds.has(t.id);return!n&&"connectToLiveRemoteKernel"===t.connection.kind||!!this.canControllerBeDisposed(t)&&(n||(0,m.traceVerbose)(`Controller ${t.connection.kind}:'${t.id}' for view = '${t.viewType}' is no longer a valid`),!n)})).forEach((e=>{(0,m.traceWarning)(`Disposing old controller ${e.connection.kind}:'${e.id}' for view = '${e.viewType}'`),e.dispose()}))}createNotebookControllers(e){if(0!==e.length)try{this.batchAdd(e,[h.JupyterNotebookView,h.InteractiveWindowView])}catch(e){if(!(0,d.isCancellationError)(e,!0))throw e}}async monitorDeletionOfConnections(e){const t=e.onDidChangeKernels((({removed:e})=>{const t=new Set((e||[]).map((e=>e.id)));this.registered.filter((e=>t.has(e.connection.id))).forEach((e=>{(0,m.traceWarning)(`Deleting controller ${e.id} as it is associated with a connection that has been deleted ${e.connection.kind}:${e.id}`),e.dispose()}))}),this,this.disposables);this.kernelFinder.onDidChangeRegistrations((n=>{n.removed.includes(e)&&t.dispose()}))}onDidChangeUri(){this.onDidChangeFilter()}async onDidRemoveServers(e){e.forEach((e=>{this.registered.forEach((t=>{(0,c.isRemoteConnection)(t.connection)&&t.connection.serverProviderHandle.id===e.id&&t.connection.serverProviderHandle.handle===e.handle&&((0,m.traceWarning)(`Deleting controller ${t.id} as it is associated with a connection that has been removed`),t.dispose())}))})),this.onDidChangeFilter()}onDidChangeFilter(){this.all.filter((e=>!this.isFiltered(e))).forEach((e=>this.addOrUpdate(e,[h.JupyterNotebookView,h.InteractiveWindowView]))),this.registered.forEach((e=>{this.isFiltered(e.connection)&&this.canControllerBeDisposed(e)&&((0,m.traceWarning)(`Deleting controller ${e.id} as it is associated with a connection that has been hidden`),e.dispose())}))}batchAdd(e,t){const n=[];e.forEach((e=>{const{added:r}=this.addImpl(e,t,!1);n.push(...r)})),n.length&&this.changeEmitter.fire({added:n,removed:[]})}trackActiveInterpreterControllers(e){e.forEach((e=>this._activeInterpreterControllerIds.add(e.id)))}canControllerBeDisposed(e){return!this._activeInterpreterControllerIds.has(e.id)&&!this.isControllerAttachedToADocument(e)}getSelected(e){return this.selectedControllers.get(e.uri.toString())}addOrUpdate(e,t){const{added:n,existing:r}=this.addImpl(e,t,!0);return n.concat(r)}addImpl(e,t,n){const r=[],i=[];(0,m.traceInfoIfCI)(`Create Controller for ${e.kind} and id '${e.id}' for view ${t.join(", ")}`);try{t.map((t=>{const n=this.getControllerId(e,t);return this.registeredMetadatas.set(e.id,e),[n,t]})).filter((([t])=>{const n=this.registeredControllers.get(t);return n?(n.updateConnection(e),i.push(n),(0,m.traceInfoIfCI)(`Found existing controller '${n.id}', not creating a new one just updating it`),!1):this.isFiltered(e)?((0,m.traceInfoIfCI)(`Existing controller '${t}' will be excluded as it is filtered`),!1):((0,m.traceInfoIfCI)(`Existing controller not found for '${t}', hence creating a new one`),!0)})).forEach((([t,n])=>{const i=S.VSCodeNotebookController.create(e,t,n,this.notebook,this.serviceContainer.get(u.ICommandManager),this.serviceContainer.get(c.IKernelProvider),this.serviceContainer.get(p.IExtensionContext),this.disposables,this.serviceContainer.get(v.NotebookCellLanguageService),this.workspace,this.serviceContainer.get(p.IConfigurationService),this.serviceContainer.get(u.IDocumentManager),this.serviceContainer.get(u.IApplicationShell),this.serviceContainer.get(p.IBrowserService),this.extensionChecker,this.serviceContainer,this.serviceContainer.get(w.IConnectionDisplayDataProvider)),o=[];i.onDidDispose((()=>{(0,m.traceInfoIfCI)(`Deleting controller '${i.id}' associated with view ${n} from registration as it was disposed`),this.registeredControllers.delete(i.id),o.forEach((e=>e.dispose()))}),this,this.disposables),this.disposables.push(i),this.registeredControllers.set(i.id,i),r.push(i),i.onNotebookControllerSelected((e=>{(0,m.traceInfoIfCI)(`Controller ${e.controller?.id} selected for ${e.notebook.uri.toString()}`),this.selectedControllers.set(e.notebook.uri.toString(),e.controller),this.selectedEmitter.fire(e)}),this,o),i.onNotebookControllerSelectionChanged((e=>this.selectionChangedEmitter.fire({...e,controller:i})),this,o)})),n&&r.length&&this.changeEmitter.fire({added:r,removed:[]})}catch(t){if((0,d.isCancellationError)(t,!0))return{added:r,existing:i};(0,m.traceError)(`Failed to create notebook controller for ${e.id}`,t)}return{added:r,existing:i}}get(e,t){const n=this.getControllerId(e,t);return this.registeredControllers.get(n)}isFiltered(e){return!1}getControllerId(e,t){return t===h.JupyterNotebookView?e.id:`${e.id}${w.InteractiveControllerIdSuffix}`}isControllerAttachedToADocument(e){return this.notebook.notebookDocuments.some((t=>e.isAssociatedWithDocument(t)))}};t.ControllerRegistration=C,t.ControllerRegistration=C=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IVSCodeNotebook)),i(1,(0,o.inject)(p.IDisposableRegistry)),i(2,(0,o.inject)(b.PythonEnvironmentFilter)),i(3,(0,o.inject)(u.IWorkspaceService)),i(4,(0,o.inject)(l.IPythonExtensionChecker)),i(5,(0,o.inject)(g.IServiceContainer)),i(6,(0,o.inject)(a.IJupyterServerUriStorage)),i(7,(0,o.inject)(c.IKernelFinder))],C)},29768:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonMessageCoordinator=void 0;const i=n(66828),o=n(10053),s=n(15925),a=n(11642),c=n(42080),l=n(25251),u=n(58681),d=n(58323),h=n(30682),p=n(9959),f=n(96434),g=n(15925),m=n(94062),v=n(43713),y=n(89159),b=n(72265),w=n(99203),S=n(85446),C=n(94483),_=n(43138),P=n(20397),E=n(11386),k=n(98729);class I{get postMessage(){return this.listeningToPostMessageEvent=!0,this.postEmitter.event}constructor(e,t){this.document=e,this.serviceContainer=t,this.cachedMessages=[],this.postEmitter=new i.EventEmitter,this.attachedWebviews=new WeakSet,this.modulesForWhichWeHaveDisplayedWidgetErrorMessage=new Set,this.queuedMessages=[],this.disposables=this.serviceContainer.get(c.IDisposableRegistry),this.jupyterOutput=this.serviceContainer.get(c.IOutputChannel,s.STANDARD_OUTPUT_CHANNEL),this.appShell=this.serviceContainer.get(o.IApplicationShell,o.IApplicationShell),this.commandManager=this.serviceContainer.get(o.ICommandManager),this.configService=this.serviceContainer.get(c.IConfigurationService),this.initialize()}dispose(){this.cachedMessages=[],this.ipyWidgetMessageDispatcher?.dispose(),this.ipyWidgetScriptSource?.dispose()}attach(e){if(this.attachedWebviews.has(e))return;this.attachedWebviews.add(e),this.postMessage((t=>{if((0,a.traceInfoIfCI)(`${w.ConsoleForegroundColors.Green}Widget Coordinator sent ${t.message}`),t.message===h.InteractiveWindowMessages.ConvertUriForUseInWebViewRequest)this.onMessage(e,h.InteractiveWindowMessages.ConvertUriForUseInWebViewResponse,{request:t.payload,response:e.asWebviewUri(t.payload)});else{if(!this.readyMessageReceived)return void this.queuedMessages.push({type:t.message,payload:t.payload});this.sendPendingWebViewMessages(e),e.postMessage({type:t.message,payload:t.payload}).then(u.noop,u.noop)}}),this,this.disposables);const t=(0,_.createDeferred)(),n=async()=>{const n=new E.StopWatch;if(!t.completed){(0,a.traceVerbose)("Attempting to determine version of IPyWidgets");const e=[],n=this.serviceContainer.get(m.IKernelProvider),r=(0,_.createDeferred)();n.get(this.document)?r.resolve(n.get(this.document)):n.onDidCreateKernel((e=>{e.notebook===this.document&&r.resolve(e)}),this,e);const i=await r.promise;i&&((0,k.isPythonKernelConnection)(i.kernelConnectionMetadata)?i.ipywidgetsVersion?t.completed||t.resolve(i.ipywidgetsVersion):((0,a.traceVerbose)("Waiting for IPyWidgets version"),i.onIPyWidgetVersionResolved((()=>{i.ipywidgetsVersion&&(t.completed||t.resolve(i.ipywidgetsVersion),(0,P.dispose)(e))}),this,e)):t.completed||t.resolve(s.WIDGET_VERSION_NON_PYTHON_KERNELS)),e.length&&this.disposables.push(...e),(0,a.traceVerbose)("Waiting for IPyWidgets version promise")}const r=await t.promise;(0,a.traceVerbose)(`Version of IPyWidgets ${r} determined after ${n.elapsedTime/1e3}s`),e.postMessage({type:h.IPyWidgetMessages.IPyWidgets_Reply_Widget_Version,payload:r}).then(u.noop,u.noop)};e.onDidReceiveMessage((async t=>{(0,a.traceInfoIfCI)(`${w.ConsoleForegroundColors.Green}Widget Coordinator received ${t.type}`),this.onMessage(e,t.type,t.payload),t.type===h.IPyWidgetMessages.IPyWidgets_Request_Widget_Version&&await n(),t.type===h.IPyWidgetMessages.IPyWidgets_Ready&&((0,a.traceVerbose)("Web view is ready to receive widget messages"),this.readyMessageReceived=!0,this.sendPendingWebViewMessages(e))}),this,this.disposables),e.postMessage({type:h.IPyWidgetMessages.IPyWidgets_IsReadyRequest,payload:void 0}).then(u.noop,u.noop),n().catch(u.noop)}onMessage(e,t,n){t===h.InteractiveWindowMessages.IPyWidgetLoadSuccess?this.sendLoadSucceededTelemetry(n).catch(u.noop):t===h.InteractiveWindowMessages.IPyWidgetLoadFailure?this.handleWidgetLoadFailure(e,n).catch(u.noop):t===h.InteractiveWindowMessages.IPyWidgetWidgetVersionNotSupported?this.sendUnsupportedWidgetVersionFailureTelemetry(n).catch(u.noop):t===h.InteractiveWindowMessages.IPyWidgetRenderFailure?this.sendRenderFailureTelemetry(n):t===h.InteractiveWindowMessages.IPyWidgetUnhandledKernelMessage&&this.handleUnhandledMessage(n),this.getIPyWidgetMessageDispatcher().receiveMessage({message:t,payload:n}),this.getIPyWidgetScriptSource().onMessage(t,n)}sendPendingWebViewMessages(e){if(this.readyMessageReceived)for(;this.queuedMessages.length;)e.postMessage(this.queuedMessages.shift()).then(u.noop,u.noop)}initialize(){(0,a.traceVerbose)("initialize CommonMessageCoordinator"),this.getIPyWidgetScriptSource().initialize(),this.getIPyWidgetMessageDispatcher().initialize()}async sendLoadSucceededTelemetry(e){try{(0,p.sendTelemetryEvent)(p.Telemetry.IPyWidgetLoadSuccess,0,{moduleHash:await(0,f.getTelemetrySafeHashedString)(e.moduleName),moduleVersion:e.moduleVersion})}catch{}}async handleWidgetLoadFailure(e,t){try{let n=t.error.toString();const r=this.configService.getSettings(void 0).widgetScriptSources.length>0,i=`${t.moduleName}:${t.moduleVersion}`;if(t.isOnline){if(!r&&!this.modulesForWhichWeHaveDisplayedWidgetErrorMessage.has(i)){this.modulesForWhichWeHaveDisplayedWidgetErrorMessage.add(i);const r=l.Common.moreInfo,o=l.DataScience.enableCDNForWidgetsButton;n=l.DataScience.enableCDNForWidgetsSetting(t.moduleName,t.moduleVersion),this.appShell.showErrorMessage(n,{modal:!0},o,r).then((t=>{switch(t){case r:this.appShell.openUrl("https://aka.ms/PVSCIPyWidgets");break;case o:this.enableCDNForWidgets(e).catch(u.noop)}}),u.noop)}}else n=l.DataScience.loadClassFailedWithNoInternet(t.moduleName,t.moduleVersion),this.appShell.showErrorMessage(n).then(u.noop,u.noop);(0,a.traceError)(`Widget load failure ${n}`,t),(0,p.sendTelemetryEvent)(p.Telemetry.IPyWidgetLoadFailure,0,{isOnline:t.isOnline,moduleHash:await(0,f.getTelemetrySafeHashedString)(t.moduleName),moduleVersion:t.moduleVersion,timedout:t.timedout})}catch{}}async enableCDNForWidgets(e){await this.commandManager.executeCommand(g.Commands.EnableLoadingWidgetsFrom3rdPartySource),await e.postMessage({type:h.IPyWidgetMessages.IPyWidgets_AttemptToDownloadFailedWidgetsAgain})}async sendUnsupportedWidgetVersionFailureTelemetry(e){try{(0,p.sendTelemetryEvent)(p.Telemetry.IPyWidgetWidgetVersionNotSupportedLoadFailure,0,{moduleHash:await(0,f.getTelemetrySafeHashedString)(e.moduleName),moduleVersion:e.moduleVersion})}catch{}}sendRenderFailureTelemetry(e){try{(0,a.traceError)("Error rendering a widget: ",e),(0,p.sendTelemetryEvent)(p.Telemetry.IPyWidgetRenderFailure)}catch{}}handleUnhandledMessage(e){if("status"!==e.header.msg_type)try{if("error"===e.header.msg_type){const t=e;t.content.traceback=t.content.traceback.map(d.stripAnsi)}(0,a.traceInfo)(`Unhandled widget kernel message: ${e.header.msg_type} ${e.content}`),this.jupyterOutput.appendLine(l.DataScience.unhandledMessage(e.header.msg_type,JSON.stringify(e.content))),(0,p.sendTelemetryEvent)(p.Telemetry.IPyWidgetUnhandledMessage,void 0,{msg_type:e.header.msg_type})}catch{}}getIPyWidgetMessageDispatcher(){return this.ipyWidgetMessageDispatcher||(this.ipyWidgetMessageDispatcher=this.serviceContainer.get(v.IPyWidgetMessageDispatcherFactory).create(this.document),this.disposables.push(this.ipyWidgetMessageDispatcher.postMessage(this.cacheOrSend,this))),this.ipyWidgetMessageDispatcher}getIPyWidgetScriptSource(){return this.ipyWidgetScriptSource||(this.ipyWidgetScriptSource=new y.IPyWidgetScriptSource(this.document,this.serviceContainer.get(m.IKernelProvider),this.serviceContainer.get(c.IDisposableRegistry),this.serviceContainer.get(c.IConfigurationService),this.serviceContainer.get(c.IHttpClient),this.serviceContainer.get(b.IWidgetScriptSourceProviderFactory),this.serviceContainer.get(c.IsWebExtension),this.serviceContainer.get(C.CDNWidgetScriptSourceProvider)),this.disposables.push(this.ipyWidgetScriptSource.postMessage(this.cacheOrSend,this))),this.ipyWidgetScriptSource}cacheOrSend(e){if(!this.listeningToPostMessageEvent)return(0,a.traceInfoIfCI)(`${w.ConsoleForegroundColors.Green}Queuing messages (no listeners)`),void this.cachedMessages.push(e);this.cachedMessages.forEach((e=>this.postEmitter.fire(e))),this.cachedMessages=[],this.postEmitter.fire(e)}}t.CommonMessageCoordinator=I,r([(0,S.swallowExceptions)()],I.prototype,"enableCDNForWidgets",null)},21375:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetMessageDispatcher=void 0;const i=r(n(71171)),o=n(66828),s=n(11642),a=n(15925),c=n(43138),l=n(58681),u=n(81014),d=n(30682),h=n(9959),p=n(22021);t.IPyWidgetMessageDispatcher=class{get postMessage(){return this._postMessageEmitter.event}constructor(e,t){this.kernelProvider=e,this.document=t,this.commTargetsRegistered=new Set,this.pendingTargetNames=new Set,this._postMessageEmitter=new o.EventEmitter,this.messageHooks=new Map,this.pendingHookRemovals=new Map,this.messageHookRequests=new Map,this.disposables=[],this.disposed=!1,this.pendingMessages=[],this.subscribedToKernelSocket=!1,this.waitingMessageIds=new Map,this.totalWaitTime=0,this.totalWaitedMessages=0,this.hookCount=0,this.outputWidgetIds=new Set,this.isUsingIPyWidgets=!1,this.pendingTargetNames.add("jupyter.widget"),e.onDidStartKernel((e=>{e.notebook===t&&this.initialize()}),this,this.disposables),this.mirrorSend=this.mirrorSend.bind(this),this.onKernelSocketMessage=this.onKernelSocketMessage.bind(this);const r=n(86002);this.deserialize=r.deserialize}dispose(){for(this.sendOverheadTelemetry(),this.disposed=!0;this.disposables.length;){const e=this.disposables.shift();e?.dispose()}}receiveMessage(e){switch(e.message){case d.IPyWidgetMessages.IPyWidgets_logMessage:{const t=e.payload;"error"===t.category?(0,s.traceError)(`Widget Error: ${t.message}`):(0,s.traceVerbose)(`Widget Message: ${t.message}`);break}case d.IPyWidgetMessages.IPyWidgets_Ready:this.sendKernelOptions(),this.initialize();break;case d.IPyWidgetMessages.IPyWidgets_msg:this.sendRawPayloadToKernelSocket(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_binary_msg:this.sendRawPayloadToKernelSocket((0,u.deserializeDataViews)(e.payload)[0]);break;case d.IPyWidgetMessages.IPyWidgets_msg_received:this.onKernelSocketResponse(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_registerCommTarget:this.registerCommTarget(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_RegisterMessageHook:this.registerMessageHook(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_RemoveMessageHook:this.possiblyRemoveMessageHook(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_MessageHookResult:this.handleMessageHookResponse(e.payload);break;case d.IPyWidgetMessages.IPyWidgets_iopub_msg_handled:this.iopubMessageHandled(e.payload)}}sendRawPayloadToKernelSocket(e){this.pendingMessages.push(e),this.sendPendingMessages()}registerCommTarget(e){this.pendingTargetNames.add(e),this.initialize()}initialize(){this.jupyterLab||(this.jupyterLab=n(76240));const e=this.getKernel();e&&(this.subscribeToKernelSocket(e),this.registerCommTargets(e)),(0,s.traceVerbose)("IPyWidgetMessageDispatcher.initialize")}raisePostMessage(e,t){this._postMessageEmitter.fire({message:e,payload:t})}subscribeToKernelSocket(e){!this.subscribedToKernelSocket&&e.session&&(this.subscribedToKernelSocket=!0,e.session.kernelSocket.subscribe((t=>{if(this.kernelSocketInfo?.socket?.removeReceiveHook(this.onKernelSocketMessage),this.kernelSocketInfo?.socket?.removeSendHook(this.mirrorSend),this.kernelWasConnectedAtLeastOnce){for(;this.pendingMessages.length;)this.pendingMessages.shift();this.waitingMessageIds.forEach((e=>e.resultPromise.resolve())),this.waitingMessageIds.clear(),this.messageHookRequests.forEach((e=>e.resolve(!1))),this.messageHookRequests.clear(),this.messageHooks.clear(),this.sendRestartKernel()}t&&t.socket?(this.kernelWasConnectedAtLeastOnce=!0,this.kernelSocketInfo=t,this.kernelSocketInfo.socket?.addReceiveHook(this.onKernelSocketMessage),this.kernelSocketInfo.socket?.addSendHook(this.mirrorSend),this.sendKernelOptions(),this.registerCommTargets(e),this.sendPendingMessages()):this.kernelSocketInfo=void 0})))}sendKernelOptions(){this.kernelSocketInfo&&this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_kernelOptions,this.kernelSocketInfo.options)}async mirrorSend(e,t){if("string"==typeof e&&e.includes("shell")&&e.includes("execute_request")){const t=Date.now(),n=this.deserialize(e);if("shell"===n.channel&&"execute_request"===n.header.msg_type){if(!(0,p.shouldMessageBeMirroredWithRenderer)(n))return;const e=this.mirrorExecuteRequest(n);this.isUsingIPyWidgets&&await e,this.totalWaitTime=Date.now()-t,this.totalWaitedMessages+=1}}}sendRestartKernel(){this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_onRestartKernel,void 0)}mirrorExecuteRequest(e){const t=(0,c.createDeferred)();return this.waitingMessageIds.set(e.header.msg_id,{startTime:Date.now(),resultPromise:t}),this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_mirror_execute,{id:e.header.msg_id,msg:e}),t.promise}messageNeedsFullHandle(e){return"iopub"===e.channel&&"comm_msg"===e.header?.msg_type&&"update"===e.content?.data?.method&&this.outputWidgetIds.has(e.content?.comm_id)}iopubMessageHandled(e){const t=e.id;this.fullHandleMessage&&this.fullHandleMessage.id===t&&(this.fullHandleMessage.promise.resolve(),this.fullHandleMessage=void 0)}async onKernelSocketMessage(e){const t=(0,i.default)(),n=(0,c.createDeferred)();if(this.waitingMessageIds.set(t,{startTime:Date.now(),resultPromise:n}),"string"==typeof e?(0,p.shouldMessageBeMirroredWithRenderer)(e)&&this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_msg,{id:t,data:e}):this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_binary_msg,{id:t,data:(0,u.serializeDataViews)([e])}),"string"!=typeof e||e.includes(a.WIDGET_MIMETYPE)||e.includes(a.Identifiers.DefaultCommTarget)||e.includes("comm_open")||e.includes("comm_close")||e.includes("comm_msg")){const t=this.deserialize(e);if(!(0,p.shouldMessageBeMirroredWithRenderer)(t))return;t&&t.content&&t.content.data&&(t.content.data[a.WIDGET_MIMETYPE]||t.content.target_name===a.Identifiers.DefaultCommTarget)&&(this.isUsingIPyWidgets=!0);const r="comm_open"===t.header?.msg_type&&"@jupyter-widgets/output"===t.content?.data?.state?._model_module&&"OutputModel"===t.content?.data?.state?._model_name,i="comm_close"===t.header?.msg_type&&this.outputWidgetIds.has(t.content?.comm_id);r?this.outputWidgetIds.add(t.content.comm_id):i?this.outputWidgetIds.delete(t.content.comm_id):this.messageNeedsFullHandle(t)&&(this.fullHandleMessage={id:t.header.msg_id,promise:(0,c.createDeferred)()},await n.promise,await this.fullHandleMessage.promise.promise,this.fullHandleMessage=void 0)}}onKernelSocketResponse(e){const t=this.waitingMessageIds.get(e.id);t&&(this.waitingMessageIds.delete(e.id),this.totalWaitTime+=Date.now()-t.startTime,this.totalWaitedMessages+=1,t.resultPromise.resolve())}sendPendingMessages(){if(this.kernel?.session&&this.kernelSocketInfo)for(;this.pendingMessages.length;)try{this.kernelSocketInfo.socket?.sendToRealKernel(this.pendingMessages[0]),this.pendingMessages.shift()}catch(e){return void(0,s.traceError)("Failed to send message to Kernel",e)}}registerCommTargets(e){for(;this.pendingTargetNames.size>0;){const t=Array.from([...this.pendingTargetNames.values()]).shift();if(t){if(this.commTargetsRegistered.has(t))return;(0,s.traceVerbose)(`Registering commtarget ${t}`),this.commTargetsRegistered.add(t),this.pendingTargetNames.delete(t),t!==a.Identifiers.DefaultCommTarget&&e.session?.kernel?.registerCommTarget(t,l.noop)}}}getKernel(){return this.document&&!this.kernel?.session&&(this.kernel=this.kernelProvider.get(this.document),this.kernel?.onDisposed((()=>this.kernel=void 0))),this.kernel&&!this.kernelRestartHandlerAttached&&(this.kernelRestartHandlerAttached=!0,this.disposables.push(this.kernel.onRestarted(this.handleKernelRestarts,this))),this.kernel}async handleKernelRestarts(){!this.disposed&&0!==this.commTargetsRegistered.size&&this.kernel?.session&&(Array.from(this.commTargetsRegistered.keys()).forEach((e=>{this.commTargetsRegistered.delete(e),this.pendingTargetNames.add(e)})),this.subscribeToKernelSocket(this.kernel),this.registerCommTargets(this.kernel))}registerMessageHook(e){try{if(this.kernel?.session?.kernel&&!this.messageHooks.has(e)){this.hookCount+=1;const t=this.messageHookCallback.bind(this);this.messageHooks.set(e,t),this.kernel.session.kernel.registerMessageHook(e,t)}}finally{this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_ExtensionOperationHandled,{id:e,type:d.IPyWidgetMessages.IPyWidgets_RegisterMessageHook})}}possiblyRemoveMessageHook(e){try{e.lastHookedMsgId?this.pendingHookRemovals.set(e.lastHookedMsgId,e.hookMsgId):this.removeMessageHook(e.hookMsgId)}finally{this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_ExtensionOperationHandled,{id:e.hookMsgId,type:d.IPyWidgetMessages.IPyWidgets_RemoveMessageHook})}}removeMessageHook(e){if(this.kernel?.session?.kernel&&this.messageHooks.has(e)){const t=this.messageHooks.get(e);this.messageHooks.delete(e),this.kernel.session.kernel.removeMessageHook(e,t)}}async messageHookCallback(e){const t=(0,c.createDeferred)(),n=(0,i.default)(),r=e.parent_header.msg_id;if(this.messageHooks.has(r)?(this.messageHookRequests.set(n,t),this.raisePostMessage(d.IPyWidgetMessages.IPyWidgets_MessageHookCall,{requestId:n,parentId:r,msg:e})):t.resolve(!0),this.pendingHookRemovals.has(e.header.msg_id)){const t=this.pendingHookRemovals.get(e.header.msg_id);this.pendingHookRemovals.delete(e.header.msg_id),this.removeMessageHook(t)}return t.promise}handleMessageHookResponse(e){const t=this.messageHookRequests.get(e.requestId);t&&(this.messageHookRequests.delete(e.requestId),t.resolve(!!e.msgType.includes("comm")||e.result))}sendOverheadTelemetry(){(0,h.sendTelemetryEvent)(h.Telemetry.IPyWidgetOverhead,{totalOverheadInMs:this.totalWaitTime,numberOfMessagesWaitedOn:this.totalWaitedMessages,averageWaitTime:this.totalWaitTime/this.totalWaitedMessages,numberOfRegisteredHooks:this.hookCount})}}},43713:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetMessageDispatcherFactory=void 0;const o=n(26594),s=n(66828),a=n(42080),c=n(30682),l=n(94062),u=n(21375);class d{get postMessage(){return this._postMessageEmitter.event}constructor(e,t){this.baseMulticaster=e,this.oldMessages=t,this._postMessageEmitter=new s.EventEmitter,this.disposables=[],e.postMessage(this.raisePostMessage,this,this.disposables)}dispose(){for(;this.disposables.length;){const e=this.disposables.shift();e?.dispose()}}initialize(){return this.baseMulticaster.initialize()}receiveMessage(e){this.baseMulticaster.receiveMessage(e)}raisePostMessage(e){this.oldMessages.forEach((e=>{this._postMessageEmitter.fire(e)})),this.oldMessages=[],this._postMessageEmitter.fire(e)}}let h=class{constructor(e,t){this.kernelProvider=t,this.messageDispatchers=new WeakMap,this.messagesPerNotebook=new WeakMap,this.disposed=!1,this.disposables=[],e.push(this),t.onDidDisposeKernel(this.trackDisposingOfKernels,this,e)}dispose(){for(this.disposed=!0;this.disposables.length;)this.disposables.shift()?.dispose()}create(e){let t=this.messageDispatchers.get(e);t||(t=new u.IPyWidgetMessageDispatcher(this.kernelProvider,e),this.messageDispatchers.set(e,t),this.disposables.push(t.postMessage((t=>this.onMessage(t,e)),this)));let n=[];e&&this.messagesPerNotebook.get(e)&&(n=this.messagesPerNotebook.get(e)||[]);const r=new d(t,n);return this.disposables.push(r),r}trackDisposingOfKernels(e){if(this.disposed)return;const t=e.notebook,n=this.messageDispatchers.get(t);this.messageDispatchers.delete(t),n?.dispose()}onMessage(e,t){t&&(this.messagesPerNotebook.set(t,this.messagesPerNotebook.get(t)||[]),e.message!==c.IPyWidgetMessages.IPyWidgets_kernelOptions&&e.message!==c.IPyWidgetMessages.IPyWidgets_registerCommTarget||this.messagesPerNotebook.get(t).push(e))}};t.IPyWidgetMessageDispatcherFactory=h,t.IPyWidgetMessageDispatcherFactory=h=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IDisposableRegistry)),i(1,(0,o.inject)(l.IKernelProvider))],h)},64190:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RendererVersionChecker=void 0;const s=n(26594),a=n(66828),c=n(10053),l=n(15925),u=n(20397),d=n(42080),h=n(86563),p=n(25251),f=n(58681);let g=r=class{constructor(e,t){this.appShell=t,this.disposables=[],e.push(this)}dispose(){(0,u.dispose)(this.disposables)}activate(){a.workspace.onDidChangeNotebookDocument(this.onDidChangeNotebookDocument,this,this.disposables)}onDidChangeNotebookDocument(e){(0,h.isJupyterNotebook)(e.notebook)&&e.cellChanges.some((e=>e.outputs&&e.outputs.some((e=>e.items&&e.items.some((e=>e.mime===l.WIDGET_MIMETYPE))))))&&this.checkRendererExtensionVersion()}checkRendererExtensionVersion(){if(!a.workspace.isTrusted)return;const e=a.extensions.getExtension(l.RendererExtension);if(!e)return void this.displayNotInstalledMessage();const t=e.packageJSON.version;if(!t)return void this.displayUpdateMessage();const n=t.split("."),r=parseInt(n[0],10),i=parseInt(n[1],10),o=parseInt(n[2],10);(r<1||1===r&&0===i&&o<15)&&this.displayUpdateMessage()}displayNotInstalledMessage(){r.messageDisplayed||(r.messageDisplayed=!0,this.appShell.showInformationMessage(p.DataScience.rendererExtensionRequired,{modal:!0},p.Common.bannerLabelYes).then((e=>{e===p.Common.bannerLabelYes&&a.commands.executeCommand("extension.open",l.RendererExtension).then(f.noop,f.noop)})).then(f.noop,f.noop))}displayUpdateMessage(){r.messageDisplayed||(r.messageDisplayed=!0,this.appShell.showInformationMessage(p.DataScience.rendererExtension1015Required,{modal:!0},p.Common.bannerLabelYes).then((e=>{e===p.Common.bannerLabelYes&&a.commands.executeCommand("extension.open",l.RendererExtension).then(f.noop,f.noop)})).then(f.noop,f.noop))}};t.RendererVersionChecker=g,g.messageDisplayed=!1,t.RendererVersionChecker=g=r=i([(0,s.injectable)(),o(0,(0,s.inject)(d.IDisposableRegistry)),o(1,(0,s.inject)(c.IApplicationShell))],g)},31131:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseIPyWidgetScriptManager=t.extractRequireConfigFromWidgetEntry=void 0;const i=n(66828),o=n(20397),s=n(35412),a=n(11642),c=n(9959),l=n(94062),u=n(96434),d=r(n(44110)),h=n(11386),p=n(15925),f=["require.config({","requirejs.config({",'["require"].config({',"['require'].config({",'["requirejs"].config({',"['requirejs'].config({",'["require"]["config"]({',"['require']['config']({",'["requirejs"]["config"]({',"['requirejs']['config']({"];async function g(e,t,n){let r=[...f];const s=await(0,u.getTelemetrySafeHashedString)(t);let a,l=0;for(;l<=0&&r.length&&(a=r.pop(),a);)l=n.indexOf(a);if(l<0){let e=[...f].map((e=>e.substring(0,e.length-2)));for(;l<=0&&e.length&&(a=e.pop(),a);)l=n.indexOf(a)}if(l<0)return void(0,c.sendTelemetryEvent)(c.Telemetry.IPyWidgetExtensionJsInfo,void 0,{widgetFolderNameHash:s,failed:!0,patternUsedToRegisterRequireConfig:a,failure:"couldNotLocateRequireConfigStart"});const h=n.indexOf(")",l);if(h<=0||!a)return void(0,c.sendTelemetryEvent)(c.Telemetry.IPyWidgetExtensionJsInfo,void 0,{widgetFolderNameHash:s,failed:!0,patternUsedToRegisterRequireConfig:a,failure:"couldNotLocateRequireConfigEnd"});const p=n.indexOf("{",l);let g=n.substring(p,h);g=(0,d.default)(g,{language:"javascript"}),g=(0,o.splitLines)(g,{trim:!0,removeEmptyEntries:!0}).join("");const m=g.split("{")[g.split("{").length-1].split("}")[0].split(",").map((e=>e.trim())).filter((e=>e.length&&e.includes(":"))),v={};if(m.forEach((t=>{const n=t.split(":"),r=(0,o.trimQuotes)(n[0].replace(/\\r/g,"").replace(/\\n/g,"").trim()).trim(),s=(0,o.trimQuotes)(t.substring(t.indexOf(":")+1).replace(/\\r/g,"").replace(/\\n/g,"").trim()).trim();v[r]=s.startsWith("http")?i.Uri.parse(s):i.Uri.joinPath(e,s)})),v&&Object.keys(v).length)return(0,c.sendTelemetryEvent)(c.Telemetry.IPyWidgetExtensionJsInfo,{requireEntryPointCount:Object.keys(v).length},{widgetFolderNameHash:s,patternUsedToRegisterRequireConfig:a}),v;(0,c.sendTelemetryEvent)(c.Telemetry.IPyWidgetExtensionJsInfo,void 0,{widgetFolderNameHash:s,failed:!0,patternUsedToRegisterRequireConfig:a,failure:"noRequireConfigEntries"})}t.extractRequireConfigFromWidgetEntry=g,t.BaseIPyWidgetScriptManager=class{constructor(e){this.kernel=e,this.disposables=[],e.onRestarted(this.onKernelRestarted,this,this.disposables)}dispose(){(0,o.dispose)(this.disposables)}async getWidgetModuleMappings(){return this.widgetModuleMappings||(this.widgetModuleMappings=this.getWidgetModuleMappingsImpl()),this.widgetModuleMappings}onKernelRestarted(){this.widgetModuleMappings=void 0}async getConfigFromWidget(e,t,n){const r=await this.getWidgetScriptSource(t);try{const i=await g(e,n,r);if(!i){let e=`Failed to extract require.config from widget for ${n} from ${(0,s.getDisplayPath)(t)}`;p.isCI&&(e+=`with contents ${r}`),(0,a.traceWarning)(e)}return(0,a.traceInfoIfCI)(`Extracted require.config entry for ${n} from ${(0,s.getDisplayPath)(t)} for ${e.toString()} is ${JSON.stringify(i)}`),i}catch(e){(0,a.traceError)(`Failed to extract require.config entry for ${n} from ${(0,s.getDisplayPath)(t)}`,e)}}async getWidgetModuleMappingsImpl(){const e=new h.StopWatch,[t,n]=await Promise.all([this.getWidgetEntryPoints(),this.getNbExtensionsParentPath()]);if((0,a.traceInfoIfCI)(`Widget Entry points = ${JSON.stringify(t)}`),(0,a.traceInfoIfCI)(`Widget baseUrl = ${n?.toString()}`),!n)return;const r=await Promise.all(t.map((e=>this.getConfigFromWidget(n,e.uri,e.widgetFolderName)))),i=r.reduce(((e,t)=>Object.assign(e||{},t)),{});return i&&Object.keys(i).length?(delete i["jupyter-js-widgets"],delete i["@jupyter-widgets/base"],delete i["@jupyter-widgets/controls"],delete i["@jupyter-widgets/output"]):(0,a.traceInfoIfCI)(`No config, entryPoints = ${JSON.stringify(t)}, widgetConfigs = ${JSON.stringify(r)}`),(0,a.traceInfoIfCI)(`Widget config = ${JSON.stringify(i)}`),(0,c.sendTelemetryEvent)(c.Telemetry.DiscoverIPyWidgetNamesPerf,{duration:e.elapsedTime},{type:(0,l.isLocalConnection)(this.kernel.kernelConnectionMetadata)?"local":"remote"}),i&&Object.keys(i).length?i:void 0}}},94483:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CDNWidgetScriptSourceProvider=t.GlobalStateKeyToNeverWarnAboutNoNetworkAccess=t.GlobalStateKeyToNeverWarnAboutScriptsNotFoundOnCDN=t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(15925),l=n(42080),u=n(43138),d=n(25251),h=n(58681),p=n(11642),f=n(99203),g=n(9959),m="https://unpkg.com/",v="https://cdn.jsdelivr.net/npm/";t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce="IPYWidgetCDNConfigured",t.GlobalStateKeyToNeverWarnAboutScriptsNotFoundOnCDN="IPYWidgetNotFoundOnCDN",t.GlobalStateKeyToNeverWarnAboutNoNetworkAccess="IPYWidgetNoNetWorkAccess";let y=class{get cdnProviders(){return this.configurationSettings.getSettings(void 0).widgetScriptSources}constructor(e,t,n,r){this.appShell=e,this.globalMemento=t,this.configurationSettings=n,this.httpClient=r,this.cache=new Map,this.isOnCDNCache=new Map,this.notifiedUserAboutWidgetScriptNotFound=new Set}dispose(){this.cache.clear()}async isOnCDN(e){const t=`MODULE_VERSION_ON_CDN_${e}`;if(this.isOnCDNCache.has(t))return this.isOnCDNCache.get(t);if(this.globalMemento.get(t,!1))return!0;const n=(async()=>{const t=(0,u.createDeferredFromPromise)(this.httpClient.exists(`${m}${e}`)),n=(0,u.createDeferredFromPromise)(this.httpClient.exists(`${v}${e}`));return await Promise.race([t.promise,n.promise]),!!(t.value||n.value||(await Promise.all([t.promise,n.promise]),t.value||n.value))})();return n.then((e=>{if(e)return this.globalMemento.update(t,!0)})).then(h.noop,h.noop),this.isOnCDNCache.set(t,n),n}async getWidgetScriptSource(e,n,r){if(!1===r)return this.warnIfNoAccessToInternetFromWebView(e).catch(h.noop),{moduleName:e};if(0===this.cdnProviders.length&&this.globalMemento.get(t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce,!1))return{moduleName:e};const i=this.getModuleKey(e,n);return this.cache.get(i)||this.cache.set(i,this.getWidgetScriptSourceImplementation(e,n)),this.cache.get(i)}async generateDownloadUri(e,t,n){const r=function(e){switch(e){case"unpkg.com":return m;case"jsdelivr.com":return v}}(n);if(r)return function(e,t,n){let r=t,i="index",o=t.indexOf("/");return-1!==o&&"@"===t[0]&&(o=t.indexOf("/",o+1)),-1!==o&&(i=t.substr(o+1),r=t.substr(0,o)),e===v&&(n.startsWith("^")&&(n=n.slice(1)),i.endsWith(".js")||(i=i.concat(".js"))),`${e}${r}@${n}/dist/${i}`}(r,e,t)}getModuleKey(e,t){return`${e}${t}`}async getWidgetScriptSourceImplementation(e,t){if((0,p.traceInfo)(`${f.ConsoleForegroundColors.Green}Searching for Widget Script ${e}#${t} using cdns ${this.cdnProviders.join(" ")}`),await this.configureWidgets(),0===this.cdnProviders.length)return{moduleName:e};const n=(await Promise.all(this.cdnProviders.map((n=>this.getValidUri(e,t,n))))).find((e=>e));return n?((0,p.traceInfo)(`${f.ConsoleForegroundColors.Green}Widget Script ${e}#${t} found at URI: ${n}`),{moduleName:e,scriptUri:n,source:"cdn"}):((0,p.traceError)(`Widget Script ${e}#${t} was not found on on any cdn`),this.handleWidgetSourceNotFound(e,t).catch(h.noop),{moduleName:e})}async getValidUri(e,t,n){try{const r=await this.generateDownloadUri(e,t,n);if(r&&await this.httpClient.exists(r))return r}catch(r){return void(0,p.traceVerbose)(`Failed downloading ${e}:${t} from ${n}`)}}async warnIfNoAccessToInternetFromWebView(e){if(!this.globalMemento.get(t.GlobalStateKeyToNeverWarnAboutNoNetworkAccess,!1)&&!this.notifiedUserAboutWidgetScriptNotFound.has(e)&&0!==this.cdnProviders.length)switch(this.notifiedUserAboutWidgetScriptNotFound.add(e),await this.appShell.showWarningMessage(d.DataScience.cdnWidgetScriptNotAccessibleWarningMessage(e,JSON.stringify(this.cdnProviders)),d.Common.ok,d.Common.doNotShowAgain,d.Common.moreInfo)){case d.Common.doNotShowAgain:return this.globalMemento.update(t.GlobalStateKeyToNeverWarnAboutNoNetworkAccess,!0);case d.Common.moreInfo:return this.appShell.openUrl("https://aka.ms/PVSCIPyWidgets");default:(0,h.noop)()}}async configureWidgets(){if(0!==this.cdnProviders.length)return;if(this.globalMemento.get(t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce,!1))return;if(this.configurationPromise)return this.configurationPromise.promise;this.configurationPromise=(0,u.createDeferred)(),(0,g.sendTelemetryEvent)(c.Telemetry.IPyWidgetPromptToUseCDN);const e=await this.appShell.showInformationMessage(d.DataScience.useCDNForWidgetsNoInformation,{modal:!0},d.Common.ok,d.Common.doNotShowAgain,d.Common.moreInfo);let n="dismissed";switch(e){case d.Common.ok:n="ok",await Promise.all([this.updateScriptSources(["jsdelivr.com","unpkg.com"]),this.globalMemento.update(t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce,!0)]);break;case d.Common.doNotShowAgain:n="doNotShowAgain",await Promise.all([this.updateScriptSources([]),this.globalMemento.update(t.GlobalStateKeyToTrackIfUserConfiguredCDNAtLeastOnce,!0)]);break;case d.Common.moreInfo:this.appShell.openUrl("https://aka.ms/PVSCIPyWidgets");break;default:n=e===d.Common.cancel?"cancel":"dismissed"}(0,g.sendTelemetryEvent)(c.Telemetry.IPyWidgetPromptToUseCDNSelection,void 0,{selection:n}),this.configurationPromise.resolve()}async updateScriptSources(e){await this.configurationSettings.updateSetting("widgetScriptSources",e,void 0,s.ConfigurationTarget.Global)}async handleWidgetSourceNotFound(e,n){if(!this.globalMemento.get(t.GlobalStateKeyToNeverWarnAboutScriptsNotFoundOnCDN,!1)&&!this.notifiedUserAboutWidgetScriptNotFound.has(e)&&0!==this.cdnProviders.length)switch(this.notifiedUserAboutWidgetScriptNotFound.add(e),await this.appShell.showWarningMessage(d.DataScience.widgetScriptNotFoundOnCDNWidgetMightNotWork(e,n,JSON.stringify(this.cdnProviders)),d.Common.ok,d.Common.doNotShowAgain,d.Common.reportThisIssue)){case d.Common.doNotShowAgain:return this.globalMemento.update(t.GlobalStateKeyToNeverWarnAboutScriptsNotFoundOnCDN,!0);case d.Common.reportThisIssue:return this.appShell.openUrl("https://aka.ms/CreatePVSCDataScienceIssue");default:(0,h.noop)()}}};t.CDNWidgetScriptSourceProvider=y,t.CDNWidgetScriptSourceProvider=y=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell)),i(1,(0,o.inject)(l.IMemento)),i(1,(0,o.named)(l.GLOBAL_MEMENTO)),i(2,(0,o.inject)(l.IConfigurationService)),i(3,(0,o.inject)(l.IHttpClient))],y)},36948:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetScriptManagerFactory=void 0;const o=n(26594),s=n(83599),a=n(42080),c=n(40145);let l=class{constructor(e,t,n,r){this.httpClient=e,this.context=t,this.fs=n,this.disposables=r,this.managers=new WeakMap}getOrCreate(e){if(!this.managers.has(e)){if("connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind&&"startUsingRemoteKernelSpec"!==e.kernelConnectionMetadata.kind)throw new Error("Cannot enumerate Widget Scripts using local kernels on the Web");{const t=new c.RemoteIPyWidgetScriptManager(e,this.httpClient,this.context,this.fs);this.managers.set(e,t),e.onDisposed((()=>t.dispose()),this,this.disposables)}}return this.managers.get(e)}};t.IPyWidgetScriptManagerFactory=l,t.IPyWidgetScriptManagerFactory=l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IHttpClient)),i(1,(0,o.inject)(a.IExtensionContext)),i(2,(0,o.inject)(s.IFileSystem)),i(3,(0,o.inject)(a.IDisposableRegistry))],l)},89159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetScriptSource=void 0;const r=n(66828),i=n(11642),o=n(30682),s=n(9959),a=n(99087),c=n(99203),l=n(58681),u=n(43138),d=n(78205),h=n(56297);t.IPyWidgetScriptSource=class{get postMessage(){return this.postEmitter.event}constructor(e,t,n,i,s,a,c,p){this.document=e,this.kernelProvider=t,this.configurationSettings=i,this.httpClient=s,this.sourceProviderFactory=a,this.cdnScriptProvider=p,this.postEmitter=new r.EventEmitter,this.disposables=[],this.isWebViewOnline=(0,u.createDeferred)(),this.widgetSources=new Map,this.pendingModuleRequests=new Map,this.uriTranslationRequests=new h.ResourceMap,this.uriConverter=new d.ScriptUriConverter(c,(e=>(this.uriTranslationRequests.has(e)||this.uriTranslationRequests.set(e,(0,u.createDeferred)()),this.postEmitter.fire({message:o.InteractiveWindowMessages.ConvertUriForUseInWebViewRequest,payload:e}),this.uriTranslationRequests.get(e).promise))),this.isWebViewOnline.promise.catch(l.noop),n.push(this),this.kernelProvider.onDidStartKernel((e=>{e.notebook===this.document&&this.initialize()}),this,this.disposables)}dispose(){for(;this.disposables.length;)this.disposables.shift()?.dispose()}onMessage(e,t){if(e===o.InteractiveWindowMessages.ConvertUriForUseInWebViewResponse){const e=t;e&&this.uriTranslationRequests.has(e.request)&&this.uriTranslationRequests.get(e.request).resolve(e.response)}else if(e===o.IPyWidgetMessages.IPyWidgets_Ready)this.sendBaseUrl(),this.sendWidgetScriptSources().catch(l.noop);else if(e===o.IPyWidgetMessages.IPyWidgets_IsOnline){const e=t.isOnline;this.isWebViewOnline.resolve(e)}else e===o.IPyWidgetMessages.IPyWidgets_WidgetScriptSourceRequest&&t&&this.onRequestWidgetScript(t).catch(l.noop)}initialize(){this.jupyterLab||(this.jupyterLab=n(76240)),this.kernel||(this.kernel=this.kernelProvider.get(this.document)),this.kernel?.session&&(this.scriptProvider||(this.scriptProvider=new a.IPyWidgetScriptSourceProvider(this.kernel,this.uriConverter,this.configurationSettings,this.httpClient,this.sourceProviderFactory,this.isWebViewOnline.promise,this.cdnScriptProvider),this.kernel.onDisposed((()=>this.dispose())),this.handlePendingRequests(),this.sendBaseUrl(),(0,i.traceVerbose)("IPyWidgetScriptSource.initialize")))}sendBaseUrl(){this.scriptProvider&&this.scriptProvider.getBaseUrl().then((e=>{e&&this.postEmitter.fire({message:o.IPyWidgetMessages.IPyWidgets_BaseUrlResponse,payload:e.toString()})})).catch((e=>(0,i.traceError)("Failed to get baseUrl",e)))}async sendWidgetScriptSources(){if(this.scriptProvider&&!this.allWidgetScriptsSent)try{(await this.scriptProvider.getWidgetScriptSources()).forEach((e=>{"cdn"!==this.widgetSources.get(e.moduleName)?.source&&this.widgetSources.set(e.moduleName,e),this.postEmitter.fire({message:o.IPyWidgetMessages.IPyWidgets_WidgetScriptSourceResponse,payload:e})}))}catch(e){(0,i.traceWarning)("Failed to fetch script sources",e)}finally{this.allWidgetScriptsSent=!0}}async onRequestWidgetScript(e){const{moduleName:t,moduleVersion:n,requestId:r}=e;if((0,i.traceInfo)(`${c.ConsoleForegroundColors.Green}Fetch Script for ${JSON.stringify(e)}`),await this.sendWidgetSource(t,n,r).catch((e=>(0,i.traceError)("Failed to send widget sources upon ready",e))),this.scriptProvider&&!this.allWidgetScriptsSent)try{await this.sendWidgetScriptSources()}finally{this.sendWidgetSource(t,n,r).catch(i.traceError.bind(void 0,"Failed to send widget sources upon ready"))}}async sendWidgetSource(e,t="*",n){if(!e||e.startsWith("@jupyter"))return;if(!this.kernel||!this.scriptProvider)return void this.pendingModuleRequests.set(e,{moduleVersion:t,requestId:n});let r={moduleName:e,requestId:n};try{(0,i.traceInfo)(`${c.ConsoleForegroundColors.Green}Fetch Script for ${e}`),r=await this.scriptProvider.getWidgetScriptSource(e,t),"cdn"!==this.widgetSources.get(r.moduleName)?.source&&this.widgetSources.set(r.moduleName,r)}catch(e){(0,i.traceError)("Failed to get widget source due to an error",e),(0,s.sendTelemetryEvent)(s.Telemetry.HashedIPyWidgetScriptDiscoveryError)}finally{(0,i.traceInfo)(`${c.ConsoleForegroundColors.Green}Script for ${e}, is ${r.scriptUri} from ${r.source}`),this.postEmitter.fire({message:o.IPyWidgetMessages.IPyWidgets_WidgetScriptSourceResponse,payload:r})}}handlePendingRequests(){const e=Array.from(this.pendingModuleRequests.keys());for(;e.length;){const t=e.shift();if(t){const{moduleVersion:e,requestId:n}=this.pendingModuleRequests.get(t);this.pendingModuleRequests.delete(t),this.sendWidgetSource(t,e,n).catch(i.traceError.bind(`Failed to send WidgetScript for ${t}`))}}}}},99087:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetScriptSourceProvider=void 0;const i=n(11642),o=n(9959),s=n(96434),a=n(20397),c=n(66828),l=n(85446),u=n(58681);class d{get configuredScriptSources(){return this.configurationSettings.getSettings(void 0).widgetScriptSources}constructor(e,t,n,r,i,o,s){this.kernel=e,this.localResourceUriConverter=t,this.configurationSettings=n,this.httpClient=r,this.sourceProviderFactory=i,this.isWebViewOnline=o,this.cdnScriptProvider=s,this.disposables=[],this.scriptProviders=this.sourceProviderFactory.getProviders(this.kernel,this.localResourceUriConverter,this.httpClient),this.monitorKernel()}dispose(){(0,a.dispose)(this.disposables),this.disposeScriptProviders()}async getBaseUrl(){const e=this.scriptProviders.find((e=>e.getBaseUrl));if(e)return e.getBaseUrl()}async getWidgetScriptSources(){const e=[];return await Promise.all(this.scriptProviders.map((async t=>{t.getWidgetScriptSources&&e.push(...await t.getWidgetScriptSources())}))),e}async getWidgetScriptSource(e,t){const n=await this.isWebViewOnline,r=(this.scriptProviders||[]).slice();let o={moduleName:e};for(;r.length;){const i=r.shift();if(!i)continue;const s=await i.getWidgetScriptSource(e,t,n);if(s.scriptUri){o=s;break}}return this.sendTelemetryForWidgetModule(e,t,"",o.source).catch(u.noop),o.scriptUri?(0,i.traceInfo)(`Script source for Widget ${e}@${t} was found from source ${o.source}`):(0,i.traceError)(`Script source for Widget ${e}@${t} not found`),o}async sendTelemetryForWidgetModule(e,t,n,r){const i=`${e}.${e}@${t}`;if(d.trackedWidgetModuleNames.has(i))return;d.trackedWidgetModuleNames.add(i);const a=e.toLowerCase().startsWith("@jupyter-widgets"),c="cdn"===r||a||await this.cdnScriptProvider.isOnCDN(e),l=c?e.replace(/\//g,"_").replace(/\\/g,"_").replace(/@/g,"_at_"):void 0,u=c?n.replace(/\//g,"_").replace(/\\/g,"_").replace(/@/g,"_at_"):void 0;(0,o.sendTelemetryEvent)(o.Telemetry.HashedIPyWidgetNameUsed,void 0,{hashedName:await(0,s.getTelemetrySafeHashedString)(e),moduleName:l,modelName:u,source:r,moduleVersion:c?t:void 0,cdnSearched:this.configuredScriptSources.length>0})}disposeScriptProviders(){for(;this.scriptProviders&&this.scriptProviders.length;){const e=this.scriptProviders.shift();e&&e.dispose()}}monitorKernel(){this.kernel.onStarted(this.hookKernelEvents,this,this.disposables),this.kernel.onRestarted(this.hookKernelEvents,this,this.disposables);const e=this.kernel.kernelSocket.subscribe((()=>this.hookKernelEvents()));this.disposables.push(new c.Disposable((()=>e.unsubscribe())))}hookKernelEvents(){const e=this.kernel.session?.kernel;e&&(e.anyMessage.connect(this.onAnyMessage,this),this.disposables.push(new c.Disposable((()=>e.anyMessage.disconnect(this.onAnyMessage,this)))))}onAnyMessage(e,t){if("recv"===t.direction&&"comm_open"===t.msg.header.msg_type){const e=t.msg.content.data;e.state?._model_module&&e.state._model_name&&this.sendTelemetryForWidgetModule(e.state?._model_module,e.state?._model_module_version||"",e.state?._model_name).catch(u.noop)}}}t.IPyWidgetScriptSourceProvider=d,d.trackedWidgetModuleNames=new Set,r([(0,l.swallowExceptions)()],d.prototype,"sendTelemetryForWidgetModule",null),r([(0,l.swallowExceptions)()],d.prototype,"onAnyMessage",null)},95901:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.NbExtensionsPathProvider=void 0;const i=n(26594),o=n(66828);let s=class{async getNbExtensionsParentPath(e){switch(e.kernelConnectionMetadata.kind){case"connectToLiveRemoteKernel":case"startUsingRemoteKernelSpec":return o.Uri.parse(e.kernelConnectionMetadata.baseUrl);default:return}}};t.NbExtensionsPathProvider=s,t.NbExtensionsPathProvider=s=r([(0,i.injectable)()],s)},40145:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteIPyWidgetScriptManager=void 0;const s=o(n(15948)),a=n(66828),c=n(11642),l=n(98729),u=n(31131),d=n(15925),h=n(43138),p=n(58681),f=n(20397);class g extends u.BaseIPyWidgetScriptManager{constructor(e,t,n,r){if(super(e),this.httpClient=t,this.context=n,this.fs=r,"connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind&&"startUsingRemoteKernelSpec"!==e.kernelConnectionMetadata.kind)throw new Error("Invalid usage, can only be used for remote kernels");this.kernelConnection=e.kernelConnectionMetadata,this.getWidgetEntryPoints().catch(p.noop)}getBaseUrl(){return this.getNbExtensionsParentPath()}async getNbExtensionsParentPath(){return a.Uri.parse(this.kernelConnection.baseUrl)}onKernelRestarted(){this.widgetEntryPointsPromise=void 0,super.onKernelRestarted()}async getWidgetEntryPoints(){return this.widgetEntryPointsPromise||(this.widgetEntryPointsPromise=this.getWidgetEntryPointsImpl()),this.widgetEntryPointsPromise}getCodeToExecute(){return this.code||(this.code=this.fs.readFile(a.Uri.joinPath(this.context.extensionUri,"pythonFiles","printJupyWidgetEntryPoints.py"))),this.code}async getWidgetEntryPointsImpl(){if(!(0,l.isPythonKernelConnection)(this.kernelConnection))return[];const e=await this.getCodeToExecute();if(!this.kernel.session?.kernel)return(0,c.traceInfoIfCI)("No Kernel session to get list of widget entry points"),[];const t=[];t.push((0,l.executeSilently)(this.kernel.session.kernel,e,{traceErrors:!0,traceErrorsMessage:"Failed to get widget entry points from remote kernel"})),d.isCI||this.context.extensionMode!==a.ExtensionMode.Production||t.push((0,h.sleep)(1e4).then((()=>[]))),t.forEach((e=>e.catch(p.noop)));const n=await Promise.race(t);if(0===n.length)return(0,c.traceInfoIfCI)("Unable to get widget entry points, no outputs after running the code"),[];const r=n[0];if("stream"!==r.output_type||"stdout"!==r.name)return(0,c.traceInfoIfCI)("Unable to get widget entry points, no stream/stdout outputs after running the code"),[];try{return r.text.trim().substring(1).slice(0,-1).split(",").map((e=>(0,f.trimQuotes)(e.trim()))).map((e=>({uri:a.Uri.joinPath(a.Uri.parse(this.kernelConnection.baseUrl),"nbextensions",e),widgetFolderName:s.dirname(e)})))}catch(e){return(0,c.traceError)(`Failed to parse output to get list of IPyWidgets, output is ${r.text}`,e),[]}}async getWidgetScriptSource(e){const t=e.toString(),n=await this.httpClient.downloadFile(t);if(200===n.status)return n.text();throw(0,c.traceError)(`Error downloading from ${t}: ${n.statusText}`),new Error(`Error downloading from ${t}: ${n.statusText}`)}}t.RemoteIPyWidgetScriptManager=g},83471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteWidgetScriptSourceProvider=void 0;const r=n(66828);class i{constructor(e,t){if("connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind&&"startUsingRemoteKernelSpec"!==e.kernelConnectionMetadata.kind)throw new Error("Invalid usage of this class, can only be used with remtoe kernels");this.kernelConnection=e.kernelConnectionMetadata,this.scriptManager=t.getOrCreate(e)}dispose(){}async getBaseUrl(){return r.Uri.parse(this.kernelConnection.baseUrl)}async getWidgetScriptSource(e){const t=(await this.getWidgetScriptSources()).find((t=>t.moduleName.toLowerCase()===e.toLowerCase()));if(!t&&e.includes("/")){const t=await this.getBaseUrl();return{moduleName:e,scriptUri:`${t.toString()}${e}`,source:"remote"}}return t||{moduleName:e}}async getWidgetScriptSources(){const e=await this.scriptManager.getWidgetModuleMappings();return e&&Object.keys(e).length?await Promise.all(Object.keys(e).map((async t=>({moduleName:t,scriptUri:e[t].toString(),source:"remote"})))):[]}}t.RemoteWidgetScriptSourceProvider=i,i.validUrls=new Map},76945:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptSourceProviderFactory=void 0;const o=n(26594),s=n(10053),a=n(42080),c=n(94483),l=n(83471),u=n(72265);let d=class{constructor(e,t,n,r){this.configurationSettings=e,this.appShell=t,this.globalMemento=n,this.widgetScriptManagerFactory=r}getProviders(e,t,n){const r=[];switch(r.push(new c.CDNWidgetScriptSourceProvider(this.appShell,this.globalMemento,this.configurationSettings,n)),e.kernelConnectionMetadata.kind){case"connectToLiveRemoteKernel":case"startUsingRemoteKernelSpec":r.push(new l.RemoteWidgetScriptSourceProvider(e,this.widgetScriptManagerFactory))}return r}};t.ScriptSourceProviderFactory=d,t.ScriptSourceProviderFactory=d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IConfigurationService)),i(1,(0,o.inject)(s.IApplicationShell)),i(2,(0,o.inject)(a.IMemento)),i(2,(0,o.named)(a.GLOBAL_MEMENTO)),i(3,(0,o.inject)(u.IIPyWidgetScriptManagerFactory))],d)},78205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptUriConverter=void 0,t.ScriptUriConverter=class{constructor(e,t){this.isWebExtension=e,this.converter=t}async asWebviewUri(e){return this.isWebExtension?e:this.converter(e)}}},1396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(76945),i=n(72265),o=n(43713),s=n(36948),a=n(95901),c=n(94483),l=n(64190),u=n(52064);t.registerTypes=function(e,t){e.addSingleton(o.IPyWidgetMessageDispatcherFactory,o.IPyWidgetMessageDispatcherFactory),e.addSingleton(i.IWidgetScriptSourceProviderFactory,r.ScriptSourceProviderFactory),e.addSingleton(i.IIPyWidgetScriptManagerFactory,s.IPyWidgetScriptManagerFactory),e.addSingleton(i.INbExtensionsPathProvider,a.NbExtensionsPathProvider),e.addSingleton(c.CDNWidgetScriptSourceProvider,c.CDNWidgetScriptSourceProvider),e.addSingleton(u.IExtensionSyncActivationService,l.RendererVersionChecker)}},72265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IIPyWidgetScriptManager=t.IIPyWidgetScriptManagerFactory=t.INbExtensionsPathProvider=t.IWidgetScriptSourceProviderFactory=void 0,t.IWidgetScriptSourceProviderFactory=Symbol("IWidgetScriptSourceProviderFactory"),t.INbExtensionsPathProvider=Symbol("INbExtensionsPathProvider"),t.IIPyWidgetScriptManagerFactory=Symbol("IIPyWidgetScriptManagerFactory"),t.IIPyWidgetScriptManager=Symbol("IIPyWidgetScriptManager")},46799:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnector=void 0;const r=n(94062),i=n(66828),o=n(10053),s=n(11642),a=n(42080),c=n(43138),l=n(25251),u=n(47684),d=n(15925),h=n(9959),p=n(75090),f=n(530),g=n(85249),m=n(10988),v=n(66690),y=n(90541),b=n(58681),w=n(99216),S=n(50867),C=n(98729),_=n(6491),P=n(35412),E=n(32378),k=n(36065),I=n(22021);class D{static async switchController(e,t){const n=t.get(o.ICommandManager),r=t.get(g.INotebookEditorProvider).findNotebookEditor(e),i=t.get(S.IControllerRegistration);let s;const a=(0,c.createDeferred)(),l=i.onControllerSelected((e=>a.resolve(e.controller)));return await(0,m.selectKernel)(e,t.get(g.INotebookEditorProvider),n)&&r&&(s=await a.promise),l.dispose(),s?{controller:s.controller,metadata:s.connection}:void 0}static async notifyAndRestartDeadKernel(e,t){const n=t.get(o.IApplicationShell),r=t.get(o.ICommandManager);let i=!1;switch(await n.showErrorMessage(l.DataScience.cannotRunCellKernelIsDead((0,C.getDisplayNameOrNameOfKernelConnection)(e.kernelConnectionMetadata)),{modal:!0},l.DataScience.showJupyterLogs,l.DataScience.restartKernel)){case l.DataScience.restartKernel:await e.restart(),i=!0;break;case l.DataScience.showJupyterLogs:r.executeCommand(d.Commands.ViewJupyterOutput).then(b.noop,b.noop)}return i}static async handleKernelError(e,t,n,i,o,s,c,l){const d=e.get(a.IMemento,a.GLOBAL_MEMENTO),g=e.get(y.IDataScienceErrorHandler);c.interpreter&&"start"===n&&(0,p.clearInstalledIntoInterpreterMemento)(d,f.Product.ipykernel,c.interpreter.uri).catch(b.noop);const m=await g.handleKernelError(t,n,c,i,l),v=(0,r.isLocalConnection)(c),S=e.tryGet(w.IRawNotebookSupportedService);switch(S?.isSupported&&v&&"start"===n&&(0,u.sendKernelTelemetryEvent)(i,h.Telemetry.RawKernelSessionStartNoIpykernel,{reason:m}),o.dispose().catch(b.noop),m){case r.KernelInterpreterDependencyResponse.cancel:case r.KernelInterpreterDependencyResponse.failed:throw t;case r.KernelInterpreterDependencyResponse.selectDifferentKernel:{const n=await D.switchController(i,e);if(!n)throw t;s=n.controller,c=n.metadata;break}}return{controller:s,metadata:c}}static convertContextToFunction(e,t){switch(e){case"start":case"execution":return e=>e.start(t);case"interrupt":return e=>e.interrupt();case"restart":return e=>e.restart()}}static async verifyKernelState(e,t,n,r,i,o,s){const{kernel:a,deadKernelAction:c}=await r;if((0,I.isKernelDead)(a)){if(this.deleteKernelInfo(t,r),"deadKernelWasNoRestarted"===c)throw new v.KernelDeadError(a.kernelConnectionMetadata);return"deadKernelWasRestarted"===c?a:D.wrapKernelMethod(a.kernelConnectionMetadata,"start",i,e,t,n,s,o)}return a}static async wrapKernelMethod(e,t,n,r,i,o,a,l=(()=>(0,b.noop)())){(0,s.traceVerbose)(`${t} the kernel, options.disableUI=${o.disableUI} for ${(0,P.getDisplayPath)("notebook"in i?i.notebook.uri:i.resource)}`);let u=this.getKernelInfo(i);if(!o.disableUI&&u?.options.disableUI&&(u.options.disableUI=!1),!o.disableUI&&u?.kernel.resolved&&(u?.kernel.value?.kernel?.disposed||u?.kernel.value?.kernel?.disposing)&&(this.deleteKernelInfo(i),u=void 0),u&&"restart"!==t&&"interrupt"!==t)return D.verifyKernelState(r,i,o,u.kernel.promise,n,l,a);const d=D.wrapKernelMethodImpl(e,t,r,i,o,n,l),h=(0,c.createDeferredFromPromise)(d);return h.promise.catch(b.noop),d.then((e=>{e.kernel.onDisposed((()=>{this.deleteKernelInfo(i,h.promise)}),void 0,a)})).catch((()=>{this.deleteKernelInfo(i,h.promise)})),this.setKernelInfo(i,h,o),D.verifyKernelState(r,i,o,h.promise,n,l,a)}static getKernelInfo(e){return"notebook"in e?D.connectionsByNotebook.get(e.notebook):D.connectionsByUri.get(e.resource.toString())}static setKernelInfo(e,t,n){"notebook"in e?D.connectionsByNotebook.set(e.notebook,{kernel:t,options:n}):D.connectionsByUri.set(e.resource.toString(),{kernel:t,options:n})}static deleteKernelInfo(e,t){t?"notebook"in e&&D.connectionsByNotebook.get(e.notebook)?.kernel.promise===t?D.connectionsByNotebook.delete(e.notebook):e.resource&&D.connectionsByUri.get(e.resource.toString())?.kernel.promise===t&&D.connectionsByUri.delete(e.resource.toString()):"notebook"in e?D.connectionsByNotebook.delete(e.notebook):D.connectionsByUri.delete(e.resource.toString())}static verifyWeCanStartKernel(e,t){if((0,r.isLocalConnection)(e)&&e.kernelSpec.specFile&&!t.get(E.ITrustedKernelPaths).isTrusted(i.Uri.file(e.kernelSpec.specFile)))throw new k.KernelSpecNotTrustedError(e)}static async wrapKernelMethodImpl(e,t,n,o,a,c,l){const u=n.get(r.IKernelProvider),d=n.get(r.IThirdPartyKernelProvider);let h,p=D.convertContextToFunction(t,a),f=t,g="controller"in o?o.controller:void 0;for("start"===t&&D.verifyWeCanStartKernel(e,n);void 0===h;){if("notebook"in o&&o.notebook.isClosed)throw new i.CancellationError;h="notebook"in o?u.getOrCreate(o.notebook,{metadata:e,controller:g||o.controller,resourceUri:o.resource}):d.getOrCreate(o.resource,{metadata:e,resourceUri:o.resource});try{if("restart"!==t&&(0,I.isKernelDead)(h)&&!a.disableUI)return{kernel:h,deadKernelAction:await D.notifyAndRestartDeadKernel(h,n)?"deadKernelWasRestarted":"deadKernelWasNoRestarted"};if(l(f,h),await p(h),"notebook"in o&&o.notebook.isClosed)throw new i.CancellationError;(0,I.isKernelDead)(h)&&!a.disableUI&&await D.notifyAndRestartDeadKernel(h,n)}catch(t){if((0,_.isCancellationError)(t)||(0,s.traceWarning)(`Error occurred while trying to ${f} the kernel, options.disableUI=${a.disableUI}`,t),a.disableUI)throw t;if("notebook"in o&&o.notebook.isClosed)throw new i.CancellationError;const r=await D.handleKernelError(n,t,f,o.resource,h,g,e,c);if(g=r.controller,e=r.metadata,p=e=>e.start(a),f="start","3rdPartyExtension"===c)throw t;h=void 0}}return{kernel:h}}static async connectToNotebookKernel(e,t,n,r,i,o="jupyterExtension",s=(()=>(0,b.noop)())){return D.wrapKernelMethod(e,"start",o,t,n,r,i,s)}static async connectToKernel(e,t,n,r,i,o="jupyterExtension",s=(()=>(0,b.noop)())){return D.wrapKernelMethod(e,"start",o,t,n,r,i,s)}}t.KernelConnector=D,D.connectionsByNotebook=new WeakMap,D.connectionsByUri=new Map},10988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectKernel=void 0;const r=n(11642);t.selectKernel=async function(e,t,n){const i=t?.findNotebookEditor(e);return i?n.executeCommand("notebook.selectKernel",{notebookEditor:i}):((0,r.traceError)("Unable to select kernel as the Notebook document could not be identified"),!1)}},62075:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSourceCommandHandler=void 0;const o=n(26594),s=n(66828),a=n(88960),c=n(98729),l=n(38994),u=n(94433),d=n(61239),h=n(47684),p=n(94062),f=n(15925),g=n(20397),m=n(42080),v=n(25251),y=n(58681),b=n(5337),w=n(11642),S=n(85249),C=n(50867);let _=class{constructor(e,t,n,r,i,o){this.controllerRegistration=e,this.isWebExtension=t,this.kernelFinder=n,this.notebookEditorProvider=r,this.kernelDependency=i,this.localDisposables=[],this.providerMappings=new Map,this.kernelSpecsSourceRegistered=!1,o.push(this)}dispose(){(0,g.dispose)(this.localDisposables)}activate(){if(!this.isWebExtension){this.localDisposables.push(s.notebooks.registerKernelSourceActionProvider(f.JupyterNotebookView,{provideNotebookKernelSourceActions:()=>[{label:v.DataScience.localPythonEnvironments,documentation:s.Uri.parse("https://aka.ms/vscodeJupyterExtKernelPickerPythonEnv"),command:"jupyter.kernel.selectLocalPythonEnvironment"}]})),this.localDisposables.push(s.notebooks.registerKernelSourceActionProvider(f.InteractiveWindowView,{provideNotebookKernelSourceActions:()=>[{label:v.DataScience.localPythonEnvironments,documentation:s.Uri.parse("https://aka.ms/vscodeJupyterExtKernelPickerPythonEnv"),command:"jupyter.kernel.selectLocalPythonEnvironment"}]}));let e=[];const t=new s.EventEmitter;this.localDisposables.push(s.notebooks.registerKernelSourceActionProvider(f.JupyterNotebookView,{onDidChangeNotebookKernelSourceActions:t.event,provideNotebookKernelSourceActions:()=>e})),this.localDisposables.push(s.notebooks.registerKernelSourceActionProvider(f.InteractiveWindowView,{onDidChangeNotebookKernelSourceActions:t.event,provideNotebookKernelSourceActions:()=>e}));const n=()=>{this.kernelSpecsSourceRegistered||this.kernelFinder.kernels.some((e=>(0,c.isUserRegisteredKernelSpecConnection)(e)))&&(this.kernelSpecsSourceRegistered=!0,e=[{label:v.DataScience.localKernelSpecs,documentation:s.Uri.parse("https://aka.ms/vscodeJupyterExtKernelPickerJupyterKernels"),command:"jupyter.kernel.selectLocalKernelSpec"}],t.fire())};n(),this.kernelFinder.onDidChangeKernels((()=>n()),this,this.localDisposables),this.localDisposables.push(s.commands.registerCommand("jupyter.kernel.selectLocalKernelSpec",this.onSelectLocalKernel.bind(this,l.ContributedKernelFinderKind.LocalKernelSpec),this)),this.localDisposables.push(s.commands.registerCommand("jupyter.kernel.selectLocalPythonEnvironment",this.onSelectLocalKernel.bind(this,l.ContributedKernelFinderKind.LocalPythonEnvironment),this))}this.localDisposables.push(s.commands.registerCommand("jupyter.kernel.selectJupyterServerKernel",this.onSelectRemoteKernel,this)),b.ServiceContainer.instance.get(u.IJupyterUriProviderRegistration).onDidChangeProviders(this.registerUriCommands,this,this.localDisposables),this.registerUriCommands()}registerUriCommands(){const e=b.ServiceContainer.instance.get(u.IJupyterUriProviderRegistration),t=new Set;e.providers.map((e=>{const n=`${e.extensionId}:${e.id}`;if(e.id===f.TestingKernelPickerProviderId)return;if(t.add(n),this.providerMappings.has(n))return;const r=s.notebooks.registerKernelSourceActionProvider(f.JupyterNotebookView,{provideNotebookKernelSourceActions:()=>[{get label(){return e.displayName??(e.detail?`${e.detail} (${e.id})`:e.id)},get documentation(){return e.documentation},command:{command:"jupyter.kernel.selectJupyterServerKernel",arguments:[e.extensionId,e.id],title:e.displayName??e.id}}]}),i=s.notebooks.registerKernelSourceActionProvider(f.InteractiveWindowView,{provideNotebookKernelSourceActions:()=>[{get label(){return e.displayName??(e.detail?`${e.detail} (${e.id}) ${Date.now()}`:e.id)},get documentation(){return e.documentation},command:{command:"jupyter.kernel.selectJupyterServerKernel",arguments:[e.extensionId,e.id],title:e.displayName??e.id}}]});this.localDisposables.push(r),this.localDisposables.push(i),this.providerMappings.set(n,{disposables:[r,i],provider:e})})),this.providerMappings.forEach((({disposables:e},n)=>{t.has(n)||((0,g.dispose)(e),this.providerMappings.delete(n))}))}async onSelectLocalKernel(e,t){if(t=t||s.window.activeNotebookEditor?.notebook){if(e===l.ContributedKernelFinderKind.LocalPythonEnvironment){const e=b.ServiceContainer.instance.get(C.ILocalPythonNotebookKernelSourceSelector),n=await e.selectLocalKernel(t);return this.getSelectedController(t,n)}{const e=b.ServiceContainer.instance.get(C.ILocalNotebookKernelSourceSelector),n=await e.selectLocalKernel(t);return this.getSelectedController(t,n)}}}async onSelectRemoteKernel(e,t,n){if(!(n=n||s.window.activeNotebookEditor?.notebook)&&s.window.activeTextEditor&&(n=this.notebookEditorProvider.findNotebookEditor(s.window.activeTextEditor.document.uri)?.notebook),!n)return;const r=`${e}:${t}`,i=this.providerMappings.get(r)?.provider;if(!i)return;const o=b.ServiceContainer.instance.get(C.IRemoteNotebookKernelSourceSelector),a=await o.selectRemoteKernel(n,i);return this.getSelectedController(n,a)}async getSelectedController(e,t){if(!t)return;const n=this.controllerRegistration.addOrUpdate(t,[e.notebookType]);if(!Array.isArray(n)||0===n.length)return void(0,w.traceWarning)(`No controller created for selected kernel connection ${t.kind}:${t.id}`);(0,d.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(e.uri,t).finally((()=>(0,h.sendKernelTelemetryEvent)(e.uri,f.Telemetry.SwitchKernel,void 0,{newKernelPicker:!0}))).catch(y.noop),n.find((t=>t.viewType===e.notebookType))?.controller.updateNotebookAffinity(e,s.NotebookControllerAffinity.Preferred);const r=n[0];return await this.onControllerSelected(e,r),r.controller.id}async onControllerSelected(e,t){if((0,p.isLocalConnection)(t.connection)&&(0,c.isPythonKernelConnection)(t.connection)&&t.connection.interpreter?.isCondaEnvWithoutPython&&!this.isWebExtension){const n=[];try{const r=new s.CancellationTokenSource;n.push(r);const i=new a.DisplayOptions(!1);n.push(i),await this.kernelDependency.installMissingDependencies({resource:e.uri,kernelConnection:t.connection,token:r.token,ui:i,cannotChangeKernels:!0,ignoreCache:!0,installWithoutPrompting:!0})}catch(e){(0,w.traceError)(`Failed to install missing dependencies for Conda kernel ${t.connection.id}`,e)}finally{(0,g.dispose)(n)}}}};t.KernelSourceCommandHandler=_,t.KernelSourceCommandHandler=_=r([(0,o.injectable)(),i(0,(0,o.inject)(C.IControllerRegistration)),i(1,(0,o.inject)(m.IsWebExtension)),i(2,(0,o.inject)(p.IKernelFinder)),i(3,(0,o.inject)(S.INotebookEditorProvider)),i(4,(0,o.inject)(p.IKernelDependencyService)),i(5,(0,o.inject)(m.IDisposableRegistry))],_)},5656:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteNotebookKernelSourceSelector=void 0;const o=n(26594),s=n(66828),a=n(77806),c=n(94433),l=n(94062),u=n(10053),d=n(15925),h=n(20397),p=n(25251),f=n(19450),g=n(5337),m=n(50867),v=n(70798),y=n(46875),b=n(73621),w=n(97555),S=n(11642),C=n(7976),_=n(6491),P=n(58681);var E;!function(e){e.KernelFinder="finder",e.LocalServer="localServer",e.UriProviderQuickPick="uriProviderQuickPick",e.JupyterServer="jupyterServer"}(E||(E={}));let k=class{constructor(e,t,n,r,i,o,s,a){this.kernelFinder=e,this.serverUriStorage=t,this.serverSelector=n,this.jupyterConnection=r,this.displayDataProvider=i,this.kernelFinderController=o,this.jupyterPickerRegistration=s,this.jupyterServerRegistry=a,this.localDisposables=[]}async selectRemoteKernel(e,t){if(e.notebookType!==d.JupyterNotebookView&&e.notebookType!==d.InteractiveWindowView)return;this.localDisposables.forEach((e=>e.dispose())),this.localDisposables=[],this.cancellationTokenSource?.cancel(),this.cancellationTokenSource?.dispose(),this.cancellationTokenSource=new s.CancellationTokenSource;const n=g.ServiceContainer.instance.get(u.IApplicationShell),r=new f.MultiStepInput(n),i={disposables:[],notebook:e};try{if(await r.run(this.getRemoteServersFromProvider.bind(this,t,this.cancellationTokenSource.token),i)===f.InputFlowAction.cancel||"userPerformedSomeOtherAction"===i.selection?.type)throw new s.CancellationError;if(this.cancellationTokenSource.token.isCancellationRequested)return void(0,h.dispose)(i.disposables);if("connection"===i.selection?.type)return i.selection.connection}finally{(0,h.dispose)(i.disposables)}}async getRemoteServersFromProvider(e,t,n,r){const i=this.kernelFinder.registered.filter((e=>"remote"===e.kind)),o=[],a=[],c=[],l=this.jupyterServerRegistry.jupyterCollections.find((t=>t.extensionId===e.extensionId&&t.id===e.id))?.serverProvider,u=l?.provideJupyterServers?Promise.resolve(l.provideJupyterServers.bind(l)(t)).then((e=>e||[])):Promise.resolve([]),h=new Set,[g]=await Promise.all([u,Promise.all(i.filter((t=>t.serverProviderHandle.id===e.id)).map((async e=>{const n=(await this.serverUriStorage.getAll()).find((t=>(0,y.generateIdFromRemoteProvider)(t.provider)===(0,y.generateIdFromRemoteProvider)(e.serverProviderHandle)));t.isCancellationRequested||(h.add((0,y.generateIdFromRemoteProvider)(e.serverProviderHandle)),c.push({server:e,time:n?.time}))})))]);c.sort(((e,t)=>e.time||t.time?!e.time&&t.time?1:e.time&&!t.time||(e.time||0)>(t.time||0)?-1:1:e.server.displayName.localeCompare(t.server.displayName)));let m=!1;c.filter((({time:e})=>(e||0)>0)).forEach((({server:t,time:n})=>{m||(m=!0,o.push({label:"Recently Used",kind:s.QuickPickItemKind.Separator})),o.push({type:E.KernelFinder,kernelFinderInfo:t,idAndHandle:t.serverProviderHandle,label:t.displayName,description:n?p.DataScience.jupyterServerLastConnectionForQuickPickDescription(new Date(n)):void 0,buttons:!l?.removeJupyterServer||e.extensionId!==d.JVSC_EXTENSION_ID&&e.extensionId!==d.JUPYTER_HUB_EXTENSION_ID?[]:[{iconPath:new s.ThemeIcon("close"),tooltip:p.DataScience.removeRemoteJupyterServerEntryInQuickPick}]})}));let v=!1;if(c.filter((({time:e})=>!e)).forEach((({server:t})=>{v||(v=!0,o.push({label:p.DataScience.jupyterServerNotUsedBeforeQuickPickSeparatorTitle,kind:s.QuickPickItemKind.Separator})),o.push({type:E.KernelFinder,kernelFinderInfo:t,idAndHandle:t.serverProviderHandle,label:t.displayName,buttons:!l?.removeJupyterServer||e.extensionId!==d.JVSC_EXTENSION_ID&&e.extensionId!==d.JUPYTER_HUB_EXTENSION_ID?[]:[{iconPath:new s.ThemeIcon("close"),tooltip:p.DataScience.removeRemoteJupyterServerEntryInQuickPick}]})})),g.sort(((e,t)=>e.label.localeCompare(t.label))).forEach((t=>{const n=(0,y.generateIdFromRemoteProvider)({extensionId:e.extensionId,id:e.id,handle:t.id});h.has(n)||(v||(v=!0,o.push({label:p.DataScience.jupyterServerNotUsedBeforeQuickPickSeparatorTitle,kind:s.QuickPickItemKind.Separator})),o.push({type:E.JupyterServer,label:t.label,idAndHandle:{extensionId:e.extensionId,id:e.id,handle:t.id},server:t,buttons:!l?.removeJupyterServer||e.extensionId!==d.JVSC_EXTENSION_ID&&e.extensionId!==d.JUPYTER_HUB_EXTENSION_ID?[]:[{iconPath:new s.ThemeIcon("close"),tooltip:p.DataScience.removeRemoteJupyterServerEntryInQuickPick}]}))})),e.getQuickPickEntryItems&&e.handleQuickPick){const t=(await e.getQuickPickEntryItems()).map((t=>({...t,provider:e,type:E.UriProviderQuickPick,description:void 0,originalItem:t})));o.length>0&&t.length&&a.push({label:p.Common.labelForQuickPickSeparatorIndicatingThereIsAnotherGroupOfMoreItems,kind:s.QuickPickItemKind.Separator}),a.push(...t)}const b=o.concat(a),w=new s.EventEmitter;let C,k,I=1===b.length&&"default"in b[0]&&b[0].default?b[0]:void 0;if(l&&1===b.length&&(I=b[0]),I)k=I;else{const{quickPick:t,selection:r}=n.showLazyLoadQuickPick({items:b,placeholder:e.extensionId===d.JVSC_EXTENSION_ID||e.extensionId===d.JUPYTER_HUB_EXTENSION_ID?p.DataScience.enterOrSelectRemoteJupyterPlaceholder:p.DataScience.selectRemoteJupyterPlaceholder,title:p.DataScience.quickPickTitleForSelectionOfJupyterServer,supportBackInFirstStep:!0,onDidTriggerItemButton:async n=>{if("type"in n.item&&(n.item.type===E.KernelFinder||n.item.type===E.JupyterServer)){const r=n.item.idAndHandle.handle,i=g.find((e=>e.id===r));l?.removeJupyterServer&&i&&(e.extensionId===d.JVSC_EXTENSION_ID||e.extensionId===d.JUPYTER_HUB_EXTENSION_ID)&&(t.busy=!0,this.serverUriStorage.remove({extensionId:e.extensionId,id:e.id,handle:r}).catch(P.noop),await l.removeJupyterServer(i),t.busy=!1,b.splice(b.indexOf(n.item),1),w.fire(b.concat([])))}},onDidChangeItems:w.event});e.extensionId!==d.JVSC_EXTENSION_ID&&e.extensionId!==d.JUPYTER_HUB_EXTENSION_ID||t.onDidChangeValue((async n=>{if(!e.getQuickPickEntryItems)return;const r=[];o.length>0&&r.push({label:p.Common.labelForQuickPickSeparatorIndicatingThereIsAnotherGroupOfMoreItems,kind:s.QuickPickItemKind.Separator});const i=(await e.getQuickPickEntryItems(n)).map((t=>({...t,provider:e,type:E.UriProviderQuickPick,description:void 0,originalItem:t})));t.items=o.concat(r).concat(i)}),this),C=t,k=await r}if(!t.isCancellationRequested&&k&&"type"in k)switch(k.type){case E.KernelFinder:{const i=await this.selectRemoteKernelFromPicker(r.notebook,Promise.resolve(k.kernelFinderInfo),t).catch((e=>(0,S.traceError)("Failed to select a kernel",e)));if(i&&i===f.InputFlowAction.back)return this.getRemoteServersFromProvider(e,t,n,r);if(!i||i instanceof f.InputFlowAction)throw new s.CancellationError;return void(r.selection={type:"connection",connection:i})}case E.JupyterServer:{const i=(async()=>{const n={id:e.id,handle:k.server.id,extensionId:e.extensionId};return await(0,_.raceCancellationError)(t,this.serverSelector.addJupyterServer(n)),this.kernelFinderController.getOrCreateRemoteKernelFinder(n,k.server.label)})(),o=await this.selectRemoteKernelFromPicker(r.notebook,i,t).catch((e=>(0,S.traceError)("Failed to select a kernel",e)));if(o&&o===f.InputFlowAction.back)return this.getRemoteServersFromProvider(e,t,n,r);if(!o||o instanceof f.InputFlowAction)throw new s.CancellationError;return void(r.selection={type:"connection",connection:o})}case E.UriProviderQuickPick:{const i=s.notebooks.createNotebookControllerDetectionTask(d.JupyterNotebookView);try{C&&(C.busy=!0);const e=await this.selectRemoteServerFromRemoteKernelFinder(k,r,t);return C&&(C.busy=!1),e}catch(i){if(i!==f.InputFlowAction.back||I)throw i;return this.getRemoteServersFromProvider(e,t,n,r)}finally{i.dispose()}}}}async selectRemoteServerFromRemoteKernelFinder(e,t,n){if(!e.provider.handleQuickPick||n.isCancellationRequested)return;const r=await e.provider.handleQuickPick(e.originalItem,!0);if(!r||n.isCancellationRequested)throw new s.CancellationError;if("back"===r)throw f.InputFlowAction.back;const i=(async()=>{const t={id:e.provider.id,handle:r,extensionId:e.provider.extensionId};await(0,_.raceCancellationError)(n,this.serverSelector.addJupyterServer(t));const i=await(0,_.raceCancellationError)(n,this.jupyterPickerRegistration.getDisplayNameIfProviderIsLoaded(t));return this.kernelFinderController.getOrCreateRemoteKernelFinder(t,i||e.originalItem.label)})(),o=await this.selectRemoteKernelFromPicker(t.notebook,i,n).catch((e=>(0,S.traceError)("Failed to select a kernel",e)));if(o&&o===f.InputFlowAction.back)return this.selectRemoteServerFromRemoteKernelFinder(e,t,n);if(!o||o instanceof f.InputFlowAction)throw new s.CancellationError;t.selection={type:"connection",connection:o}}async selectRemoteKernelFromPicker(e,t,n){let r;const i=new b.BaseProviderBasedQuickPick(t,(e=>{const t=this.displayDataProvider.getDisplayData(e);return{label:`${e===r?"$(star-full) ":""}${t.label}`,description:t.description,detail:t.detail}}),(e=>({label:this.displayDataProvider.getDisplayData(e).category||"Other"})),{supportsBack:!0},(e=>({label:p.DataScience.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickLabel,detail:p.DataScience.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickDetail}))),o=new w.PreferredKernelConnectionService(this.jupyterConnection);return t.then((t=>o.findPreferredRemoteKernelConnection(e,t,n))).then((e=>{r=e,"startUsingRemoteKernelSpec"===e?.kind&&(i.recommended=e),i.selected=e})).catch((e=>(0,S.traceError)("Failed to determine preferred remote kernel",e))),i.selectItem(n)}};t.RemoteNotebookKernelSourceSelector=k,t.RemoteNotebookKernelSourceSelector=k=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IKernelFinder)),i(1,(0,o.inject)(c.IJupyterServerUriStorage)),i(2,(0,o.inject)(a.JupyterServerSelector)),i(3,(0,o.inject)(v.JupyterConnection)),i(4,(0,o.inject)(m.IConnectionDisplayDataProvider)),i(5,(0,o.inject)(C.IRemoteKernelFinderController)),i(6,(0,o.inject)(c.IJupyterUriProviderRegistration)),i(7,(0,o.inject)(c.IJupyterServerProviderRegistry))],k)},84390:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveKernelSwitcher=void 0;const o=n(26594),s=n(10053),a=n(11642),c=n(42080),l=n(6428),u=n(15925),d=n(43138),h=n(50867),p=n(85446),f=n(86563),g=n(58681),m=n(35412);let v=class{constructor(e,t,n,r,i){this.disposables=e,this.vscNotebook=t,this.controllerRegistration=n,this.commandManager=r,this.preferredRemoteKernelIdProvider=i}activate(){this.vscNotebook.onDidOpenNotebookDocument(this.onDidOpenNotebook,this,this.disposables),this.vscNotebook.notebookDocuments.forEach((e=>this.onDidOpenNotebook(e)))}async onDidOpenNotebook(e){if(!(0,f.isJupyterNotebook)(e))return;const t=await this.preferredRemoteKernelIdProvider.getPreferredRemoteKernelId(e.uri);if(!t)return;const n=()=>{const n=this.controllerRegistration.getSelected(e),r=this.controllerRegistration.registered.find((e=>e.id===t));return!(!r||n?.id===r.id||(this.switchKernel(e,r.connection).catch(g.noop),0))};if(n())return;const r=this.controllerRegistration.onDidChange((e=>{e.added.length&&n()&&r.dispose()}),this,this.disposables);this.controllerRegistration.onControllerSelected((t=>{t.notebook===e&&r.dispose()}),this,this.disposables)}async switchKernel(e,t){(0,a.traceVerbose)(`Using notebook.selectKernel to force remote kernel for ${(0,m.getDisplayPath)(e.uri)} to ${t.id}`),await this.commandManager.executeCommand("notebook.selectKernel",{id:t.id,extension:u.JVSC_EXTENSION_ID}),await(0,d.waitForCondition)((async()=>{if(this.vscNotebook.activeNotebookEditor?.notebook===e){const n=this.controllerRegistration.getSelected(e);if(n?.connection.id===t.id)return n.restoreConnection(e).catch(g.noop),!0}return!1}),2e3,100)?(0,a.traceVerbose)(`Successfully switched remote kernel for ${(0,m.getDisplayPath)(e.uri)} to ${t.id}`):(0,a.traceWarning)(`Failed to switch remote kernel for ${(0,m.getDisplayPath)(e.uri)} to ${t.id}`)}};t.LiveKernelSwitcher=v,r([(0,p.swallowExceptions)()],v.prototype,"onDidOpenNotebook",null),t.LiveKernelSwitcher=v=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(s.IVSCodeNotebook)),i(2,(0,o.inject)(h.IControllerRegistration)),i(3,(0,o.inject)(s.ICommandManager)),i(4,(0,o.inject)(l.PreferredRemoteKernelIdProvider))],v)},24970:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookIPyWidgetCoordinator=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(20397),l=n(11642),u=n(35412),d=n(42080),h=n(41778),p=n(50867),f=n(29768),g=n(86563);class m{get controller(){if(!this._controller)throw new Error("No controller defined");return this._controller.controller}constructor(e,t){this.editor=e,this.pendingMessages=[],this.disposables=[],this._onDidReceiveMessage=new s.EventEmitter,this.changeController(t)}changeController(e){this._controller?.id!==e.id&&(this.controllerMessageHandler?.dispose(),this._controller=e,this.controllerMessageHandler=e.onDidReceiveMessage((t=>{t.editor===this.editor&&this.controller?.id===e.id&&(this.eventHandlerListening?(this.sendPendingMessages(),this._onDidReceiveMessage.fire(t.message)):this.pendingMessages.push(t.message))}),this,this.disposables))}dispose(){(0,c.dispose)(this.disposables)}get onDidReceiveMessage(){return this.eventHandlerListening=!0,setTimeout((()=>this.sendPendingMessages()),0),this._onDidReceiveMessage.event}postMessage(e){return this.controller.postMessage(e,this.editor)}asWebviewUri(e){return this.controller.asWebviewUri(e)}sendPendingMessages(){if(this.pendingMessages.length){let e=this.pendingMessages.shift();for(;e;)this._onDidReceiveMessage.fire(e),e=this.pendingMessages.shift()}}}let v=class{constructor(e,t,n,r){this.serviceContainer=e,this.disposableRegistry=t,this.notebook=n,this.controllerManager=r,this.messageCoordinators=new WeakMap,this.notebookDisposables=new WeakMap,this.notebookCommunications=new WeakMap,this.notebookEditors=new WeakMap}activate(){this.notebook.onDidChangeVisibleNotebookEditors(this.onDidChangeVisibleNotebookEditors,this,this.disposableRegistry),this.notebook.onDidCloseNotebookDocument(this.onDidCloseNotebookDocument,this,this.disposableRegistry),this.controllerManager.onControllerSelected(this.onDidSelectController,this,this.disposableRegistry)}onDidSelectController(e){const t=this.messageCoordinators.get(e.notebook);t&&(this.messageCoordinators.delete(e.notebook),this.notebook.notebookEditors.filter((t=>t.notebook===e.notebook)).forEach((t=>{const n=this.notebookCommunications.get(t);this.notebookCommunications.delete(t),n&&n.controller!==e.controller.controller&&(this.notebookCommunications.delete(t),n&&n.dispose())})),t?.dispose()),this.notebook.notebookEditors.filter((t=>t.notebook===e.notebook)).forEach((t=>this.initializeNotebookCommunication(t,e.controller)))}initializeNotebookCommunication(e,t){if(e.notebook.isClosed||!(0,g.isJupyterNotebook)(e.notebook))return;const n=e.notebook;if(!t)return void(0,l.traceVerbose)(`No controller, hence notebook communications cannot be initialized for editor ${(0,u.getDisplayPath)(e.notebook.uri)}`);if(this.notebookCommunications.has(e))return void(0,l.traceVerbose)(`notebook communications already initialized for editor ${(0,u.getDisplayPath)(e.notebook.uri)}`);(0,l.traceVerbose)(`Initialize notebook communications for editor ${(0,u.getDisplayPath)(e.notebook.uri)}`);const r=new m(e,t);this.addNotebookDisposables(n,[r]),this.notebookCommunications.set(e,r),(0,l.traceVerbose)(`Resolving notebook UI Comms (resolve) for ${(0,u.getDisplayPath)(n.uri)}`);let i=this.messageCoordinators.get(n);i||(i=new f.CommonMessageCoordinator(n,this.serviceContainer),this.messageCoordinators.set(n,i)),i.attach(r)}addNotebookDisposables(e,t){const n=this.notebookDisposables.get(e)||[];n.push(...t),this.notebookDisposables.set(e,n)}async onDidChangeVisibleNotebookEditors(e){e.forEach((e=>{const t=this.controllerManager.getSelected(e.notebook);this.initializeNotebookCommunication(e,t)}))}onDidCloseNotebookDocument(e){const t=this.notebookEditors.get(e)||[];(0,c.dispose)(this.notebookDisposables.get(e)||[]),t.forEach((e=>this.notebookCommunications.get(e)?.dispose())),this.messageCoordinators.get(e)?.dispose(),this.messageCoordinators.delete(e)}};t.NotebookIPyWidgetCoordinator=v,t.NotebookIPyWidgetCoordinator=v=r([(0,o.injectable)(),i(0,(0,o.inject)(h.IServiceContainer)),i(1,(0,o.inject)(d.IDisposableRegistry)),i(2,(0,o.inject)(a.IVSCodeNotebook)),i(3,(0,o.inject)(p.IControllerRegistration))],v)},97555:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PreferredKernelConnectionService=void 0;const s=n(66828),a=n(38994),c=n(6428),l=n(94062),u=n(20397),d=n(86563),h=n(84570),p=n(5337),f=n(82010),g=o(n(52859)),m=n(99746),v=n(47891),y=n(82341);function b(e,t){const n=s.workspace.getWorkspaceFolder(e.uri)?.uri||(1===s.workspace.workspaceFolders?.length?s.workspace.workspaceFolders[0].uri:void 0);return w(g.dirname(e.uri),t)||(n?w(n,t):void 0)}function w(e,t){const n=t.kernels.filter((e=>"startUsingPythonInterpreter"===e.kind)).map((e=>e)).filter((t=>(0,m.isParentPath)(t.interpreter.envPath?.fsPath||t.interpreter.uri.fsPath,e.fsPath))),r=n.find((e=>e.interpreter.envType===v.EnvironmentType.Venv&&".venv"===e.interpreter.envName?.toLowerCase()));if(r)return r;const i=n.find((e=>e.interpreter.envType===v.EnvironmentType.Venv&&".venv"===e.interpreter.envName?.toLowerCase()));if(i)return i;return n.find((e=>e.interpreter.envType===v.EnvironmentType.Venv&&".venv"===e.interpreter.envName?.toLowerCase()))||(n.length?n[0]:void 0)}t.PreferredKernelConnectionService=class{constructor(e){this.jupyterConnection=e,this.disposables=[]}dispose(){(0,u.dispose)(this.disposables)}async findPreferredRemoteKernelConnection(e,t,n){return this.findPreferredRemoteKernelConnectionImpl(e,t,n,!1)}async findPreferredRemoteKernelConnectionImpl(e,t,n,r){const i=await p.ServiceContainer.instance.get(c.PreferredRemoteKernelIdProvider).getPreferredRemoteKernelId(e.uri),o=async()=>{let e=t.kernels.find((e=>"connectToLiveRemoteKernel"===e.kind&&e.id===i));if(e)return e;if("idle"===t.status)return;return await new Promise((e=>t.onDidChangeKernels((()=>{const r=t.kernels.find((e=>"connectToLiveRemoteKernel"===e.kind&&e.id===i));r&&e(r),("idle"===t.status||n.isCancellationRequested)&&e(void 0)}),this,this.disposables)))||void 0};if(i){const e=await o();if(e||r)return e}const s=t.kernels.find((e=>(0,l.isRemoteConnection)(e)))?.serverProviderHandle;if(s){const n=await this.jupyterConnection.createConnectionInfo(s),r=(0,y.getRemoteSessionOptions)(n,e.uri),i=r&&t.kernels.find((e=>(0,l.isRemoteConnection)(e)&&"connectToLiveRemoteKernel"===e.kind&&e.kernelModel.model&&e.kernelModel.model.path===r.path&&e.kernelModel.model.name===r.name));if(i)return i}return this.findPreferredKernelSpecConnection(e,t,n,r)}async findPreferredLocalKernelSpecConnection(e,t,n){return this.findPreferredKernelSpecConnection(e,t,n,!1)}async findPreferredKernelSpecConnection(e,t,n,r){const i=(0,d.getNotebookMetadata)(e),o=i?.kernelspec?.name,s=()=>{const n=o?t.kernels.filter((e=>("startUsingLocalKernelSpec"===e.kind||"startUsingRemoteKernelSpec"===e.kind)&&e.kernelSpec.name===o)):[];if(n.length||r)return n;const i=(0,f.getLanguageOfNotebookDocument)(e);return i?t.kernels.filter((e=>("startUsingLocalKernelSpec"===e.kind||"startUsingRemoteKernelSpec"===e.kind)&&e.kernelSpec.language&&(e.kernelSpec.language===i||(0,d.translateKernelLanguageToMonaco)(e.kernelSpec.language)===(0,d.translateKernelLanguageToMonaco)(i)))):void 0},a=s();if(Array.isArray(a)&&a.length){if(r&&a.length>1)return;return a[0]}if("idle"===t.status)return;const c=[];return new Promise((e=>t.onDidChangeKernels((()=>{if(n.isCancellationRequested)return e(void 0);const i=s();if(Array.isArray(i)&&i.length)return r&&i.length>1?e(void 0):e(i[0]);"idle"===t.status&&e(void 0)}),this,this.disposables))).finally((()=>(0,u.dispose)(c)))}async findPreferredPythonKernelConnection(e,t,n){return this.findPreferredPythonKernelConnectionImpl(e,t,n)}async findPreferredPythonKernelConnectionImpl(e,t,n){t=t||p.ServiceContainer.instance.get(l.IKernelFinder).registered.find((e=>e.kind===a.ContributedKernelFinderKind.LocalPythonEnvironment));const r=p.ServiceContainer.instance.get(h.IInterpreterService),i=b(e,t);if(i)return i;const o=await r.getActiveInterpreter(e.uri);if(!o)return;const s=()=>{if(!n.isCancellationRequested)return t.kernels.filter((e=>"startUsingPythonInterpreter"===e.kind)).map((e=>e)).find((e=>e.interpreter.id===o.id))};return s()||("discovering"===t.status?(await new Promise((n=>{t.onDidChangeStatus((()=>"idle"===t.status&&n()),this,this.disposables),t.onDidChangeKernels((()=>(b(e,t)||s())&&n()),this,this.disposables)})),b(e,t)||s()):void 0)}}},99229:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelConnectionHandler=void 0;const o=n(26594),s=n(66828),a=n(50867),c=n(42080),l=n(58681),u=n(11642),d=n(94062),h=n(6428),p=n(94433);let f=class{constructor(e,t,n,r,i){this.disposables=e,this.kernelProvider=t,this.controllers=n,this.liveKernelTracker=r,this.preferredRemoteKernelIdProvider=i}activate(){this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposables),this.controllers.onControllerSelectionChanged(this.onNotebookControllerSelectionChanged,this,this.disposables)}onNotebookControllerSelectionChanged({selected:e,notebook:t,controller:n}){t.isClosed||("connectToLiveRemoteKernel"===n.connection.kind&&n.connection.kernelModel.id&&(e?this.liveKernelTracker.trackKernelIdAsUsed(t.uri,n.connection.serverProviderHandle,n.connection.kernelModel.id):this.liveKernelTracker.trackKernelIdAsNotUsed(t.uri,n.connection.serverProviderHandle,n.connection.kernelModel.id)),(0,d.isLocalConnection)(n.connection)&&this.preferredRemoteKernelIdProvider.clearPreferredRemoteKernelId(t.uri).catch(l.noop))}onDidStartKernel(e){if(!e.resourceUri)return;const t=e.resourceUri;if("startUsingRemoteKernelSpec"===e.kernelConnectionMetadata.kind){const n=e.kernelConnectionMetadata.serverProviderHandle,r=e.kernelSocket.subscribe((r=>{const i=r?.options.id;e.disposed||e.disposing||!i||((0,u.traceVerbose)(`Updating preferred kernel for remote notebook ${i}`),this.preferredRemoteKernelIdProvider.storePreferredRemoteKernelId(t,i).catch(l.noop),this.liveKernelTracker.trackKernelIdAsUsed(t,n,i))}));this.disposables.push(new s.Disposable((()=>r.unsubscribe())))}}};t.RemoteKernelConnectionHandler=f,t.RemoteKernelConnectionHandler=f=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(d.IKernelProvider)),i(2,(0,o.inject)(a.IControllerRegistration)),i(3,(0,o.inject)(p.ILiveRemoteKernelConnectionUsageTracker)),i(4,(0,o.inject)(h.PreferredRemoteKernelIdProvider))],f)},35282:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelControllerWatcher=void 0;const o=n(26594),s=n(94433),a=n(94062),c=n(42080),l=n(58681),u=n(11642),d=n(50867),h=n(66828),p=n(85446);let f=class{constructor(e,t,n,r,i){this.disposables=e,this.providerRegistry=t,this.uriStorage=n,this.controllers=r,this.serverProviderRegistry=i,this.handledProviders=new WeakSet,this.handledCollections=new WeakSet,this.handledServerProviderChanges=new WeakSet}activate(){this.providerRegistry.onDidChangeProviders(this.addProviderHandlers,this,this.disposables),this.addProviderHandlers(),this.serverProviderRegistry.jupyterCollections.forEach((e=>this.checkJupyterServerProviderHandlers(e))),this.serverProviderRegistry.onDidChangeCollections((({added:e,removed:t})=>{e.forEach((e=>this.checkJupyterServerProviderHandlers(e))),t.forEach((e=>this.removeControllersBelongingToDisposedProvider(e.extensionId,e.id)))}),this,this.disposables)}async checkJupyterServerProviderHandlers(e){this.handledCollections.has(e)&&e.onDidChangeProvider((()=>e.serverProvider?this.checkExpiredServersInJupyterCollection(e,e.serverProvider).catch(l.noop):void 0),this,this.disposables),e.serverProvider&&await this.checkExpiredServersInJupyterCollection(e,e.serverProvider)}async checkExpiredServersInJupyterCollection(e,t){if(!this.handledServerProviderChanges.has(t)&&t.onDidChangeServers){const n=t.onDidChangeServers((()=>{e.serverProvider===t?this.checkExpiredServersInJupyterCollection(e,t).catch(l.noop):(n.dispose(),this.handledServerProviderChanges.delete(t))}),this,this.disposables)}const n=new h.CancellationTokenSource;this.disposables.push(n);try{const r=await Promise.resolve(t.provideJupyterServers(n.token));await this.removeControllersAndUriStorageBelongingToInvalidServers(e.extensionId,e.id,(r||[]).map((e=>e.id)))}finally{n.dispose()}}addProviderHandlers(){this.providerRegistry.providers.forEach((e=>{this.handledProviders.has(e)||(this.handledProviders.add(e),this.onProviderHandlesChanged(e).catch(l.noop),e.onDidChangeHandles&&e.onDidChangeHandles((()=>this.onProviderHandlesChanged(e)),this,this.disposables))}))}async onProviderHandlesChanged(e){if(!e.getHandles)return;const t=await e.getHandles();await this.removeControllersAndUriStorageBelongingToInvalidServers(e.extensionId,e.id,t)}async removeControllersAndUriStorageBelongingToInvalidServers(e,t,n){const r=await this.uriStorage.getAll();await Promise.all(r.filter((n=>n.provider.extensionId===e&&n.provider.id===t)).map((async e=>{n.includes(e.provider.handle)||await this.uriStorage.remove(e.provider)}))),this.controllers.registered.forEach((r=>{const i=r.connection;(0,a.isLocalConnection)(i)||i.serverProviderHandle.extensionId!==e||i.serverProviderHandle.id!==t||n.includes(i.serverProviderHandle.handle)||((0,u.traceWarning)(`Deleting controller ${r.id} as it is associated with a server Id that has been removed`),r.dispose())}))}removeControllersBelongingToDisposedProvider(e,t){this.controllers.registered.forEach((n=>{const r=n.connection;(0,a.isLocalConnection)(r)||r.serverProviderHandle.extensionId!==e||r.serverProviderHandle.id!==t||((0,u.traceWarning)(`Deleting controller ${n.id} as it is associated with a Provider Id that has been removed`),n.dispose())}))}};t.RemoteKernelControllerWatcher=f,r([(0,p.swallowExceptions)("Failed to check what servers were shutdown in a Jupyter Collection in Controller Watcher")],f.prototype,"checkJupyterServerProviderHandlers",null),r([(0,p.swallowExceptions)("Failed to check what servers were shutdown in Controller Watcher")],f.prototype,"checkExpiredServersInJupyterCollection",null),t.RemoteKernelControllerWatcher=f=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(s.IJupyterUriProviderRegistration)),i(2,(0,o.inject)(s.IJupyterServerUriStorage)),i(3,(0,o.inject)(d.IControllerRegistration)),i(4,(0,o.inject)(s.IJupyterServerProviderRegistry))],f)},9008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteKernelReconnectBusyIndicator=void 0;const r=n(66828),i=n(86563);class o extends i.Disposables{constructor(e,t,n){super(),this.kernel=e,this.controller=t,this.notebook=n}initialize(){const e=this.kernel,t=this.controller,n=this.notebook;if("connectToLiveRemoteKernel"!==e.kernelConnectionMetadata.kind)return;if("busy"!==e.status&&"unknown"!==e.status)return;if(!t.createNotebookExecution)return;r.workspace.onDidCloseNotebookDocument((e=>{e===n&&this.dispose()}),this,this.disposables),t.onDidChangeSelectedNotebooks((e=>{e.notebook===n&&!1===e.selected&&this.dispose()}),this,this.disposables),e.onStatusChanged((e=>{"busy"!==e&&"unknown"!==e&&this.dispose()}),this,this.disposables);const i=t.createNotebookExecution(n);i.start(),this.disposables.push(new r.Disposable((()=>i.end())))}}t.RemoteKernelReconnectBusyIndicator=o},14809:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52064),i=n(22265),o=n(25928),s=n(1396),a=n(62075),c=n(5656),l=n(50867);t.registerTypes=function(e,t){e.addSingleton(l.IControllerRegistration,o.ControllerRegistration),e.addBinding(l.IControllerRegistration,r.IExtensionSyncActivationService),e.addSingleton(l.IConnectionDisplayDataProvider,i.ConnectionDisplayDataProvider),e.addSingleton(l.IRemoteNotebookKernelSourceSelector,c.RemoteNotebookKernelSourceSelector),e.addSingleton(r.IExtensionSyncActivationService,a.KernelSourceCommandHandler),(0,s.registerTypes)(e,t)}},50867:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IConnectionDisplayDataProvider=t.ILocalPythonNotebookKernelSourceSelector=t.ILocalNotebookKernelSourceSelector=t.IRemoteNotebookKernelSourceSelector=t.PreferredKernelExactMatchReason=t.IControllerRegistration=t.InteractiveControllerIdSuffix=void 0,t.InteractiveControllerIdSuffix=" (Interactive)",t.IControllerRegistration=Symbol("IControllerRegistration"),function(e){e[e.NoMatch=0]="NoMatch",e[e.OnlyKernel=1]="OnlyKernel",e[e.WasPreferredInterpreter=2]="WasPreferredInterpreter",e[e.IsExactMatch=4]="IsExactMatch",e[e.IsNonPythonKernelLanguageMatch=8]="IsNonPythonKernelLanguageMatch"}(n||(t.PreferredKernelExactMatchReason=n={})),t.IRemoteNotebookKernelSourceSelector=Symbol("IRemoteNotebookKernelSourceSelector"),t.ILocalNotebookKernelSourceSelector=Symbol("ILocalNotebookKernelSourceSelector"),t.ILocalPythonNotebookKernelSourceSelector=Symbol("ILocalPythonNotebookKernelSourceSelector"),t.IConnectionDisplayDataProvider=Symbol("IConnectionDisplayData")},60322:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeNotebookController=void 0;const r=n(66828),i=n(15925),o=n(20397),s=n(11642),a=n(35412),c=n(43138),l=n(25251),u=n(58681),d=n(47684),h=n(15925),p=n(9959),f=n(37853),g=n(30682),m=n(98729),v=n(94062),y=n(66690),b=n(88960),w=n(86563),S=n(99203),C=n(46799),_=n(6491),P=n(9016),E=n(14154),k=n(61239),I=n(90541),D=n(32378),T=n(35631),x=n(9008),O=n(57550),R=n(67572),M=n(74396);class A{get id(){return this.controller.id}get label(){return this.controller.label}get connection(){return this.kernelConnection}get viewType(){return this._viewType}get onNotebookControllerSelected(){return this._onNotebookControllerSelected.event}get onNotebookControllerSelectionChanged(){return this._onNotebookControllerSelectionChanged.event}get onConnecting(){return this._onConnecting.event}get onDidReceiveMessage(){return this.controller.onDidReceiveMessage}get onDidDispose(){return this._onDidDispose.event}isAssociatedWithDocument(e){return this.associatedDocuments.has(e)}static create(e,t,n,r,i,o,s,a,c,l,u,d,h,p,f,g,m){return new A(e,t,n,r,i,o,s,a,c,l,u,d,h,p,f,g,m)}constructor(e,t,n,i,o,c,l,u,d,h,p,f,g,m,v,y,b){this.kernelConnection=e,this._viewType=n,this.notebookApi=i,this.commandManager=o,this.kernelProvider=c,this.context=l,this.languageService=d,this.workspace=h,this.configuration=p,this.documentManager=f,this.appShell=g,this.browser=m,this.extensionChecker=v,this.serviceContainer=y,this.displayDataProvider=b,this._onNotebookControllerSelectionChanged=new r.EventEmitter,this._onConnecting=new r.EventEmitter,this.pendingCellAdditions=new Map,this._onDidDispose=new r.EventEmitter,this.disposables=[],this.notebookKernels=new WeakMap,this.isDisposed=!1,this.runningCellExecutions=new Map,this.associatedDocuments=new WeakMap,this.restoredConnections=new WeakSet,u.push(this),this._onNotebookControllerSelected=new r.EventEmitter,this.displayData=this.displayDataProvider.getDisplayData(this.connection),this.controller=this.notebookApi.createNotebookController(t,n,this.displayData.label,this.handleExecution.bind(this),this.getRendererScripts(),[]),this.displayData.onDidChange(this.updateDisplayData,this,this.disposables),this.updateDisplayData(),this.controller.interruptHandler=this.handleInterrupt.bind(this),this.controller.supportsExecutionOrder=!0,this.controller.supportedLanguages=this.languageService.getSupportedLanguages(e),this.controller.onDidChangeSelectedNotebooks(this.onDidChangeSelectedNotebooks,this,this.disposables),this.notebookApi.onDidCloseNotebookDocument((e=>{(0,s.traceInfoIfCI)(`Remove associated notebook ${(0,a.getDisplayPath)(e.uri)} from controller ${this.connection.kind}:${this.id} for ${this.viewType}`),this.associatedDocuments.delete(e)}),this,this.disposables)}async restoreConnection(e){if(this.restoredConnections.has(e))return;this.restoredConnections.add(e);const t=await this.connectToKernel(e,new b.DisplayOptions(!0));if("connectToLiveRemoteKernel"===this.kernelConnection.kind){const n=new x.RemoteKernelReconnectBusyIndicator(t,this.controller,e);this.disposables.push(n),n.initialize()}const n=this.kernelProvider.getKernelExecution(t),i=this.serviceContainer.get(O.LastCellExecutionTracker),s=await i.getLastTrackedCellExecution(e,t);if(!t.session?.kernel||n.pendingCells.length||!s||e.cellCount<s.cellIndex||e.cellAt(s.cellIndex).kind!==r.NotebookCellKind.Code)return;let a=!1;const c=[];let l;const d=(t,r)=>{if("send"!==r.direction&&!a&&(0,R.getParentHeaderMsgId)(r.msg)===s.msg_id){if("msg_type"in r.msg&&"status"===r.msg.msg_type&&"execution_state"in r.msg.content&&"idle"===r.msg.content.execution_state)return;a=!0,n.resumeCellExecution(e.cellAt(s.cellIndex),{msg_id:s.msg_id,startTime:s.startTime,executionCount:s.executionCount}).catch(u.noop),(0,o.dispose)(c)}};t.session.kernel.anyMessage.connect(d),l=new r.Disposable((()=>{(0,u.swallowExceptions)((()=>t.session?.kernel?.anyMessage.disconnect(d)))})),c.push(l),this.disposables.push(l)}updateConnection(e){"connectToLiveRemoteKernel"!==e.kind&&(this.controller.label=(0,m.getDisplayNameOrNameOfKernelConnection)(e))}asWebviewUri(e){return this.controller.asWebviewUri(e)}postMessage(e,t){const n=e&&"message"in e?e.message:"";return(0,s.traceInfoIfCI)(`${S.ConsoleForegroundColors.Green}Posting message to Notebook UI ${n}`),this.controller.postMessage(e,t)}setPendingCellAddition(e,t){if(this.viewType!==i.InteractiveWindowView)throw new Error("setPendingCellAddition only applies to the Interactive Window");this.pendingCellAdditions.set(e,t)}dispose(){if(this.isDisposed)return;const e=this.notebookApi.notebookDocuments.filter((e=>this.associatedDocuments.has(e))).map((e=>e.uri.toString()));(0,s.traceVerbose)(`Disposing controller ${this.id} associated with connection ${this.connection.id} ${e.length?"and documents "+e.join(", "):""}`),(0,s.traceInfoIfCI)(`Disposing controller ${this.id} associated with connection ${this.connection.id} ${e.length?"and documents "+e.join(", "):""} called from ${new Error("").stack}`),this.isDisposed=!0,this._onNotebookControllerSelected.dispose(),this._onNotebookControllerSelectionChanged.dispose(),this._onConnecting.dispose(),this.controller.dispose(),this._onDidDispose.fire(),this._onDidDispose.dispose(),(0,o.dispose)(this.disposables)}updateDisplayData(){this.controller.label=this.displayData.label;let e="connectToLiveRemoteKernel"===this.connection.kind?"":this.displayData.description;this.controller.description=e,this.displayData.serverDisplayName&&(this.controller.description=e?`${e} (${this.displayData.serverDisplayName})`:this.displayData.serverDisplayName)}async handleExecution(e,t){e.length<1||(this.pendingCellAdditions.has(t)&&await this.pendingCellAdditions.get(t),e=e.filter((e=>!(e.index<0&&((0,s.traceWarning)(`Attempting to run a cell with index ${e.index}, kind ${e.kind}, text = ${e.document.getText()}`),1)))),this.workspace.isTrusted&&((0,s.traceInfo)(`Handle Execution of Cells ${e.map((e=>e.index))} for ${(0,a.getDisplayPath)(t.uri)}`),await(0,k.initializeInteractiveOrNotebookTelemetryBasedOnUserAction)(t.uri,this.connection),await Promise.all(e.map((e=>this.executeCell(t,e))))))}warnWhenUsingOutdatedPython(){const e=this.kernelConnection.interpreter?.version;!e||e.major>=4||"startUsingLocalKernelSpec"!==this.kernelConnection.kind&&"startUsingPythonInterpreter"!==this.kernelConnection.kind||(e.major<3||3===e.major&&e.minor<=5)&&this.appShell.showWarningMessage(l.DataScience.warnWhenSelectingKernelWithUnSupportedPythonVersion,l.Common.learnMore).then((e=>{if(e===l.Common.learnMore)return this.browser.launch("https://aka.ms/jupyterUnSupportedPythonKernelVersions")}),u.noop)}async onDidChangeSelectedNotebooks(e){if((0,s.traceInfoIfCI)(`NotebookController selection event called for notebook ${e.notebook.uri.toString()} & controller ${this.connection.kind}:${this.id}. Selected ${e.selected} `),this.associatedDocuments.has(e.notebook)&&e.selected)return;if(!e.selected){const t=this.kernelProvider.get(e.notebook);return t?.kernelConnectionMetadata.id===this.kernelConnection.id&&((0,s.traceInfo)(`Disposing kernel ${this.kernelConnection.id} for notebook ${(0,a.getDisplayPath)(e.notebook.uri)} due to selection of another kernel or closing of the notebook`),t.dispose().catch(u.noop)),this.associatedDocuments.delete(e.notebook),void this._onNotebookControllerSelectionChanged.fire(e)}if(!(0,w.isJupyterNotebook)(e.notebook)&&e.notebook.notebookType!==i.InteractiveWindowView)return;if(!this.workspace.isTrusted)return;this.warnWhenUsingOutdatedPython();const t=(0,c.createDeferred)();(0,s.traceInfoIfCI)(`Controller ${this.connection.kind}:${this.id} associated with nb ${(0,a.getDisplayPath)(e.notebook.uri)}`),this.associatedDocuments.set(e.notebook,t.promise),await this.onDidSelectController(e.notebook),await this.updateCellLanguages(e.notebook),this._onNotebookControllerSelected.fire({notebook:e.notebook,controller:this}),this._onNotebookControllerSelectionChanged.fire(e),(0,s.traceVerbose)("Controller selection change completed"),t.resolve()}async updateCellLanguages(e){const t=this.controller.supportedLanguages;if(!t||0===t?.length)return;const n=(0,m.isPythonKernelConnection)(this.kernelConnection)?i.PYTHON_LANGUAGE:t[0];await Promise.all(e.getCells().filter((e=>e.kind===r.NotebookCellKind.Code)).map((async e=>{t.includes(e.document.languageId)||await r.languages.setTextDocumentLanguage(e.document,n).then(u.noop,u.noop)})))}getRendererScripts(){return this.context.extensionMode===r.ExtensionMode.Development||this.context.extensionMode===r.ExtensionMode.Test?[new r.NotebookRendererScript(r.Uri.joinPath(this.context.extensionUri,"out","webviews","webview-side","widgetTester","widgetTester.js"))]:[]}handleInterrupt(e){(0,s.traceVerbose)(`VS Code interrupted kernel for ${(0,a.getDisplayPath)(e.uri)}`),e.getCells().forEach((e=>(0,E.traceCellMessage)(e,"Cell cancellation requested"))),this.commandManager.executeCommand(h.Commands.InterruptKernel,{notebookEditor:{notebookUri:e.uri}}).then(u.noop,(e=>(0,s.traceError)("Failed to interrupt",e)))}createCellExecutionIfNecessary(e,t){let n=this.runningCellExecutions.get(e.notebook);if(!n||n.cell===e){n?.end(void 0,void 0),n=P.CellExecutionCreator.getOrCreate(e,t,!0),this.runningCellExecutions.set(e.notebook,n);const r=n.end.bind(n);n.end=(t,n)=>{this.runningCellExecutions.delete(e.notebook),r(t,n)}}return n}async executeCell(e,t,n){const o=new M.DisposableStore,a=o.add(new r.CancellationTokenSource);o.add(r.workspace.onDidCloseNotebookDocument((t=>t===e?a.cancel():void 0)));let c,l=this.createCellExecutionIfNecessary(t,new T.KernelController(this.controller)),d="start",h=new T.KernelController(this.controller),p=!1;const g=this.serviceContainer.get(O.LastCellExecutionTracker);try{if(c=await this.connectToKernel(e,new b.DisplayOptions(!1)),c.disposing)throw new r.CancellationError;p=!0,c&&c.controller.id!==h.id&&(h=c.controller,l=this.createCellExecutionIfNecessary(t,c.controller)),d="execution",c.controller.id===this.id&&this.updateKernelInfoInNotebookWhenAvailable(c,e),g.trackCellExecution(t,c);const o=this.kernelProvider.getKernelExecution(c).executeCell(t,n);return o.then((e=>{if(c&&!i.Exiting.isExiting&&e!==v.NotebookCellRunState.Idle)return g.deleteTrackedCellExecution(t,c)})).catch(u.noop),await o}catch(n){(0,_.isCancellationError)(n)||(0,s.traceError)("Error in execution",n),p||(l.start(),l.clearOutput(t).then(u.noop,u.noop));const r=this.serviceContainer.get(I.IDataScienceErrorHandler);n=f.WrappedError.unwrap(n);const i=(0,_.isCancellationError)(n)||n instanceof y.KernelDeadError;await(0,E.endCellAndDisplayErrorsInCell)(t,h,await r.getErrorMessageForDisplayInCell(n,d,e.uri),i)}}async connectToKernel(e,t){return this._onConnecting.fire(),C.KernelConnector.connectToNotebookKernel(this.kernelConnection,this.serviceContainer,{resource:e.uri,notebook:e,controller:this.controller},t,this.disposables)}updateKernelInfoInNotebookWhenAvailable(e,t){if(this.notebookKernels.get(t)===e)return;this.notebookKernels.set(t,e);const n=[];this.notebookApi.onDidCloseNotebookDocument((e=>{e===t&&(0,o.dispose)(n)}),this,n);const r=e.onDisposed((()=>(0,o.dispose)(n))),i=e.onStatusChanged((async()=>{!e.disposed&&e.info&&this.associatedDocuments.has(t)&&(await N(t,this.documentManager,e.kernelConnectionMetadata,e.info),"ok"===e.info.status&&(0,o.dispose)(n))}));n.push({dispose:()=>i.dispose()}),n.push({dispose:()=>r?.dispose()})}async onDidSelectController(e){const t=this.connection,n=this.kernelProvider.get(e);if(n&&(0,m.areKernelConnectionsEqual)(n.kernelConnectionMetadata,t))return void(0,s.traceInfo)("Switch kernel did not change kernel.");if((0,d.sendKernelTelemetryEvent)(e.uri,p.Telemetry.SwitchKernel),n&&this.notebookApi.notebookEditors.filter((t=>t.notebook===e)).forEach((e=>this.postMessage({message:g.IPyWidgetMessages.IPyWidgets_onKernelChanged,payload:void 0},e))),await N(e,this.documentManager,t),e.notebookType===i.InteractiveWindowView)return;const o=this.kernelProvider.getOrCreate(e,{metadata:t,controller:this.controller,resourceUri:e.uri});if((0,s.traceVerbose)(`KernelProvider switched kernel to id = ${o.kernelConnectionMetadata.id}`),(0,m.isPythonKernelConnection)(this.kernelConnection)&&!this.extensionChecker.isPythonExtensionInstalled)return;const a=this.serviceContainer.get(D.ITrustedKernelPaths);!this.configuration.getSettings(void 0).disableJupyterAutoStart&&(0,v.isLocalConnection)(this.kernelConnection)&&this.kernelConnection.kernelSpec.specFile&&a.isTrusted(r.Uri.file(this.kernelConnection.kernelSpec.specFile))&&this.connectToKernel(e,new b.DisplayOptions(!0)).catch(u.noop)}}async function N(e,t,n,i){let o=(0,w.getNotebookMetadata)(e)||{};const{changed:s}=await(0,E.updateNotebookMetadata)(o,n,i);if(s){const n=new r.WorkspaceEdit,i=JSON.parse(JSON.stringify(e.metadata||{custom:{}}));i.custom=i.custom||{},i.custom.metadata=o,n.set(e.uri,[r.NotebookEdit.updateNotebookMetadata({...e.metadata||{},custom:i.custom})]),await t.applyEdit(n)}}t.VSCodeNotebookController=A},32372:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRegistry=void 0;const o=n(26594),s=n(10053),a=n(15925),c=n(42080),l=n(9959),u=n(3445),d=n(66317);let h=class{constructor(e,t,n,r){this.debuggingManager=e,this.vscNotebook=t,this.disposables=n,this.commandManager=r}activate(){this.disposables.push(this.commandManager.registerCommand(a.Commands.RunByLine,this.runByLine,this)),this.disposables.push(this.commandManager.registerCommand(a.Commands.RunByLineNext,this.runByLineNext,this)),this.disposables.push(this.commandManager.registerCommand(a.Commands.RunByLineStop,this.runByLineStop,this)),this.disposables.push(this.commandManager.registerCommand(a.Commands.RunAndDebugCell,this.runAndDebugCell,this))}async runByLine(e){(0,l.sendTelemetryEvent)(u.DebuggingTelemetry.clickedRunByLine),e??(e=this.getCellFromActiveEditor()),e&&await this.debuggingManager.tryToStartDebugging(d.KernelDebugMode.RunByLine,e)}async runByLineNext(e){e??(e=this.getCellFromActiveEditor()),e&&this.debuggingManager.runByLineNext(e)}async runByLineStop(e){e??(e=this.getCellFromActiveEditor()),e&&this.debuggingManager.runByLineStop(e)}async runAndDebugCell(e){(0,l.sendTelemetryEvent)(u.DebuggingTelemetry.clickedRunAndDebugCell),e??(e=this.getCellFromActiveEditor()),e&&await this.debuggingManager.tryToStartDebugging(d.KernelDebugMode.Cell,e)}getCellFromActiveEditor(){const e=this.vscNotebook.activeNotebookEditor;if(e){const t=e.selections[0];if(t)return e.notebook.cellAt(t.start)}}dispose(){this.disposables.forEach((e=>e.dispose()))}};t.CommandRegistry=h,t.CommandRegistry=h=r([(0,o.injectable)(),i(0,(0,o.inject)(d.INotebookDebuggingManager)),i(1,(0,o.inject)(s.IVSCodeNotebook)),i(2,(0,o.inject)(c.IDisposableRegistry)),i(3,(0,o.inject)(s.ICommandManager))],h)},3445:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggingTelemetry=t.pythonIWKernelDebugAdapter=t.pythonKernelDebugAdapter=void 0,t.pythonKernelDebugAdapter="Python Kernel Debug Adapter",t.pythonIWKernelDebugAdapter="Python Interactive Window Debug Adapter",function(e){e.clickedOnSetup="DATASCIENCE.DEBUGGING.CLICKED_ON_SETUP",e.closedModal="DATASCIENCE.DEBUGGING.CLOSED_MODAL",e.ipykernel6Status="DATASCIENCE.DEBUGGING.IPYKERNEL6_STATUS",e.clickedRunByLine="DATASCIENCE.DEBUGGING.CLICKED_RUNBYLINE",e.successfullyStartedRunByLine="DATASCIENCE.DEBUGGING.SUCCESSFULLY_STARTED_RUNBYLINE",e.successfullyStartedIWJupyterDebugger="DATASCIENCE.DEBUGGING.SUCCESSFULLY_STARTED_IW_JUPYTER",e.clickedRunAndDebugCell="DATASCIENCE.DEBUGGING.CLICKED_RUN_AND_DEBUG_CELL",e.successfullyStartedRunAndDebugCell="DATASCIENCE.DEBUGGING.SUCCESSFULLY_STARTED_RUN_AND_DEBUG_CELL",e.endedSession="DATASCIENCE.DEBUGGING.ENDED_SESSION"}(n||(t.DebuggingTelemetry=n={}))},33648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugCellController=t.isDebugpyAttachRequest=t.isJustMyCodeNotification=void 0;const r=n(58681),i=n(11642),o=n(9959),s=n(3445),a=n(57566);function c(e){return e.includes("Frame skipped from debugging during step-in")}function l(e){return"debugpyAttach"===e.event}t.isJustMyCodeNotification=c,t.isDebugpyAttachRequest=l,t.DebugCellController=class{constructor(e,t,n,r){this.debugAdapter=e,this.debugCell=t,this.execution=n,this.commandManager=r,(0,o.sendTelemetryEvent)(s.DebuggingTelemetry.successfullyStartedRunAndDebugCell)}trace(e,t){(0,i.traceVerbose)(`[Debug-Cell] ${e}: ${t}`)}async willSendEvent(e){return l(e)?(this.trace("intercept","debugpyAttach request for subprocess, not supported"),!0):!("output"!==e.event||!c(e.body.output)||(this.trace("intercept","justMyCode notification"),0))}async willSendRequest(e){"configurationDone"===e.command&&(await(0,a.cellDebugSetup)(this.execution,this.debugAdapter),this.commandManager.executeCommand("notebook.cell.execute",{ranges:[{start:this.debugCell.index,end:this.debugCell.index+1}],document:this.debugCell.notebook.uri}).then(r.noop,r.noop))}}},83332:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResetKernelController=void 0;const r=n(11642);t.ResetKernelController=class{constructor(e){this.debugAdapter=e}trace(e,t){(0,r.traceVerbose)(`[Debug-Reset] ${e}: ${t}`)}async willSendRequest(e){"attach"===e.command&&(this.trace("attach","Continuing paused kernel threads if needed"),(await this.debugAdapter.debugInfo()).stoppedThreads.forEach((e=>this.debugAdapter.continueDirect(e))))}}},46503:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestartController=void 0;const r=n(11642),i=n(66317);t.RestartController=class{constructor(e,t,n,r){this.mode=e,this.debugAdapter=t,this.debugCell=n,this.serviceContainer=r,this.debuggingManager=this.serviceContainer.get(i.INotebookDebuggingManager)}trace(e,t){(0,r.traceVerbose)(`[Debug-Restart] ${e}: ${t}`)}error(e,t){(0,r.traceError)(`[Debug-Restart] ${e}: ${t}`)}async willSendResponse(e){"initialize"===e.command&&e.body&&(e.body.supportsRestartRequest=!0)}async willSendRequest(e){if("restart"===e.command)return this.trace("restart","Handling restart request"),setTimeout((()=>{this.debugAdapter.disconnect().then((()=>(this.trace("restart","doRestart"),this.debuggingManager.tryToStartDebugging(this.mode,this.debugCell,!0)))).catch((e=>{this.error("restart",`Error restarting: ${e}`)}))}),0),{command:e.command,request_seq:e.seq,seq:e.seq,success:!0,type:"response"}}}},32844:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RunByLineController=void 0;const s=n(66828),a=n(15925),c=n(20397),l=n(86563),u=n(58681),d=n(11642),h=o(n(15948)),p=n(9959),f=n(3445),g=n(57566),m=n(33648);t.RunByLineController=class{constructor(e,t,n,r,i){this.debugAdapter=e,this.debugCell=t,this.commandManager=n,this.execution=r,this.settings=i,(0,p.sendTelemetryEvent)(f.DebuggingTelemetry.successfullyStartedRunByLine)}continue(){if("number"!=typeof this.lastPausedThreadId)return(0,d.traceVerbose)("No paused thread, can't do RBL"),void this.stop();this.debugAdapter.stepIn(this.lastPausedThreadId).then(u.noop,u.noop)}stop(){(0,d.traceInfoIfCI)("RunbylineController::stop()"),this.execution.executeHidden("pass").then(u.noop,u.noop),this.debugAdapter.disconnect().then(u.noop,u.noop)}getMode(){return this.debugAdapter.getConfiguration().__mode}async willSendEvent(e){return"stopped"===e.event&&(this.lastPausedThreadId=e.body.threadId,await this.handleStoppedEvent(this.lastPausedThreadId))?(this.trace("intercepted","handled stop event"),!0):!("output"!==e.event||!(0,m.isJustMyCodeNotification)(e.body.output)||(this.trace("intercept","justMyCode notification"),0))}async willSendRequest(e){(0,d.traceInfoIfCI)(`willSendRequest: ${e.command}`),"configurationDone"===e.command&&await this.initializeExecute()}async handleStoppedEvent(e){return!!await this.shouldStepIn(e)&&(this.debugAdapter.stepIn(e).then(u.noop,u.noop),!0)}async shouldStepIn(e){const t=await this.debugAdapter.stackTrace({threadId:e,startFrame:0,levels:1});if(t&&t.stackFrames[0]){const e=t.stackFrames[0],n=new s.Position(e.line,e.column);return this.lastPausePosition?.isEqual(n)?(this.trace("intercept","working around duplicate stop event"),!0):(this.lastPausePosition=n,!!e.source&&e.source.path!==this.debugCell.document.uri.toString())}return!1}trace(e,t){(0,d.traceVerbose)(`[Debug-RBL] ${e}: ${t}`)}async initializeExecute(){await(0,g.cellDebugSetup)(this.execution,this.debugAdapter);const e=(0,c.splitLines)(this.debugCell.document.getText(),{trim:!1,removeEmptyEntries:!1}),t=[];if((0,l.parseForComments)(e,(()=>(0,u.noop)()),((e,n)=>{0!==e.trim().length&&t.push(n)})),t.sort(),0!==t.length){const e={line:t[0]+1};await this.debugAdapter.setBreakpoints({source:{name:h.basename(this.debugCell.notebook.uri.path),path:this.debugCell.document.uri.toString()},breakpoints:[e],sourceModified:!1}),this.settings.getSettings(this.debugCell.notebook.uri).showVariableViewWhenDebugging&&this.commandManager.executeCommand(a.Commands.OpenVariableView).then(u.noop,u.noop)}this.commandManager.executeCommand("notebook.cell.execute",{ranges:[{start:this.debugCell.index,end:this.debugCell.index+1}],document:this.debugCell.notebook.uri}).then(u.noop,u.noop)}}},51346:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugLocationTracker=void 0;const r=n(66828);t.DebugLocationTracker=class{constructor(e){this._sessionId=e,this.topMostFrameId=0,this.sequenceNumbersOfRequestsPendingResponses=new Set,this.waitingForStackTrace=!1,this.debugLocationUpdatedEvent=new r.EventEmitter,this.sessionEndedEmitter=new r.EventEmitter,this.DebugLocation=void 0}get sessionId(){return this._sessionId}get sessionEnded(){return this.sessionEndedEmitter.event}get debugLocationUpdated(){return this.debugLocationUpdatedEvent.event}get debugLocation(){return this._debugLocation}onDidSendMessage(e){if(this.isResponseForRequestToFetchAllFrames(e)){const t=e.body?.stackFrames[0];this.topMostFrameId=t?.id,this.sequenceNumbersOfRequestsPendingResponses.delete(e.request_seq),this.waitingForStackTrace&&(this.DebugLocation={lineNumber:t?.line,fileName:this.normalizeFilePath(t?.source?.path),column:t.column},this.waitingForStackTrace=!1)}this.isStopEvent(e)&&(this.waitingForStackTrace=!0),this.isContinueEvent(e)&&(this.DebugLocation=void 0,this.waitingForStackTrace=!1)}onWillStopSession(){this.sessionEndedEmitter.fire(this)}onWillReceiveMessage(e){this.isRequestToFetchAllFrames(e)&&this.sequenceNumbersOfRequestsPendingResponses.add(e.seq)}set DebugLocation(e){const t=this._debugLocation;this._debugLocation=e,this._debugLocation!==t&&this.debugLocationUpdatedEvent.fire()}normalizeFilePath(e){return e.replace(/\\/g,"/")}isStopEvent(e){return"event"===e.type&&"stopped"===e.event}isContinueEvent(e){if("event"===e.type){if("continue"===e.event)return!0}else if("response"===e.type&&"continue"===e.command)return!0;return!1}isResponseForRequestToFetchAllFrames(e){return"response"===e.type&&"stackTrace"===e.command&&e.body?.stackFrames[0]&&this.sequenceNumbersOfRequestsPendingResponses.has(e.request_seq)}isRequestToFetchAllFrames(e){return"request"===e.type&&"stackTrace"===e.command&&(0===e.arguments.startFrame||void 0===e.arguments.startFrame)}}},35962:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugLocationTrackerFactory=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(42080),l=n(51346);let u=class{constructor(e,t){this.disposableRegistry=t,this.activeTrackers=new WeakMap,this.updatedEmitter=new s.EventEmitter,t.push(e.registerDebugAdapterTrackerFactory("python",this))}createDebugAdapterTracker(e){const t=new l.DebugLocationTracker(e.id);return this.activeTrackers.set(e,t),t.sessionEnded((()=>this.activeTrackers.delete(e)),this,this.disposableRegistry),t.debugLocationUpdated(this.onLocationUpdated,this,this.disposableRegistry),this.onLocationUpdated(),t}get updated(){return this.updatedEmitter.event}getLocation(e){const t=this.activeTrackers.get(e);if(t)return t.debugLocation}onLocationUpdated(){this.updatedEmitter.fire()}};t.DebugLocationTrackerFactory=u,t.DebugLocationTrackerFactory=u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IDebugService)),i(1,(0,o.inject)(c.IDisposableRegistry))],u)},3856:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0,t.Debugger=class{constructor(e,t,n){this.document=e,this.config=t,this.session=n}}},6410:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerVariables=void 0;const c=n(26594),l=s(n(15948)),u=s(n(52859)),d=n(66828),h=n(94062),p=n(50068),f=n(68650),g=n(10053),m=n(15925),v=n(42080),y=n(58681),b=n(11642),w=n(9959),S=n(66317),C=n(51346),_=new Set(["In","Out","exit","quit"]);let P=class extends C.DebugLocationTracker{constructor(e,t,n,r,i,o,s){super(void 0),this.debugService=e,this.debuggingManager=t,this.configService=n,this.vscNotebook=r,this.varScriptGenerator=i,this.dfScriptGenerator=o,this.kernelProvider=s,this.refreshEventEmitter=new d.EventEmitter,this.lastKnownVariables=[],this.importedGetVariableInfoScriptsIntoKernel=new Set,this.watchedNotebooks=new Map,this.debuggingStarted=!1,this.currentVariablesReference=0,this.currentSeqNumsForVariables=new Set,this.debuggingManager.onDoneDebugging((()=>this.refreshEventEmitter.fire()),this)}get refreshRequired(){return this.refreshEventEmitter.event}get active(){return(void 0!==this.debugService.activeDebugSession||this.activeNotebookIsDebugging())&&this.debuggingStarted}async getVariables(e,t){t&&this.watchKernel(t);const n=t&&this.kernelProvider.getKernelExecution(t),r={executionCount:n?n.executionCount:e.executionCount,pageStartIndex:0,pageResponse:[],totalCount:0,refreshCount:e.refreshCount};if(this.active){const t=e.sortColumn,n=(n,r)=>{const i=n[t]?n[t]:"",o=r[t]?r[t]:"";return e.sortAscending?i.localeCompare(o,void 0,{sensitivity:"base"}):o.localeCompare(i,void 0,{sensitivity:"base"})};this.lastKnownVariables.sort(n);const i=e.startIndex?e.startIndex:0,o=e.pageSize?e.pageSize:100;r.pageStartIndex=i;for(let e=i;e<i+o&&e<this.lastKnownVariables.length;e+=1){const t=this.lastKnownVariables[e].truncated?await this.getFullVariable(this.lastKnownVariables[e]):this.lastKnownVariables[e];this.lastKnownVariables[e]=t,r.pageResponse.push(t)}r.totalCount=this.lastKnownVariables.length}return r}async getMatchingVariable(e,t){if(this.active){const n=this.lastKnownVariables.find((t=>t.name===e));return n&&t?.resourceUri&&".ipynb"===u.extname(t?.resourceUri).toLowerCase()&&(0,w.sendTelemetryEvent)(w.Telemetry.RunByLineVariableHover),n}}async getDataFrameInfo(e,t,n,r){if(!this.active)return e;r&&(e=await this.getFullVariable(e)),t&&this.watchKernel(t);let i=e.name;n&&(i=`${e.name}${n}`);const{cleanupCode:o,initializeCode:s,code:a}=await this.dfScriptGenerator.generateCodeToGetDataFrameInfo({isDebugging:!0,variableName:i}),c=await this.evaluate({code:a,cleanupCode:o,initializeCode:s,frameId:e.frameId}),u=t?.notebook;let d=u?l.basename(u.uri.path):"";return!d&&this.debugLocation?.fileName&&(d=l.basename(this.debugLocation.fileName)),c?{...e,...JSON.parse(c.result),maximumRowChunkSize:100,fileName:d}:e}async getDataFrameRows(e,t,n,r,i){if(n-t>100)throw new Error("Debugger cannot provide more than 100 rows at once");if(!this.debugService.activeDebugSession||void 0===e.columns)return{data:[]};r&&this.watchKernel(r);let o=e.name;i&&(o=`${e.name}${i}`);const{cleanupCode:s,initializeCode:a,code:c}=await this.dfScriptGenerator.generateCodeToGetDataFrameRows({isDebugging:!0,variableName:o,startIndex:t,endIndex:n}),l=await this.evaluate({code:c,cleanupCode:s,initializeCode:a,frameId:e.frameId});return(0,f.parseDataFrame)(JSON.parse(l.result))}onWillReceiveMessage(e){super.onWillReceiveMessage(e),"request"===e.type&&"variables"===e.command&&e.arguments&&this.currentVariablesReference===e.arguments.variablesReference&&this.currentSeqNumsForVariables.add(e.seq)}onDidSendMessage(e){if(super.onDidSendMessage(e),"response"===e.type&&"initialize"===e.command)this.debuggingStarted=!0;else if("event"===e.type&&"stopped"===e.event&&this.activeNotebookIsDebugging())this.handleNotebookVariables(e).catch(y.noop);else if("response"===e.type&&"scopes"===e.command&&e.body&&e.body.scopes){const t=e.body.scopes[0].variablesReference;t!==this.currentVariablesReference&&(this.currentVariablesReference=t,this.currentSeqNumsForVariables.clear())}else if("response"===e.type&&"variables"===e.command&&e.body)this.currentSeqNumsForVariables.has(e.request_seq)&&this.updateVariables(void 0,e),this.monkeyPatchDataViewableVariables(e);else if("event"===e.type&&"terminated"===e.event){this.lastKnownVariables=[],this.topMostFrameId=0,this.debuggingStarted=!1,this.refreshEventEmitter.fire();const e=this.debugService.activeDebugSession?.id;e&&this.importedGetVariableInfoScriptsIntoKernel.delete(e)}}watchKernel(e){const t=e.notebook?.uri.toString();if(t&&!this.watchedNotebooks.has(t)){const n=[];n.push(e.onRestarted(this.resetImport.bind(this,t))),n.push(e.onDisposed((()=>{this.resetImport(t),n.forEach((e=>e.dispose())),this.watchedNotebooks.delete(t)}))),this.watchedNotebooks.set(t,n)}}resetImport(e){this.importedGetVariableInfoScriptsIntoKernel.delete(e)}async evaluate({code:e,cleanupCode:t,frameId:n,initializeCode:r}){if(this.debugService.activeDebugSession){const i={frameId:n=this.topMostFrameId||n,context:"repl",format:{rawString:!0}};(0,b.traceVerbose)(`Evaluating in debugger : ${this.debugService.activeDebugSession.id}: ${e}`);try{r&&await this.debugService.activeDebugSession.customRequest("evaluate",{...i,expression:r});const t=await this.debugService.activeDebugSession.customRequest("evaluate",{...i,expression:e});return t&&"None"!==t.result?t:void(0,b.traceError)(`Cannot evaluate ${e}`)}finally{t&&await this.debugService.activeDebugSession.customRequest("evaluate",{...i,expression:t})}}throw Error("Debugger is not active, cannot evaluate.")}async getFullVariable(e){const{initializeCode:t,code:n,cleanupCode:r}=await this.varScriptGenerator.generateCodeToGetVariableInfo({isDebugging:!0,variableName:e.name}),i=await this.evaluate({code:n,initializeCode:t,cleanupCode:r,frameId:e.frameId});return i&&i.result?{...e,truncated:!1,...JSON.parse(i.result)}:e}monkeyPatchDataViewableVariables(e){e.body.variables.forEach((e=>{e.type&&p.DataViewableTypes.has(e.type)&&(e.__vscodeVariableMenuContext="viewableInDataViewer")}))}updateVariables(e,t){const n=this.configService.getSettings(e).variableExplorerExclude?this.configService.getSettings().variableExplorerExclude?.split(";"):[],r=t.body.variables.filter((e=>!(!(e.name&&e.type&&e.value)||n&&n.includes(e.type)||e.name.startsWith("_")||_.has(e.name)||"NoneType"===e.type)));this.lastKnownVariables=r.map((e=>(0,p.convertDebugProtocolVariableToIJupyterVariable)(e))),this.refreshEventEmitter.fire()}activeNotebookIsDebugging(){const e=this.vscNotebook.activeNotebookEditor;return!!e&&this.debuggingManager.isDebugging(e.notebook)}async handleNotebookVariables(e){const t=this.vscNotebook.activeNotebookEditor?.notebook,n=e.body.threadId;if(t){const e=this.debuggingManager.getDebugSession(t);if(e){const r=await e.customRequest("stackTrace",{threadId:n,startFrame:0,levels:1});if(r&&r.stackFrames[0]){const n=r.stackFrames[0];let i;if(this.debuggingManager.getDebugMode(t)===S.KernelDebugMode.RunByLine){const r=this.debuggingManager.getDebugCell(t);n.source&&r&&n.source.path===r.document.uri.toString()&&(i=await e.customRequest("scopes",{frameId:n.id}))}else{const r=l.basename(t.uri.toString());n.source&&n.source.path&&n.source.path.includes(r)&&(i=await e.customRequest("scopes",{frameId:n.id}))}i&&(i.scopes.forEach((t=>{e.customRequest("variables",{variablesReference:t.variablesReference}).then(y.noop,y.noop)})),this.refreshEventEmitter.fire())}}}}};t.DebuggerVariables=P,t.DebuggerVariables=P=o([(0,c.injectable)(),a(0,(0,c.inject)(S.IJupyterDebugService)),a(0,(0,c.named)(m.Identifiers.MULTIPLEXING_DEBUGSERVICE)),a(1,(0,c.inject)(S.INotebookDebuggingManager)),a(2,(0,c.inject)(v.IConfigurationService)),a(3,(0,c.inject)(g.IVSCodeNotebook)),a(4,(0,c.inject)(v.IVariableScriptGenerator)),a(5,(0,c.inject)(v.IDataFrameScriptGenerator)),a(6,(0,c.inject)(h.IKernelProvider))],P)},4177:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggingManager=void 0;const c=n(26594),l=n(66828),u=n(94062),d=n(10053),h=n(15925),p=n(29444),f=n(83599),g=n(42080),m=n(25251),v=n(58681),y=n(41778),b=n(11642),w=n(56297),S=s(n(15948)),C=n(9959),_=n(50867),P=n(3445),E=n(33648),k=n(46503),I=n(32844),D=n(3856),T=n(40157),x=n(66317),O=n(57566),R=n(34045);let M=class extends T.DebuggingManagerBase{constructor(e,t,n,r,i,o,s,a,c){super(e,t,n,r,i,c),this.configurationService=o,this.platform=s,this.debugService=a,this.notebookToRunByLineController=new Map,this.runByLineCells=new p.ContextKey(h.EditorContexts.RunByLineCells,n),this.runByLineDocuments=new p.ContextKey(h.EditorContexts.RunByLineDocuments,n),this.debugDocuments=new p.ContextKey(h.EditorContexts.DebugDocuments,n)}activate(){super.activate(),this.disposables.push(l.debug.registerDebugAdapterDescriptorFactory(P.pythonKernelDebugAdapter,{createDebugAdapterDescriptor:async e=>this.createDebugAdapterDescriptor(e)}))}getDebugMode(e){const t=this.notebookToRunByLineController.get(e);return t?.getMode()}onDidStopDebugging(e){super.onDidStopDebugging(e),this.notebookToRunByLineController.delete(e),this.updateRunByLineContextKeys(),this.updateDebugContextKey()}updateRunByLineContextKeys(){const e=[],t=[];this.notebookToRunByLineController.forEach((n=>{e.push(n.debugCell.document.uri),t.push(n.debugCell.notebook.uri)})),this.runByLineCells.set(e).catch(v.noop),this.runByLineDocuments.set(t).catch(v.noop)}updateDebugContextKey(){const e=new w.ResourceSet;this.notebookToDebugAdapter.forEach(((t,n)=>e.add(n.uri))),this.notebookInProgress.forEach((t=>e.add(t.uri))),this.debugDocuments.set(Array.from(e.values())).catch(v.noop)}async tryToStartDebugging(e,t,n=!1){if((0,b.traceInfo)(`Starting debugging with mode ${e}`),!n){const e=await this.checkIpykernelAndPrompt(t);if(e!==O.IpykernelCheckResult.Ok)return void(0,b.traceInfo)(`Ipykernel check failed: ${O.IpykernelCheckResult[e]}`)}e!==x.KernelDebugMode.RunByLine&&e!==x.KernelDebugMode.Cell||await this.startDebuggingCell(e,t)}runByLineNext(e){const t=this.notebookToRunByLineController.get(e.notebook);t&&t.debugCell.document.uri.toString()===e.document.uri.toString()&&t.continue()}runByLineStop(e){const t=this.notebookToRunByLineController.get(e.notebook);t&&((0,C.sendTelemetryEvent)(P.DebuggingTelemetry.endedSession,void 0,{reason:"withKeybinding"}),t.stop())}async startDebuggingCell(e,t){const n=t.notebook,r=this.configurationService.getSettings(n.uri),i={type:P.pythonKernelDebugAdapter,name:S.basename(n.uri.toString()),request:"attach",justMyCode:e!==x.KernelDebugMode.Cell||r.debugJustMyCode,__mode:e,__cellIndex:t.index,__notebookUri:n.uri.toString()},o=e===x.KernelDebugMode.RunByLine?{suppressDebugStatusbar:!0,suppressDebugToolbar:!0,suppressDebugView:!0,suppressSaveBeforeStart:!0}:{suppressSaveBeforeStart:!0};return this.startDebuggingConfig(i,o)}async createDebugAdapterDescriptor(e){const t=e.configuration;(0,O.assertIsDebugConfig)(t);const n=t.__notebookUri,r=this.vscNotebook.notebookDocuments.find((e=>e.uri.toString()===n));if(r)if(this.notebookInProgress.has(r))(0,b.traceInfo)("Cannot start debugging. Already debugging this notebook");else if(this.isDebugging(r))(0,b.traceInfo)("Cannot start debugging. Already debugging this notebook document.");else{this.notebookToDebugger.set(r,new D.Debugger(r,t,e));try{return this.notebookInProgress.add(r),this.updateDebugContextKey(),await this.doCreateDebugAdapterDescriptor(t,e,r)}finally{this.notebookInProgress.delete(r),this.updateDebugContextKey()}}else(0,b.traceInfo)(`Cannot start debugging. Notebook ${n} not found.`)}async doCreateDebugAdapterDescriptor(e,t,n){const r=await this.ensureKernelIsRunning(n);if(r?.session){const i=new R.KernelDebugAdapter(t,n,r.session,r,this.platform,this.debugService);if(e.__mode===x.KernelDebugMode.RunByLine&&"number"==typeof e.__cellIndex){const t=n.cellAt(e.__cellIndex),o=new I.RunByLineController(i,t,this.commandManager,this.kernelProvider.getKernelExecution(r),this.configurationService);i.addDebuggingDelegates([o,new k.RestartController(x.KernelDebugMode.RunByLine,i,t,this.serviceContainer)]),this.notebookToRunByLineController.set(n,o),this.updateRunByLineContextKeys()}else if(e.__mode===x.KernelDebugMode.Cell&&"number"==typeof e.__cellIndex){const t=n.cellAt(e.__cellIndex),o=new E.DebugCellController(i,t,this.kernelProvider.getKernelExecution(r),this.commandManager);i.addDebuggingDelegates([o,new k.RestartController(x.KernelDebugMode.Cell,i,t,this.serviceContainer)])}return this.trackDebugAdapter(n,i),this.updateDebugContextKey(),new l.DebugAdapterInlineImplementation(i)}this.appShell.showInformationMessage(m.DataScience.kernelWasNotStarted).then(v.noop,v.noop)}};t.DebuggingManager=M,t.DebuggingManager=M=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IKernelProvider)),a(1,(0,c.inject)(_.IControllerRegistration)),a(2,(0,c.inject)(d.ICommandManager)),a(3,(0,c.inject)(d.IApplicationShell)),a(4,(0,c.inject)(d.IVSCodeNotebook)),a(5,(0,c.inject)(g.IConfigurationService)),a(6,(0,c.inject)(f.IPlatformService)),a(7,(0,c.inject)(d.IDebugService)),a(8,(0,c.inject)(y.IServiceContainer))],M)},40157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggingManagerBase=void 0;const r=n(66828),i=n(25251),o=n(58681),s=n(11642),a=n(9959),c=n(3445),l=n(57566),u=n(46799),d=n(88960);t.DebuggingManagerBase=class{constructor(e,t,n,i,o,s){this.kernelProvider=e,this.controllerRegistration=t,this.commandManager=n,this.appShell=i,this.vscNotebook=o,this.serviceContainer=s,this.notebookToDebugger=new Map,this.notebookToDebugAdapter=new Map,this.notebookInProgress=new Set,this.disposables=[],this._doneDebugging=new r.EventEmitter}activate(){this.disposables.push(r.debug.onDidTerminateDebugSession(this.endSession.bind(this)),r.workspace.onDidCloseNotebookDocument((async e=>{const t=this.notebookToDebugger.get(e);t&&(await r.debug.stopDebugging(t.session),this.onDidStopDebugging(e))})))}getDebugCell(e){return this.notebookToDebugAdapter.get(e)?.debugCell}get onDoneDebugging(){return this._doneDebugging.event}dispose(){this.disposables.forEach((e=>e.dispose()))}isDebugging(e){return this.notebookToDebugger.has(e)}getDebugSession(e){const t=this.notebookToDebugger.get(e);if(t)return t.session}getDebugAdapter(e){return this.notebookToDebugAdapter.get(e)}onDidStopDebugging(e){}async startDebuggingConfig(e,t){(0,s.traceInfoIfCI)(`Attempting to start debugging with config ${JSON.stringify(e)}`);try{await r.debug.startDebugging(void 0,e,t)}catch(e){(0,s.traceError)(`Can't start debugging (${e})`),this.appShell.showErrorMessage(i.DataScience.cantStartDebugging).then(o.noop,o.noop)}}trackDebugAdapter(e,t){this.notebookToDebugAdapter.set(e,t),this.disposables.push(t.onDidEndSession(this.endSession.bind(this)))}async endSession(e){(0,s.traceInfo)(`Ending debug session ${e.id}`),this._doneDebugging.fire();for(const[t,n]of this.notebookToDebugger.entries())if(n&&e.id===n.session.id){this.notebookToDebugger.delete(t),this.notebookToDebugAdapter.delete(t),this.onDidStopDebugging(t);break}}getDebuggerByUri(e){for(const[t,n]of this.notebookToDebugger.entries())if(e===t)return n}async ensureKernelIsRunning(e){const t=this.controllerRegistration.getSelected(e);let n=this.kernelProvider.get(e);return t&&(!n||n&&"unknown"===n.status)&&(n=await u.KernelConnector.connectToNotebookKernel(t.connection,this.serviceContainer,{notebook:e,controller:t.controller,resource:e.uri},new d.DisplayOptions(!1),this.disposables,"jupyterExtension")),n}findEditorForCell(e){const t=e.notebook.uri.toString();return r.window.visibleNotebookEditors.find((e=>e.notebook.uri.toString()===t))}async checkIpykernelAndPrompt(e,t=!0){const n=this.findEditorForCell(e);if(!n)return this.appShell.showErrorMessage(i.DataScience.noNotebookToDebug).then(o.noop,o.noop),l.IpykernelCheckResult.Unknown;const r=await this.checkForIpykernel6(n.notebook);switch(r){case l.IpykernelCheckResult.NotInstalled:break;case l.IpykernelCheckResult.Outdated:case l.IpykernelCheckResult.Unknown:this.promptInstallIpykernel6().then(o.noop,o.noop);break;case l.IpykernelCheckResult.ControllerNotSelected:if(t)return await this.commandManager.executeCommand("notebook.selectKernel",{notebookEditor:n}),await this.checkIpykernelAndPrompt(e,!1)}return r}async checkForIpykernel6(e){try{let t=this.kernelProvider.get(e);if(!t){const n=this.controllerRegistration.getSelected(e);if(!n)return l.IpykernelCheckResult.ControllerNotSelected;t=this.kernelProvider.getOrCreate(e,{metadata:n.connection,controller:n?.controller,resourceUri:e.uri})}const n=this.kernelProvider.getKernelExecution(t),r=await(0,l.isUsingIpykernel6OrLater)(n);return(0,a.sendTelemetryEvent)(c.DebuggingTelemetry.ipykernel6Status,void 0,{status:r===l.IpykernelCheckResult.Ok?"installed":"notInstalled"}),r}catch(e){(0,s.traceError)("Debugging: Could not check for ipykernel 6",e)}return l.IpykernelCheckResult.Unknown}async promptInstallIpykernel6(){await this.appShell.showInformationMessage(i.DataScience.needIpykernel6,{modal:!0},i.DataScience.setup)===i.DataScience.setup?((0,a.sendTelemetryEvent)(c.DebuggingTelemetry.clickedOnSetup),this.appShell.openUrl("https://github.com/microsoft/vscode-jupyter/wiki/Setting-Up-Run-by-Line-and-Debugging-for-Notebooks")):(0,a.sendTelemetryEvent)(c.DebuggingTelemetry.closedModal)}}},66317:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IDebugLocationTracker=t.IDebugLocationTrackerFactory=t.KernelDebugMode=t.INotebookDebuggingManager=t.IJupyterDebugService=void 0,t.IJupyterDebugService=Symbol("IJupyterDebugService"),t.INotebookDebuggingManager=Symbol("INotebookDebuggingManager"),function(e){e[e.RunByLine=0]="RunByLine",e[e.Cell=1]="Cell",e[e.InteractiveWindow=2]="InteractiveWindow"}(n||(t.KernelDebugMode=n={})),t.IDebugLocationTrackerFactory=Symbol("IDebugLocationTrackerFactory"),t.IDebugLocationTracker=Symbol("IDebugLocationTracker")},57566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDebugEventMsg=t.cellDebugSetup=t.shortNameMatchesLongName=t.isShortNamePath=t.getMessageSourceAndHookIt=t.assertIsInteractiveWindowDebugConfig=t.assertIsDebugConfig=t.isUsingIpykernel6OrLater=t.IpykernelCheckResult=void 0;const r=n(66317);var i;function o(e){const t=e;if(void 0===t.__notebookUri||void 0===t.__mode||(t.__mode===r.KernelDebugMode.Cell||t.__mode===r.KernelDebugMode.InteractiveWindow||t.__mode===r.KernelDebugMode.RunByLine)&&void 0===t.__cellIndex)throw new Error("Invalid launch configuration")}!function(e){e[e.Unknown=0]="Unknown",e[e.Ok=1]="Ok",e[e.Outdated=2]="Outdated",e[e.NotInstalled=3]="NotInstalled",e[e.ControllerNotSelected=4]="ControllerNotSelected"}(i||(t.IpykernelCheckResult=i={})),t.isUsingIpykernel6OrLater=async function(e){const t=await e.executeHidden("import builtins\nimport ipykernel\nbuiltins.print(ipykernel.__version__)"),n=/^(\d+)\.\d+\.\d+$/;for(const e of t){if("stream"!==e.output_type)continue;const t=(e.text?.toString().trim()??"").match(n);if(t){const e=t[1];return Number(e)>=6?i.Ok:i.Outdated}}return i.Unknown},t.assertIsDebugConfig=o,t.assertIsInteractiveWindowDebugConfig=function(e){if(o(e),e.__mode!==r.KernelDebugMode.InteractiveWindow)throw new Error("Invalid launch configuration")},t.getMessageSourceAndHookIt=function(e,t){switch(e.type){case"event":const n=e;switch(n.event){case"output":case"loadedSource":t(n.body);break;case"breakpoint":t(n.body.breakpoint)}break;case"request":const r=e;switch(r.command){case"setBreakpoints":const e=r.arguments,n=e.breakpoints;if(n&&n.length){const r=n[0].line;n.forEach((n=>{t(n,{...e.source})}));const i={source:e.source,line:r};t(i),e.source=i.source}break;case"breakpointLocations":case"source":case"gotoTargets":t(r.arguments)}break;case"response":const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach((e=>{t(e)}));break;case"loadedSources":i.body.sources.forEach((e=>{const n={source:e};t(n),e.path=n.source.path}));break;case"scopes":i.body.scopes.forEach((e=>{t(e)}));break;case"setFunctionBreakpoints":case"setBreakpoints":i.body.breakpoints.forEach((e=>{t(e)}))}}},t.isShortNamePath=function(e){return/~\d+\\/.test(e)},t.shortNameMatchesLongName=function(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/~\d+\\\\/g,"[^\\\\]+\\\\"),"i").test(t)},t.cellDebugSetup=async function(e,t){await e.executeHidden("import debugpy\ndebugpy.debug_this_thread()"),await t.dumpAllCells()},t.isDebugEventMsg=function(e){return!!e.header&&"debug_event"===e.header.msg_type}},34045:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDebugAdapter=void 0;const s=n(11642),a=o(n(15948)),c=n(79626);class l extends c.KernelDebugAdapterBase{constructor(){super(...arguments),this.cellToFile=new Map}async dumpCell(e){const t=this.notebookDocument.cellAt(e);try{const e=await this.session.customRequest("dumpCell",{code:t.document.getText().replace(/\r\n/g,"\n")}),n=a.normalize(e.sourcePath);this.fileToCell.set(n,t.document.uri),this.cellToFile.set(t.document.uri.toString(),n)}catch(e){(0,s.traceError)(e)}}translateRealLocationToDebuggerLocation(e){const t=e.source;if(t&&t.path){const e=this.cellToFile.get(t.path);e&&(t.path=e)}}getDumpFilesForDeletion(){return Array.from(this.cellToFile.values())}}t.KernelDebugAdapter=l},79626:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDebugAdapterBase=void 0;const s=n(66828),a=n(98729),c=n(58681),l=n(11642),u=o(n(15948)),d=n(9959),h=n(3445),p=n(83332),f=n(57566),g=n(65864);t.KernelDebugAdapterBase=class{constructor(e,t,n,r,i,o){this.session=e,this.notebookDocument=t,this.jupyterSession=n,this.kernel=r,this.platformService=i,this.debugService=o,this.fileToCell=new Map,this.sendMessage=new s.EventEmitter,this.endSession=new s.EventEmitter,this.disposables=[],this.delegates=[],this.onDidSendMessage=this.sendMessage.event,this.onDidEndSession=this.endSession.event,this.disconnected=!1,(0,l.traceInfoIfCI)("Creating kernel debug adapter for debugging notebooks");const a=this.session.configuration;(0,f.assertIsDebugConfig)(a),this.configuration=a,this.debugCell=t.cellAt(a.__cellIndex),this.addDebuggingDelegates([new p.ResetKernelController(this)]),this.jupyterSession.kernel?.iopubMessage.connect(this.onIOPubMessage,this),this.disposables.push(new s.Disposable((()=>this.jupyterSession.kernel?.iopubMessage.disconnect(this.onIOPubMessage,this)))),this.kernel&&(this.kernel.addHook("willRestart",(()=>this.disconnect()),this,this.disposables),this.kernel.addHook("interruptCompleted",(()=>this.disconnect()),this,this.disposables),this.disposables.push(this.kernel.onDisposed((()=>{this.disconnected||(s.debug.stopDebugging(this.session).then(c.noop,c.noop),this.disconnect().catch(c.noop),(0,d.sendTelemetryEvent)(h.DebuggingTelemetry.endedSession,void 0,{reason:"onKernelDisposed"}))})))),this.disposables.push(s.notebooks.onDidChangeNotebookCellExecutionState((e=>{this.configuration.__cellIndex!==e.cell.index||e.state!==s.NotebookCellExecutionState.Idle||this.disconnected||((0,d.sendTelemetryEvent)(h.DebuggingTelemetry.endedSession,void 0,{reason:"normally"}),this.disconnect().catch(c.noop))}),this,this.disposables)),this.disposables.push(s.workspace.onDidChangeNotebookDocument((e=>{e.contentChanges.forEach((e=>{e.removedCells.forEach((e=>{e===this.debugCell&&this.disconnect().catch(c.noop)}))}))}),this,this.disposables)),this.disposables.push(this.debugService.onDidTerminateDebugSession((e=>{e===this.session&&this.disconnect().catch(c.noop)})))}addDebuggingDelegates(e){this.delegates.push(...e)}trace(e,t){(0,l.traceVerbose)(`[Debug] ${e}: ${t}`)}async onIOPubMessage(e,t){if((0,l.traceInfoIfCI)(`Debug IO Pub message: ${JSON.stringify(t)}`),(0,f.isDebugEventMsg)(t)){this.trace("event",JSON.stringify(t));for(const e of this.delegates??[])if(await(e?.willSendEvent?.(t.content)))return;this.sendMessage.fire(t.content)}}handleMessage(e){this.handleClientMessageAsync(e).catch(c.noop)}async handleClientMessageAsync(e){try{if((0,l.traceInfoIfCI)(`KernelDebugAdapter::handleMessage ${JSON.stringify(e,void 0," ")}`),"request"===e.type&&"setBreakpoints"===e.command){const t=e.arguments;if(t.source&&t.source.path&&0===t.source.path.indexOf("vscode-notebook-cell:")){const e=this.notebookDocument.getCells().find((e=>e.document.uri.toString()===t.source.path));e&&await this.dumpCell(e.index)}}if("request"===e.type)for(const t of this.delegates??[]){const n=await(t?.willSendRequest?.(e));if(n)return this.trace("response",JSON.stringify(n)),void this.sendMessage.fire(n)}await this.sendMessageToJupyterSession(e)}catch(e){(0,l.traceError)(`KernelDebugAdapter::handleMessage failure: ${e}`)}}getConfiguration(){return this.configuration}stepIn(e){return this.session.customRequest("stepIn",{threadId:e})}async debugInfo(){return await this.session.customRequest("debugInfo")}continueDirect(e){if(!this.jupyterSession.kernel)throw new g.SessionDisposedError;this.jupyterSession.kernel.requestDebug({seq:0,type:"request",command:"continue",arguments:{threadId:e}})}async disconnect(){if(!this.disconnected){if(this.disconnected=!0,this.debugService.activeDebugSession===this.session)try{await Promise.all([this.deleteDumpedFiles().catch((e=>(0,l.traceWarning)("Error deleting temporary debug files.",e))),this.session.customRequest("disconnect",{restart:!1})])}catch(e){(0,l.traceError)("Failed to disconnect debug session",e)}this.endSession.fire(this.session)}}dispose(){this.disposables.forEach((e=>e.dispose()))}stackTrace(e){return this.session.customRequest("stackTrace",e)}setBreakpoints(e){return this.session.customRequest("setBreakpoints",e)}async dumpAllCells(){await Promise.all(this.notebookDocument.getCells().map((async e=>{e.kind===s.NotebookCellKind.Code&&await this.dumpCell(e.index)})))}lookupCellByLongName(e){if(this.platformService.isWindows){e=u.normalize(e);for(let[t,n]of this.fileToCell.entries())if((0,f.isShortNamePath)(t)&&(0,f.shortNameMatchesLongName)(t,e))return n}}async sendMessageToJupyterSession(e){if(!this.jupyterSession.isDisposed&&"dead"!==this.jupyterSession.status&&this.jupyterSession.kernel)if(this.trace("to kernel",JSON.stringify(e)),"request"===e.type){const t=await this.sendRequestToJupyterSession(e);t&&this.sendMessage.fire(t)}else{if("response"===e.type){(0,f.getMessageSourceAndHookIt)(e,this.translateRealLocationToDebuggerLocation.bind(this));const t=e;return this.jupyterSession.kernel.requestDebug({seq:t.seq,type:"request",command:t.command},!0).done}(0,l.traceError)(`Unknown message type to send ${e.type}`)}else(0,l.traceInfo)(`Skipping sending message ${e.type} because session is disposed`)}async sendRequestToJupyterSession(e){if((0,f.getMessageSourceAndHookIt)(e,this.translateRealLocationToDebuggerLocation.bind(this)),!this.jupyterSession.kernel)throw new g.SessionDisposedError;this.trace("to kernel, mapped",JSON.stringify(e));const t=e,n=this.jupyterSession.kernel.requestDebug({seq:t.seq,type:"request",command:t.command,arguments:t.arguments},!0),r=(await n.done).content;(0,f.getMessageSourceAndHookIt)(r,this.translateDebuggerLocationToRealLocation.bind(this));for(const e of this.delegates??[])await(e?.willSendResponse?.(r));return this.trace("response",JSON.stringify(r)),r}translateDebuggerLocationToRealLocation(e,t){if((t=e?.source??t)&&t.path){const e=this.fileToCell.get(t.path)??this.lookupCellByLongName(t.path);e&&(t.name=u.basename(e.path),t.path=e.toString())}}async deleteDumpedFiles(){const e=this.getDumpFilesForDeletion();if(this.jupyterSession.kernel&&e.length){const t=`import os as _VSCODE_os\n_VSCODE_fileList = [${e.map((e=>'"'+e.replace(/\\/g,"\\\\")+'"')).join(",")}]\nfor file in _VSCODE_fileList:\n    try:\n        _VSCODE_os.remove(file)\n    except:\n        pass\ndel _VSCODE_fileList\ndel _VSCODE_os`;await(0,a.executeSilently)(this.jupyterSession.kernel,t,{traceErrors:!0,traceErrorsMessage:"Error deleting temporary debugging files"})}}}},40371:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingDebugService=void 0;const o=n(26594),s=n(66828),a=n(66317),c=n(10053),l=n(15925),u=n(42080),d=n(58681);let h=class{constructor(e,t,n,r){this.commandManager=t,this.vscodeDebugService=n,this.jupyterDebugService=r,this.sessionChangedEvent=new s.EventEmitter,this.sessionStartedEvent=new s.EventEmitter,this.sessionTerminatedEvent=new s.EventEmitter,this.sessionCustomEvent=new s.EventEmitter,e.push(n.onDidTerminateDebugSession(this.endedDebugSession.bind(this))),e.push(n.onDidStartDebugSession(this.startedDebugSession.bind(this))),e.push(n.onDidChangeActiveDebugSession(this.changedDebugSession.bind(this))),e.push(n.onDidReceiveDebugSessionCustomEvent(this.gotCustomEvent.bind(this))),r&&(e.push(r.onDidTerminateDebugSession(this.endedDebugSession.bind(this))),e.push(r.onDidStartDebugSession(this.startedDebugSession.bind(this))),e.push(r.onDidChangeActiveDebugSession(this.changedDebugSession.bind(this))),e.push(r.onDidReceiveDebugSessionCustomEvent(this.gotCustomEvent.bind(this))))}get activeDebugSession(){return this.activeService.activeDebugSession}get activeDebugConsole(){return this.activeService.activeDebugConsole}get breakpoints(){return this.activeService.breakpoints}get onDidChangeActiveDebugSession(){return this.sessionChangedEvent.event}get onDidStartDebugSession(){return this.sessionStartedEvent.event}get onDidReceiveDebugSessionCustomEvent(){return this.sessionCustomEvent.event}get onDidTerminateDebugSession(){return this.sessionTerminatedEvent.event}get onDidChangeBreakpoints(){return this.activeService.onDidChangeBreakpoints}get onBreakpointHit(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");return this.jupyterDebugService.onBreakpointHit}startRunByLine(e){if(this.lastStartedService=this.jupyterDebugService,!this.jupyterDebugService)throw new Error("No jupyter debugger service");return this.jupyterDebugService.startRunByLine(e)}registerDebugConfigurationProvider(e,t){const n=this.vscodeDebugService.registerDebugConfigurationProvider(e,t);if(this.jupyterDebugService){const r=this.jupyterDebugService.registerDebugConfigurationProvider(e,t);return this.combineDisposables(n,r)}return n}registerDebugAdapterTrackerFactory(e,t){const n=this.vscodeDebugService.registerDebugAdapterTrackerFactory(e,t);if(this.jupyterDebugService){const r=this.jupyterDebugService.registerDebugAdapterTrackerFactory(e,t);return this.combineDisposables(n,r)}return n}startDebugging(e,t,n){return this.lastStartedService=this.vscodeDebugService,this.vscodeDebugService.startDebugging(e,t,n)}addBreakpoints(e){return this.activeService.addBreakpoints(e)}removeBreakpoints(e){return this.activeService.removeBreakpoints(e)}getStack(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.getStack();throw new Error("Requesting jupyter specific stack when not debugging.")}step(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.step();throw new Error("Requesting jupyter specific step when not debugging.")}continue(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.continue();throw new Error("Requesting jupyter specific step when not debugging.")}requestVariables(){if(!this.jupyterDebugService)throw new Error("No jupyter debugger service");if(this.lastStartedService===this.jupyterDebugService)return this.jupyterDebugService.requestVariables();throw new Error("Requesting jupyter specific variables when not debugging.")}stop(){this.jupyterDebugService&&this.lastStartedService===this.jupyterDebugService?this.jupyterDebugService.stop():this.commandManager.executeCommand("workbench.action.debug.stop").then(d.noop,d.noop)}get activeService(){return this.lastStartedService?this.lastStartedService:this.vscodeDebugService}combineDisposables(e,t){return{dispose:()=>{e.dispose(),t.dispose()}}}endedDebugSession(e){this.sessionTerminatedEvent.fire(e),this.lastStartedService=void 0}startedDebugSession(e){this.sessionStartedEvent.fire(e)}changedDebugSession(e){this.sessionChangedEvent.fire(e)}gotCustomEvent(e){this.sessionCustomEvent.fire(e)}};t.MultiplexingDebugService=h,t.MultiplexingDebugService=h=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IDisposableRegistry)),i(1,(0,o.inject)(c.ICommandManager)),i(2,(0,o.inject)(c.IDebugService)),i(3,(0,o.optional)()),i(3,(0,o.inject)(a.IJupyterDebugService)),i(3,(0,o.named)(l.Identifiers.RUN_BY_LINE_DEBUGSERVICE))],h)},13057:function(e,t,n){"use strict";var r=n(48764).lW,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportBase=void 0;const l=n(26594),u=n(66828),d=a(n(15948)),h=n(88960),p=n(98729),f=n(94062),g=n(86563),m=n(83599),v=n(38124),y=n(62440),b=n(11642),w=n(74064),S=n(40453),C=n(65864),_=n(94433),P=n(58681),E=n(70798);let k=class{constructor(e,t,n,r,i,o){this.kernelProvider=e,this.fs=t,this.filePicker=n,this.exportUtil=r,this.backingFileCreator=i,this.jupyterConnection=o}async export(e,t,n,r){}async executeCommand(e,t,i,o,s){const a=this.kernelProvider.get(e);if(!a)return;if(a.session||await a.start(new h.DisplayOptions(!1)),!a.session?.kernel)return;const c=a.kernelConnectionMetadata,l=a.resourceUri;if(!(0,f.isRemoteConnection)(c))return;if(l)return;const g=a.session.kernel,m=await this.jupyterConnection.createConnectionInfo(c.serverProviderHandle),v=m.settings,w=new(n(76240).ContentsManager)({serverSettings:v});let S=await this.exportUtil.getContent(e),C="";switch(i){case y.ExportFormat.html:C=".html";break;case y.ExportFormat.pdf:C=".pdf";break;case y.ExportFormat.python:C=".py"}const _=await this.backingFileCreator.createBackingFile(l,u.Uri.file(""),c,m,w);if(!_)return;let E;await w.save(_.filePath,{content:JSON.parse(S),type:"notebook"}).catch(P.noop);try{const e=await this.getCWD(a);E=(await w.newUntitled({type:"file",ext:C})).path;const n=`${e}/${_.filePath}`,o=await(0,p.executeSilently)(g,`!jupyter nbconvert ${n} --to ${i} --output ${d.basename(E)}`),s=this.parseStreamOutput(o);if(this.isExportFailed(s))throw new Error(s||`Failed to export to ${i}`);if(s&&(0,b.traceLog)(s),i===y.ExportFormat.pdf){const e=await w.get(E,{type:"file",format:"base64",content:!0}),n=this.b64toBlob(e.content,"application/pdf"),i=await n.arrayBuffer();await this.fs.writeFile(t,r.from(i))}else{const e=await w.get(E,{type:"file",format:"text",content:!0});await this.fs.writeFile(t,e.content)}}finally{E&&await w.delete(E),await _.dispose(),await w.delete(_.filePath).catch(P.noop),w.dispose()}}async invokeWithFileSynced(e,t,n,r,i,o){if(!e)return;const s=await this.backingFileCreator.createBackingFile(e,u.Uri.file(""),n,r,i);s&&(await i.save(s.filePath,{content:JSON.parse(t),type:"notebook"}).catch(P.noop),await o({filePath:s.filePath,dispose:s.dispose.bind(s)}),await s.dispose(),await i.delete(s.filePath).catch(P.noop))}async getContents(e,t,n){return await n.get(e,{type:"file",format:t,content:!0})}b64toBlob(e,t){t=t||"",e=(e=e.replace(/^[^,]+,/,"")).replace(/\s/g,"");const n=atob(e);let r=[];for(let e=0;e<n.length;e+=512){const t=n.slice(e,e+512);let i=new Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);const o=new Uint8Array(i);r.push(o)}return new Blob(r,{type:t})}isExportFailed(e){return!e||/Traceback \(most recent call last\)/g.exec(e)}parseStreamOutput(e){if(0===e.length)return;const t=e[0];return"stdout"===t.name||"stream"===t.output_type?(0,g.concatMultilineString)(t.text).trim():void 0}async getCWD(e){if(!e.session?.kernel)throw new C.SessionDisposedError;const t=await(0,p.executeSilently)(e.session.kernel,"import os;os.getcwd();");if(0===t.length)return;const n=t[0];return"execute_result"===n.output_type?n.data["text/plain"]:void 0}};t.ExportBase=k,s([(0,w.reportAction)(S.ReportableAction.PerformingExport)],k.prototype,"executeCommand",null),t.ExportBase=k=s([(0,l.injectable)(),c(0,(0,l.inject)(f.IKernelProvider)),c(1,(0,l.inject)(m.IFileSystem)),c(2,(0,l.inject)(y.IExportDialog)),c(3,(0,l.inject)(v.ExportUtilBase)),c(4,(0,l.inject)(_.IJupyterBackingFileCreator)),c(5,(0,l.inject)(E.JupyterConnection))],k)},982:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportDialog=t.PythonExtensions=t.HTMLExtensions=t.PDFExtensions=void 0;const c=n(26594),l=s(n(15948)),u=n(66828),d=n(10053),h=s(n(25251)),p=n(62440),f=n(42080);t.PDFExtensions={PDF:["pdf"]},t.HTMLExtensions={HTML:["html","htm"]},t.PythonExtensions={Python:["py"]};let g=class{constructor(e,t,n){this.applicationShell=e,this.workspaceService=t,this.isWebExtension=n}async showDialog(e,n,r){let i,o={};switch(e){case p.ExportFormat.python:o=t.PythonExtensions,i=".py";break;case p.ExportFormat.pdf:i=".pdf",o=t.PDFExtensions;break;case p.ExportFormat.html:i=".html",o=t.HTMLExtensions;break;case p.ExportFormat.ipynb:i=".ipynb",o[h.DataScience.exportDialogFilter]=["ipynb"];break;default:return}const s=r||!n?r||"":`${l.basename(n.path,l.extname(n.path))}${i}`,a={defaultUri:await this.getDefaultUri(n,s),saveLabel:h.DataScience.exportButtonTitle,filters:o};return this.applicationShell.showSaveDialog(a)}async getDefaultUri(e,t){if(e&&"untitled"===e.scheme&&this.isWebExtension)return;if(!e||"file"===e.scheme||"untitled"===e.scheme||"vscode-interactive"===e.scheme)return u.Uri.file(l.join(await this.workspaceService.computeWorkingDirectory(e),t));const n=l.join(l.dirname(e.path),t);return u.Uri.parse(`${e.scheme}://${n}`).with({authority:e.authority})}};t.ExportDialog=g,t.ExportDialog=g=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IApplicationShell)),a(1,(0,c.inject)(d.IWorkspaceService)),a(2,(0,c.inject)(f.IsWebExtension))],g)},9255:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportFileOpener=void 0;const c=n(26594),l=n(66828),u=n(9959),d=n(10053),h=n(15925),p=n(83599),f=n(42080),g=s(n(25251)),m=n(58681),v=n(62440);let y=class{constructor(e,t,n,r){this.documentManager=e,this.fs=t,this.applicationShell=n,this.browserService=r}async openFile(e,t,n=!1){if(e===v.ExportFormat.python)await this.openPythonFile(t,n),(0,u.sendTelemetryEvent)(h.Telemetry.ExportNotebookAs,void 0,{format:e,successful:!0,opened:!0});else{const r=await this.askOpenFile(t,n);(0,u.sendTelemetryEvent)(h.Telemetry.ExportNotebookAs,void 0,{format:e,successful:!0,opened:r})}}async openPythonFile(e,t){let n;if(t)n=await this.documentManager.showTextDocument(e);else{const t=await this.fs.readFile(e);await this.fs.delete(e);const r=await this.documentManager.openTextDocument({language:h.PYTHON_LANGUAGE,content:t});n=await this.documentManager.showTextDocument(r)}await n.edit((e=>{e.insert(new l.Position(n.document.lineCount,0),"\n")}))}async askOpenFile(e,t){const n=g.DataScience.openExportFileYes,r=[n,g.DataScience.openExportFileNo];return await this.applicationShell.showInformationMessage(g.DataScience.openExportedFileMessage,...r).then((e=>e))===n&&(t?this.documentManager.showTextDocument(e).then(m.noop,m.noop):this.browserService.launch(e.toString()),!0)}};t.ExportFileOpener=y,t.ExportFileOpener=y=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IDocumentManager)),a(1,(0,c.inject)(p.IFileSystem)),a(2,(0,c.inject)(d.IApplicationShell)),a(3,(0,c.inject)(f.IBrowserService))],y)},93385:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportToHTML=void 0;const o=n(26594),s=n(62440);let a=class{constructor(e){this.exportBase=e}async export(e,t,n,r){await this.exportBase.executeCommand(e,t,s.ExportFormat.html,n,r)}};t.ExportToHTML=a,t.ExportToHTML=a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IExportBase))],a)},33628:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportToPDF=void 0;const o=n(26594),s=n(62440);let a=class{constructor(e){this.exportBase=e}async export(e,t,n,r){await this.exportBase.executeCommand(e,t,s.ExportFormat.pdf,n,r)}};t.ExportToPDF=a,t.ExportToPDF=a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IExportBase))],a)},18661:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportToPython=void 0;const o=n(26594),s=n(62440);let a=class{constructor(e){this.exportBase=e}async export(e,t,n,r){await this.exportBase.executeCommand(e,t,s.ExportFormat.python,n,r)}};t.ExportToPython=a,t.ExportToPython=a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IExportBase))],a)},87354:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportToPythonPlain=void 0;const o=n(26594),s=n(66828),a=n(20397),c=n(83599),l=n(42080),u=n(86563);let d=class{constructor(e,t,n){this.fs=e,this.configuration=t,this.platform=n}async writeFile(e,t){await this.fs.writeFile(e,t)}getEOL(){return this.platform.isWindows?"\r\n":"\n"}async export(e,t,n){if(n.isCancellationRequested)return;const r=this.exportDocument(e);await this.writeFile(t,r)}exportDocument(e){return e.getCells().filter((e=>!e.metadata.custom?.metadata?.isInteractiveWindowMessageCell)).reduce(((e,t)=>e+this.exportCell(t)),"")}exportCell(e){if(e.document.lineCount){const t=this.cellMarker(e),n=this.getEOL();switch(e.kind){case s.NotebookCellKind.Code:return`${t}${n}${this.exportCodeCell(e)}${n}${n}`;case s.NotebookCellKind.Markup:return`${t} [markdown]${n}${this.exportMarkdownCell(e)}${n}${n}`}}return""}exportCodeCell(e){let t=(0,a.splitLines)(e.document.getText(),{trim:!1,removeEmptyEntries:!1});const n="commentMagics"===this.configuration.getSettings(e.notebook.uri).pythonExportMethod;return(0,u.appendLineFeed)(t,this.getEOL(),n?h:void 0).join("")}exportMarkdownCell(e){let t=(0,a.splitLines)(e.document.getText(),{trim:!1,removeEmptyEntries:!1});return(0,u.appendLineFeed)(t,this.getEOL(),p).join("")}cellMarker(e){const t=this.configuration.getSettings(e.notebook.uri);return e.metadata.interactiveWindowCellMarker??t.defaultCellMarker}};function h(e){return/^\s*!/.test(e)||/^\s*%/.test(e)?`# ${e}`:e}function p(e){return`# ${e}`}t.ExportToPythonPlain=d,t.ExportToPythonPlain=d=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IFileSystem)),i(1,(0,o.inject)(l.IConfigurationService)),i(2,(0,o.inject)(c.IPlatformService))],d)},38124:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportUtilBase=void 0;const o=n(26594),s=n(66828),a=n(42080),c=n(62440);let l=class{constructor(e,t){this.extensions=e,this.filePicker=t}async getContent(e){const t=this.extensions.getExtension("vscode.ipynb");if(!t)throw new Error("Unable to export notebook as the built-in vscode.ipynb extension is currently unavailable.");t.isActive||await t.activate();const n=e.getCells().map((e=>{const t=new s.NotebookCellData(e.kind,e.document.getText(),e.document.languageId);return t.metadata=e.metadata,t.mime=e.mime,t.outputs=[...e.outputs],t})),r=new s.NotebookData(n);return r.metadata=e.metadata,t.exports.exportNotebook(r)}async getTargetFile(e,t,n){return await this.filePicker.showDialog(e,t,n)}};t.ExportUtilBase=l,t.ExportUtilBase=l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IExtensions)),i(1,(0,o.inject)(c.IExportDialog))],l)},13749:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileConverter=void 0;const c=n(26594),l=n(66828),u=n(9959),d=n(10053),h=n(15925),p=n(42080),f=s(n(25251)),g=n(58681),m=n(11642),v=n(70835),y=n(9255),b=n(38124),w=n(62440);let S=class{constructor(e,t,n,r,i,o,s,a,c,l){this.exportToPythonPlain=e,this.exportToPDF=t,this.exportToHTML=n,this.exportToPython=r,this.filePicker=i,this.exportUtil=o,this.progressReporter=s,this.applicationShell=a,this.exportFileOpener=c,this.configuration=l}async importIpynb(e){const t=this.progressReporter.createProgressIndicator(f.DataScience.importingIpynb,!0);try{const n=await l.workspace.openNotebookDocument(e);await this.exportImpl(w.ExportFormat.python,n,void 0,t.token)}finally{t.dispose()}}async export(e,t,n,r){const i=this.progressReporter.createProgressIndicator(f.DataScience.exportingToFormat(e.toString()),!0);try{await this.exportImpl(e,t,n,i.token,r)}finally{i.dispose()}i.token.isCancellationRequested&&(0,u.sendTelemetryEvent)(h.Telemetry.ExportNotebookAs,void 0,{format:e,cancelled:!0})}async exportImpl(e,t,n,r,i){try{let o=await this.exportUtil.getTargetFile(e,t.uri,n);if(!o)return;await this.performExport(e,t,o,r,i)}catch(t){(0,m.traceError)("Export failed",t),(0,u.sendTelemetryEvent)(h.Telemetry.ExportNotebookAsFailed,void 0,{format:e}),e===w.ExportFormat.pdf&&(0,m.traceError)(f.DataScience.exportToPDFDependencyMessage),this.showExportFailed(f.DataScience.exportFailedGeneralMessage)}}async performExport(e,t,n,r,i){e===w.ExportFormat.python&&"nbconvert"!==this.configuration.getSettings(t.uri).pythonExportMethod?await this.performPlainExport(e,t,n,r):await this.performNbConvertExport(t,e,n,i,r),n&&this.openExportedFile(e,n).catch(g.noop)}async openExportedFile(e,t){await this.exportFileOpener.openFile(e,t,!0).catch(g.noop)}async performPlainExport(e,t,n,r){return n&&e===w.ExportFormat.python&&await this.exportToPythonPlain.export(t,n,r),n}async performNbConvertExport(e,t,n,r,i){try{return await this.exportToFormat(e,n,t,r,i)}finally{}}async exportToFormat(e,t,n,r,i){switch(n){case w.ExportFormat.python:return await this.exportToPython.export(e,t,r,i);case w.ExportFormat.pdf:return await this.exportToPDF.export(e,t,r,i);case w.ExportFormat.html:return await this.exportToHTML.export(e,t,r,i)}}showExportFailed(e){this.applicationShell.showErrorMessage(`${f.DataScience.failedExportMessage} ${e}`).then}};t.FileConverter=S,t.FileConverter=S=o([(0,c.injectable)(),a(0,(0,c.inject)(w.IExport)),a(0,(0,c.named)(w.ExportFormat.python)),a(1,(0,c.inject)(w.INbConvertExport)),a(1,(0,c.named)(w.ExportFormat.pdf)),a(2,(0,c.inject)(w.INbConvertExport)),a(2,(0,c.named)(w.ExportFormat.html)),a(3,(0,c.inject)(w.INbConvertExport)),a(3,(0,c.named)(w.ExportFormat.python)),a(4,(0,c.inject)(w.IExportDialog)),a(5,(0,c.inject)(b.ExportUtilBase)),a(6,(0,c.inject)(v.ProgressReporter)),a(7,(0,c.inject)(d.IApplicationShell)),a(8,(0,c.inject)(y.ExportFileOpener)),a(9,(0,c.inject)(p.IConfigurationService))],S)},62440:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IExportDialog=t.IExport=t.IExportBase=t.INbConvertExport=t.IFileConverter=t.ExportFormat=void 0,function(e){e.pdf="pdf",e.html="html",e.python="python",e.ipynb="ipynb"}(n||(t.ExportFormat=n={})),t.IFileConverter=Symbol("IFileConverter"),t.INbConvertExport=Symbol("INbConvertExport"),t.IExportBase=Symbol("IExportBase"),t.IExport=Symbol("IExport"),t.IExportDialog=Symbol("IExportDialog")},20402:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookCellLanguageService=t.LastSavedNotebookCellLanguage=void 0;const o=n(26594),s=n(77886),a=n(10053),c=n(15925),l=n(42080),u=n(85446),d=n(98729),h=n(86563),p=n(82010);t.LastSavedNotebookCellLanguage="DATASCIENCE.LAST_SAVED_CELL_LANGUAGE";let f=class{constructor(e,t,n,r){this.vscNotebook=e,this.disposables=t,this.globalMemento=n,this.pythonExtensionChecker=r}getPreferredLanguage(e){const t=e?.language_info?.name||e?.kernelspec?.language||this.lastSavedNotebookCellLanguage,n=this.pythonExtensionChecker.isPythonExtensionInstalled?c.PYTHON_LANGUAGE:"plaintext";return(0,h.translateKernelLanguageToMonaco)(t||n)}activate(){this.vscNotebook.onDidSaveNotebookDocument(this.onDidSaveNotebookDocument,this,this.disposables)}getSupportedLanguages(e){if((0,d.isPythonKernelConnection)(e))return c.LanguagesSupportedByPythonkernel;{const t=(0,h.translateKernelLanguageToMonaco)((0,d.getKernelConnectionLanguage)(e)||"");return t&&c.VSCodeKnownNotebookLanguages.includes(t.toLowerCase())?[t,"raw"]:[]}}get lastSavedNotebookCellLanguage(){return this.globalMemento.get(t.LastSavedNotebookCellLanguage)}async onDidSaveNotebookDocument(e){if(!(0,h.isJupyterNotebook)(e))return;const n=(0,p.getLanguageOfNotebookDocument)(e);n&&n!==this.lastSavedNotebookCellLanguage&&await this.globalMemento.update(t.LastSavedNotebookCellLanguage,n)}};t.NotebookCellLanguageService=f,r([(0,u.swallowExceptions)("Saving last saved cell language")],f.prototype,"onDidSaveNotebookDocument",null),t.NotebookCellLanguageService=f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook)),i(1,(0,o.inject)(l.IDisposableRegistry)),i(2,(0,o.inject)(l.IMemento)),i(2,(0,o.named)(l.GLOBAL_MEMENTO)),i(3,(0,o.inject)(s.IPythonExtensionChecker))],f)},71806:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyNotebookCellLanguageService=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(15925),l=n(11642),u=n(42080),d=n(58681),h=n(58880),p=n(86563),f=n(50867);let g=class{constructor(e,t,n){this.notebook=e,this.disposables=t,this.controllerRegistration=n}activate(){this.controllerRegistration.onControllerSelected(this.onDidChangeNotebookController,this,this.disposables)}async onDidChangeNotebookController(e){const t=e.notebook,n=e.controller.connection;if(!(0,p.isJupyterNotebook)(t))return;const r=this.notebook.notebookEditors.find((e=>e.notebook===t));if(!r)return;const i=t.getCells().filter((e=>e.kind===s.NotebookCellKind.Code&&0===e.document.getText().trim().length)),o=t.getCells().filter((e=>e.kind===s.NotebookCellKind.Code)).length;if(0===i.length||i.length!==o)return;let a;const u=n.kind;switch(n.kind){case"connectToLiveRemoteKernel":a=n.kernelModel.language;break;case"startUsingRemoteKernelSpec":case"startUsingLocalKernelSpec":a=n.kernelSpec.language;break;case"startUsingPythonInterpreter":a=c.PYTHON_LANGUAGE;break;default:return void(0,l.traceError)(`Unsupported kernel kind encountered ${u}`)}if(!a)return;const f=(0,p.translateKernelLanguageToMonaco)(a);(0,h.chainWithPendingUpdates)(r.notebook,(async()=>{await i.map((async e=>{if(f.toLowerCase()!==e.document.languageId)return s.languages.setTextDocumentLanguage(e.document,f).then(d.noop,d.noop)}))})).then(d.noop,d.noop)}};t.EmptyNotebookCellLanguageService=g,t.EmptyNotebookCellLanguageService=g=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook)),i(1,(0,o.inject)(u.IDisposableRegistry)),i(2,(0,o.inject)(f.IControllerRegistration))],g)},82010:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageOfNotebookDocument=void 0;const r=n(66828),i=n(98729),o=n(86563),s=n(11642);t.getLanguageOfNotebookDocument=function(e){try{return(0,i.getLanguageInNotebookMetadata)((0,o.getNotebookMetadata)(e))||e.getCells().find((e=>e.kind===r.NotebookCellKind.Code))?.document.languageId}catch(e){(0,s.traceWarning)("Failed to determine language of first cell",e)}}},15018:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookCommandListener=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(42080),l=n(15925),u=n(58681),d=n(20402),h=n(88960),p=n(94062),f=n(35412),g=n(25251),m=n(11642),v=n(85249),y=n(41778),b=n(14154),w=n(58880),S=n(90541),C=n(86563),_=n(46799),P=n(50867);let E=class{constructor(e,t,n,r,i,o,s,a,c,l,u){this.disposableRegistry=e,this.notebooks=t,this.commandManager=n,this.languageService=r,this.applicationShell=i,this.configurationService=o,this.kernelProvider=s,this.controllerRegistration=a,this.errorHandler=c,this.notebookEditorProvider=l,this.serviceContainer=u,this.kernelInterruptedDontAskToRestart=!1,this.pendingRestartInterrupt=new WeakMap}register(e){this.disposableRegistry.push(e.registerCommand(l.Commands.NotebookEditorRemoveAllCells,(()=>this.removeAllCells()))),this.disposableRegistry.push(e.registerCommand(l.Commands.NotebookEditorRunAllCells,(()=>this.runAllCells()))),this.disposableRegistry.push(e.registerCommand(l.Commands.NotebookEditorAddCellBelow,(()=>this.addCellBelow()))),this.disposableRegistry.push(this.commandManager.registerCommand(l.Commands.NotebookEditorCollapseAllCells,(()=>this.collapseAll()))),this.disposableRegistry.push(this.commandManager.registerCommand(l.Commands.NotebookEditorExpandAllCells,(()=>this.expandAll()))),this.disposableRegistry.push(this.commandManager.registerCommand(l.Commands.RestartKernelAndRunUpToSelectedCell,(()=>this.restartKernelAndRunUpToSelectedCell()))),this.disposableRegistry.push(e.registerCommand(l.Commands.RestartKernel,(e=>e&&"notebookEditor"in e?this.restartKernel(e?.notebookEditor?.notebookUri).catch(u.noop):this.restartKernel(e).catch(u.noop)))),this.disposableRegistry.push(e.registerCommand(l.Commands.InterruptKernel,(e=>this.interruptKernel(e?.notebookEditor?.notebookUri)))),this.disposableRegistry.push(e.registerCommand(l.Commands.RestartKernelAndRunAllCells,(e=>{e&&"notebookEditor"in e?this.restartKernelAndRunAllCells(e?.notebookEditor?.notebookUri).catch(u.noop):this.restartKernelAndRunAllCells(e).catch(u.noop)})))}runAllCells(){this.notebooks.activeNotebookEditor&&this.commandManager.executeCommand("notebook.execute").then(u.noop,u.noop)}addCellBelow(){this.notebooks.activeNotebookEditor&&this.commandManager.executeCommand("notebook.cell.insertCodeCellBelow").then(u.noop,u.noop)}removeAllCells(){const e=this.notebooks.activeNotebookEditor?.notebook;if(!e)return;const t=this.languageService.getPreferredLanguage((0,C.getNotebookMetadata)(e));(0,w.chainWithPendingUpdates)(e,(n=>{const r=s.NotebookEdit.replaceCells(new s.NotebookRange(0,e.cellCount),[new s.NotebookCellData(s.NotebookCellKind.Code,"",t)]);n.set(e.uri,[r])})).then(u.noop,u.noop)}collapseAll(){const e=this.notebooks.activeNotebookEditor?.notebook;e&&(0,w.chainWithPendingUpdates)(e,(t=>{e.getCells().forEach(((n,r)=>{const i={...n.metadata||{},inputCollapsed:!0,outputCollapsed:!0};t.set(e.uri,[s.NotebookEdit.updateCellMetadata(r,i)])}))})).then(u.noop,u.noop)}expandAll(){const e=this.notebooks.activeNotebookEditor?.notebook;e&&(0,w.chainWithPendingUpdates)(e,(t=>{e.getCells().forEach(((n,r)=>{const i={...n.metadata||{},inputCollapsed:!1,outputCollapsed:!0};t.set(e.uri,[s.NotebookEdit.updateCellMetadata(r,i)])}))})).then(u.noop,u.noop)}async interruptKernel(e){const t=e??this.notebookEditorProvider.activeNotebookEditor?.notebook.uri,n=s.workspace.notebookDocuments.find((e=>e.uri.toString()===t?.toString()));if(void 0===n)return;(0,m.traceVerbose)(`Command interrupted kernel for ${(0,f.getDisplayPath)(n.uri)}`);const r=this.kernelProvider.get(n);r?await this.wrapKernelMethod("interrupt",r):(0,m.traceInfo)("Interrupt requested & no kernel.")}async restartKernelAndRunAllCells(e){await this.restartKernel(e),this.runAllCells()}async restartKernelAndRunUpToSelectedCell(){const e=this.notebookEditorProvider.activeNotebookEditor;e&&(await this.restartKernel(e.notebook.uri),this.commandManager.executeCommand("notebook.cell.execute",{ranges:[{start:0,end:e.selection.end}],document:e.notebook.uri}).then(u.noop,u.noop))}async restartKernel(e){const t=e??this.notebookEditorProvider.activeNotebookEditor?.notebook.uri,n=s.workspace.notebookDocuments.find((e=>e.uri.toString()===t?.toString()));if(void 0===n)return;const r=this.kernelProvider.get(n);if(r)if((0,m.traceVerbose)(`Restart kernel command handler for ${(0,f.getDisplayPath)(n.uri)}`),await this.shouldAskForRestart(n.uri)){const e=g.DataScience.restartKernelMessage,t=g.DataScience.restartKernelMessageYes,i=g.DataScience.restartKernelMessageDontAskAgain,o=await this.applicationShell.showInformationMessage(e,{modal:!0},t,i);o===i?(await this.disableAskForRestart(n.uri),this.wrapKernelMethod("restart",r).catch(u.noop)):o===t&&this.wrapKernelMethod("restart",r).catch(u.noop)}else this.wrapKernelMethod("restart",r).catch(u.noop)}async wrapKernelMethod(e,t){const n=t.notebook,r=this.pendingRestartInterrupt.get(t);if(r)return r;const i=(async()=>{const r=this.kernelProvider.getKernelExecution(t).pendingCells[0],i=this.controllerRegistration.getSelected(n);try{if(!i)throw new Error("No kernel associated with the notebook");await _.KernelConnector.wrapKernelMethod(i.connection,e,t.creator,this.serviceContainer,{resource:t.resourceUri,notebook:n,controller:i.controller},new h.DisplayOptions(!1),this.disposableRegistry)}catch(n){r?await(0,b.endCellAndDisplayErrorsInCell)(r,t.controller,await this.errorHandler.getErrorMessageForDisplayInCell(n,e,t.resourceUri),!1):this.applicationShell.showErrorMessage(n.toString()).then(u.noop,u.noop)}})();return i.finally((()=>{this.pendingRestartInterrupt.get(t)===i&&this.pendingRestartInterrupt.delete(t)})).catch(u.noop),this.pendingRestartInterrupt.set(t,i),i}async shouldAskForRestart(e){if(this.kernelInterruptedDontAskToRestart)return!1;const t=this.configurationService.getSettings(e);return t&&!0===t.askForKernelRestart}async disableAskForRestart(e){this.configurationService.getSettings(e)&&this.configurationService.updateSetting("askForKernelRestart",!1,void 0,s.ConfigurationTarget.Global).catch(u.noop)}};t.NotebookCommandListener=E,t.NotebookCommandListener=E=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(a.IVSCodeNotebook)),i(2,(0,o.inject)(a.ICommandManager)),i(3,(0,o.inject)(d.NotebookCellLanguageService)),i(4,(0,o.inject)(a.IApplicationShell)),i(5,(0,o.inject)(c.IConfigurationService)),i(6,(0,o.inject)(p.IKernelProvider)),i(7,(0,o.inject)(P.IControllerRegistration)),i(8,(0,o.inject)(S.IDataScienceErrorHandler)),i(9,(0,o.inject)(v.INotebookEditorProvider)),i(10,(0,o.inject)(y.IServiceContainer))],E)},40539:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookEditorProvider=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(86563),l=n(52859),u=n(72728);let d=class{constructor(e){this.vscodeNotebook=e,this.providers=new Set}registerEmbedNotebookProvider(e){this.providers.add(e)}findNotebookEditor(e){const t=e?(0,l.getComparisonKey)(e,!0):"false",n="notebook"===(0,c.getResourceType)(e)?this.vscodeNotebook.notebookDocuments.find((e=>(0,l.getComparisonKey)(e.uri,!0)===t)):void 0,r=n&&this.vscodeNotebook.activeNotebookEditor?.notebook===n?this.vscodeNotebook.activeNotebookEditor:void 0;if(r)return r;for(let t of this.providers){const n=t.findNotebookEditor(e);if(n)return n}}get activeNotebookEditor(){return this.findNotebookEditor(s.window.activeNotebookEditor?.notebook.uri)||this.findNotebookEditor(s.window.activeTextEditor?.document.uri)}findAssociatedNotebookDocument(e){const t=(0,u.getOSType)()===u.OSType.Windows;let n=this.vscodeNotebook.notebookDocuments.find((n=>t?n.uri.path.toLowerCase()===e.path.toLowerCase():n.uri.path===e.path));if(n)return n;for(let t of this.providers){const n=t.findAssociatedNotebookDocument(e);if(n)return n}}};t.NotebookEditorProvider=d,t.NotebookEditorProvider=d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook))],d)},88904:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CellOutputMimeTypeTracker=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(15925),l=n(20397),u=n(42080),d=n(86563),h=n(9959),p=n(9959);let f=class{get isTelemetryDisabled(){return(0,p.isTelemetryDisabled)(this.workspace)}constructor(e,t,n){this.vscNotebook=e,this.workspace=n,this.sentMimeTypes=new Set,this.disposables=[],t.push(this)}activate(){this.vscNotebook.onDidOpenNotebookDocument(this.onDidOpenCloseDocument,this,this.disposables),this.vscNotebook.onDidCloseNotebookDocument(this.onDidOpenCloseDocument,this,this.disposables),this.vscNotebook.onDidSaveNotebookDocument(this.onDidOpenCloseDocument,this,this.disposables),this.vscNotebook.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,this.disposables)}dispose(){(0,l.dispose)(this.disposables)}async onDidChangeNotebookCellExecutionState(e){(0,d.isJupyterNotebook)(e.cell.notebook)&&!this.isTelemetryDisabled&&this.checkCell(e.cell,"onExecution")}onDidOpenCloseDocument(e){(0,d.isJupyterNotebook)(e)&&!this.isTelemetryDisabled&&e.getCells().forEach((e=>this.checkCell(e,"onOpenCloseOrSave")))}checkCell(e,t){if(e.kind===s.NotebookCellKind.Markup)return;if("raw"===e.document.languageId)return;const n=e.notebook.notebookType===c.JupyterNotebookView?"notebook":"interactive";e.outputs.map((e=>e.items.map((e=>e.mime)))).flat().map((e=>this.sendTelemetry(e,t,n)))}sendTelemetry(e,t,n){const r=`${e}-${t}`;this.sentMimeTypes.has(r)||(this.sentMimeTypes.add(r),e=e.replace(/\//g,"_").replace(/\\/g,"_"),(0,h.sendTelemetryEvent)(h.Telemetry.CellOutputMimeType,void 0,{mimeType:e,when:t,resourceType:n}))}};t.CellOutputMimeTypeTracker=f,t.CellOutputMimeTypeTracker=f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook)),i(1,(0,o.inject)(u.IDisposableRegistry)),i(2,(0,o.inject)(a.IWorkspaceService))],f)},24451:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookTracebackFormatter=void 0;const i=n(26594),o=n(15925),s=n(35412),a=n(25251),c=n(11642),l=/(;32m[ ->]*?)(\d+)(.*)/g;let u=class{format(e,t){return e.notebook.notebookType!==o.JupyterNotebookView?t:t.map((t=>this.modifyTracebackFrameIPython(e,t)))}modifyTracebackFrameIPython(e,t){return/^[Cell|Input|File].*?\n.*/.test(t)?this.modifyTracebackFrameIPython8(e,t):t}modifyTracebackFrameIPython8(e,t){t=(t=(t=t.replace(/\u001b\[4\dm/g,"")).replace(/\u001b\[38;.*?\d+m/g,"[39m")).replace(/(;32m[ ->]*?)(\d+)(.*)\n/g,((e,t,n,r)=>`${t}${n}${r=r.replace(/\u001b\[3\d+m/g,"[39m")}\n`)),(0,c.traceInfoIfCI)(`Trace frame to match: ${t}`);const n=(t,n)=>{const r=t.replace(l,((t,n,r,i)=>{const o=parseInt(r,10);return`${n}<a href='${e.document.uri.toString()}?line=${o-1}'>${o}</a>${i}`})),i=a.DataScience.cellAtFormat((0,s.getFilePath)(e.document.uri),e.index+1);return r.replace(/.*?\n/,`[1;32m${i}[0m line [0;36m${n}\n`)},r=/^Input.*?\[.*32mIn\s+\[(\d+).*?0;36m(.*?)\n.*/.exec(t);if(r&&r.length>1)return n(t,r[2]);const i=/Cell.*?\[.*32mIn\s*\[(\d+)\]\,\s+line\s+([(\d+)])(.*?)\n.*/gm.exec(t);return i&&i.length>1?n(t,i[2]):t}};t.NotebookTracebackFormatter=u,t.NotebookTracebackFormatter=u=r([(0,i.injectable)()],u)},24411:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(94062),i=n(7214),o=n(52064),s=n(15925),a=n(42080),c=n(84390),l=n(24970),u=n(99229),d=n(35282),h=n(14809),p=n(32372),f=n(6410),g=n(4177),m=n(66317),v=n(35962),y=n(40371),b=n(13057),w=n(982),S=n(9255),C=n(93385),_=n(33628),P=n(18661),E=n(87354),k=n(38124),I=n(13749),D=n(62440),T=n(20402),x=n(71806),O=n(15018),R=n(40539),M=n(88904),A=n(24451),N=n(85249);t.registerTypes=function(e,t){(0,h.registerTypes)(e,t),e.addSingleton(o.IExtensionSyncActivationService,c.LiveKernelSwitcher),e.addSingleton(N.INotebookEditorProvider,R.NotebookEditorProvider),e.addSingleton(o.IExtensionSyncActivationService,d.RemoteKernelControllerWatcher),e.addSingleton(r.ITracebackFormatter,A.NotebookTracebackFormatter),e.addSingleton(l.NotebookIPyWidgetCoordinator,l.NotebookIPyWidgetCoordinator),e.addBinding(l.NotebookIPyWidgetCoordinator,o.IExtensionSyncActivationService),e.addSingleton(o.IExtensionSyncActivationService,u.RemoteKernelConnectionHandler),e.addSingleton(a.IDataScienceCommandListener,O.NotebookCommandListener),e.addSingleton(T.NotebookCellLanguageService,T.NotebookCellLanguageService),e.addBinding(T.NotebookCellLanguageService,o.IExtensionSyncActivationService),e.addSingleton(o.IExtensionSyncActivationService,x.EmptyNotebookCellLanguageService),e.addSingleton(m.INotebookDebuggingManager,g.DebuggingManager,void 0,[o.IExtensionSyncActivationService]),e.addSingleton(m.IJupyterDebugService,y.MultiplexingDebugService,s.Identifiers.MULTIPLEXING_DEBUGSERVICE),e.addSingleton(m.IDebugLocationTracker,v.DebugLocationTrackerFactory,void 0,[m.IDebugLocationTrackerFactory]),e.addSingleton(i.IJupyterVariables,f.DebuggerVariables,s.Identifiers.DEBUGGER_VARIABLES),e.addSingleton(o.IExtensionSyncActivationService,p.CommandRegistry),e.addSingleton(o.IExtensionSyncActivationService,M.CellOutputMimeTypeTracker),e.addSingleton(S.ExportFileOpener,S.ExportFileOpener),e.addSingleton(D.IExportBase,b.ExportBase),e.addSingleton(D.IExportDialog,w.ExportDialog),e.addSingleton(D.IFileConverter,I.FileConverter),e.addSingleton(D.IExport,E.ExportToPythonPlain,D.ExportFormat.python),e.addSingleton(D.INbConvertExport,C.ExportToHTML,D.ExportFormat.html),e.addSingleton(D.INbConvertExport,_.ExportToPDF,D.ExportFormat.pdf),e.addSingleton(D.INbConvertExport,P.ExportToPython,D.ExportFormat.python),e.addSingleton(k.ExportUtilBase,k.ExportUtilBase)}},26657:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendKernelListTelemetry=void 0;const r=n(15925),i=n(9959);t.sendKernelListTelemetry=function(e){const t={kernelSpecCount:0,localKernelSpecCount:0,remoteKernelSpecCount:0,kernelInterpreterCount:0,kernelLiveCount:0};e.forEach((e=>{switch(e.kind){case"connectToLiveRemoteKernel":t.kernelLiveCount+=1;break;case"startUsingRemoteKernelSpec":t.localKernelSpecCount+=1,t.kernelSpecCount+=1;break;case"startUsingLocalKernelSpec":t.remoteKernelSpecCount+=1,t.kernelSpecCount+=1;break;case"startUsingPythonInterpreter":t.kernelInterpreterCount+=1}})),(0,i.sendTelemetryEvent)(r.Telemetry.KernelCount,{...t})}},85249:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INotebookEditorProvider=t.INotebookCompletionProvider=void 0,t.INotebookCompletionProvider=Symbol("INotebookCompletionProvider"),t.INotebookEditorProvider=Symbol("INotebookEditorProvider")},52064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IExtensionSyncActivationService=t.IExtensionActivationManager=void 0,t.IExtensionActivationManager=Symbol("IExtensionActivationManager"),t.IExtensionSyncActivationService=Symbol("IExtensionSyncActivationService")},24353:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterService=t.PythonExtensionChecker=t.OldPythonApiProvider=t.serializePythonEnvironment=t.pythonEnvToJupyterEnv=t.resolvedPythonEnvToJupyterEnv=t.deserializePythonEnvironment=void 0;const l=n(66828),u=n(77886),d=a(n(25251)),h=n(26594),p=n(9959),f=n(10053),g=n(15925),m=n(42080),v=n(43138),y=n(11642),b=n(35412),w=n(46031),S=n(47891),C=n(58681),_=n(11386),P=n(74075),E=n(37716),k=n(6101),I=n(72728),D=n(36625),T=n(39796);function x(e,t){const n=e.tools,r=[["Conda",S.EnvironmentType.Conda],["Pyenv",S.EnvironmentType.Pyenv],["Pipenv",S.EnvironmentType.Pipenv],["Poetry",S.EnvironmentType.Poetry],["VirtualEnvWrapper",S.EnvironmentType.VirtualEnvWrapper],["VirtualEnv",S.EnvironmentType.VirtualEnv],["Venv",S.EnvironmentType.Venv]];let i=n.length?n[0]:S.EnvironmentType.Unknown;if("Conda"===e.environment?.type)i=S.EnvironmentType.Conda;else{for(const[e,t]of r)if(n.includes(e)){i=t;break}i===S.EnvironmentType.Unknown&&"VirtualEnvironment"===e.environment?.type&&(i=S.EnvironmentType.VirtualEnv)}let o,s=!1,a=e.id,c=e.executable.sysPrefix;if(e.executable.uri)o=e.executable.uri;else{if(i!==S.EnvironmentType.Conda||!t)return void(0,y.traceWarning)(`Python environment ${(0,b.getDisplayPath)(e.id)} excluded as Uri is undefined`);s=!0,c=c||e.environment?.folderUri?.fsPath||"",o=(0,I.getOSType)()===I.OSType.Windows?l.Uri.joinPath(e.environment?.folderUri||l.Uri.file(e.path),"python.exe"):l.Uri.joinPath(e.environment?.folderUri||l.Uri.file(e.path),"bin","python")}return{id:a,sysPrefix:c||"",envPath:e.environment?.folderUri,displayPath:e.environment?.folderUri||l.Uri.file(e.path),envName:e.environment?.name||"",uri:o,displayName:e.environment?.name||"",envType:i,isCondaEnvWithoutPython:s,version:e.version?{major:e.version.major,minor:e.version.minor,patch:e.version.micro,raw:e.version.sysVersion}:void 0}}t.deserializePythonEnvironment=function(e,t){if(e){const n={...e,sysPrefix:e.sysPrefix||"",uri:l.Uri.file(e.path||""),id:t||e.id,envPath:e.envPath?l.Uri.file(e.envPath):void 0,displayPath:"displayPath"in e&&"string"==typeof e.displayPath?l.Uri.file(e.displayPath):void 0};return delete n.path,e.envPath||delete n.envPath,n}},t.resolvedPythonEnvToJupyterEnv=x,t.pythonEnvToJupyterEnv=function(e,t){const n=(0,T.getEnvironmentType)(e);let r,i=!1,o=e.id,s=e.executable.sysPrefix;if(e.executable.uri)r=e.executable.uri;else{if(n!==S.EnvironmentType.Conda||!t)return void(0,y.traceWarning)(`Python environment ${(0,b.getDisplayPath)(e.id)} excluded as Uri is undefined`);i=!0,s=s||e.environment?.folderUri?.fsPath||"",r=(0,I.getOSType)()===I.OSType.Windows?l.Uri.joinPath(e.environment?.folderUri||l.Uri.file(e.path),"python.exe"):l.Uri.joinPath(e.environment?.folderUri||l.Uri.file(e.path),"bin","python")}return{id:o,sysPrefix:s||"",envPath:e.environment?.folderUri,displayPath:e.environment?.folderUri||l.Uri.file(e.path),envName:e.environment?.name||"",uri:r,displayName:e.environment?.name||"",envType:n,isCondaEnvWithoutPython:i,version:e.version?{major:e.version.major||0,minor:e.version.minor||0,patch:e.version.micro||0,raw:e.version.sysVersion||""}:void 0}},t.serializePythonEnvironment=function(e){if(e){const t=Object.assign({},e,{path:(0,b.getFilePath)(e.uri),envPath:e.envPath?(0,b.getFilePath)(e.envPath):void 0,displayPath:e.displayPath?(0,b.getFilePath)(e.displayPath):void 0});return delete t.uri,t}};let O=class{get onDidActivatePythonExtension(){return this.didActivatePython.event}get pythonExtensionHooked(){return this._pythonExtensionHooked.promise}get pythonExtensionVersion(){return this._pythonExtensionVersion}constructor(e,t,n,r){this.extensions=e,this.disposables=t,this.extensionChecker=n,this.workspace=r,this.api=(0,v.createDeferred)(),this.didActivatePython=new l.EventEmitter,this._pythonExtensionHooked=(0,v.createDeferred)(),this.extensionChecker.isPythonExtensionInstalled||this.extensions.onDidChange((async()=>{this.extensionChecker.isPythonExtensionInstalled&&await this.registerHooks()}),this,this.disposables),this.disposables.push(this.didActivatePython)}getApi(){return this.init().catch(C.noop),this.api.promise}async getNewApi(){await this.init();const e=this.extensions.getExtension(g.PythonExtension);return e?.packageJSON?.version&&(this._pythonExtensionVersion=new D.SemVer(e?.packageJSON?.version)),e?.exports}setApi(e){!this.api.resolved&&this.workspace.isTrusted&&this.api.resolve(e)}async init(){this.initialized||(this.extensions.getExtension(g.PythonExtension)?await this.registerHooks():await this.extensionChecker.showPythonExtensionInstallRequiredPrompt(),this.initialized=!0)}async registerHooks(){if(this.hooksRegistered)return;const e=this.extensions.getExtension(g.PythonExtension);if(!e)return;let t=!1;if(!e.isActive)try{await e.activate(),t=!0}catch(e){return(0,y.traceError)("Failed activating the python extension: ",e),void this.api.reject(new E.PythonExtensionActicationFailedError(e))}this.hooksRegistered||(this.hooksRegistered=!0,t&&this.didActivatePython.fire(),e.exports?.jupyter?e.exports.jupyter.registerHooks():((0,y.traceError)("Python extension is not exporting the jupyter API"),this.api.reject(new k.PythonExtensionApiNotExportedError)),this._pythonExtensionHooked.resolve())}};t.OldPythonApiProvider=O,t.OldPythonApiProvider=O=s([(0,h.injectable)(),c(0,(0,h.inject)(m.IExtensions)),c(1,(0,h.inject)(m.IDisposableRegistry)),c(2,(0,h.inject)(u.IPythonExtensionChecker)),c(3,(0,h.inject)(f.IWorkspaceService))],O);let R=r=class{get onPythonExtensionInstallationStatusChanged(){return this.pythonExtensionInstallationStatusChanged.event}constructor(e,t,n,r,i){this.extensions=e,this.appShell=t,this.commandManager=n,this.workspace=r,this.disposables=i,this.pythonExtensionInstallationStatusChanged=new l.EventEmitter,this.extensions.onDidChange(this.extensionsChangeHandler.bind(this),this,this.disposables),this.previousInstallState=this.isPythonExtensionInstalled}get isPythonExtensionInstalled(){return void 0!==this.extensions.getExtension(g.PythonExtension)}get isPythonExtensionActive(){return!0===this.extensions.getExtension(g.PythonExtension)?.isActive}async directlyInstallPythonExtension(){return this.commandManager.executeCommand("workbench.extensions.installExtension",g.PythonExtension,{context:{skipWalkthrough:!0}})}async showPythonExtensionInstallRequiredPrompt(){if(!this.workspace.isTrusted)return;r.promptDisplayed=!0;const e=d.Common.bannerLabelYes;(0,p.sendTelemetryEvent)(g.Telemetry.PythonExtensionNotInstalled,void 0,{action:"displayed"}),await this.appShell.showInformationMessage(d.DataScience.pythonExtensionRequired,{modal:!0},e)===e?((0,p.sendTelemetryEvent)(g.Telemetry.PythonExtensionNotInstalled,void 0,{action:"download"}),await this.installPythonExtension()):(0,p.sendTelemetryEvent)(g.Telemetry.PythonExtensionNotInstalled,void 0,{action:"dismissed"})}async installPythonExtension(){this.commandManager.executeCommand("extension.open",g.PythonExtension).then(C.noop,C.noop)}async extensionsChangeHandler(){const e=this.isPythonExtensionInstalled;e!==this.previousInstallState&&(this.pythonExtensionInstallationStatusChanged.fire(e?"installed":"uninstalled"),this.previousInstallState=e)}};t.PythonExtensionChecker=R,t.PythonExtensionChecker=R=r=s([(0,h.injectable)(),c(0,(0,h.inject)(m.IExtensions)),c(1,(0,h.inject)(f.IApplicationShell)),c(2,(0,h.inject)(f.ICommandManager)),c(3,(0,h.inject)(f.IWorkspaceService)),c(4,(0,h.inject)(m.IDisposableRegistry))],R);let M=class{get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._onDidChangeStatus.fire())}get known(){return this.api?.environments.known||[]}constructor(e,t,n,r,i){this.apiProvider=e,this.extensionChecker=t,this.disposables=n,this.workspace=r,this.context=i,this.didChangeInterpreter=new l.EventEmitter,this.didChangeInterpreters=new l.EventEmitter,this._onDidEnvironmentVariablesChange=new l.EventEmitter,this._onDidRemoveInterpreter=new l.EventEmitter,this.onDidRemoveInterpreter=this._onDidRemoveInterpreter.event,this.onDidEnvironmentVariablesChange=this._onDidEnvironmentVariablesChange.event,this.interpreterListCachePromise=void 0,this._status="idle",this._onDidChangeStatus=new l.EventEmitter,this.onDidChangeStatus=this._onDidChangeStatus.event,this.refreshPromises=new P.PromiseMonitor,this.pauseEnvDetection=!1,this.onResumeEnvDetection=new l.EventEmitter,this._interpreters=new Map,this.workspaceCachedActiveInterpreter=new Set,this.lastLoggedResourceAndInterpreterId="",this.pythonEnvHashes=new Map,this.loggedEnvsWithoutInterpreterPath=new Set,this.pendingInterpreterChangeEventTriggers=new Map,this.pendingInterpretersChangeEventTriggers=new Map,this.extensionChecker.isPythonExtensionInstalled&&(this.extensionChecker.isPythonExtensionActive||this.apiProvider.onDidActivatePythonExtension((()=>{this.builtListOfInterpretersAtLeastOnce=!1,this.hookupOnDidChangeInterpreterEvent(),this.buildListOfInterpretersForFirstTime()}),this,this.disposables)),this.workspace.onDidChangeWorkspaceFolders(this.onDidChangeWorkspaceFolders,this,n),this.workspace.onDidGrantWorkspaceTrust((()=>this.refreshInterpreters(!0)),this,this.disposables),this.disposables.push(this._onDidChangeStatus),this.disposables.push(this.refreshPromises),this.disposables.push(this.onResumeEnvDetection),this.refreshPromises.onStateChange((()=>{this.status=this.refreshPromises.isComplete?"idle":"refreshing"})),this.workspace.onDidGrantWorkspaceTrust((()=>this.populateCachedListOfInterpreters(!0).catch(C.noop)),this,this.disposables)}async resolveEnvironment(e){return this.getApi().then((t=>{if(!t)return;const n="string"==typeof e?t.environments.known.find((t=>t.id===e||t.path===e)):e;return t.environments.resolveEnvironment(n||e)}))}get onDidChangeInterpreter(){return this.hookupOnDidChangeInterpreterEvent(),this.didChangeInterpreter.event}get onDidChangeInterpreters(){return this.hookupOnDidChangeInterpreterEvent(),this.didChangeInterpreters.event}get resolvedEnvironments(){return this.hookupOnDidChangeInterpreterEvent(),Array.from(this._interpreters.values()).map((e=>e.resolved))}get environmentsFound(){return this.getApi().catch(C.noop),this.hookupOnDidChangeInterpreterEvent(),(this.api?.environments?.known.length??0)>0}getInterpreters(){if(this.hookupOnDidChangeInterpreterEvent(),!this.interpreterListCachePromise){this.getInterpretersCancellation?.cancel(),this.getInterpretersCancellation?.dispose();const e=this.getInterpretersCancellation=new l.CancellationTokenSource;this.interpreterListCachePromise=this.getInterpretersImpl(e.token),this.interpreterListCachePromise.finally((()=>e.dispose())).catch(C.noop),this.refreshPromises.push(this.interpreterListCachePromise)}return this.interpreterListCachePromise}pauseInterpreterDetection(e){e.isCancellationRequested||(this.pauseEnvDetection=!0,e.onCancellationRequested((()=>{this.pauseEnvDetection=!1,this.triggerPendingEvents()}),this,this.disposables))}async refreshInterpreters(e=!1){const t=(async()=>{const t=await this.getApi();if(t)try{await t.environments.refreshEnvironments({forceRefresh:e}),this.interpreterListCachePromise=void 0,await this.getInterpreters(),(0,y.traceVerbose)("Refreshed Environments")}catch(e){(0,y.traceError)("Failed to refresh the list of interpreters")}})();this.refreshPromises.push(t),this.refreshPromises.push(t.then((()=>(0,v.sleep)(1e3)))),await t}async getActiveInterpreter(e){if(!this.workspace.isTrusted)return;const t=new _.StopWatch;this.hookupOnDidChangeInterpreterEvent(),e||1!==this.workspace.workspaceFolders?.length||(e=this.workspace.workspaceFolders[0].uri),this.workspace.workspaceFolders?.length&&(e=this.workspace.getWorkspaceFolder(e)?.uri||this.workspace.workspaceFolders[0].uri);const n=this.workspace.getWorkspaceFolderIdentifier(e),r=this.getApi().then((async t=>{if(!t)return;const n=t.environments.getActiveEnvironmentPath(e);(0,y.traceInfoIfCI)(`Active Environment Path for ${(0,b.getDisplayPath)(e)} is ${JSON.stringify(n)}`);const r=await t.environments.resolveEnvironment(n);return(0,y.traceInfoIfCI)(`Resolved Active Environment for ${(0,b.getDisplayPath)(e)} is ${JSON.stringify(r)}`),this.trackResolvedEnvironment(r)}));return r.then((()=>{this.workspaceCachedActiveInterpreter.has(n)||(this.workspaceCachedActiveInterpreter.add(n),(0,p.sendTelemetryEvent)(g.Telemetry.ActiveInterpreterListingPerf,{duration:t.elapsedTime},{firstTime:!0}))})).catch((e=>{(0,y.traceWarning)(`Failed to get active interpreter from Python for workspace ${n}`,e)})),(g.isCI||[l.ExtensionMode.Development,l.ExtensionMode.Test].includes(this.context.extensionMode))&&r.then((t=>{const n=`${(0,b.getDisplayPath)(e)}'-${(0,b.getDisplayPath)(t?.id)}`;this.lastLoggedResourceAndInterpreterId!==n&&(this.lastLoggedResourceAndInterpreterId=n,(0,y.traceInfo)(`Active Interpreter ${e?`for '${(0,b.getDisplayPath)(e)}' `:""}is ${(0,b.getDisplayPath)(t?.id)} (${t?.envType}, '${t?.envName}', ${t?.version?.major}.${t?.version?.minor}.${t?.version?.patch})`))})).catch(C.noop),r}getInterpreterHash(e){return this.pythonEnvHashes.get(e)}async getInterpreterDetails(e,t){if(!this.workspace.isTrusted)throw new Error("Unable to determine active Interpreter as Workspace is not trusted");this.hookupOnDidChangeInterpreterEvent();try{return await this.getApi().then((async n=>{if(!n||t?.isCancellationRequested)return;const r=n.environments.known.find((t=>(0,C.isUri)(e)?(0,w.areInterpreterPathsSame)(t.executable.uri,e):"string"==typeof e?t.id===e:(0,w.areInterpreterPathsSame)(l.Uri.file(t.path),l.Uri.file(e.path)))),i=(0,C.isUri)(e)?(0,b.getDisplayPath)(e):"string"==typeof e?e:(0,b.getDisplayPath)(l.Uri.file(e.path));if(r){const e=await n.environments.resolveEnvironment(r),t=this.trackResolvedEnvironment(e);return(0,y.traceInfoIfCI)(`Interpreter details for ${i} from Python is ${JSON.stringify(e)} and our mapping is ${JSON.stringify(t)}`),t}const o=i;if(this.loggedEnvsWithoutInterpreterPath.has(o)||(this.loggedEnvsWithoutInterpreterPath.add(o),(0,y.traceWarning)(`No interpreter with path ${i} found in Python API, will convert Uri path to string as Id ${i}`)),t?.isCancellationRequested)return;const s=await n.environments.resolveEnvironment((0,C.isUri)(e)?e.fsPath:"string"==typeof e?e:e.path);return this.trackResolvedEnvironment(s)}))}catch(t){return void(0,y.traceWarning)(`Failed to get Python interpreter details from Python Extension API for ${"string"==typeof e?e:(0,b.getDisplayPath)((0,C.isUri)(e)?e:l.Uri.file(e.path))}`,t)}}trackResolvedEnvironment(e){if(e){const t=x(e,!!(this.apiProvider.pythonExtensionVersion&&this.apiProvider.pythonExtensionVersion.compare("2023.3.10341119")>=0));if(!t)return;if((0,w.getInterpreterHash)(t).then((e=>{this.pythonEnvHashes.set(t.id,e)})).catch(C.noop),!this._interpreters.get(e.id)||!(0,C.areObjectsWithUrisTheSame)(t,this._interpreters.get(e.id)?.resolved)){const n=this._interpreters.get(e.id);n?.resolved&&Object.assign(n.resolved,t),this._interpreters.set(e.id,{resolved:t}),this.triggerEventIfAllowed("interpretersChangeEvent",t)}return t}}triggerEventIfAllowed(e,t){"interpreterChangeEvent"===e?this.pendingInterpreterChangeEventTriggers.set(t?.id||"",t):this.pendingInterpretersChangeEventTriggers.set(t?.id||"",t),this.pauseEnvDetection||this.triggerPendingEvents()}triggerPendingEvents(){this.pendingInterpreterChangeEventTriggers.forEach((e=>this.didChangeInterpreter.fire(e))),this.pendingInterpreterChangeEventTriggers.clear();const e=Array.from(this.pendingInterpretersChangeEventTriggers.values());if(e.length){const t=e.filter((e=>!!e));t.length!==e.length&&0===t.length?this.didChangeInterpreters.fire([]):this.didChangeInterpreters.fire(t)}this.pendingInterpretersChangeEventTriggers.clear()}async getApi(){if(this.extensionChecker.isPythonExtensionInstalled)return this.apiPromise||(this.apiPromise=this.apiProvider.getNewApi(),this.apiPromise.then((e=>e?this.api=e:void 0)).catch(C.noop)),this.apiPromise}onDidChangeWorkspaceFolders(){this.interpreterListCachePromise=void 0}populateCachedListOfInterpreters(e){e&&(this.interpreterListCachePromise=void 0);const t=this.getInterpreters().catch(C.noop);return this.refreshPromises.push(t),this.refreshPromises.push(t.then((()=>(0,v.sleep)(1e3)))),t}async getInterpretersImpl(e,t=0){if(!this.workspace.isTrusted)return[];this.extensionChecker.isPythonExtensionInstalled&&(this.builtListOfInterpretersAtLeastOnce=!0);const n=[];let r=!1;return await this.getApi().then((async t=>{if(!t||e.isCancellationRequested)return[];let i=t.environments.known.length;try{await Promise.all(t.environments.known.map((async e=>{try{const r=await t.environments.resolveEnvironment(e),i=this.trackResolvedEnvironment(r);(0,y.traceInfoIfCI)(`Python environment for ${e.id} is ${r?.id} from Python Extension API is ${JSON.stringify(r)} and original env is ${JSON.stringify(e)} and translated is ${JSON.stringify(i)}`),i?n.push(i):e.executable.uri&&e.environment?.type!==S.EnvironmentType.Conda&&(0,y.traceError)(`Failed to get env details from Python API for ${(0,b.getDisplayPath)(e.id)} without an error`)}catch(t){(0,y.traceError)(`Failed to get env details from Python API for ${(0,b.getDisplayPath)(e.id)}`,t)}}))),this.triggerEventIfAllowed("interpretersChangeEvent",void 0)}catch(e){(0,y.traceError)("Failed to refresh list of interpreters and get their details",e)}i<t.environments.known.length&&(r=!0)})),e.isCancellationRequested?[]:r&&t<10?((0,y.traceVerbose)(`List of interpreters changed after a while, will need to rebuild it again, counter = ${t}`),this.getInterpretersImpl(e,t++)):((0,y.traceVerbose)(`Full interpreter list is length: ${n.length}, ${n.map((e=>`${e.id}:${e.displayName}:${e.envType}:${(0,b.getDisplayPath)(e.uri)}`)).join(", ")}`),n)}buildListOfInterpretersForFirstTime(){this.builtListOfInterpretersAtLeastOnce||(this.extensionChecker.isPythonExtensionActive&&(this.builtListOfInterpretersAtLeastOnce=!0,this.populateCachedListOfInterpreters().catch(C.noop)),this.extensionChecker.onPythonExtensionInstallationStatusChanged((e=>{"installed"===e&&this.extensionChecker.isPythonExtensionActive&&this.populateCachedListOfInterpreters().catch(C.noop)}),this,this.disposables))}hookupOnDidChangeInterpreterEvent(){this.eventHandlerAdded||(this.buildListOfInterpretersForFirstTime(),this.getApi().then((e=>{!this.eventHandlerAdded&&e&&(this.eventHandlerAdded=!0,e.environments.onDidEnvironmentVariablesChange((e=>{(0,y.traceVerbose)(`Detected changes to env file ${e.resource?.uri?.path} in PythonApi`),this._onDidEnvironmentVariablesChange.fire()}),this,this.disposables),e.environments.onDidChangeActiveEnvironmentPath((()=>{(0,y.traceVerbose)("Detected change in Active Python environment via Python API"),this.interpreterListCachePromise=void 0,this.workspaceCachedActiveInterpreter.clear(),this.triggerEventIfAllowed("interpreterChangeEvent",void 0)}),this,this.disposables),e.environments.onDidChangeEnvironments((async e=>{(0,y.traceVerbose)(`Python API env change detected, ${e.type} => '${e.env.id}'`),"remove"===e.type&&this._interpreters.delete(e.env.id);const t=!("update"!==e.type||!this._interpreters.get(e.env.id)?.resolved.isCondaEnvWithoutPython||!e.env.executable.uri);this.populateCachedListOfInterpreters(!0).finally((()=>{const n=this._interpreters.get(e.env.id);"remove"!==e.type||n?"update"===e.type&&n&&t&&!n.resolved.isCondaEnvWithoutPython&&(this.triggerEventIfAllowed("interpreterChangeEvent",n.resolved),this.triggerEventIfAllowed("interpretersChangeEvent",n.resolved)):(this.triggerEventIfAllowed("interpreterChangeEvent",void 0),this.triggerEventIfAllowed("interpretersChangeEvent",void 0),this._onDidRemoveInterpreter.fire({id:e.env.id}))})).catch(C.noop)}),this,this.disposables))})).catch(C.noop))}};t.InterpreterService=M,t.InterpreterService=M=s([(0,h.injectable)(),c(0,(0,h.inject)(u.IPythonApiProvider)),c(1,(0,h.inject)(u.IPythonExtensionChecker)),c(2,(0,h.inject)(m.IDisposableRegistry)),c(3,(0,h.inject)(f.IWorkspaceService)),c(4,(0,h.inject)(m.IExtensionContext))],M)},50968:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(24353),i=n(77886);t.registerTypes=function(e){e.addSingleton(i.IPythonApiProvider,r.OldPythonApiProvider),e.addSingleton(i.IPythonExtensionChecker,r.PythonExtensionChecker)}},77886:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterProductToInstall=t.IPythonExtensionChecker=t.IPythonApiProvider=void 0,t.IPythonApiProvider=Symbol("IPythonApi"),t.IPythonExtensionChecker=Symbol("IPythonExtensionChecker"),function(e){e.jupyter="jupyter",e.ipykernel="ipykernel",e.notebook="notebook",e.kernelspec="kernelspec",e.nbconvert="nbconvert",e.pandas="pandas",e.pip="pip"}(n||(t.JupyterProductToInstall=n={}))},959:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseApplicationEnvironment=void 0;const s=o(n(66828));t.BaseApplicationEnvironment=class{get appName(){return s.env.appName}get vscodeVersion(){return s.version}get appRoot(){return s.env.appRoot}get language(){return s.env.language}get sessionId(){return s.env.sessionId}get machineId(){return s.env.machineId}get uiKind(){return s.env.uiKind}get extensionName(){return this.packageJson.displayName}get extensionVersion(){return this.packageJson.version}get shell(){return s.env.shell}get packageJson(){return this.extensionContext.extension.packageJSON}get channel(){return this.appName.indexOf("Insider")>0||this.appName.indexOf("Code - OSS Dev")>=0?"insiders":"stable"}get uriScheme(){return s.env.uriScheme}constructor(e){this.extensionContext=e}}},88814:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationEnvironment=void 0;const o=n(26594),s=n(959),a=n(42080);let c=class extends s.BaseApplicationEnvironment{get userSettingsFile(){}get userCustomKeybindingsFile(){}constructor(e){super(e)}};t.ApplicationEnvironment=c,t.ApplicationEnvironment=c=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IExtensionContext))],c)},42959:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationShell=void 0;const i=n(26594),o=n(66828),s=n(11642),a=n(58681);let c=class{get activeColorTheme(){return o.window.activeColorTheme}get onDidChangeWindowState(){return o.window.onDidChangeWindowState}showInformationMessage(e,t,...n){return(0,s.traceInfoIfCI)(`Show Information Message ${e}, ${JSON.stringify(t)}, ${JSON.stringify(n)}`),o.window.showInformationMessage(e,t,...n)}showWarningMessage(e,t,...n){return(0,s.traceInfoIfCI)(`Show Warning Message ${e}, ${JSON.stringify(t)}, ${JSON.stringify(n)}`),o.window.showWarningMessage(e,t,...n)}showErrorMessage(e,t,...n){return(0,s.traceInfoIfCI)(`Show Error Message ${e}, ${JSON.stringify(t)}, ${JSON.stringify(n)}`),o.window.showErrorMessage(e,t,...n)}showQuickPick(e,t,n){return o.window.showQuickPick(e,t,n)}showOpenDialog(e){return o.window.showOpenDialog(e)}showSaveDialog(e){return o.window.showSaveDialog(e)}showInputBox(e,t){return o.window.showInputBox(e,t)}openUrl(e){o.env.openExternal(o.Uri.parse(e)).then(a.noop,a.noop)}setStatusBarMessage(e,t){return o.window.setStatusBarMessage(e,t)}createStatusBarItem(e,t){return o.window.createStatusBarItem(e,t)}showWorkspaceFolderPick(e){return o.window.showWorkspaceFolderPick(e)}withProgress(e,t){return o.window.withProgress(e,t)}withProgressCustomIcon(e,t){const n=(new o.CancellationTokenSource).token,r=this.createStatusBarItem(o.StatusBarAlignment.Left),i={report:t=>{r.text=`${e} ${t.message}`}};return r.show(),t(i,n).then((e=>(r.dispose(),e)))}createQuickPick(){return o.window.createQuickPick()}createInputBox(){return o.window.createInputBox()}createTreeView(e,t){return o.window.createTreeView(e,t)}createOutputChannel(e){return o.window.createOutputChannel(e)}};t.ApplicationShell=c,t.ApplicationShell=c=r([(0,i.injectable)()],c)},57703:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ClipboardService=void 0;const i=n(26594),o=n(66828);let s=class{async readText(){return o.env.clipboard.readText()}async writeText(e){await o.env.clipboard.writeText(e)}};t.ClipboardService=s,t.ClipboardService=s=r([(0,i.injectable)()],s)},8917:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandManager=void 0;const i=n(26594),o=n(66828),s=n(9959),a=n(15925),c=new Set(["setContext"]);let l=class{registerCommand(e,t,n){return c.add(e),o.commands.registerCommand(e,((...r)=>((0,s.sendTelemetryEvent)(a.Telemetry.CommandExecuted,void 0,{command:e}),n?t.call(n,...r):t(...r))),n)}registerTextEditorCommand(e,t,n){return c.add(e),o.commands.registerTextEditorCommand(e,((r,i,...o)=>((0,s.sendTelemetryEvent)(a.Telemetry.CommandExecuted,void 0,{command:e}),n?t.call(n,r,i,...o):t(r,i,...o))),n)}executeCommand(e,...t){return c.has(e)||(0,s.sendTelemetryEvent)(a.Telemetry.CommandExecuted,void 0,{command:e}),o.commands.executeCommand(e,...t)}getCommands(e){return o.commands.getCommands(e)}};t.CommandManager=l,t.CommandManager=l=r([(0,i.injectable)()],l)},61847:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugService=void 0;const o=n(26594),s=n(66828),a=n(11642);let c=r=class{get activeDebugConsole(){return s.debug.activeDebugConsole}get activeDebugSession(){return(0,a.traceInfoIfCI)(`Getting active debug session, ${s.debug.activeDebugSession?.name}`),s.debug.activeDebugSession}get breakpoints(){return s.debug.breakpoints}get onDidChangeActiveDebugSession(){return s.debug.onDidChangeActiveDebugSession}get onDidStartDebugSession(){return s.debug.onDidStartDebugSession}get onDidReceiveDebugSessionCustomEvent(){return s.debug.onDidReceiveDebugSessionCustomEvent}get onDidTerminateDebugSession(){return s.debug.onDidTerminateDebugSession}get onDidChangeBreakpoints(){return s.debug.onDidChangeBreakpoints}registerDebugConfigurationProvider(e,t){return s.debug.registerDebugConfigurationProvider(e,t)}registerDebugAdapterTrackerFactory(e,t){return s.debug.registerDebugAdapterTrackerFactory(e,t)}startDebugging(e,t,n){return s.debug.startDebugging(e,t,n)}addBreakpoints(e){s.debug.addBreakpoints(e)}removeBreakpoints(e){s.debug.removeBreakpoints(e)}};t.DebugService=c,c.instance=new r,t.DebugService=c=r=i([(0,o.injectable)()],c)},52100:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentManager=void 0;const i=n(26594),o=n(66828);let s=class{get textDocuments(){return o.workspace.textDocuments}get activeTextEditor(){return o.window.activeTextEditor}get visibleTextEditors(){return o.window.visibleTextEditors}get onDidChangeActiveTextEditor(){return o.window.onDidChangeActiveTextEditor}get onDidChangeTextDocument(){return o.workspace.onDidChangeTextDocument}get onDidChangeVisibleTextEditors(){return o.window.onDidChangeVisibleTextEditors}get onDidChangeTextEditorSelection(){return o.window.onDidChangeTextEditorSelection}get onDidChangeTextEditorOptions(){return o.window.onDidChangeTextEditorOptions}get onDidChangeTextEditorViewColumn(){return o.window.onDidChangeTextEditorViewColumn}get onDidOpenTextDocument(){return o.workspace.onDidOpenTextDocument}get onDidCloseTextDocument(){return o.workspace.onDidCloseTextDocument}get onDidSaveTextDocument(){return o.workspace.onDidSaveTextDocument}showTextDocument(e,t,n){return o.window.showTextDocument(e,t,n)}openTextDocument(e){return o.workspace.openTextDocument(e)}applyEdit(e){return o.workspace.applyEdit(e)}createTextEditorDecorationType(e){return o.window.createTextEditorDecorationType(e)}};t.DocumentManager=s,t.DocumentManager=s=r([(0,i.injectable)()],s)},71886:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptedStorage=void 0;const o=n(26594),s=n(66828),a=n(15925),c=n(11642),l=n(42080);let u=class{constructor(e){this.extensionContext=e,this.testingState=new Map}async store(e,t,n){if(a.isCI&&this.extensionContext.extensionMode!==s.ExtensionMode.Production)this.testingState.set(`${e}#${t}`,n||"");else if(n)await this.extensionContext.secrets.store(`${e}.${t}`,n);else try{await this.extensionContext.secrets.delete(`${e}.${t}`)}catch(e){(0,c.traceError)(e)}}async retrieve(e,t){if(a.isCI&&this.extensionContext.extensionMode!==s.ExtensionMode.Production)return this.testingState.get(`${e}#${t}`);try{return await this.extensionContext.secrets.get(`${e}.${t}`)}catch(n){try{return void await this.extensionContext.secrets.delete(`${e}.${t}`)}catch(e){(0,c.traceError)(e)}}}};t.EncryptedStorage=u,t.EncryptedStorage=u=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IExtensionContext))],u)},31104:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions=void 0;const i=n(26594),o=n(66828),s=n(25251),a=n(15925),c=n(12189),l=n(11642);let u=class{get all(){return o.extensions.all}get onDidChange(){return o.extensions.onDidChange}getExtension(e){return o.extensions.getExtension(e)}async determineExtensionFromCallStack(){const e=(new Error).stack;if(e){const t=this.getExtension(a.JVSC_EXTENSION_ID).extensionUri.toString().toLowerCase(),n=e.split("\n").map((e=>{const t=/\((.*)\)/.exec(e);if(t)return t[1]})).filter((e=>e&&e.toLowerCase().startsWith("http"))).filter((e=>e&&!e.toLowerCase().startsWith(t)));(0,c.parseStack)(new Error("Ex")).forEach((e=>{const r=e.getFileName();r&&!r.toLowerCase().startsWith(t)&&n.push(r)}));for(const e of n){const t=this.all.find((t=>t.id!==a.JVSC_EXTENSION_ID&&e.startsWith(t.extensionUri.toString())));if(t)return{extensionId:t.id,displayName:t.packageJSON.displayName}}(0,l.traceError)("Unable to determine the caller of the extension API for trace stack.",e)}return{extensionId:a.unknownExtensionId,displayName:s.DataScience.unknownPackage}}};t.Extensions=u,t.Extensions=u=r([(0,i.injectable)()],u)},94106:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeNotebook=void 0;const o=n(26594),s=n(66828),a=n(42080),c=n(43138),l=n(85446),u=n(10053);let d=class{get onDidCloseNotebookDocument(){return this._onDidCloseNotebookDocument.event}get onDidChangeNotebookCellExecutionState(){return s.notebooks.onDidChangeNotebookCellExecutionState}get notebookDocuments(){return s.workspace.notebookDocuments}get notebookEditors(){return s.window.visibleNotebookEditors}get activeNotebookEditor(){return s.window.activeNotebookEditor}constructor(e,t){this.env=e,this.diposables=t,this._onDidCloseNotebookDocument=new s.EventEmitter,this.onDidChangeNotebookEditorSelection=s.window.onDidChangeNotebookEditorSelection,this.onDidChangeActiveNotebookEditor=s.window.onDidChangeActiveNotebookEditor,this.onDidOpenNotebookDocument=s.workspace.onDidOpenNotebookDocument,s.workspace.onDidCloseNotebookDocument((e=>this._onDidCloseNotebookDocument.fire(e)),this,this.diposables),this.onDidChangeVisibleNotebookEditors=s.window.onDidChangeVisibleNotebookEditors,this.onDidSaveNotebookDocument=s.workspace.onDidSaveNotebookDocument}async openNotebookDocument(e,t){return"string"==typeof e?s.workspace.openNotebookDocument(e,t):s.workspace.openNotebookDocument(e)}async showNotebookDocument(e,t){return s.window.showNotebookDocument(e,t)}registerNotebookSerializer(e,t,n){return s.workspace.registerNotebookSerializer(e,t,n)}createNotebookController(e,t,n,r,i,o){return s.notebooks.createNotebookController(e,t,n,r,i)}async closeActiveNotebooks(){const e=new Set(this.notebookDocuments);for(;s.window.activeNotebookEditor;)e.add(s.window.activeNotebookEditor.notebook),await s.commands.executeCommand("workbench.action.revertAndCloseActiveEditor"),await(0,c.sleep)(10);e.forEach((e=>this._onDidCloseNotebookDocument.fire(e)))}};t.VSCodeNotebook=d,r([(0,l.testOnlyMethod)()],d.prototype,"closeActiveNotebooks",null),t.VSCodeNotebook=d=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IApplicationEnvironment)),i(1,(0,o.inject)(a.IDisposableRegistry))],d)},10053:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEncryptedStorage=t.IVSCodeNotebook=t.IClipboard=t.ILanguageService=t.IWebviewViewProvider=t.IWebviewPanelProvider=t.IWebviewPanel=t.IWebviewView=t.IWebview=t.IWebviewViewMessageListener=t.IWebviewPanelMessageListener=t.IApplicationEnvironment=t.IDebugService=t.ITerminalManager=t.IWorkspaceService=t.IDocumentManager=t.ICommandManager=t.IApplicationShell=void 0,t.IApplicationShell=Symbol("IApplicationShell"),t.ICommandManager=Symbol("ICommandManager"),t.IDocumentManager=Symbol("IDocumentManager"),t.IWorkspaceService=Symbol("IWorkspaceService"),t.ITerminalManager=Symbol("ITerminalManager"),t.IDebugService=Symbol("IDebugManager"),t.IApplicationEnvironment=Symbol("IApplicationEnvironment"),t.IWebviewPanelMessageListener=Symbol("IWebviewPanelMessageListener"),t.IWebviewViewMessageListener=Symbol("IWebviewViewMessageListener"),t.IWebview=Symbol("IWebview"),t.IWebviewView=Symbol("IWebviewView"),t.IWebviewPanel=Symbol("IWebviewPanel"),t.IWebviewPanelProvider=Symbol("IWebviewPanelProvider"),t.IWebviewViewProvider=Symbol("IWebviewViewProvider"),t.ILanguageService=Symbol("ILanguageService"),t.IClipboard=Symbol("IClipboard"),t.IVSCodeNotebook=Symbol("IVSCodeNotebook"),t.IEncryptedStorage=Symbol("IEncryptedStorage")},90536:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseWorkspaceService=void 0;const s=o(n(15948)),a=n(66828),c=n(72728);t.BaseWorkspaceService=class{get onDidChangeConfiguration(){return a.workspace.onDidChangeConfiguration}get rootFolder(){const e=Array.isArray(a.workspace.workspaceFolders)&&a.workspace.workspaceFolders.length>0?a.workspace.workspaceFolders[0]:void 0;if(e)return e.uri}get workspaceFolders(){return a.workspace.workspaceFolders}get onDidChangeWorkspaceFolders(){return a.workspace.onDidChangeWorkspaceFolders}get hasWorkspaceFolders(){return Array.isArray(a.workspace.workspaceFolders)&&a.workspace.workspaceFolders.length>0}get workspaceFile(){return a.workspace.workspaceFile}getConfiguration(e,t){return a.workspace.getConfiguration(e,t||null)}getWorkspaceFolder(e){return e?a.workspace.getWorkspaceFolder(e):void 0}asRelativePath(e,t){return a.workspace.asRelativePath(e,t)}get isTrusted(){return a.workspace.isTrusted}get onDidGrantWorkspaceTrust(){return a.workspace.onDidGrantWorkspaceTrust}createFileSystemWatcher(e,t,n,r){return a.workspace.createFileSystemWatcher(e,n,n,r)}findFiles(e,t,n,r){return a.workspace.findFiles(e,t,n,r)}getWorkspaceFolderIdentifier(e,t=""){const n=e?a.workspace.getWorkspaceFolder(e):a.workspace.workspaceFolders?a.workspace.workspaceFolders[0]:void 0;return n?s.normalize((0,c.getOSType)()===c.OSType.Windows?n.uri.path.toUpperCase():n.uri.path):t}}},78163:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceService=void 0;const a=n(26594),c=n(90536),l=s(n(52859)),u=n(35412);let d=class extends c.BaseWorkspaceService{async computeWorkingDirectory(e){if(e){const t=(0,u.getFilePath)(e);return t.includes(".")?(0,u.getFilePath)(l.dirname(e)):t}return(e=this.getWorkspaceFolder(e)?.uri||this.rootFolder)?(0,u.getFilePath)(e):"."}};t.WorkspaceService=d,t.WorkspaceService=d=o([(0,a.injectable)()],d)},68778:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncDisposableRegistry=void 0;const i=n(26594);let o=class{constructor(){this._list=[]}async dispose(){const e=this._list.map((e=>e.dispose()));await Promise.all(e),this._list=[]}push(e){e&&this._list.push(e)}get list(){return this._list}};t.AsyncDisposableRegistry=o,t.AsyncDisposableRegistry=o=r([(0,i.injectable)()],o)},84395:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OldCacheCleaner=void 0;const o=n(58681),s=n(10053),a=n(42080),c=n(26594),l=n(35412),u=["currentServerHash","connectToLocalKernelsOnly","JUPYTER_LOCAL_KERNELSPECS","JUPYTER_LOCAL_KERNELSPECS_V1","JUPYTER_LOCAL_KERNELSPECS_V2","JUPYTER_LOCAL_KERNELSPECS_V3","JUPYTER_REMOTE_KERNELSPECS","JUPYTER_REMOTE_KERNELSPECS_V1","JUPYTER_REMOTE_KERNELSPECS_V2","JUPYTER_REMOTE_KERNELSPECS_V3","JUPYTER_LOCAL_KERNELSPECS_V4","JUPYTER_REMOTE_KERNELSPECS_V4-","LOCAL_KERNEL_SPECS_CACHE_KEY_V_2022_10","LOCAL_KERNEL_PYTHON_AND_RELATED_SPECS_CACHE_KEY_V_2022_10","user-jupyter-server-uri-list-v2"];let d=class{constructor(e,t,n,r,i){this.workspace=e,this.globalState=t,this.crypto=n,this.appEnv=r,this.workspaceState=i}activate(){this.removeOldCachedItems().then(o.noop,o.noop)}async removeOldCachedItems(){await Promise.all([await this.getUriAccountKey()].concat(u).filter((e=>void 0!==this.globalState.get(e,void 0))).map((e=>this.globalState.update(e,void 0).then(o.noop,o.noop))));const e=this.workspaceState.keys().filter((e=>e.startsWith("LAST_EXECUTED_CELL_")&&!e.startsWith("LAST_EXECUTED_CELL_V2_")));await Promise.all(e.map((e=>this.workspaceState.update(e,void 0)))),await Promise.all(u.map((e=>this.globalState.keys().filter((t=>t.startsWith(e))).map((e=>this.globalState.update(e,void 0).then(o.noop,o.noop))))).flat())}async getUriAccountKey(){return this.workspace.rootFolder?this.crypto.createHash((0,l.getFilePath)(this.workspace.rootFolder),"SHA-512"):this.workspace.workspaceFile?this.crypto.createHash((0,l.getFilePath)(this.workspace.workspaceFile),"SHA-512"):this.appEnv.machineId}};t.OldCacheCleaner=d,t.OldCacheCleaner=d=r([(0,c.injectable)(),i(0,(0,c.inject)(s.IWorkspaceService)),i(1,(0,c.inject)(a.IMemento)),i(1,(0,c.named)(a.GLOBAL_MEMENTO)),i(2,(0,c.inject)(a.ICryptoUtils)),i(3,(0,c.inject)(s.IApplicationEnvironment)),i(4,(0,c.inject)(a.IMemento)),i(4,(0,c.named)(a.WORKSPACE_MEMENTO))],d)},6491:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cancellation=t.wrapCancellationTokens=t.raceCancellationError=t.raceCancellation=t.isCancellationError=void 0;const r=n(66828),i=n(20397),o=n(43138),s=n(25251);var a;t.isCancellationError=function(e,t=!1){return!("object"!=typeof e||!e)&&(e instanceof r.CancellationError||!(!t||!e.message.includes("Canceled")&&!e.message.includes(s.Common.canceled)))},t.raceCancellation=async function(e,t,...n){let r;return(0,o.isPromiseLike)(t)?(n.push(t),r=void 0):r=t,e?e.isCancellationRequested?r:new Promise(((t,i)=>{if(e.isCancellationRequested)return t(r);const o=e.onCancellationRequested((()=>{o.dispose(),t(r)}));Promise.race(n).then(t,i).finally((()=>o.dispose()))})):await Promise.race(n)},t.raceCancellationError=async function(e,...t){if(!e)return Promise.race(t);if(e.isCancellationRequested)throw new r.CancellationError;return new Promise(((n,i)=>{if(e.isCancellationRequested)return i(new r.CancellationError);const o=e.onCancellationRequested((()=>{o.dispose(),i(new r.CancellationError)}));Promise.race(t).then(n,i).finally((()=>o.dispose()))}))},t.wrapCancellationTokens=function(...e){const t=new r.CancellationTokenSource,n=[];for(const r of e)r&&(r.isCancellationRequested&&t.cancel(),r.onCancellationRequested((()=>t.cancel()),void 0,n));const o=t.dispose.bind(t);return t.dispose=()=>{o(),(0,i.dispose)(n)},t},function(e){e.throwIfCanceled=function(e){if(e?.isCancellationRequested)throw new r.CancellationError}}(a||(t.Cancellation=a={}))},44998:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigMigration=void 0;const i=n(66828),o=n(11642);class s{constructor(e){this.jupyterConfig=e}async migrateSettings(){const e=[];for(let t of Object.keys(r.migratedSettings))e.push(...this.migrateSetting(t,r.migratedSettings[t]));try{await Promise.all(e)}catch(e){a(e)}}migrateSetting(e,t){const n=this.jupyterConfig.inspect(e),r=this.jupyterConfig.inspect(t),o=[];if(void 0!==n?.workspaceValue){let s=Promise.resolve();void 0===r?.workspaceValue&&(s=this.jupyterConfig.update(t,n.workspaceValue,i.ConfigurationTarget.Workspace)),o.push(s.then((()=>this.jupyterConfig.update(e,void 0,i.ConfigurationTarget.Workspace)),a))}if(void 0!==n?.workspaceFolderValue){let s=Promise.resolve();void 0===r?.workspaceFolderValue&&(s=this.jupyterConfig.update(t,n.workspaceFolderValue,i.ConfigurationTarget.WorkspaceFolder)),o.push(s.then((()=>this.jupyterConfig.update(e,void 0,i.ConfigurationTarget.WorkspaceFolder)),a))}if(void 0!==n?.globalValue){let s=Promise.resolve();void 0===r?.globalValue&&(s=this.jupyterConfig.update(t,n.globalValue,i.ConfigurationTarget.Global)),o.push(s.then((()=>this.jupyterConfig.update(e,void 0,i.ConfigurationTarget.Global)),a))}return o}}function a(e){(0,o.traceWarning)("Error migrating Jupyter configuration",e)}t.ConfigMigration=s,r=s,s.migratedSettings={interactiveWindowMode:"interactiveWindow.creationMode",interactiveWindowViewColumn:"interactiveWindow.viewColumn",sendSelectionToInteractiveWindow:"interactiveWindow.textEditor.executeSelection",magicCommandsAsComments:"interactiveWindow.textEditor.magicCommandsAsComments",enableAutoMoveToNextCell:"interactiveWindow.textEditor.autoMoveToNextCell",newCellOnRunLast:"interactiveWindow.textEditor.autoAddNewCell",pythonCellFolding:"interactiveWindow.textEditor.cellFolding",enableCellCodeLens:"interactiveWindow.codeLens.enable",addGotoCodeLenses:"interactiveWindow.codeLens.enableGotoCell",codeLenses:"interactiveWindow.codeLens.commands",debugCodeLenses:"interactiveWindow.codeLes.debugCommands",codeRegularExpression:"interactiveWindow.cellMarker.codeRegex",markdownRegularExpression:"interactiveWindow.cellMarker.markdownRegex",decorateCells:"interactiveWindow.cellMarker.decorateCells",defaultCellMarker:"interactiveWindow.cellMarker.default"},s.fullSettingIds={...r.migratedSettings}},23562:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSettings=void 0;const i=n(66828),o=n(99203),s=n(15925),a=n(85446),c=n(44998),l=n(58681);class u{get onDidChange(){return this._changeEmitter.event}constructor(e,t,n,r){this._systemVariablesCtor=t,this._type=n,this._workspace=r,this.logging={level:"error"},this.allowUnauthorizedRemoteConnection=!1,this.jupyterInterruptTimeout=1e4,this.jupyterLaunchTimeout=6e4,this.jupyterLaunchRetries=3,this.notebookFileRoot="",this.useDefaultConfigForJupyter=!1,this.searchForJupyter=!1,this.sendSelectionToInteractiveWindow=!1,this.markdownRegularExpression="",this.codeRegularExpression="",this.errorBackgroundColor="",this.ignoreVscodeTheme=!1,this.variableExplorerExclude="",this.decorateCells="currentCell",this.enableCellCodeLens=!1,this.askForLargeDataFrames=!1,this.enableAutoMoveToNextCell=!1,this.askForKernelRestart=!1,this.generateSVGPlots=!1,this.codeLenses="",this.debugCodeLenses="",this.debugpyDistPath="",this.stopOnFirstLineWhileDebugging=!1,this.magicCommandsAsComments=!1,this.pythonExportMethod="direct",this.stopOnError=!1,this.remoteDebuggerPort=0,this.addGotoCodeLenses=!1,this.runStartupCommands=[],this.debugJustMyCode=!1,this.defaultCellMarker="",this.themeMatplotlibPlots=!1,this.variableQueries=[],this.disableJupyterAutoStart=!1,this.enablePythonKernelLogging=!1,this.jupyterCommandLineArguments=[],this.widgetScriptSources=[],this.interactiveWindowMode="multiple",this.pythonCellFolding=!0,this.interactiveWindowViewColumn="secondGroup",this.disableZMQSupport=!1,this.forceIPyKernelDebugger=!1,this.verboseLogging=!1,this.showVariableViewWhenDebugging=!0,this.newCellOnRunLast=!0,this.pythonCompletionTriggerCharacters="",this.logKernelOutputSeparately=!1,this.development=!1,this.poetryPath="",this.excludeUserSitePackages=!1,this.enableExtendedKernelCompletions=!1,this.useOldKernelResolve=!1,this.variableTooltipFields={python:{Tensor:["shape","dtype","device"]}},this._changeEmitter=new i.EventEmitter,this._disposables=[],this._workspaceRoot=e,this.initialize(),r&&!1===r.isTrusted&&(this.disableJupyterAutoStart=!0)}static getInstance(e,t,n,r){const i=u.getSettingsUriAndTarget(e,r).uri,o=i?i.path:"";let s=u.jupyterSettings.get(o);return s?"web"===s._type&&"node"===n&&(s._systemVariablesCtor=t,s._type=n):(s=new u(i,t,n,r),u.jupyterSettings.set(o,s)),s}static getSettingsUriAndTarget(e,t){const n=e?t.getWorkspaceFolder(e):void 0;let r=n?n.uri:void 0;return!r&&Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0&&(r=t.workspaceFolders[0].uri),{uri:r,target:r?i.ConfigurationTarget.WorkspaceFolder:i.ConfigurationTarget.Global}}static dispose(){if(!(0,s.isTestExecution)())throw new Error("Dispose can only be called from unit tests");u.jupyterSettings.forEach((e=>e&&e.dispose())),u.jupyterSettings.clear()}dispose(){this._disposables.forEach((e=>e&&e.dispose())),this._disposables=[]}createSystemVariables(e){return new this._systemVariablesCtor(e,this._workspaceRoot,this._workspace)}toJSON(){const e={};return this.getSerializableKeys().forEach((t=>e[t]=this[t])),e}update(e,t){const n=this.createSystemVariables(void 0),r=n.resolveAny(e.get("logging"));r&&(r.level=function(e){switch(e){case"info":return o.LogLevel.Info;case"warn":return o.LogLevel.Warn;case"off":return"off";case"debug":return o.LogLevel.Debug;case"verbose":return o.LogLevel.Trace;default:return o.LogLevel.Error}}(r.level),this.logging?Object.assign(this.logging,r):this.logging=r);const i=n.resolveAny(e.get("experiments"));this.experiments?Object.assign(this.experiments,i):this.experiments=i,this.experiments=this.experiments?this.experiments:{enabled:!0,optInto:[],optOutFrom:[]};const s=(e,t)=>{const r=c.ConfigMigration.fullSettingIds[e],i=r&&void 0!==t.get(r)?t.get(r):t.get(e),o=n.resolveAny(i);("variableTooltipFields"!==e||o)&&(this[e]=o)};this.getSerializableKeys().filter((e=>"experiments"!==e&&"logging"!==e&&"kernelPickerType"!==e)).forEach((t=>s(t,e))),t&&s("poetryPath",t)}onWorkspaceFoldersChanged(){const e=this._workspace.workspaceFolders.map((e=>e.uri.path)),t=Array.from(u.jupyterSettings.keys()).filter((t=>e.indexOf(t)<0));if(t.length>0)for(const e of t)u.jupyterSettings.delete(e)}initialize(){const e=()=>{const e=this._workspace.getConfiguration("jupyter",this._workspaceRoot),t=this._workspace.getConfiguration("python",this._workspaceRoot);this.update(e,t),this.debounceChangeNotification()};this._disposables.push(this._workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this)),this._disposables.push(this._workspace.onDidChangeConfiguration((t=>{t.affectsConfiguration("jupyter")&&e(),t.affectsConfiguration("python.poetryPath")&&e()})));const t=this._workspace.getConfiguration("jupyter",this._workspaceRoot),n=this._workspace.getConfiguration("python",this._workspaceRoot);t&&(this.update(t,n),this.migrateSettings(t).catch(l.noop))}async migrateSettings(e){const t=new c.ConfigMigration(e);await t.migrateSettings()}debounceChangeNotification(){this._changeEmitter.fire()}fireChangeNotification(){this._changeEmitter.fire()}getSerializableKeys(){return Object.getOwnPropertyNames(this).filter((e=>!e.startsWith("_")))}}t.JupyterSettings=u,u.jupyterSettings=new Map,r([(0,a.debounceSync)(1)],u.prototype,"debounceChangeNotification",null)},89312:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseConfigurationService=void 0;const r=n(66828),i=n(10053),o=n(23562),s=n(15925);t.BaseConfigurationService=class{constructor(e){this.serviceContainer=e,this.workspaceService=this.serviceContainer.get(i.IWorkspaceService)}async updateSectionSetting(e,t,n,i,s){let a={uri:i,target:s||r.ConfigurationTarget.WorkspaceFolder};"jupyter"===e&&s!==r.ConfigurationTarget.Global&&(a=o.JupyterSettings.getSettingsUriAndTarget(i,this.workspaceService));const c=this.workspaceService.getConfiguration(e,a.uri),l=c.inspect(t);void 0!==l&&(s===r.ConfigurationTarget.Global&&l.globalValue===n||s===r.ConfigurationTarget.Workspace&&l.workspaceValue===n||s===r.ConfigurationTarget.WorkspaceFolder&&l.workspaceFolderValue===n)||(await c.update(t,n,s),s&&await this.verifySetting(c,s,t,n))}async updateSetting(e,t,n,r){return this.updateSectionSetting("jupyter",e,t,n,r)}async verifySetting(e,t,n,i){if((0,s.isTestExecution)()&&!(0,s.isUnitTestExecution)()){let o=0;do{const s=e.inspect(n);if(!s&&void 0===i)break;if(s&&void 0!==i&&(t===r.ConfigurationTarget.Global?s.globalValue:t===r.ConfigurationTarget.Workspace?s.workspaceValue:s.workspaceFolderValue)===i)break;await new Promise((e=>setTimeout(e,250))),o+=1}while(o<20)}}}},89316:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationService=void 0;const o=n(26594),s=n(41778),a=n(23562),c=n(471),l=n(89312);let u=class extends l.BaseConfigurationService{constructor(e){super(e)}getSettings(e){return a.JupyterSettings.getInstance(e,c.SystemVariables,"web",this.workspaceService)}};t.ConfigurationService=u,t.ConfigurationService=u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],u)},15925:function(e,t,n){"use strict";var r,i,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.unknownExtensionId=t.WIDGET_VERSION_NON_PYTHON_KERNELS=t.WIDGET_STATE_MIMETYPE=t.WIDGET_MIMETYPE=t.defaultNotebookFormat=t.DataScienceStartupTime=t.JupyterCommands=t.Telemetry=t.RegExpValues=t.EditorContexts=t.CodeLensCommands=t.Commands=t.CommandSource=t.VSCodeKnownNotebookLanguages=t.jupyterLanguageToMonacoLanguageMapping=t.LanguagesSupportedByPythonkernel=t.PylanceExtension=t.RendererExtension=t.PythonExtension=t.DefaultTheme=t.JUPYTER_OUTPUT_CHANNEL=t.CodeSnippets=t.Identifiers=t.setUnitTestExecution=t.isUnitTestExecution=t.setTestExecution=t.isTestExecution=t.setCI=t.isCI=t.Settings=t.HelpLinks=t.STANDARD_OUTPUT_CHANNEL=t.AppinsightsKey=t.JUPYTER_HUB_EXTENSION_ID=t.JVSC_EXTENSION_ID=t.NOTEBOOK_SELECTOR=t.InteractiveWindowView=t.JupyterNotebookView=t.InteractiveInputScheme=t.PYTHON=t.PYTHON_CELL=t.PYTHON_FILE_ANY_SCHEME=t.PYTHON_FILE=t.PYTHON_UNTITLED=t.NotebookCellScheme=t.MARKDOWN_LANGUAGE=t.PYTHON_LANGUAGE=void 0,t.PYTHON_LANGUAGE="python",t.MARKDOWN_LANGUAGE="markdown",t.NotebookCellScheme="vscode-notebook-cell",t.PYTHON_UNTITLED={scheme:"untitled",language:t.PYTHON_LANGUAGE},t.PYTHON_FILE={scheme:"file",language:t.PYTHON_LANGUAGE},t.PYTHON_FILE_ANY_SCHEME={language:t.PYTHON_LANGUAGE},t.PYTHON_CELL={scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE},t.PYTHON=[t.PYTHON_UNTITLED,t.PYTHON_FILE,t.PYTHON_CELL],t.InteractiveInputScheme="vscode-interactive-input",t.JupyterNotebookView="jupyter-notebook",t.InteractiveWindowView="interactive",t.NOTEBOOK_SELECTOR=[{language:t.PYTHON_LANGUAGE,notebookType:t.JupyterNotebookView},{language:t.PYTHON_LANGUAGE,notebookType:t.InteractiveWindowView},{scheme:t.InteractiveInputScheme,language:t.PYTHON_LANGUAGE},{scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE}],t.JVSC_EXTENSION_ID="ms-toolsai.jupyter",t.JUPYTER_HUB_EXTENSION_ID="ms-toolsai.jupyter-hub",t.AppinsightsKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",t.STANDARD_OUTPUT_CHANNEL="STANDARD_OUTPUT_CHANNEL",s(n(91083),t),function(e){e.PythonInteractiveHelpLink="https://aka.ms/pyaiinstall",e.JupyterDataRateHelpLink="https://aka.ms/AA5ggm0"}(r||(t.HelpLinks=r={})),function(e){e.JupyterServerLocalLaunch="local",e.JupyterServerRemoteLaunch="remote",e.JupyterServerUriList="jupyter.jupyterServer.uriList",e.JupyterServerRemoteLaunchUriListKey="remote-uri-list",e.JupyterServerRemoteLaunchUriSeparator="\r",e.JupyterServerRemoteLaunchNameSeparator="\n",e.JupyterServerRemoteLaunchUriEqualsDisplayName="same",e.JupyterServerRemoteLaunchService=t.JVSC_EXTENSION_ID,e.JupyterServerUriListMax=10,e.IntellisenseTimeout=2e3}(i||(t.Settings=i={})),t.isCI=!1,t.setCI=function(e){t.isCI=e};let a=!1;t.isTestExecution=function(){return a||l()},t.setTestExecution=function(e){a=e};let c=!1;function l(){return c}var u,d,h,p,f,g,m,v,y;t.isUnitTestExecution=l,t.setUnitTestExecution=function(e){c=e},function(e){e.GeneratedThemeName="ipython-theme",e.RawPurpose="raw",e.MatplotLibDefaultParams="_VSCode_defaultMatplotlib_Params",e.MatplotLibFigureFormats="_VSCode_matplotLib_FigureFormats",e.DefaultCodeCellMarker="# %%",e.DefaultCommTarget="jupyter.widget",e.ALL_VARIABLES="ALL_VARIABLES",e.KERNEL_VARIABLES="KERNEL_VARIABLES",e.DEBUGGER_VARIABLES="DEBUGGER_VARIABLES",e.PYTHON_VARIABLES_REQUESTER="PYTHON_VARIABLES_REQUESTER",e.MULTIPLEXING_DEBUGSERVICE="MULTIPLEXING_DEBUGSERVICE",e.RUN_BY_LINE_DEBUGSERVICE="RUN_BY_LINE_DEBUGSERVICE",e.REMOTE_URI="https://remote/",e.REMOTE_URI_ID_PARAM="id",e.REMOTE_URI_HANDLE_PARAM="uriHandle",e.REMOTE_URI_EXTENSION_ID_PARAM="extensionId"}(u||(t.Identifiers=u={})),function(e){e.ImportIPython="{0}\nfrom IPython import get_ipython\n\n{1}",e.MatplotLibInit=`import matplotlib\n%matplotlib inline\n${u.MatplotLibDefaultParams} = dict(matplotlib.rcParams)\n`,e.AppendSVGFigureFormat=`import matplotlib_inline.backend_inline\n${u.MatplotLibFigureFormats} = matplotlib_inline.backend_inline.InlineBackend.instance().figure_formats\n${u.MatplotLibFigureFormats}.add('svg')\nmatplotlib_inline.backend_inline.set_matplotlib_formats(*${u.MatplotLibFigureFormats})`,e.UpdateCWDAndPath='import os as _VSCODE_os\nimport sys as _VSCODE_sys\n%cd "{0}"\nif _VSCODE_os.getcwd() not in _VSCODE_sys.path:\n    _VSCODE_sys.path.insert(0, _VSCODE_os.getcwd())\n\ndel _VSCODE_sys\ndel _VSCODE_os',e.DisableJedi="%config Completer.use_jedi = False"}(d||(t.CodeSnippets=d={})),t.JUPYTER_OUTPUT_CHANNEL="JUPYTER_OUTPUT_CHANNEL",t.DefaultTheme="Default Light+",t.PythonExtension="ms-python.python",t.RendererExtension="ms-toolsai.jupyter-renderers",t.PylanceExtension="ms-python.vscode-pylance",t.LanguagesSupportedByPythonkernel=["python","html","xml","javascript","markdown","latex","shellscript","bat","powershell","kusto","ruby","sql","perl","qsharp","raw"],t.jupyterLanguageToMonacoLanguageMapping=new Map([["bash","shellscript"],["c#","csharp"],["f#","fsharp"],["q#","qsharp"],["c++11","c++"],["c++12","c++"],["c++14","c++"]]),t.VSCodeKnownNotebookLanguages=["python","r","julia","c++","c#","f#","q#","powershell","java","scala","haskell","bash","cling","rust","sas","sos","ocaml"],function(e){e.auto="auto",e.ui="ui",e.codelens="codelens",e.commandPalette="commandpalette"}(h||(t.CommandSource=h={})),function(e){e.RunAllCells="jupyter.runallcells",e.RunAllCellsAbove="jupyter.runallcellsabove",e.RunCellAndAllBelow="jupyter.runcellandallbelow",e.RunAllCellsAbovePalette="jupyter.runallcellsabove.palette",e.RunCellAndAllBelowPalette="jupyter.runcurrentcellandallbelow.palette",e.RunToLine="jupyter.runtoline",e.RunFromLine="jupyter.runfromline",e.RunCell="jupyter.runcell",e.RunCurrentCell="jupyter.runcurrentcell",e.RunCurrentCellAdvance="jupyter.runcurrentcelladvance",e.CreateNewInteractive="jupyter.createnewinteractive",e.ImportNotebook="jupyter.importnotebook",e.ImportNotebookFile="jupyter.importnotebookfile",e.ExportFileAsNotebook="jupyter.exportfileasnotebook",e.ExportFileAndOutputAsNotebook="jupyter.exportfileandoutputasnotebook",e.InterruptKernel="jupyter.interruptkernel",e.RestartKernel="jupyter.restartkernel",e.RestartKernelAndRunAllCells="jupyter.restartkernelandrunallcells",e.RestartKernelAndRunUpToSelectedCell="jupyter.restartkernelandrunuptoselectedcell",e.NotebookEditorRemoveAllCells="jupyter.notebookeditor.removeallcells",e.NotebookEditorRunAllCells="jupyter.notebookeditor.runallcells",e.NotebookEditorRunSelectedCell="jupyter.notebookeditor.runselectedcell",e.NotebookEditorAddCellBelow="jupyter.notebookeditor.addcellbelow",e.ExpandAllCells="jupyter.expandallcells",e.CollapseAllCells="jupyter.collapseallcells",e.ExportOutputAsNotebook="jupyter.exportoutputasnotebook",e.ExecSelectionInInteractiveWindow="jupyter.execSelectionInteractive",e.RunFileInInteractiveWindows="jupyter.runFileInteractive",e.DebugFileInInteractiveWindows="jupyter.debugFileInteractive",e.AddCellBelow="jupyter.addcellbelow",e.DebugCurrentCellPalette="jupyter.debugcurrentcell.palette",e.DebugCell="jupyter.debugcell",e.DebugStepOver="jupyter.debugstepover",e.DebugContinue="jupyter.debugcontinue",e.DebugStop="jupyter.debugstop",e.RunCurrentCellAndAddBelow="jupyter.runcurrentcellandaddbelow",e.InsertCellBelowPosition="jupyter.insertCellBelowPosition",e.InsertCellBelow="jupyter.insertCellBelow",e.InsertCellAbove="jupyter.insertCellAbove",e.DeleteCells="jupyter.deleteCells",e.SelectCell="jupyter.selectCell",e.SelectCellContents="jupyter.selectCellContents",e.ExtendSelectionByCellAbove="jupyter.extendSelectionByCellAbove",e.ExtendSelectionByCellBelow="jupyter.extendSelectionByCellBelow",e.MoveCellsUp="jupyter.moveCellsUp",e.MoveCellsDown="jupyter.moveCellsDown",e.ChangeCellToMarkdown="jupyter.changeCellToMarkdown",e.ChangeCellToCode="jupyter.changeCellToCode",e.GotoNextCellInFile="jupyter.gotoNextCellInFile",e.GotoPrevCellInFile="jupyter.gotoPrevCellInFile",e.ScrollToCell="jupyter.scrolltocell",e.CreateNewNotebook="jupyter.createnewnotebook",e.ViewJupyterOutput="jupyter.viewOutput",e.ExportAsPythonScript="jupyter.exportAsPythonScript",e.ExportToHTML="jupyter.exportToHTML",e.ExportToPDF="jupyter.exportToPDF",e.Export="jupyter.export",e.NativeNotebookExport="jupyter.notebookeditor.export",e.LatestExtension="jupyter.latestExtension",e.EnableLoadingWidgetsFrom3rdPartySource="jupyter.enableLoadingWidgetScriptsFromThirdPartySource",e.NotebookEditorExpandAllCells="jupyter.notebookeditor.expandallcells",e.NotebookEditorCollapseAllCells="jupyter.notebookeditor.collapseallcells",e.EnableDebugLogging="jupyter.enableDebugLogging",e.ResetLoggingLevel="jupyter.resetLoggingLevel",e.ShowDataViewer="jupyter.showDataViewer",e.RefreshDataViewer="jupyter.refreshDataViewer",e.ClearSavedJupyterUris="jupyter.clearSavedJupyterUris",e.OpenVariableView="jupyter.openVariableView",e.OpenOutlineView="jupyter.openOutlineView",e.InteractiveClearAll="jupyter.interactive.clearAllCells",e.InteractiveGoToCode="jupyter.interactive.goToCode",e.InteractiveCopyCell="jupyter.interactive.copyCell",e.InteractiveExportAsNotebook="jupyter.interactive.exportasnotebook",e.InteractiveExportAs="jupyter.interactive.exportas",e.RunByLine="jupyter.runByLine",e.RunAndDebugCell="jupyter.runAndDebugCell",e.RunByLineNext="jupyter.runByLineNext",e.RunByLineStop="jupyter.runByLineStop",e.ReplayPylanceLog="jupyter.replayPylanceLog",e.ReplayPylanceLogStep="jupyter.replayPylanceLogStep",e.InstallPythonExtensionViaKernelPicker="jupyter.installPythonExtensionViaKernelPicker",e.InstallPythonViaKernelPicker="jupyter.installPythonViaKernelPicker",e.ContinueEditSessionInCodespace="jupyter.continueEditSessionInCodespace"}(p||(t.Commands=p={})),function(e){e.DefaultDesignLenses=[p.RunCurrentCell,p.RunAllCellsAbove,p.DebugCell],e.DefaultDebuggingLenses=[p.DebugContinue,p.DebugStop,p.DebugStepOver],e.DebuggerCommands=[p.DebugContinue,p.DebugStop,p.DebugStepOver]}(f||(t.CodeLensCommands=f={})),function(e){e.HasCodeCells="jupyter.hascodecells",e.IsInteractiveActive="jupyter.isinteractiveactive",e.OwnsSelection="jupyter.ownsSelection",e.HaveNativeCells="jupyter.havenativecells",e.HaveNative="jupyter.havenative",e.IsNativeActive="jupyter.isnativeactive",e.IsInteractiveOrNativeActive="jupyter.isinteractiveornativeactive",e.IsPythonOrNativeActive="jupyter.ispythonornativeactive",e.IsPythonOrInteractiveActive="jupyter.ispythonorinteractiveeactive",e.IsPythonOrInteractiveOrNativeActive="jupyter.ispythonorinteractiveornativeeactive",e.CanRestartNotebookKernel="jupyter.notebookeditor.canrestartNotebookkernel",e.CanInterruptNotebookKernel="jupyter.notebookeditor.canInterruptNotebookKernel",e.CanRestartInteractiveWindowKernel="jupyter.interactive.canRestartNotebookKernel",e.CanInterruptInteractiveWindowKernel="jupyter.interactive.canInterruptNotebookKernel",e.RunByLineCells="jupyter.notebookeditor.runByLineCells",e.RunByLineDocuments="jupyter.notebookeditor.runByLineDocuments",e.DebugDocuments="jupyter.notebookeditor.debugDocuments",e.IsPythonNotebook="jupyter.ispythonnotebook",e.IsJupyterKernelSelected="jupyter.kernel.isjupyter",e.IsDataViewerActive="jupyter.dataViewerActive",e.HasNativeNotebookOrInteractiveWindowOpen="jupyter.hasNativeNotebookOrInteractiveWindowOpen",e.ZmqAvailable="jupyter.zmqavailable",e.ReplayLogLoaded="jupyter.replayLogLoaded",e.KernelSource="jupyter.kernelSource"}(g||(t.EditorContexts=g={})),function(e){e.PythonCellMarker=/^(#\s*%%|#\s*\<codecell\>|#\s*In\[\d*?\]|#\s*In\[ \])/,e.PythonMarkdownCellMarker=/^(#\s*%%\s*\[markdown\]|#\s*\<markdowncell\>)/,e.UrlPatternRegEx="(?<PREFIX>https?:\\/\\/)((\\(.+\\s+or\\s+(?<IP>.+)\\))|(?<LOCAL>[^\\s]+))(?<REST>:.+)",e.HttpPattern=/https?:\/\//,e.ShapeSplitterRegEx=/.*,\s*(\d+).*/,e.SvgHeightRegex=/(\<svg.*height=\")(.*?)\"/,e.SvgWidthRegex=/(\<svg.*width=\")(.*?)\"/,e.SvgSizeTagRegex=/\<svg.*tag=\"sizeTag=\{(.*),\s*(.*)\}\"/}(m||(t.RegExpValues=m={})),function(e){e.ImportNotebook="DATASCIENCE.IMPORT_NOTEBOOK",e.RunCurrentCell="DATASCIENCE.RUN_CURRENT_CELL",e.RunCurrentCellAndAdvance="DATASCIENCE.RUN_CURRENT_CELL_AND_ADVANCE",e.RunAllCells="DATASCIENCE.RUN_ALL_CELLS",e.RunAllCellsAbove="DATASCIENCE.RUN_ALL_CELLS_ABOVE",e.RunCellAndAllBelow="DATASCIENCE.RUN_CELL_AND_ALL_BELOW",e.RunCurrentCellAndAddBelow="DATASCIENCE.RUN_CURRENT_CELL_AND_ADD_BELOW",e.InsertCellBelowPosition="DATASCIENCE.RUN_INSERT_CELL_BELOW_POSITION",e.InsertCellBelow="DATASCIENCE.RUN_INSERT_CELL_BELOW",e.InsertCellAbove="DATASCIENCE.RUN_INSERT_CELL_ABOVE",e.DeleteCells="DATASCIENCE.RUN_DELETE_CELLS",e.SelectCell="DATASCIENCE.RUN_SELECT_CELL",e.SelectCellContents="DATASCIENCE.RUN_SELECT_CELL_CONTENTS",e.ExtendSelectionByCellAbove="DATASCIENCE.RUN_EXTEND_SELECTION_BY_CELL_ABOVE",e.ExtendSelectionByCellBelow="DATASCIENCE.RUN_EXTEND_SELECTION_BY_CELL_BELOW",e.MoveCellsUp="DATASCIENCE.RUN_MOVE_CELLS_UP",e.MoveCellsDown="DATASCIENCE.RUN_MOVE_CELLS_DOWN",e.ChangeCellToMarkdown="DATASCIENCE.RUN_CHANGE_CELL_TO_MARKDOWN",e.ChangeCellToCode="DATASCIENCE.RUN_CHANGE_CELL_TO_CODE",e.GotoNextCellInFile="DATASCIENCE.GOTO_NEXT_CELL_IN_FILE",e.GotoPrevCellInFile="DATASCIENCE.GOTO_PREV_CELL_IN_FILE",e.RunSelectionOrLine="DATASCIENCE.RUN_SELECTION_OR_LINE",e.RunToLine="DATASCIENCE.RUN_TO_LINE",e.RunFromLine="DATASCIENCE.RUN_FROM_LINE",e.ExportPythonFileInteractive="DATASCIENCE.EXPORT_PYTHON_FILE",e.ExportPythonFileAndOutputInteractive="DATASCIENCE.EXPORT_PYTHON_FILE_AND_OUTPUT",e.ClickedExportNotebookAsQuickPick="DATASCIENCE.CLICKED_EXPORT_NOTEBOOK_AS_QUICK_PICK",e.ExportNotebookAs="DATASCIENCE.EXPORT_NOTEBOOK_AS",e.ExportNotebookAsCommand="DATASCIENCE.EXPORT_NOTEBOOK_AS_COMMAND",e.ExportNotebookAsFailed="DATASCIENCE.EXPORT_NOTEBOOK_AS_FAILED",e.StartedRemoteJupyterSessionWithBackingFile="DS_INTERNAL.JUPYTER_STARTED_SESSION_WITH_BACKING_FILE",e.ZMQSupport="DS_INTERNAL.JUPYTER_ZMQ_SUPPORT",e.ZMQSupportFailure="DS_INTERNAL.JUPYTER_ZMQ_SUPPORT_FAILURE",e.SelfCertsMessageEnabled="DATASCIENCE.SELFCERTSMESSAGEENABLED",e.SelfCertsMessageClose="DATASCIENCE.SELFCERTSMESSAGECLOSE",e.ShiftEnterBannerShown="DS_INTERNAL.SHIFTENTER_BANNER_SHOWN",e.EnableInteractiveShiftEnter="DATASCIENCE.ENABLE_INTERACTIVE_SHIFT_ENTER",e.DisableInteractiveShiftEnter="DATASCIENCE.DISABLE_INTERACTIVE_SHIFT_ENTER",e.StartShowDataViewer="DATASCIENCE.START_SHOW_DATA_EXPLORER",e.ShowDataViewer="DATASCIENCE.SHOW_DATA_EXPLORER",e.ShowDataViewerRowsLoaded="DATASCIENCE.SHOW_DATA_EXPLORER_ROWS_LOADED",e.FailedShowDataViewer="DATASCIENCE.FAILED_SHOW_DATA_EXPLORER",e.RefreshDataViewer="DATASCIENCE.REFRESH_DATA_VIEWER",e.RunFileInteractive="DATASCIENCE.RUN_FILE_INTERACTIVE",e.DebugFileInteractive="DATASCIENCE.DEBUG_FILE_INTERACTIVE",e.PandasNotInstalled="DS_INTERNAL.SHOW_DATA_NO_PANDAS",e.PandasTooOld="DS_INTERNAL.SHOW_DATA_PANDAS_TOO_OLD",e.PandasOK="DS_INTERNAL.SHOW_DATA_PANDAS_OK",e.PandasInstallCanceled="DS_INTERNAL.SHOW_DATA_PANDAS_INSTALL_CANCELED",e.DataScienceSettings="DS_INTERNAL.SETTINGS",e.VariableExplorerVariableCount="DS_INTERNAL.VARIABLE_EXPLORER_VARIABLE_COUNT",e.AddCellBelow="DATASCIENCE.ADD_CELL_BELOW",e.GetPasswordFailure="DS_INTERNAL.GET_PASSWORD_FAILURE",e.GetPasswordSuccess="DS_INTERNAL.GET_PASSWORD_SUCCESS",e.CheckPasswordJupyterHub="DS_INTERNAL.JUPYTER_HUB_PASSWORD",e.OpenPlotViewer="DATASCIENCE.OPEN_PLOT_VIEWER",e.DebugCurrentCell="DATASCIENCE.DEBUG_CURRENT_CELL",e.CodeLensAverageAcquisitionTime="DS_INTERNAL.CODE_LENS_ACQ_TIME",e.DocumentWithCodeCells="DS_INTERNAL.DOCUMENT_WITH_CODE_CELLS",e.PerceivedJupyterStartupNotebook="DS_INTERNAL.PERCEIVED_JUPYTER_STARTUP_NOTEBOOK",e.GetActivatedEnvironmentVariables="DS_INTERNAL.GET_ACTIVATED_ENV_VARIABLES",e.VariableExplorerFetchTime="DS_INTERNAL.VARIABLE_EXPLORER_FETCH_TIME",e.KernelSpec="DS_INTERNAL.JUPYTER_KERNEL_SPEC",e.CellOutputMimeType="DS_INTERNAL.CELL_OUTPUT_MIME_TYPE",e.JupyterApiUsage="DATASCIENCE.JUPYTER_API_USAGE",e.JupyterServerProviderResponseApi="DATASCIENCE.JUPYTER_SERVER_PROVIDER_RESPONSE_API",e.ExtensionCallerIdentification="DATASCIENCE.JUPYTER_EXTENSION_CALLER_IDENTIFICATION",e.JupyterKernelApiUsage="DATASCIENCE.JUPYTER_KERNEL_API_USAGE",e.JupyterKernelApiAccess="DATASCIENCE.JUPYTER_KERNEL_API_ACCESS",e.JupyterKernelStartupHook="DATASCIENCE.JUPYTER_KERNEL_STARTUP_HOOK",e.JupyterKernelSpecEnumeration="DATASCIENCE.JUPYTER_KERNEL_SPEC_FETCH_FAILURE",e.JupyterKernelHiddenViaFilter="DATASCIENCE.JUPYTER_KERNEL_HIDDEN_VIA_FILTER",e.JupyterKernelFilterUsed="DATASCIENCE.JUPYTER_KERNEL_FILTER_USED",e.DebugStepOver="DATASCIENCE.DEBUG_STEP_OVER",e.DebugContinue="DATASCIENCE.DEBUG_CONTINUE",e.DebugStop="DATASCIENCE.DEBUG_STOP",e.OpenNotebookAll="DATASCIENCE.NATIVE.OPEN_NOTEBOOK_ALL",e.UserInstalledJupyter="DATASCIENCE.USER_INSTALLED_JUPYTER",e.UserInstalledPandas="DATASCIENCE.USER_INSTALLED_PANDAS",e.UserDidNotInstallJupyter="DATASCIENCE.USER_DID_NOT_INSTALL_JUPYTER",e.UserDidNotInstallPandas="DATASCIENCE.USER_DID_NOT_INSTALL_PANDAS",e.KernelSpecLanguage="DATASCIENCE.KERNEL_SPEC_LANGUAGE",e.KernelLauncherPerf="DS_INTERNAL.KERNEL_LAUNCHER_PERF",e.AmbiguousGlobalKernelSpec="GLOBAL_PYTHON_KERNELSPEC",e.ActiveInterpreterListingPerf="DS_INTERNAL.ACTIVE_INTERPRETER_LISTING_PERF",e.PythonModuleInstall="DS_INTERNAL.PYTHON_MODULE_INSTALL",e.PythonNotInstalled="DS_INTERNAL.PYTHON_NOT_INSTALLED",e.PythonExtensionNotInstalled="DS_INTERNAL.PYTHON_EXTENSION_NOT_INSTALLED",e.PythonExtensionInstalledViaKernelPicker="DS_INTERNAL.PYTHON_EXTENSION_INSTALLED_VIA_KERNEL_PICKER",e.NewFileForInteractiveWindow="DS_INTERNAL.NEW_FILE_USED_IN_INTERACTIVE",e.CreateInteractiveWindow="DS_INTERNAL.CREATED_INTERACTIVE_WINDOW",e.IPyWidgetLoadSuccess="DS_INTERNAL.IPYWIDGET_LOAD_SUCCESS",e.IPyWidgetLoadFailure="DS_INTERNAL.IPYWIDGET_LOAD_FAILURE",e.IPyWidgetWidgetVersionNotSupportedLoadFailure="DS_INTERNAL.IPYWIDGET_WIDGET_VERSION_NOT_SUPPORTED_LOAD_FAILURE",e.IPyWidgetExtensionJsInfo="DS_INTERNAL.IPYWIDGET_EXTENSIONJS_INFO",e.IPyWidgetNbExtensionCopyTime="DS_INTERNAL.IPYWIDGET_TIME_TO_COPY_NBEXTENSIONS_DIR",e.HashedIPyWidgetNameUsed="DS_INTERNAL.IPYWIDGET_USED_BY_USER",e.VSCNotebookCellTranslationFailed="DS_INTERNAL.VSCNOTEBOOK_CELL_TRANSLATION_FAILED",e.HashedIPyWidgetScriptDiscoveryError="DS_INTERNAL.IPYWIDGET_DISCOVERY_ERRORED",e.DiscoverIPyWidgetNamesPerf="DS_INTERNAL.IPYWIDGET_DISCOVER_WIDGETS_NB_EXTENSIONS",e.IPyWidgetPromptToUseCDN="DS_INTERNAL.IPYWIDGET_PROMPT_TO_USE_CDN",e.IPyWidgetPromptToUseCDNSelection="DS_INTERNAL.IPYWIDGET_PROMPT_TO_USE_CDN_SELECTION",e.IPyWidgetOverhead="DS_INTERNAL.IPYWIDGET_OVERHEAD",e.IPyWidgetRenderFailure="DS_INTERNAL.IPYWIDGET_RENDER_FAILURE",e.IPyWidgetUnhandledMessage="DS_INTERNAL.IPYWIDGET_UNHANDLED_MESSAGE",e.RawKernelInfoResponse="DS_INTERNAL.RAWKERNEL_INFO_RESPONSE",e.RawKernelSessionStartNoIpykernel="DS_INTERNAL.RAWKERNEL_SESSION_NO_IPYKERNEL",e.RawKernelProcessLaunch="DS_INTERNAL.RAWKERNEL_PROCESS_LAUNCH",e.RawKernelSessionShutdown="DS_INTERNAL.RAWKERNEL_SESSION_SHUTDOWN",e.RawKernelSessionKernelProcessExited="DS_INTERNAL.RAWKERNEL_SESSION_KERNEL_PROCESS_EXITED",e.RawKernelSessionDisposed="DS_INTERNAL.RAWKERNEL_SESSION_DISPOSED",e.RunByLineVariableHover="DATASCIENCE.RUN_BY_LINE_VARIABLE_HOVER",e.InteractiveFileTooltipsPerf="DS_INTERNAL.INTERACTIVE_FILE_TOOLTIPS_PERF",e.NativeVariableViewLoaded="DS_INTERNAL.NATIVE_VARIABLE_VIEW_LOADED",e.NativeVariableViewMadeVisible="DS_INTERNAL.NATIVE_VARIABLE_VIEW_MADE_VISIBLE",e.NotebookStart="DATASCIENCE.NOTEBOOK_START",e.KernelStartFailureDueToMissingEnv="DATASCIENCE.KERNEL_START_FAILURE_MISSING_ENV",e.NotebookInterrupt="DATASCIENCE.NOTEBOOK_INTERRUPT",e.NotebookRestart="DATASCIENCE.NOTEBOOK_RESTART",e.SwitchKernel="DS_INTERNAL.SWITCH_KERNEL",e.KernelCount="DS_INTERNAL.KERNEL_COUNT",e.ExecuteCell="DATASCIENCE.EXECUTE_CELL",e.ResumeCellExecution="DATASCIENCE.RESUME_EXECUTE_CELL",e.CommandExecuted="DS_INTERNAL.COMMAND_EXECUTED",e.DataViewerSliceEnablementStateChanged="DATASCIENCE.DATA_VIEWER_SLICE_ENABLEMENT_STATE_CHANGED",e.DataViewerDataDimensionality="DATASCIENCE.DATA_VIEWER_DATA_DIMENSIONALITY",e.DataViewerSliceOperation="DATASCIENCE.DATA_VIEWER_SLICE_OPERATION",e.RecommendExtension="DATASCIENCE.RECOMMENT_EXTENSION",e.CreatePythonEnvironment="DATASCIENCE.CREATE_PYTHON_ENVIRONMENT",e.PythonVariableFetchingCodeFailure="DATASCIENCE.PYTHON_VARIABLE_FETCHING_CODE_FAILURE",e.InteractiveWindowDebugSetupCodeFailure="DATASCIENCE.INTERACTIVE_WINDOW_DEBUG_SETUP_CODE_FAILURE",e.KernelCrash="DATASCIENCE.KERNEL_CRASH",e.RunTest="DS_INTERNAL.RUNTEST",e.PreferredKernelExactMatch="DS_INTERNAL.PREFERRED_KERNEL_EXACT_MATCH",e.JupyterInstalled="JUPYTER_IS_INSTALLED",e.NoActiveKernelSession="DATASCIENCE.NO_ACTIVE_KERNEL_SESSION",e.DataViewerUsingInterpreter="DATAVIEWER.USING_INTERPRETER",e.DataViewerUsingKernel="DATAVIEWER.USING_KERNEL",e.DataViewerWebviewLoaded="DATAVIEWER.WEBVIEW_LOADED",e.PlotViewerWebviewLoaded="PLOTVIEWER.WEBVIEW_LOADED",e.EnterRemoteJupyterUrl="DATASCIENCE.ENTER_REMOTE_JUPYTER_URL"}(v||(t.Telemetry=v={})),function(e){e.NotebookCommand="notebook",e.ConvertCommand="nbconvert",e.KernelSpecCommand="kernelspec"}(y||(t.JupyterCommands=y={})),t.DataScienceStartupTime=Symbol("DataScienceStartupTime"),t.defaultNotebookFormat={major:4,minor:2},t.WIDGET_MIMETYPE="application/vnd.jupyter.widget-view+json",t.WIDGET_STATE_MIMETYPE="application/vnd.jupyter.widget-state+json",t.WIDGET_VERSION_NON_PYTHON_KERNELS=7,t.unknownExtensionId="unknown"},29444:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextKey=void 0,t.ContextKey=class{get value(){return this.lastValue}constructor(e,t){this.name=e,this.commandManager=t}async set(e){this.lastValue!==e&&(this.lastValue=e,await this.commandManager.executeCommand("setContext",this.name,this.lastValue))}}},46729:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.computeHash=t.CryptoUtils=void 0;const i=n(26594);let o=class{async createHash(e,t="SHA-256"){return l(e,t)}};t.CryptoUtils=o,t.CryptoUtils=o=r([(0,i.injectable)()],o);const s={};let a,c=!1;async function l(e,t){const n=e.includes("/")||e.includes("\\")||e.endsWith(".interactive");if(n&&s[e])return s[e];const r=await async function(e,t){const n=(new TextEncoder).encode(e),r=await a.subtle.digest({name:t},n);return Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(e,t);return n&&!c&&(Object.keys(s).length>1e4&&(c=!0),s[e]=r),r}a="object"==typeof window?window.crypto:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self.crypto:n(63826).webcrypto,t.computeHash=l},44974:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentService=void 0;const o=n(26594),s=n(59035),a=n(10053),c=n(15925),l=n(11642),u=n(42080),d=n(25251),h=n(42080),p=n(8209),f="vscode";let g=class{get enabled(){return this.settings.experiments.enabled&&!this.settings.experiments.optOutFrom.includes("All")}constructor(e,t,n,r){this.configurationService=e,this.workspace=t,this.appEnvironment=n,this.globalState=r,this._optInto=[],this._optOutFrom=[],this.settings=e.getSettings(void 0);const i=this.settings.experiments.optInto,o=this.settings.experiments.optOutFrom;if(this._optInto=i.filter((e=>!e.endsWith("control"))),this._optOutFrom=o.filter((e=>!e.endsWith("control"))),!this.enabled)return;let a;a="insiders"===this.appEnvironment.channel?s.TargetPopulation.Insiders:s.TargetPopulation.Public;const l=new p.ExperimentationTelemetry;this.experimentationService=(0,s.getExperimentationService)(c.JVSC_EXTENSION_ID,this.appEnvironment.packageJson.version,a,l,this.globalState)}async activate(){this.experimentationService&&this.enabled&&((0,l.traceVerbose)(`Experimentation service retrieved: ${this.experimentationService}`),await this.experimentationService.initializePromise,0===this.getFeatures().length&&await this.experimentationService.initialFetch,this.logExperiments())}inExperiment(e){return!(!this.experimentationService||!this.enabled)&&(!this._optOutFrom.includes(e.toString())&&(this._optInto.includes(e.toString())||this._optInto.includes("All")?(this.experimentationService.getTreatmentVariable(f,e),!0):e===h.Experiments.NewJupyterSession&&"insiders"===this.appEnvironment.channel||!0===this.experimentationService.getTreatmentVariable(f,e)))}async getExperimentValue(e){if(this.experimentationService&&this.enabled&&!this._optOutFrom.includes(e))return this.experimentationService.getTreatmentVariable(f,e)}getFeatures(){return this.globalState.get("VSCode.ABExp.FeatureData",{features:[]}).features}logExperiments(){const e=this.workspace.getConfiguration("telemetry");let t=!1;if(e&&!1===e.get("enableTelemetry")&&((0,l.traceInfo)("Telemetry is disabled"),t=!0),e&&"off"===e.get("telemetryLevel")&&((0,l.traceInfo)("Telemetry level is off"),t=!0),t&&(0,l.traceInfo)("Experiments are disabled, only manually opted experiments are active."),this._optOutFrom.includes("All"))return;if(this._optInto.includes("All"))return void(0,l.traceInfo)(d.Experiments.inGroup("All"));const n=new Set(this._optOutFrom),r=new Set(this._optInto);this._optOutFrom.filter((e=>"All"!==e)).forEach((e=>{(0,l.traceInfo)(d.Experiments.notInGroup(e))})),this._optInto.filter((e=>"All"!==e)).forEach((e=>{(0,l.traceInfo)(d.Experiments.inGroup(e))})),t||(this.getFeatures().forEach((e=>{!e.toLowerCase().startsWith("jupyter")&&e.toLowerCase()!==h.Experiments.NewJupyterSession.toLowerCase()||this._optOutFrom.includes(e)||this._optInto.includes(e)||(r.add(e),(0,l.traceInfo)(d.Experiments.inGroup(e)))})),r.has(h.Experiments.NewJupyterSession)||n.has(h.Experiments.NewJupyterSession)||(0,l.traceInfo)(d.Experiments.inGroup(h.Experiments.NewJupyterSession)))}};t.ExperimentService=g,t.ExperimentService=g=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IConfigurationService)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(a.IApplicationEnvironment)),i(3,(0,o.inject)(u.IMemento)),i(3,(0,o.named)(u.GLOBAL_MEMENTO))],g)},8209:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationTelemetry=void 0;const r=n(9959);t.ExperimentationTelemetry=class{setSharedProperty(e,t){(0,r.setSharedProperty)(e,t)}postEvent(e,t){const n={};t.forEach(((e,t)=>{n[t]=e})),(0,r.sendTelemetryEvent)(e,void 0,n)}}},8523:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureManager=void 0;const o=n(26594),s=n(10053),a=n(11642),c=n(58802),l=n(25251),u=n(42080),d=n(39054),h=[{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE",message:l.Deprecated.SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE,moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/309",setting:{setting:"formatting.formatOnSave",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE",message:l.Deprecated.SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE,moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/313",setting:{setting:"linting.lintOnTextChange",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES",message:l.Deprecated.SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES,moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/1704",setting:{setting:"autoComplete.preloadModules"}}];let p=class{get features(){return this._features}set features(e){this._features=e,this._onDidChangeFeatures.fire()}constructor(e,t,n,r){this.persistentStateFactory=e,this.cmdMgr=t,this.workspace=n,this.appShell=r,this._onDidChangeFeatures=new d.Emitter,this.onDidChangeFeatures=this._onDidChangeFeatures.event,this._features={},this.disposables=[],this._updateFeatures(),this.disposables.push(this.workspace.onDidChangeConfiguration((()=>{this._updateFeatures()})))}_updateFeatures(){this.features={}}dispose(){this.disposables.forEach((e=>e.dispose()))}initialize(){h.forEach(this.registerDeprecation.bind(this))}registerDeprecation(e){Array.isArray(e.commands)&&e.commands.forEach((t=>{this.disposables.push(this.cmdMgr.registerCommand(t,(()=>this.notifyDeprecation(e)),this))})),e.setting&&this.checkAndNotifyDeprecatedSetting(e)}async notifyDeprecation(e){const t=this.persistentStateFactory.createGlobalPersistentState(e.doNotDisplayPromptStateKey,!0);if(!t.value)return;const n="Learn more",r="Never show again",i=await this.appShell.showInformationMessage(e.message,n,r);if(i)switch(i){case n:(0,c.launch)(e.moreInfoUrl);break;case r:await t.updateValue(!1);break;default:throw new Error("Selected option not supported.")}}checkAndNotifyDeprecatedSetting(e){let t=!1;Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>0?this.workspace.workspaceFolders.forEach((n=>{t||(t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("jupyter",n.uri),e.setting))})):t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("jupyter"),e.setting),t&&this.notifyDeprecation(e).catch((e=>(0,a.traceVerbose)("Jupyter Extension: notifyDeprecation",e)))}isDeprecatedSettingAndValueUsed(e,t){if(!e.has(t.setting))return!1;const n=e.get(t.setting);return Array.isArray(t.values)&&0!==t.values.length?Array.isArray(t.values)&&0!==t.values.length?t.values.indexOf(e.get(t.setting))>=0:void 0!==n&&(!Array.isArray(n)||n.length>0):!Array.isArray(n)||n.length>0}};t.FeatureManager=p,t.FeatureManager=p=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IPersistentStateFactory)),i(1,(0,o.inject)(s.ICommandManager)),i(2,(0,o.inject)(s.IWorkspaceService)),i(3,(0,o.inject)(s.IApplicationShell))],p)},20397:(e,t)=>{"use strict";function n(e){return e?e.indexOf(" ")>=0&&!e.startsWith('"')&&!e.endsWith('"')?`"${e}"`:e.toString():e}Object.defineProperty(t,"__esModule",{value:!0}),t.stripCodicons=t.createPublicAPIProxy=t.format=t.dispose=t.trimQuotes=t.fileToCommandArgument=t.toCommandArgument=t.splitLines=void 0,t.splitLines=function(e,t={removeEmptyEntries:!0,trim:!0}){let n=(e=e||"").split(/\r?\n/g);return t&&t.trim&&(n=n.map((e=>e.trim()))),t&&t.removeEmptyEntries&&(n=n.filter((e=>e.length>0))),n},t.toCommandArgument=n,t.fileToCommandArgument=function(e){return e?n(e).replace(/\\/g,"/"):e},t.trimQuotes=function(e){return e?e.replace(/(^['"])|(['"]$)/g,""):e},t.dispose=function(e=[]){for(;e.length;){const t=e.shift();if(t)try{t.dispose()}catch{}}},t.format=function(e,...t){return e.replace(/{(\d+)}/g,((e,n)=>void 0===t[n]?e:t[n]))},t.createPublicAPIProxy=function(e,t){const n=t;return new Proxy(e,{has:(e,t)=>!n.includes(t)&&Reflect.has(e,t),ownKeys:e=>Reflect.ownKeys(e).filter((e=>!n.includes(e))),getOwnPropertyDescriptor(e,t){if(!n.includes(t))return Reflect.getOwnPropertyDescriptor(e,t)}})},t.stripCodicons=function(e){return e?e.replace(/\$\([a-z0-9\-]+?\)/gi,"").trim():e||""}},58802:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserService=t.launch=void 0;const i=n(26594),o=n(66828),s=n(58681);function a(e){o.env.openExternal(o.Uri.parse(e)).then(s.noop,s.noop)}t.launch=a;let c=class{launch(e){a(e)}};t.BrowserService=c,t.BrowserService=c=r([(0,i.injectable)()],c)},54443:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const c=n(26594),l=n(10053),u=n(11642),d=s(n(54098));let h=class{constructor(e){this.requestOptions={};const t=e.getConfiguration("http").get("proxy","");t&&(this.requestOptions={headers:{proxy:t}})}async downloadFile(e){return d.fetch(e,this.requestOptions)}async exists(e){try{return 200===(await this.downloadFile(e)).status}catch(t){return(0,u.traceVerbose)(`HttpClient - Failure checking for file ${e}: ${t}`),!1}}};t.HttpClient=h,t.HttpClient=h=o([(0,c.injectable)(),a(0,(0,c.inject)(l.IWorkspaceService))],h)},61885:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PersistentStateFactory=t.PersistentState=void 0;const o=n(26594),s=n(42080);class a{constructor(e,t,n,r){this.storage=e,this.key=t,this.defaultValue=n,this.expiryDurationMs=r}get value(){if(this.expiryDurationMs){const e=this.storage.get(this.key,{data:this.defaultValue});return!e||!e.expiry||e.expiry<Date.now()?this.defaultValue:e.data}return this.storage.get(this.key,this.defaultValue)}async updateValue(e){this.expiryDurationMs?await this.storage.update(this.key,{data:e,expiry:Date.now()+this.expiryDurationMs}):await this.storage.update(this.key,e)}}t.PersistentState=a;let c=class{constructor(e,t){this.globalState=e,this.workspaceState=t}createGlobalPersistentState(e,t,n){return new a(this.globalState,e,t,n)}createWorkspacePersistentState(e,t,n){return new a(this.workspaceState,e,t,n)}};t.PersistentStateFactory=c,t.PersistentStateFactory=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IMemento)),i(0,(0,o.named)(s.GLOBAL_MEMENTO)),i(1,(0,o.inject)(s.IMemento)),i(1,(0,o.named)(s.WORKSPACE_MEMENTO))],c)},59052:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isFileNotFoundError=void 0;const s=o(n(66828));var a;!function(e){const t=s.FileSystemError.FileNotFound().name,n=s.FileSystemError.FileExists().name,r=s.FileSystemError.FileIsADirectory().name,i=s.FileSystemError.FileNotADirectory().name,o=s.FileSystemError.NoPermissions().name,a=[t,n,r,i,o];e.isFileNotFound=function(e){return function(e,t){if(a.includes(e.name))return e.name===t}(e,t)}}(a||(a={})),t.isFileNotFoundError=function(e){const t=a.isFileNotFound(e);return void 0!==t?t:function(e,t){const n=e.code;if(n)return"ENOENT"===n}(e)}},67646:function(e,t,n){"use strict";var r=n(48764).lW,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=t.ENCODING=void 0;const l=n(26594),u=a(n(66828)),d=n(42080),h=a(n(52859)),p=n(59052),f=n(11642),g=n(46729);t.ENCODING="utf8";let m=class{constructor(e){this.httpClient=e,this.vscfs=u.workspace.fs}arePathsSame(e,t){return h.isEqual(e,t)}async getFiles(e){return(await this.vscfs.readDirectory(e)).filter((e=>e[1]===u.FileType.File)).map((e=>u.Uri.file(e[0])))}async copy(e,t,n){await this.vscfs.copy(e,t,n)}async createDirectory(e){await this.vscfs.createDirectory(e)}async delete(e){await this.vscfs.delete(e)}async readFile(e){const n=await this.vscfs.readFile(e);return r.from(n).toString(t.ENCODING)}async stat(e){return this.vscfs.stat(e)}async writeFile(e,t){const n="string"==typeof t?r.from(t):t;return this.vscfs.writeFile(e,n)}async exists(e,t){if("http"===e.scheme.toLowerCase()||"https"===e.scheme.toLowerCase())return this.httpClient.exists(e.toString());let n;try{n=await this.stat(e)}catch(t){return(0,p.isFileNotFoundError)(t)||(0,f.traceError)(`stat() failed for "${e}"`,t),!1}return void 0===t||(t===u.FileType.Unknown?n.type===u.FileType.Unknown:(n.type&t)===t)}async getFileHash(e){const t=await this.stat(e),n=`${t.ctime}-${t.mtime}`;return(0,g.computeHash)(n,"SHA-512")}};t.FileSystem=m,t.FileSystem=m=s([(0,l.injectable)(),c(0,(0,l.inject)(d.IHttpClient))],m)},99746:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isParentPath=t.arePathsSame=t.normCasePath=void 0;const s=n(72728),a=o(n(15948));function c(e){return(0,s.getOSType)()===s.OSType.Windows?a.normalize(e).toUpperCase():a.normalize(e)}t.normCasePath=c,t.arePathsSame=function(e,t){return c(e)===c(t)},t.isParentPath=function(e,t){return t.endsWith(a.sep)||(t+=a.sep),e.endsWith(a.sep)||(e+=a.sep),c(e).startsWith(c(t))}},35412:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayPath=t.getFilePath=void 0;const s=n(66828),a=o(n(15948)),c=o(n(52859)),l=n(72728),u=n(58681);function d(e){const t=(0,l.getOSType)()===l.OSType.Windows;if(e){const n=c.originalFSPath(e);return n&&n.startsWith(a.sep)&&n.length>1&&n[1]!==a.sep&&t?n.slice(1):n||""}return""}function h(e,t,n){const r=(0,l.getOSType)()===l.OSType.Windows;if(e&&t&&c.isEqualOrParent(e,t,!0)){const n=c.relativePath(t,e);if(n)return r?n.replace(/\//g,"\\"):n}if(e&&n&&c.isEqualOrParent(e,n,!0)){let t=c.relativePath(n,e);if(t)return t=r?t.replace(/\//g,"\\"):t,`~${a.sep}${t}`}return d(e)}t.getFilePath=d,t.getDisplayPath=function(e,t=[],r){let i;r=r||function(){if(!(0,u.isWeb)())return s.Uri.file(n(24753).homedir())}(),"string"==typeof e&&(i=s.Uri.file(e)),"string"!=typeof e&&(i=e);const o=h(i,void 0,r),a=t.map((e=>h(i,e.uri,r)));let c=o;return[o,...a].forEach((e=>{e.length<c.length&&(c=e)})),c}},76102:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformService=void 0;const i=n(26594),o=n(72728);let s=class{constructor(){this.osType=o.OSType.Unknown}get tempDir(){}get homeDir(){}get pathVariableName(){return""}get isWindows(){return this.osType===o.OSType.Windows}get isMac(){return this.osType===o.OSType.OSX}get isLinux(){return this.osType===o.OSType.Linux}};t.PlatformService=s,t.PlatformService=s=r([(0,i.injectable)()],s)},63658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(76102),i=n(83599);t.registerTypes=function(e){e.addSingleton(i.IPlatformService,r.PlatformService)}},83599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFileSystem=t.IPlatformService=void 0,t.IPlatformService=Symbol("IPlatformService"),t.IFileSystem=Symbol("IFileSystem")},73621:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseProviderBasedQuickPick=void 0;const r=n(66828),i=n(19450),o=n(86563),s=n(25251),a=n(58681),c=n(20397);class l{constructor(e){this.label=e}}class u extends l{constructor(e,t){super(e),this.sortKey=t,this.kind=r.QuickPickItemKind.Separator}}class d extends o.Disposables{constructor(e,t,n,r,i,o){super(),this.provider=e,this.createQuickPickItem=t,this.getCategory=n,this.options=r,this.createErrorQuickPickItem=i,this._title=o,this.categories=new Map,this.quickPickItems=[],this.previouslyEnteredValue="",this.commands=new Set,this._placeholder="",this.quickPickItemMap=new WeakSet,this.errorQuickPickItemMap=new WeakSet}set recommended(e){const t=this._recommended?.id!==e?.id;this._recommended=e,t&&this.quickPick&&this.rebuildQuickPickItems(this.quickPick)}get recommended(){return this._recommended}set placeholder(e){this.quickPick&&(this.quickPick.placeholder=e),this._placeholder=e}get placeholder(){return this._placeholder}set selected(e){const t=this._selected!==e;this._selected=e,t&&this.quickPick&&this.rebuildQuickPickItems(this.quickPick)}get selected(){return this._selected}createQuickPick(){const e=[],t={iconPath:new r.ThemeIcon("refresh"),tooltip:s.Common.refresh},n=this.quickPick=r.window.createQuickPick();return e.push(n),this.quickPickItems=[],n.placeholder=this.placeholder,n.buttons=this.options.supportsBack?[r.QuickInputButtons.Back,t]:[t],n.ignoreFocusOut=!0,n.busy=!0,n.value=this.previouslyEnteredValue,n.onDidChangeValue((e=>this.previouslyEnteredValue=e),this,e),n.onDidHide((()=>(0,c.dispose)(e)),this,e),n.title=this._title||s.DataScience.kernelPickerSelectKernelFromRemoteTitleWithoutName,this.provider.then((i=>{let o;this.resolvedProvider=i,this._title||(n.title=s.DataScience.kernelPickerSelectKernelFromRemoteTitle(i.title)),n.busy="discovering"===i.status,i.onDidChange((()=>this.updateQuickPickItems(n,i)),this,e),n.onDidTriggerButton((async e=>{e===t&&(n.busy=!0,await i.refresh().catch(a.noop),this.updateQuickPickItems(n,i),n.busy=!1)}),this,e),i.onDidChangeStatus((()=>{switch(o&&clearTimeout(o),i.status){case"discovering":n.busy=!0;break;case"idle":o=setTimeout((()=>n.busy=!1),500),e.push(new r.Disposable((()=>o&&clearTimeout(o))))}}),this,e),h(i.items.map((e=>this.toQuickPickItem(e))),((e,t)=>p(this.getCategory(e.item,this),this.getCategory(t.item,this)))).forEach((e=>{const t=this.connectionToCategory(e[0].item);this.quickPickItems.push(t),e.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.push(...e),this.categories.set(t,new Set(e))})),this.updateQuickPickItems(n,i)})).catch(a.noop),this.disposables.push(...e),{quickPick:n,disposables:e}}isCommandQuickPickItem(e){return this.commands.has(e)}addCommand(e,t){const n=e;return n.execute=t,this.commands.add(n),this.quickPick&&this.rebuildQuickPickItems(this.quickPick),{dispose:()=>{this.commands.delete(n)}}}async selectItem(e){for(;!e.isCancellationRequested;){const{quickPick:t,disposables:n}=this.createQuickPick();t.show();try{this.previouslySelectedItem=void 0;const o=await new Promise(((e,o)=>{t.onDidChangeSelection((t=>{if(t.length){const n=t[0];this.isSelectorQuickPickItem(n)?e(n.item):this.isCommandQuickPickItem(n)?e(n):this.isErrorQuickPickItem(n)}})),t.onDidTriggerButton((t=>t===r.QuickInputButtons.Back?e(i.InputFlowAction.back):void 0),this,n),t.onDidHide((()=>e(void 0)),this,n)}));if(e.isCancellationRequested)return;if(!o)return;if(o instanceof i.InputFlowAction)return o===i.InputFlowAction.back?i.InputFlowAction.back:void 0;if(o&&"label"in o&&this.isCommandQuickPickItem(o)){this.previouslySelectedItem=o;const e=await o.execute();if(!e)continue;if(e===i.InputFlowAction.back)continue;return i.InputFlowAction,e}return o||void 0}finally{(0,c.dispose)(n)}}}updateQuickPickItems(e,t){const n=new Map(e.items.filter((e=>this.isSelectorQuickPickItem(e))).map((e=>e)).map((e=>[e.item.id,e.item]))),i=new Map(t.items.map((e=>[e.id,e])));this.quickPickItems=this.quickPickItems.map((e=>{if(this.isSelectorQuickPickItem(e)){const t=n.get(e.item.id);if(t&&t!==e.item)return this.toQuickPickItem(t);const r=i.get(e.item.id);if(r){const t=this.toQuickPickItem(r);if(JSON.stringify({...e,item:""})!==JSON.stringify({...t,item:""}))return this.toQuickPickItem(r)}}return e}));const o=t.items.filter((e=>!n.has(e.id))).map((e=>this.toQuickPickItem(e)));this.removeOutdatedQuickPickItems(e,t),h(o,((e,t)=>p(this.getCategory(e.item,this),this.getCategory(t.item,this)))).forEach((e=>{e.sort(((e,t)=>e.label.localeCompare(t.label)));const t=this.connectionToCategory(e[0].item),n=this.quickPickItems.find((e=>e.kind===r.QuickPickItemKind.Separator&&e.label===t.label));if(n){const t=this.quickPickItems.indexOf(n),r=this.categories.get(n),i=new Map(Array.from(r).map((e=>[e.item.id,e]))),o=r.size;e.forEach((e=>{const t=i.get(e.item.id);t&&r.delete(t),r.add(e)}));const s=Array.from(r);s.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.splice(t+1,o,...s)}else{const n=this.quickPickItems.filter((e=>e instanceof u)).map(((e,t)=>[e,t]));n.push([t,-1]),n.sort(((e,t)=>e[0].sortKey.localeCompare(t[0].sortKey)));const r=n.findIndex((e=>-1===e[1]));let i=0;r>0&&(i=n.length===r+1?this.quickPickItems.length:n[r+1][1]),e.sort(((e,t)=>e.label.localeCompare(t.label))),this.quickPickItems.splice(i,0,t,...e),this.categories.set(t,new Set(e))}})),this.rebuildQuickPickItems(e)}rebuildQuickPickItems(e){let t=this.recommended?this.toQuickPickItem(this.recommended):void 0;const n=[];t&&n.push({label:s.DataScience.recommendedItemCategoryInQuickPick,kind:r.QuickPickItemKind.Separator},t);let i=t;i=this.selected?this.quickPickItems.filter((e=>this.isSelectorQuickPickItem(e))).map((e=>e)).find((e=>e.item.id===this.selected?.id)):i;const o=this.quickPickItems.filter((e=>!this.isSelectorQuickPickItem(e)||e.item.id!==t?.item?.id)),a=e.activeItems.length?e.activeItems[0]:void 0;i&&a&&(this.isSelectorQuickPickItem(a)?a.item.id!==i.item.id&&(i=void 0):i=void 0);const c=this.resolvedProvider?.lastError?this.toErrorQuickPickItem(this.resolvedProvider.lastError):void 0,l=[].concat(Array.from(this.commands.values())).concat(n).concat(o).concat(c?[c]:[]),u=i?[i]:e.activeItems.length?[e.activeItems[0]]:[];if(u.length&&!l.includes(u[0])){const e=u[0],t=this.isSelectorQuickPickItem(e)&&l.find((t=>this.isSelectorQuickPickItem(t)&&t.item.id===e.item.id));t?u[0]=t:u.length=0}e.items=l,e.activeItems=u,!e.activeItems.length&&this.previouslySelectedItem&&l.includes(this.previouslySelectedItem)&&(e.activeItems=[this.previouslySelectedItem])}isErrorQuickPickItem(e){return this.errorQuickPickItemMap.has(e)}toErrorQuickPickItem(e){if(!this.createErrorQuickPickItem)return;const t=this.createErrorQuickPickItem(e,this);return this.errorQuickPickItemMap.add(t),t}isSelectorQuickPickItem(e){return this.quickPickItemMap.has(e)}toQuickPickItem(e){const t=this.createQuickPickItem(e,this);return t.item=e,this.quickPickItemMap.add(t),t}removeOutdatedQuickPickItems(e,t){const n=e.items.filter((e=>this.isSelectorQuickPickItem(e))).map((e=>e)).map((e=>e.item.id)),r=new Map(t.items.map((e=>[e.id,e]))),i=n.filter((e=>!r.has(e)));if(i.length){const t=[];this.categories.forEach(((e,n)=>{e.forEach((n=>{i.includes(n.item.id)&&(e.delete(n),t.push(n))})),e.size||(t.push(n),this.categories.delete(n))})),this.quickPickItems=this.quickPickItems.filter((e=>!t.includes(e))),this.rebuildQuickPickItems(e)}}connectionToCategory(e){const t=this.getCategory(e,this);return new u(t.label,t.sortKey||t.label)}}function h(e,t){const n=[];let r;for(const i of e.slice(0).sort(t))r&&0===t(r[0],i)?r.push(i):(r=[i],n.push(r));return n}function p(e,t){return(e.sortKey||e.label).localeCompare(t.sortKey||t.label,void 0,{sensitivity:"accent"})}t.BaseProviderBasedQuickPick=d},54952:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(44974),i=n(8523),o=n(61885),s=n(42080),a=n(63658),c=n(31104),l=n(46729),u=n(71886),d=n(10053),h=n(52100),p=n(94106),f=n(57703),g=n(68778),m=n(19450),v=n(58802),y=n(61847),b=n(54443),w=n(87143),S=n(89926),C=n(52064),_=n(84395);t.registerTypes=function(e){e.addSingletonInstance(s.IsWindows,!1),e.addSingleton(s.IExperimentService,r.ExperimentService),e.addSingleton(s.IFeaturesManager,i.FeatureManager),e.addSingleton(s.IPersistentStateFactory,o.PersistentStateFactory),e.addSingleton(s.IExtensions,c.Extensions),e.addSingleton(s.ICryptoUtils,l.CryptoUtils),e.addSingleton(d.IEncryptedStorage,u.EncryptedStorage),e.addSingleton(d.IDocumentManager,h.DocumentManager),e.addSingleton(d.IDebugService,y.DebugService),e.addSingleton(d.IVSCodeNotebook,p.VSCodeNotebook),e.addSingleton(d.IClipboard,f.ClipboardService),e.addSingleton(s.IAsyncDisposableRegistry,g.AsyncDisposableRegistry),e.addSingleton(m.IMultiStepInputFactory,m.MultiStepInputFactory),e.addSingleton(s.IBrowserService,v.BrowserService),e.addSingleton(s.IHttpClient,b.HttpClient),e.addSingleton(s.IDataFrameScriptGenerator,w.DataFrameScriptGenerator),e.addSingleton(s.IVariableScriptGenerator,S.VariableScriptGenerator),e.addSingleton(C.IExtensionSyncActivationService,_.OldCacheCleaner),(0,a.registerTypes)(e)}},42080:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.IDataFrameScriptGenerator=t.IVariableScriptGenerator=t.IDataScienceCommandListener=t.IExperimentService=t.Experiments=t.IAsyncDisposableRegistry=t.ICryptoUtils=t.IFeaturesManager=t.IJupyterExtensionBanner=t.IBrowserService=t.IExtensions=t.IExtensionContext=t.IHttpClient=t.IConfigurationService=t.IRandom=t.IPersistentStateFactory=t.BannerType=t.WORKSPACE_MEMENTO=t.GLOBAL_MEMENTO=t.IMemento=t.IDisposableRegistry=t.IsWindows=t.IOutputChannel=t.IsWebExtension=t.IsDevMode=t.IsCodeSpace=void 0,t.IsCodeSpace=Symbol("IsCodeSpace"),t.IsDevMode=Symbol("IsDevMode"),t.IsWebExtension=Symbol("IsWebExtension"),t.IOutputChannel=Symbol("IOutputChannel"),t.IsWindows=Symbol("IS_WINDOWS"),t.IDisposableRegistry=Symbol("IDisposableRegistry"),t.IMemento=Symbol("IGlobalMemento"),t.GLOBAL_MEMENTO=Symbol("IGlobalMemento"),t.WORKSPACE_MEMENTO=Symbol("IWorkspaceMemento"),function(e){e[e.InsidersNotebookSurvey=0]="InsidersNotebookSurvey",e[e.ExperimentNotebookSurvey=1]="ExperimentNotebookSurvey"}(n||(t.BannerType=n={})),t.IPersistentStateFactory=Symbol("IPersistentStateFactory"),t.IRandom=Symbol("IRandom"),t.IConfigurationService=Symbol("IConfigurationService"),t.IHttpClient=Symbol("IHttpClient"),t.IExtensionContext=Symbol("ExtensionContext"),t.IExtensions=Symbol("IExtensions"),t.IBrowserService=Symbol("IBrowserService"),t.IJupyterExtensionBanner=Symbol("IJupyterExtensionBanner"),t.IFeaturesManager=Symbol("IFeaturesManager"),t.ICryptoUtils=Symbol("ICryptoUtils"),t.IAsyncDisposableRegistry=Symbol("IAsyncDisposableRegistry"),function(e){e.NewJupyterSession="NewJupyterSession"}(r||(t.Experiments=r={})),t.IExperimentService=Symbol("IExperimentService"),t.IDataScienceCommandListener=Symbol("IDataScienceCommandListener"),t.IVariableScriptGenerator=Symbol("IVariableScriptGenerator"),t.IDataFrameScriptGenerator=Symbol("IDataFrameScriptGenerator")},86563:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Disposables=t.parseSemVer=t.removeLinesFromFrontAndBack=t.removeLinesFromFrontAndBackNoConcat=t.generateMarkdownFromCodeLines=t.appendLineFeed=t.stripComments=t.parseForComments=t.formatStreamText=t.splitMultilineString=t.concatMultilineString=t.getAssociatedJupyterNotebook=t.getNotebookFormat=t.getNotebookMetadata=t.isJupyterNotebook=t.translateKernelLanguageToMonaco=t.traceCellResults=t.pruneCell=t.getResourceType=t.AllowedCellOutputKeys=void 0;const s=n(36625),a=o(n(52859)),c=n(66828),l=n(15925),u=n(11642),d=n(20397);function h(e){let n;switch(e.output_type){case"stream":case"error":case"execute_result":case"display_data":n=t.AllowedCellOutputKeys[e.output_type];break;default:return e}const r={...e};for(const t of Object.keys(e))n.has(t)||delete r[t];return r}function p(e){return"string"==typeof e?e===l.JupyterNotebookView||e===l.InteractiveWindowView:e.notebookType===l.JupyterNotebookView||e.notebookType===l.InteractiveWindowView}function f(e){if(Array.isArray(e))return e;const t=e.toString();if(t.length>0){const e=t.split("\n");return e.map(((t,n)=>n<e.length-1?`${t}\n`:t)).filter((e=>e.length>0))}return[]}t.AllowedCellOutputKeys={stream:new Set(Object.keys({output_type:"stream",name:"stdout",text:""})),error:new Set(Object.keys({output_type:"error",ename:"",evalue:"",traceback:[""]})),display_data:new Set(Object.keys({output_type:"display_data",data:{},metadata:{}})),execute_result:new Set(Object.keys({output_type:"execute_result",execution_count:0,data:{},metadata:{}}))},t.getResourceType=function(e){return e&&a.extname(e).toLowerCase().endsWith("ipynb")?"notebook":"interactive"},t.pruneCell=function(e){const t={...e,source:f(e.source)};if("code"!==t.cell_type)delete t.outputs,delete t.execution_count;else if(t.cell_type){const e=t;e.outputs=e.outputs?e.outputs.map(h):[]}return t},t.traceCellResults=function(e,t){if(t.length>0&&"code"===t[0].data.cell_type){const n=t[0].data,r=n.outputs&&n.outputs[0]?"evalue"in n.outputs[0]:void 0;if(r)(0,u.traceError)(`${e} Error : ${r}`);else if(n.outputs&&n.outputs[0])if(n.outputs[0].output_type.includes("image"))(0,u.traceInfo)(`${e} Output: image`);else{const t=n.outputs[0].data,r=n.outputs[0].text;(0,u.traceInfo)(`${e} Output: ${r||JSON.stringify(t)}`)}}else(0,u.traceInfo)(`${e} no output.`)},t.translateKernelLanguageToMonaco=function(e){return 2===(e=e.toLowerCase()).length&&e.endsWith("#")?`${e.substring(0,1)}sharp`:l.jupyterLanguageToMonacoLanguageMapping.get(e)||e},t.isJupyterNotebook=p,t.getNotebookMetadata=function(e){const t=e.metadata?.custom;return JSON.parse(JSON.stringify(t?.metadata||{}))},t.getNotebookFormat=function(e){const t=e.metadata?.custom;return{nbformat:t?.nbformat,nbformat_minor:t?.nbformat_minor}},t.getAssociatedJupyterNotebook=function(e){return c.workspace.notebookDocuments.find((t=>p(t)&&t.getCells().some((t=>t.document===e))))},t.concatMultilineString=function(e){if(Array.isArray(e)){let t="";for(let n=0;n<e.length;n+=1){const r=e[n];t=n<e.length-1&&!r.endsWith("\n")?t.concat(`${r}\n`):t.concat(r)}return t}return e.toString()},t.splitMultilineString=f,t.formatStreamText=function(e){return function(e){for(e=e.replace(/\r+\n/gm,"\n");e.search(/\r[^$]/g)>-1;){var t=e.match(/^(.*)\r+/m)[1],n=e.match(/\r+(.*)$/m)[1];n+=t.slice(n.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,n)}return e}(function(e){let t=e;do{t=(e=t).replace(/[^\n]\x08/gm,"")}while(t.length<e.length);return e}(e))};const g="'''",m='"""';function v(e,t,n){let r,i,o=0;for(const s of e){const e=s.trim(),a=e.startsWith(g)?g:e.startsWith(m)?m:void 0,c=e.includes(g)?g:e.includes(m)?m:void 0;if(i)i===c&&(i=void 0),n(s,o);else if(r)r===a&&(r=void 0),r&&t(s,o);else if(c&&!a){const t=e.indexOf(c);i=e.lastIndexOf(c)!==t?void 0:c,n(s,o)}else if(a){const n=e.indexOf(a,3);r=n>=0?void 0:a,e.length>3&&t(e.slice(3,n>=0?n:void 0),o)}else e.startsWith("#")?t(e.slice(1),o):n(s,o);o+=1}}function y(e,t="\n",n){return e.map(((r,i)=>{const o=n?n(r):r;return i===e.length-1?`${o}`:`${o}${t}`}))}function b(e){let t=e.length,n=-1;return e.forEach(((e,r)=>{e.trim()&&(t=r,n<0&&(n=r))})),n>=0?e.slice(n,t+1):[]}t.parseForComments=v,t.stripComments=function(e){let t="";return v((0,d.splitLines)(e,{trim:!1,removeEmptyEntries:!1}),(e=>{}),(e=>t=t.concat(`${e}\n`))),t},t.appendLineFeed=y,t.generateMarkdownFromCodeLines=function(e){return y(function(e){const t=[];return v(e,(e=>t.push(e)),(e=>{})),t}(e.slice(e.length>1?1:0)))},t.removeLinesFromFrontAndBackNoConcat=b,t.removeLinesFromFrontAndBack=function(e){return b(Array.isArray(e)?e:(0,d.splitLines)(e,{trim:!1,removeEmptyEntries:!1})).join("\n")},t.parseSemVer=function(e){const t=/^\s*(\d+)\.(\d+)\.(.+)\s*$/.exec(e);if(t&&t.length>2){const e=parseInt(t[1],10),n=parseInt(t[2],10),r=parseInt(t[3],10);return(0,s.parse)(`${e}.${n}.${r}`,!0)??void 0}},t.Disposables=class{get isDisposed(){return this._isDisposed}constructor(...e){this.disposables=[],this._isDisposed=!1,this.onDidDisposeEmitter=new c.EventEmitter,this.onDidDispose=this.onDidDisposeEmitter.event,this.disposables.push(...e)}_register(e){return this.disposables.push(e),e}dispose(){this._isDisposed||((0,d.dispose)(this.disposables),this._isDisposed=!0,this.onDidDisposeEmitter.fire(),this.onDidDisposeEmitter.dispose())}}},43138:(e,t)=>{"use strict";function n(e){return"function"==typeof e?.then}Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseChain=t.createDeferredFromPromise=t.createDeferred=t.isPromiseLike=t.isPromise=t.raceTimeoutError=t.raceTimeout=t.waitForCondition=t.sleep=void 0,t.sleep=async function(e){return new Promise((t=>{setTimeout((()=>t(e)),e)}))},t.waitForCondition=async function(e,t,n){return new Promise((r=>{let i;const o=setTimeout((()=>i(!1)),t),s=setInterval((()=>{e().then((e=>{e&&i(!0)})).catch((e=>i(!1)))}),n);i=e=>{clearTimeout(o),clearInterval(s),r(e)}}))},t.raceTimeout=function(e,t,...r){const i=n(t)?void 0:t;let o;n(t)&&r.push(t);const s=setTimeout((()=>o?.(i)),e);return Promise.race([Promise.race(r).finally((()=>clearTimeout(s))),new Promise((e=>o=e))])},t.raceTimeoutError=function(e,t,...n){let r;const i=setTimeout((()=>r?.(t)),e);return Promise.race([Promise.race(n).finally((()=>clearTimeout(i))),new Promise(((e,t)=>r=t))])},t.isPromise=function(e){return"function"==typeof e?.then&&"function"==typeof e?.catch},t.isPromiseLike=n;class r{get value(){return this._value}constructor(e=null){this.scope=e,this._resolved=!1,this._rejected=!1,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}resolve(e){this._value=e,this._resolve.apply(this.scope?this.scope:this,arguments),this._resolved=!0}reject(e){this._reject.apply(this.scope?this.scope:this,arguments),this._rejected=!0}get promise(){return this._promise}get resolved(){return this._resolved}get rejected(){return this._rejected}get completed(){return this._rejected||this._resolved}}function i(e=null){return new r(e)}t.createDeferred=i,t.createDeferredFromPromise=function(e){const t=i();return e.then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.PromiseChain=class{constructor(){this.currentPromise=Promise.resolve(void 0)}async chain(e){const t=i(),n=this.currentPromise;return this.currentPromise=this.currentPromise.then((async()=>{try{const n=await e();t.resolve(n)}catch(e){throw t.reject(e),e}})),await n,t.promise}chainFinally(e){const t=i();return this.currentPromise=this.currentPromise.finally((()=>e().then((e=>t.resolve(e))).catch((e=>t.reject(e))))),t.promise}}},47440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryCache=t.clearCache=t.getCacheKeyFromFunctionArgs=t.getGlobalCacheStore=t.DataWithExpiry=void 0;const n=new Map;class r{constructor(e,t){this._data=t,this.expiryTime=e+Date.now()}get expired(){const e=this.expiryTime<=Date.now();return e&&(this._data=void 0),e}get data(){return this.expired&&(this._data=void 0),this._data}}t.DataWithExpiry=r;const i=new Map;t.getGlobalCacheStore=function(){return i},t.getCacheKeyFromFunctionArgs=function(e,t){return`KeyPrefix=${e}-Args=${t.map((e=>`${JSON.stringify(e)}`)).join("-Arg-Separator-")}`},t.clearCache=function(){i.clear(),n.clear()},t.InMemoryCache=class{constructor(e,t=""){this.expiryDurationMs=e,this.cacheKey=t}get hasData(){const e=i.get(this.cacheKey);return!(!e||e.expired)}get data(){if(!this.hasData)return;const e=i.get(this.cacheKey);return e?.data}set data(e){const t=new r(this.expiryDurationMs,e);i.set(this.cacheKey,t)}clear(){i.delete(this.cacheKey)}}},76224:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalISOString=t.fromNow=void 0;const r=n(66828),i=86400,o=7*i,s=30*i,a=365*i;t.fromNow=function e(t,n,c,l){"number"!=typeof t&&(t=t.getTime());const u=Math.round(((new Date).getTime()-t)/1e3);if(u<-30)return r.l10n.t("in {0}",e((new Date).getTime()+1e3*u,!1));if(!l&&u<30)return r.l10n.t("now");let d;return u<60?(d=u,n?1===d?c?r.l10n.t("{0} second ago",d):r.l10n.t("{0} sec ago",d):c?r.l10n.t("{0} seconds ago",d):r.l10n.t("{0} secs ago",d):1===d?c?r.l10n.t("{0} second",d):r.l10n.t("{0} sec",d):c?r.l10n.t("{0} seconds",d):r.l10n.t("{0} secs",d)):u<3600?(d=Math.floor(u/60),n?1===d?c?r.l10n.t("{0} minute ago",d):r.l10n.t("{0} min ago",d):c?r.l10n.t("{0} minutes ago",d):r.l10n.t("{0} mins ago",d):1===d?c?r.l10n.t("{0} minute",d):r.l10n.t("{0} min",d):c?r.l10n.t("{0} minutes",d):r.l10n.t("{0} mins",d)):u<i?(d=Math.floor(u/3600),n?1===d?c?r.l10n.t("{0} hour ago",d):r.l10n.t("{0} hr ago",d):c?r.l10n.t("{0} hours ago",d):r.l10n.t("{0} hrs ago",d):1===d?c?r.l10n.t("{0} hour",d):r.l10n.t("{0} hr",d):c?r.l10n.t("{0} hours",d):r.l10n.t("{0} hrs",d)):u<o?(d=Math.floor(u/i),n?1===d?r.l10n.t("{0} day ago",d):r.l10n.t("{0} days ago",d):1===d?r.l10n.t("{0} day",d):r.l10n.t("{0} days",d)):u<s?(d=Math.floor(u/o),n?1===d?c?r.l10n.t("{0} week ago",d):r.l10n.t("{0} wk ago",d):c?r.l10n.t("{0} weeks ago",d):r.l10n.t("{0} wks ago",d):1===d?c?r.l10n.t("{0} week",d):r.l10n.t("{0} wk",d):c?r.l10n.t("{0} weeks",d):r.l10n.t("{0} wks",d)):u<a?(d=Math.floor(u/s),n?1===d?c?r.l10n.t("{0} month ago",d):r.l10n.t("{0} mo ago",d):c?r.l10n.t("{0} months ago",d):r.l10n.t("{0} mos ago",d):1===d?c?r.l10n.t("{0} month",d):r.l10n.t("{0} mo",d):c?r.l10n.t("{0} months",d):r.l10n.t("{0} mos",d)):(d=Math.floor(u/a),n?1===d?c?r.l10n.t("{0} year ago",d):r.l10n.t("{0} yr ago",d):c?r.l10n.t("{0} years ago",d):r.l10n.t("{0} yrs ago",d):1===d?c?r.l10n.t("{0} year",d):r.l10n.t("{0} yr",d):c?r.l10n.t("{0} years",d):r.l10n.t("{0} yrs",d))},t.toLocalISOString=function(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}},85446:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chainable=t.testOnlyMethod=t.trace=t.swallowExceptions=t.cache=t.makeDebounceAsyncDecorator=t.makeDebounceDecorator=t.debounceAsync=t.debounceSync=void 0;const r=n(15925),i=n(43138),o=n(47440),s=n(58681),a=n(11642),c=n(23279);function l(e){return function(t,n,r){const i=r.value,o=c((function(){return i.apply(this,arguments)}),e,{});r.value=o}}function u(e){return function(t,n,r){const o=r.value,a={started:!1,deferred:void 0,timer:void 0};r.value=function(){const t=a.deferred;if(t&&a.started)return t.promise;const n=t&&t.completed,r=a.deferred=!t||n?(0,i.createDeferred)():t;return r.promise.catch(s.noop),a.timer&&clearTimeout(a.timer),a.timer=setTimeout((async()=>{a.started=!0,o.apply(this).then((e=>{a.started=!1,r.resolve(e)})).catch((e=>{a.started=!1,r.reject(e)}))}),e||0),r.promise}}}t.debounceSync=function(e){return(0,r.isTestExecution)()&&(e=void 0),l(e)},t.debounceAsync=function(e){return(0,r.isTestExecution)()&&(e=void 0),u(e)},t.makeDebounceDecorator=l,t.makeDebounceAsyncDecorator=u;const d=(0,o.getGlobalCacheStore)();t.cache=function(e){return function(t,n,i){const c=i.value,l=`Cache_Method_Output_${"constructor"in t&&t.constructor.name?t.constructor.name:""}.${n}`;i.value=async function(...t){if((0,r.isTestExecution)())return c.apply(this,t);const n=(0,o.getCacheKeyFromFunctionArgs)(l,t),i=d.get(n);if(i&&!i.expired)return(0,a.traceVerbose)(`Cached data exists ${n}`),Promise.resolve(i.data);const u=c.apply(this,t);return u.then((t=>d.set(n,new o.DataWithExpiry(e,t)))).catch(s.noop),u}}},t.swallowExceptions=function(e){return function(t,n,i){const o=i.value,s=`Jupyter Extension (Error in ${e||n}, method:${n}):`;i.value=function(...e){try{const t=o.apply(this,e);if(t&&"function"==typeof t.then&&"function"==typeof t.catch)return t.catch((e=>{(0,r.isTestExecution)()||(0,a.traceError)(s,e)}))}catch(e){if((0,r.isTestExecution)())return;(0,a.traceError)(s,e)}}}},t.trace=function(e,t){return function(n,r,i){const o=i.value;return i.value=function(...i){const a={kind:"Class",name:n&&n.constructor?n.constructor.name:"",args:i,methodName:r,target:n},c=this;return(0,s.tracing)((t=>e(a,t)),(()=>o.apply(c,i)),t)},i}},t.testOnlyMethod=function(){return function(e,t,n){const i=n.value;return n.value=function(...e){if(!(0,r.isTestExecution)())throw new Error(`Function: ${t} can only be called from test code`);return i.apply(this,e)},n}},t.chainable=function(){return function(e,t,n){const r=n.value,i=`chainedPromiseFor_${t}`;return n.value=async function(...e){let t=this[i];t=t?t.then((()=>r.apply(this,e))):r.apply(this,e),this[i]=t;const n=t.then((e=>e)).catch((e=>{throw this[i]=void 0,e}));return n.catch(s.noop),n},n}}},64890:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.once=void 0,t.once=function(e){const t=this;let n,r=!1;return function(){return r||(r=!0,n=e.apply(t,arguments)),n}}},22343:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Iterable=void 0,function(e){function t(e){return e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]}e.is=t;const n=Object.freeze([]);function*r(e){yield e}e.empty=function(){return n},e.single=r,e.wrap=function(e){return t(e)?e:r(e)},e.from=function(e){return e||n},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){for(const n of e)if(t(n))return!0;return!1},e.find=function(e,t){for(const n of e)if(t(n))return n},e.filter=function*(e,t){for(const n of e)t(n)&&(yield n)},e.map=function*(e,t){let n=0;for(const r of e)yield t(r,n++)},e.concat=function*(...e){for(const t of e)for(const e of t)yield e},e.reduce=function(e,t,n){let r=n;for(const n of e)r=t(r,n);return r},e.slice=function*(e,t,n=e.length){for(t<0&&(t+=e.length),n<0?n+=e.length:n>e.length&&(n=e.length);t<n;t++)yield e[t]},e.consume=function(t,n=Number.POSITIVE_INFINITY){const r=[];if(0===n)return[r,t];const i=t[Symbol.iterator]();for(let t=0;t<n;t++){const t=i.next();if(t.done)return[r,e.empty()];r.push(t.value)}return[r,{[Symbol.iterator]:()=>i}]}}(n||(t.Iterable=n={}))},62624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lazy=void 0;class n{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}map(e){return new n((()=>e(this.getValue())))}}t.Lazy=n},74396:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisposableMap=t.disposeOnReturn=t.Disposable=t.DisposableStore=t.toDisposable=t.combinedDisposable=t.dispose=void 0;const r=n(11642),i=n(64890),o=n(22343);function s(e){if(o.Iterable.is(e)){for(const t of e)if(t)try{t.dispose()}catch(e){(0,r.traceWarning)(`dispose() failed for ${t}`,e)}return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function a(e){return{dispose:(0,i.once)((()=>{e()}))}}t.dispose=s,t.combinedDisposable=function(...e){return a((()=>s(e)))},t.toDisposable=a;class c{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{s(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?c.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}t.DisposableStore=c,c.DISABLE_DISPOSED_WARNING=!1,t.Disposable=class{constructor(){this._store=new c}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}},t.disposeOnReturn=function(e){const t=new c;try{e(t)}finally{t.dispose()}};class l{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{s(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get(e){return this._store.get(e)}set(e,t,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}t.DisposableMap=l},25251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Products=t.Installer=t.Deprecated=t.WebViews=t.DataScience=t.DataScienceSurveyBanner=t.InsidersNativeNotebooksSurveyBanner=t.InteractiveShiftEnterBanner=t.Logging=t.OutputChannelNames=t.Experiments=t.Common=void 0;const r=n(66828),i=n(35412),o=n(76224);var s,a,c,l,u,d,h,p,f,g,m,v;!function(e){e.bannerLabelYes=r.l10n.t("Yes"),e.bannerLabelNo=r.l10n.t("No"),e.canceled=r.l10n.t("Canceled"),e.cancel=r.l10n.t("Cancel"),e.ok=r.l10n.t("Ok"),e.refresh=r.l10n.t("Refresh"),e.refreshing=r.l10n.t("Refreshing..."),e.install=r.l10n.t("Install"),e.loadingExtension=r.l10n.t("Jupyter Extension loading..."),e.handleExtensionActivationError=r.l10n.t("Extension activation failed, run the 'Developer: Toggle Developer Tools' command for more information."),e.doNotShowAgain=r.l10n.t("Do not show again"),e.reload=r.l10n.t("Reload"),e.moreInfo=r.l10n.t("More Info"),e.learnMore=r.l10n.t("Learn more"),e.labelForQuickPickSeparatorIndicatingThereIsAnotherGroupOfMoreItems=r.l10n.t("more"),e.and=r.l10n.t("and"),e.reportThisIssue=r.l10n.t("Report this issue"),e.clickHereForMoreInfoWithHtml=e=>r.l10n.t("Click <a href='{0}'>here</a> for more info.",e)}(s||(t.Common=s={})),function(e){e.notInGroup=e=>r.l10n.t("User does not belong to experiment group '{0}'",e),e.inGroup=e=>r.l10n.t("User belongs to experiment group '{0}'",e)}(a||(t.Experiments=a={})),function(e){e.jupyter=r.l10n.t("Jupyter")}(c||(t.OutputChannelNames=c={})),function(e){e.currentWorkingDirectory="cwd:"}(l||(t.Logging=l={})),function(e){e.bannerMessage=r.l10n.t("Would you like shift-enter to send code to the new Interactive Window experience?")}(u||(t.InteractiveShiftEnterBanner=u={})),function(e){e.bannerMessage=r.l10n.t("Can you please take a minute to tell us about your notebooks experience in VS Code?")}(d||(t.InsidersNativeNotebooksSurveyBanner=d={})),function(e){e.bannerLabelYes=r.l10n.t("Yes, take survey now"),e.bannerLabelNo=r.l10n.t("No, thanks")}(h||(t.DataScienceSurveyBanner=h={})),function(e){e.warnWhenSelectingKernelWithUnSupportedPythonVersion=r.l10n.t("The version of Python associated with the selected kernel is no longer supported. Please consider selecting a different kernel."),e.installingPythonExtension=r.l10n.t("Installing Python extension and locating kernels."),e.pythonExtensionRequired=r.l10n.t("The Python Extension is required to perform that task. Click Yes to open Python Extension installation page."),e.rendererExtensionRequired=r.l10n.t("The Renderer Extension is required to view IPyWidgets. Click Yes to open Jupyter Notebook Renderer Extension installation page."),e.rendererExtension1015Required=r.l10n.t("The installed version of the Renderer Extension is outdated and requires and update to view IPyWidgets. Click Yes to open Jupyter Notebook Renderer Extension installation page."),e.pythonExtensionInstalled=r.l10n.t("Python Extension is now installed. Some features might not be available until a notebook or interactive window session is restarted."),e.uriProviderDescriptionFormat=(e,t)=>r.l10n.t("{0} (From {1} extension)",e,t),e.unknownPackage=r.l10n.t("unknown"),e.interactiveWindowTitleFormat=e=>r.l10n.t("Interactive - {0}",e),e.interactiveWindowModeBannerTitle=r.l10n.t({message:"Do you want to open a new Interactive Window for this file? [More Information](command:workbench.action.openSettings?%5B%22jupyter.interactiveWindowMode%22%5D).",args:[],comment:'The string "command:workbench.action.openSettings?%5B%22jupyter.interactiveWindowMode%22%5D" should not be translated. It is a command that opens the settings page with the "jupyter.interactiveWindowMode" setting selected.'}),e.interactiveWindowModeBannerSwitchYes=r.l10n.t("Yes"),e.interactiveWindowModeBannerSwitchNo=r.l10n.t("No"),e.dataExplorerTitle=r.l10n.t("Data Viewer"),e.badWebPanelFormatString=e=>r.l10n.t({message:"<html><body><h1>{0} is not a valid file name</h1></body></html>",args:[e],comment:["Only translate the text within the HTML tags"]}),e.installingMissingDependencies=r.l10n.t("Installing missing dependencies"),e.validatingKernelDependencies=r.l10n.t("Validating kernel dependencies"),e.performingExport=r.l10n.t("Performing Export"),e.exportNotebookToPython=r.l10n.t("Exporting Notebook to Python"),e.sessionDisposed=r.l10n.t("Cannot execute code, session has been disposed. Please try restarting the Kernel."),e.passwordFailure=r.l10n.t("Failed to connect to password protected server. Check that password is correct."),e.incorrectPassword=r.l10n.t("Incorrect Password."),e.exportDialogFilter=r.l10n.t("Jupyter Notebooks"),e.exportDialogComplete=e=>r.l10n.t("Notebook written to {0}",e),e.exportDialogFailed=e=>r.l10n.t("Failed to export notebook. {0}",e),e.exportOpenQuestion1=r.l10n.t("Open in editor"),e.runCellLensCommandTitle=r.l10n.t("Run Cell"),e.importDialogTitle=r.l10n.t("Import Jupyter Notebook"),e.importDialogFilter="Jupyter Notebooks",e.notebookCheckForImportNo=r.l10n.t("Later"),e.libraryRequiredToLaunchJupyterNotInstalled=e=>r.l10n.t("Running cells requires {0} package.",e),e.librariesRequiredToLaunchJupyterNotInstalled=e=>r.l10n.t("Running cells requires {0} package.",e),e.libraryRequiredToLaunchJupyterNotInstalledInterpreter=(e,t)=>r.l10n.t("Running cells with '{0}' requires the {1} package.",e,t),e.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreter=(e,t)=>r.l10n.t("Running cells with '{0}' requires the {1} package.",e,t),e.libraryRequiredToLaunchJupyterKernelNotInstalledInterpreterAndRequiresUpdate=(e,t)=>r.l10n.t("Running cells with '{0}' requires the {1} package to be installed or requires an update.",e,t),e.librariesRequiredToLaunchJupyterNotInstalledInterpreter=(e,t)=>r.l10n.t("Running cells with '{0}' requires the {1} package.",e,t),e.installPackageInstructions=(e,t)=>r.l10n.t("Run the following command to install '{0}' into the Python environment. \nCommand: '{1}'",e,t),e.pythonCondaKernelsWithoutPython=r.l10n.t("The Python Runtime and IPyKernel will be automatically installed upon selecting this environment."),e.selectJupyterInterpreter=r.l10n.t("Select an Interpreter to start Jupyter"),e.jupyterInstall=r.l10n.t("Install"),e.currentlySelectedJupyterInterpreterForPlaceholder=e=>r.l10n.t("Selected Environment {0}",e),e.jupyterNotSupported=e=>r.l10n.t("Jupyter cannot be started. Error attempting to locate Jupyter: {0}",e),e.jupyterNotebookNotInstalledOrNotFound=e=>{if(e){const t=function(e){const t=e.displayName||e.envName||"",n=(0,i.getDisplayPath)(e.uri);return t?` ${t} (${n})`:n}(e);return r.l10n.t("Failed to start Jupyter Server as the packages 'jupyter' and 'notebook' could not be located in the Python environment '{0}'.",t)}return r.l10n.t("Failed to start Jupyter Server as the packages 'jupyter' and 'notebook' could not be located in the Python environment.")},e.jupyterNotSupportedBecauseOfEnvironment=(e,t)=>r.l10n.t("Activating {0} to run Jupyter failed with {1}",e,t),e.jupyterNbConvertNotSupported=r.l10n.t("Jupyter nbconvert is not installed"),e.jupyterLaunchTimedOut=r.l10n.t("The Jupyter notebook server failed to launch in time"),e.jupyterLaunchNoURL=r.l10n.t("Failed to find the URL of the launched Jupyter notebook server"),e.jupyterSelfCertFail=e=>r.l10n.t("The security certificate used by server {0} was not issued by a trusted certificate authority.\r\nThis may indicate an attempt to steal your information.\r\nDo you want to enable the Allow Unauthorized Remote Connection setting for this workspace to allow you to connect?",e),e.jupyterExpiredCertFail=e=>r.l10n.t("The security certificate used by server {0} has expired.\r\nThis may indicate an attempt to steal your information.\r\nDo you want to enable the Allow Unauthorized Remote Connection setting for this workspace to allow you to connect?",e),e.jupyterSelfCertFailErrorMessageOnly=r.l10n.t("The security certificate used by server was not issued by a trusted certificate authority.\r\nThis may indicate an attempt to steal your information."),e.jupyterSelfCertExpiredErrorMessageOnly=r.l10n.t("The security certificate used by server has expired.\r\nThis may indicate an attempt to steal your information."),e.jupyterSelfCertEnable=r.l10n.t("Yes, connect anyways"),e.jupyterSelfCertClose=r.l10n.t("No, close the connection"),e.pythonInteractiveHelpLink=r.l10n.t("See <https://aka.ms/pyaiinstall> for help on installing Jupyter."),e.importingFormat=e=>r.l10n.t("Importing {0}",e),e.startingJupyter=r.l10n.t("Starting Jupyter Server"),e.connectingToKernel=e=>r.l10n.t("Connecting to kernel: {0}",e),e.connectingToJupyter=r.l10n.t("Connecting to Jupyter Server"),e.exportingFormat=e=>r.l10n.t("Exporting {0}",e),e.runAllCellsLensCommandTitle=r.l10n.t("Run All Cells"),e.runAllCellsAboveLensCommandTitle=r.l10n.t("Run Above"),e.runCellAndAllBelowLensCommandTitle=r.l10n.t("Run Below"),e.restartKernelMessage=r.l10n.t("Do you want to restart the Jupyter kernel? All variables will be lost."),e.restartKernelMessageYes=r.l10n.t("Restart"),e.restartKernelMessageDontAskAgain=r.l10n.t("Don't Ask Again"),e.automaticallyReconnectingToAKernelProgressMessage=e=>r.l10n.t("Reconnecting to the kernel {0}",e),e.restartingKernelStatus=e=>r.l10n.t("Restarting Kernel {0}",e),e.interruptingKernelFailed=r.l10n.t("Kernel interrupt failed. Jupyter Server is hung. Please reload VS Code."),e.sessionStartFailedWithKernel=e=>r.l10n.t({message:"Failed to start the Kernel '{0}'. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),e.failedToStartJupyter=e=>r.l10n.t({message:"Failed to start Jupyter in the environment '{0}'. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),e.failedToStartJupyterWithErrorInfo=(e,t)=>r.l10n.t({message:"Failed to start Jupyter in the environment '{0}'. \n{1} \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e,t],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),e.failedToStartJupyterDueToOutdatedTraitlets=(e,t)=>r.l10n.t({message:"Failed to start Jupyter in the environment '{0}' possibly due to an outdated version of 'traitlets'. \n{1} \nConsider updating the 'traitlets' module to '5.1.1' or later. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e,t],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the text 'traitlets', that is a Python module name"]}),e.failedToStartKernel=r.l10n.t("Failed to start the Kernel."),e.failedToRestartKernel=r.l10n.t("Failed to restart the Kernel."),e.failedToInterruptKernel=r.l10n.t("Failed to interrupt the Kernel."),e.rawKernelStartFailedDueToTimeout=e=>r.l10n.t({message:"Unable to start Kernel '{0}' due to a connection timeout. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),e.rawKernelStartFailedDueToTimeoutWaitingForPort=e=>r.l10n.t({message:"Unable to start Kernel '{0}' due to a timeout waiting for the ports to get used. \nView Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),e.viewJupyterLogForFurtherInfo=r.l10n.t({message:"View Jupyter [log](command:jupyter.viewOutput) for further details.",comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),e.kernelDied=e=>r.l10n.t({message:"The kernel died. Error: {0}... View Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),e.kernelDiedWithoutError=e=>r.l10n.t({message:"The kernel '{0}' died. Click [here](https://aka.ms/vscodeJupyterKernelCrash) for more info. View Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/vscodeJupyterKernelCrash"]}),e.failedToStartAnUntrustedKernelSpec=(e,t)=>r.l10n.t({message:"The kernel '{0}' was not started as it is located in an insecure location '{1}'.  \nClick [here](https://aka.ms/JupyterTrustedKernelPaths) for further details, optionally update the setting [jupyter.kernels.trusted](command:workbench.action.openSettings?[\"jupyter.kernels.trusted\"]) to trust the kernel.",args:[e,t],comment:['Do not translate the text "jupyter.kernels.trusted", that is a setting in VS Code','Do not translate the text command:workbench.action.openSettings?["jupyter.kernels.trusted"], that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/JupyterTrustedKernelPaths"]}),e.kernelDiedWithoutErrorAndAutoRestarting=e=>r.l10n.t({message:"The kernel '{0}' died and is being automatically restarted by Jupyter. Click [here](https://aka.ms/vscodeJupyterKernelCrash) for more info. View Jupyter [log](command:jupyter.viewOutput) for further details.",args:[e],comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/vscodeJupyterKernelCrash"]}),e.kernelCrashedDueToCodeInCurrentOrPreviousCell=r.l10n.t({message:"The Kernel crashed while executing code in the the current cell or a previous cell. Please review the code in the cell(s) to identify a possible cause of the failure. Click <a href='https://aka.ms/vscodeJupyterKernelCrash'>here</a> for more info. View Jupyter [log](command:jupyter.viewOutput) for further details.",comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel',"Do not translate the link https://aka.ms/vscodeJupyterKernelCrash"]}),e.kernelDisconnected=e=>r.l10n.t("Unable to connect to the kernel '{0}', please verify the Jupyter Server connection. View Jupyter [log](command:jupyter.viewOutput) for further details.",e),e.cannotRunCellKernelIsDead=e=>r.l10n.t("Cannot run cells, as the kernel '{0}' is dead.",e),e.showJupyterLogs=r.l10n.t("Show Jupyter Logs."),e.restartKernel=r.l10n.t("Restart Kernel"),e.reloadRequired=r.l10n.t("Please reload the window for new settings to take effect."),e.restartedKernelHeader=e=>r.l10n.t("Restarted {0}",e),e.connectedKernelHeader=e=>r.l10n.t("Connected to {0}",e),e.restartingKernelCustomHeader=e=>r.l10n.t("_Restarting {0}..._",e),e.restartingKernelHeader=r.l10n.t("_Restarting kernel..._"),e.startingNewKernelHeader=r.l10n.t("_Connecting to kernel..._"),e.startingNewKernelCustomHeader=e=>r.l10n.t("_Connecting to {0}..._",e),e.noKernelConnected=r.l10n.t("No kernel connected"),e.jupyterSelectUriCommandLabel=r.l10n.t("Enter the URL of the running Jupyter Server..."),e.jupyterSelectUriInputTitle=r.l10n.t("Enter the URL of the running Jupyter Server"),e.jupyterSelectUriInputPlaceholder=r.l10n.t("Enter the url of the running Jupyter Server"),e.connectToToTheJupyterServer=e=>r.l10n.t("Connect to the Jupyter Server {0}",e),e.enterOrSelectRemoteJupyterPlaceholder=r.l10n.t("Enter a remote url, or select a remote server"),e.selectRemoteJupyterPlaceholder=r.l10n.t("Select a remote server"),e.jupyterServerLastConnectionForQuickPickDescription=e=>r.l10n.t("Last connected {0}",(0,o.fromNow)(e,!0,!1,!1)),e.jupyterServerNotUsedBeforeQuickPickSeparatorTitle=r.l10n.t("Jupyter Servers"),e.jupyterSelectURIInvalidURI=r.l10n.t("Invalid URL specified"),e.jupyterSelectURIMustBeHttpOrHttps=r.l10n.t("Invalid protocol in URL specified, only HTTP or HTTPS are supported."),e.jupyterSelectLiveRemoteKernelDescription=(e,t)=>0===t?r.l10n.t("Last activity {0}",(0,o.fromNow)(e,!0,!1,!1)):1===t?r.l10n.t("Last activity {0}, 1 connection",(0,o.fromNow)(e,!0,!1,!1)):r.l10n.t("Last activity {0}, {1} connections",(0,o.fromNow)(e,!0,!1,!1),t.toString()),e.jupyterSelectUserAndPasswordTitle=r.l10n.t("Enter your user name and password to connect to Jupyter Hub"),e.jupyterRenameServer=r.l10n.t("Change Server Display Name (Leave Blank To Use URL)"),e.jupyterServerUriDisplayNameInputPlaceholder=r.l10n.t("Enter a display name"),e.jupyterSelectUserPrompt=r.l10n.t("Enter your user name"),e.jupyterSelectPasswordPrompt=r.l10n.t("Enter your password"),e.jupyterSelectPasswordTitle=r.l10n.t("Enter your password for the Jupyter Server"),e.pythonNotInstalled=r.l10n.t("Python is not installed. \nPlease download and install Python in order to execute cells in this notebook. \nOnce installed please reload VS Code."),e.pleaseReloadVSCodeOncePythonHasBeenInstalled=r.l10n.t("Upon installing Python please reload VS Code."),e.jupyterNotebookFailure=e=>r.l10n.t("Jupyter notebook failed to launch. \r\n{0}",e),e.remoteJupyterServerProvidedBy3rdPartyExtensionNoLongerValid=e=>r.l10n.t("The remote Jupyter Server contributed by the extension '{0}' is no longer available.",e),e.remoteJupyterConnectionFailedWithServerWithError=(e,t)=>r.l10n.t("Failed to connect to the remote Jupyter Server '{0}'. Verify the server is running and reachable. ({1}).",e,t),e.remoteJupyterConnectionFailedWithServer=e=>r.l10n.t("Failed to connect to the remote Jupyter Server '{0}'. Verify the server is running and reachable.",e),e.remoteJupyterConnectionFailedWithoutServerWithError=e=>r.l10n.t("Connection failure. Verify the server is running and reachable. ({0}).",e),e.remoteJupyterConnectionFailedWithoutServerWithErrorWeb=e=>r.l10n.t("Connection failure. Verify the server is running and reachable from a browser. ({0}). \nWhen connecting from vscode.dev Jupyter servers must be started with specific options to connect. \nClick [here](https://aka.ms/vscjremoteweb) for more information.",e),e.removeRemoteJupyterConnectionButtonText=r.l10n.t("Forget Connection"),e.jupyterNotebookRemoteConnectFailedWeb=e=>r.l10n.t("Failed to connect to remote Jupyter Server.\r\nCheck that the Jupyter Server URL can be reached from a browser.\r\n{0}. Click [here](https://aka.ms/vscjremoteweb) for more information.",e),e.packageNotInstalledWindowsLongPathNotEnabledError=(e,t)=>r.l10n.t("Support for Windows Long Path has not been enabled, hence the package {0} could not be installed into the Python Environment '{1}'.\nPlease ensure that support for Windows Long Path is enabled.\nSee [here](https://pip.pypa.io/warnings/enable-long-paths) for more information.",e,t),e.changeRemoteJupyterConnectionButtonText=r.l10n.t("Manage Connections"),e.rawConnectionBrokenError=r.l10n.t("Direct kernel connection broken"),e.jupyterServerCrashed=e=>r.l10n.t("Jupyter Server crashed. Unable to connect. \r\nError code from Jupyter: {0}",e.toString()),e.jupyterKernelSpecModuleNotFound=e=>r.l10n.t("'Kernelspec' module not installed in the selected interpreter ({0}).\n Please re-install or update 'jupyter'.",e),e.interruptKernelStatus=r.l10n.t("Interrupting Jupyter Kernel"),e.exportPythonQuickPickLabel=r.l10n.t("Python Script"),e.exportHTMLQuickPickLabel=r.l10n.t("HTML"),e.exportPDFQuickPickLabel=r.l10n.t("PDF"),e.restartKernelAfterInterruptMessage=r.l10n.t("Interrupting the kernel timed out. Do you want to restart the kernel instead? All variables will be lost."),e.documentMismatch=e=>r.l10n.t("Cannot run cells, duplicate documents for {0} found.",e),e.jupyterGetVariablesBadResults=r.l10n.t("Failed to fetch variable info from the Jupyter Server."),r.l10n.t("Failure to create an 'Interactive' window. Try reinstalling the Python Extension."),e.jupyterGetVariablesExecutionError=e=>r.l10n.t("Failure during variable extraction: \r\n{0}",e),e.selectKernel=r.l10n.t("Change Kernel"),e.selectDifferentKernel=r.l10n.t("Select a different Kernel"),e.kernelFilterPlaceholder=r.l10n.t("Choose the kernels that are available in the kernel picker."),e.recommendedItemCategoryInQuickPick=r.l10n.t("Recommended"),e.selectedKernelCategoryInQuickPick=r.l10n.t("Selected"),e.createPythonEnvironmentInQuickPick=r.l10n.t("Create Python Environment"),e.createPythonEnvironmentInQuickPickTooltip=r.l10n.t("Create an isolated Python Environment per workspace folder"),e.selectDifferentJupyterInterpreter=r.l10n.t("Change Interpreter"),e.pandasTooOldForViewingFormat=(e,t)=>r.l10n.t({message:"Python package 'pandas' is version {0}. Version {1} or greater is required for viewing data.",args:[e,t],comment:["Do not translate 'pandas' as that is a Python module name"]}),e.pandasRequiredForViewing=e=>r.l10n.t({message:"Python package 'pandas' version {0} (or above) is required for viewing data.",args:[e],comment:["Do not translate 'pandas' as that is a Python module name"]}),e.tooManyColumnsMessage=r.l10n.t("Variables with over a 1000 columns may take a long time to display. Are you sure you wish to continue?"),e.tooManyColumnsYes=r.l10n.t("Yes"),e.tooManyColumnsNo=r.l10n.t("No"),e.tooManyColumnsDontAskAgain=r.l10n.t("Don't Ask Again"),e.plotViewerTitle=r.l10n.t("Plots"),e.exportPlotTitle=r.l10n.t("Save plot image"),e.pdfFilter="PDF",e.pngFilter="PNG",e.svgFilter="SVG",e.exportImageFailed=e=>r.l10n.t("Error exporting image: {0}",e),e.jupyterDataRateExceeded=r.l10n.t({message:"Cannot view variable because data rate exceeded. Please restart your server with a higher data rate limit. For example, --NotebookApp.iopub_data_rate_limit=10000000000.0",comment:["Do not translate the text --NotebookApp.iopub_data_rate_limit=10000000000.0 as that is a command argument."]}),e.addCellBelowCommandTitle=r.l10n.t("Add cell"),e.debugCellCommandTitle=r.l10n.t("Debug Cell"),e.debugStepOverCommandTitle=r.l10n.t("Step over"),e.debugContinueCommandTitle=r.l10n.t("Continue"),e.debugStopCommandTitle=r.l10n.t("Stop"),e.runCurrentCellAndAddBelow=r.l10n.t("Run current cell and add empty cell below"),e.jupyterDebuggerNotInstalledError=e=>r.l10n.t("Pip module {0} is required for debugging cells. You will need to install it to debug cells.",e),e.jupyterDebuggerOutputParseError=e=>r.l10n.t("Unable to parse {0} output, please log an issue with https://github.com/microsoft/vscode-jupyter",e),e.cellStopOnErrorMessage=r.l10n.t("Cell was canceled due to an error in a previous cell."),e.scrollToCellTitleFormatMessage=e=>r.l10n.t("Go to [{0}]",e.toString()),e.instructionComments=e=>r.l10n.t("# To add a new cell, type '{0}'\n# To add a new markdown cell, type '{0} [markdown]'\n",e),e.exportButtonTitle=r.l10n.t("Export"),e.exportAsQuickPickPlaceholder=r.l10n.t("Export As..."),e.openExportedFileMessage=r.l10n.t("Would you like to open the exported file?"),e.openExportFileYes=r.l10n.t("Yes"),e.openExportFileNo=r.l10n.t("No"),e.exportFailedGeneralMessage=r.l10n.t({message:"Please check the 'Jupyter' [output](command:jupyter.viewOutput) panel for further details.",comment:['Do not translate the text "command:jupyter.viewOutput", that is a command Id that will be used by VS Code to open the output panel']}),e.exportToPDFDependencyMessage=r.l10n.t('If you have not installed xelatex (TeX) you will need to do so before you can export to PDF, for further instructions please look https://nbconvert.readthedocs.io/en/latest/install.html#installing-tex. \r\nTo avoid installing xelatex (TeX) you might want to try exporting to HTML and using your browsers "Print to PDF" feature.'),e.failedExportMessage=r.l10n.t("Export failed."),e.startingJupyterLogMessage=(e,t)=>r.l10n.t("Starting Jupyter from {0} with arguments {1}",e,t),e.waitingForJupyterSessionToBeIdle=r.l10n.t("Waiting for Jupyter Session to be idle"),e.gettingListOfKernelsForRemoteConnection=r.l10n.t("Fetching Kernels"),e.gettingListOfKernelSpecs=r.l10n.t("Fetching Kernel specs"),e.startingJupyterNotebook=r.l10n.t("Starting Jupyter Notebook"),e.registeringKernel=r.l10n.t("Registering Kernel"),e.jupyterCommandLineReloadQuestion=r.l10n.t("Please reload the window when changing the Jupyter command line."),e.jupyterCommandLineReloadAnswer=r.l10n.t("Reload"),e.createdNewKernel=(e,t)=>r.l10n.t("{0}: Kernel started: {1}",e,t),e.kernelInvalid=e=>r.l10n.t("Kernel {0} is not usable. Check the Jupyter output tab for more information.",e),e.removeRemoteJupyterServerEntryInQuickPick=r.l10n.t("Remove"),e.loadClassFailedWithNoInternet=(e,t)=>r.l10n.t("Error loading {0}:{1}. Internet connection required for loading 3rd party widgets.",e,t),e.useCDNForWidgetsNoInformation=r.l10n.t("Widgets require us to download supporting files from a 3rd party website."),e.enableCDNForWidgetsSetting=(e,t)=>r.l10n.t("Widgets require us to download supporting files from a 3rd party website. (Error loading {0}:{1}).",e,t),e.enableCDNForWidgetsButton=r.l10n.t("Enable Downloads"),e.unhandledMessage=(e,t)=>r.l10n.t("Unhandled kernel message from a widget: {0} : {1}",e,t),e.cdnWidgetScriptNotAccessibleWarningMessage=(e,t)=>r.l10n.t("Unable to download widget '{0}' from 3rd party website {1}, due to network access. Expected behavior may be affected. Click [here](https://aka.ms/PVSCIPyWidgets) for more information.",e,t),e.widgetScriptNotFoundOnCDNWidgetMightNotWork=(e,t,n)=>r.l10n.t("Unable to find widget '{0}' version '{1}' from configured widget sources {2}. Expected behavior may be affected. Click [here](https://aka.ms/PVSCIPyWidgets) for more information.",e,t,n),e.insecureSessionMessage=r.l10n.t("Connecting over HTTP without a token may be an insecure connection. Do you want to connect to a possibly insecure server?"),e.insecureSessionDenied=r.l10n.t("Denied connection to insecure server."),e.selectKernelForEditor=r.l10n.t("[Select a kernel](command:_notebook.selectKernel) to run cells."),e.needIpykernel6=r.l10n.t("Ipykernel setup required for this feature"),e.setup=r.l10n.t("Setup"),e.showDataViewerFail=r.l10n.t("Failed to create the Data Viewer. Check the Jupyter tab of the Output window for more info."),e.defaultNotebookName=r.l10n.t("default"),e.recommendExtensionForNotebookLanguage=(e,t)=>r.l10n.t("The {0} extension is recommended for notebooks targeting the language '{1}'",e,t),e.kernelWasNotStarted=r.l10n.t("Kernel was not started. A kernel session is needed to start debugging."),e.noNotebookToDebug=r.l10n.t("No active notebook document to debug."),e.cantStartDebugging=r.l10n.t("Can't start debugging."),e.restartNotSupported=r.l10n.t("Restarting is not supported in the interactive window."),e.importingIpynb=r.l10n.t("Importing notebook file"),e.exportingToFormat=e=>r.l10n.t("Exporting to {0}",e),e.kernelCategoryForJupyterSession=r.l10n.t("Jupyter Session"),e.kernelDefaultRemoteDisplayName=r.l10n.t("Remote"),e.kernelCategoryForJupyterKernel=r.l10n.t("Jupyter Kernel"),e.kernelCategoryForRemoteJupyterKernel=r.l10n.t("Jupyter Kernel"),e.kernelCategoryForConda=r.l10n.t("Conda Env"),e.kernelCategoryForCondaWithoutPython=r.l10n.t("Conda Env Without Python"),e.kernelCategoryForPoetry=r.l10n.t("Poetry Env"),e.kernelCategoryForPipEnv=r.l10n.t("Pipenv Env"),e.kernelCategoryForPyEnv=r.l10n.t("PyEnv Env"),e.kernelCategoryForGlobal=r.l10n.t("Global Env"),e.kernelCategoryForVirtual=r.l10n.t("Virtual Env"),e.fileSeemsToBeInterferingWithKernelStartup=e=>r.l10n.t("The file '{0}' seems to be overriding built in modules and interfering with the startup of the kernel. Consider renaming the file and starting the kernel again.",e),e.moduleSeemsToBeInterferingWithKernelStartup=e=>r.l10n.t("The module '{0}' seems to be overriding built in modules and interfering with the startup of the kernel. Consider renaming the folder and starting the kernel again.",e),e.pipCondaInstallHoverWarning=(e,t)=>r.l10n.t("'!{0} install' could install packages into the wrong environment. [More info]({1})",e,t),e.percentPipCondaInstallInsteadOfBang=e=>r.l10n.t({message:"Use '%{0} install' instead of '!{0} install'",args:[e],comment:['Do not translate the string within quotes, such as "%{0} install" and "!{0} install" as that is a Jupyter Shell Magic command']}),e.replacePipCondaInstallCodeAction=e=>r.l10n.t("Replace with '%{0} install'",e),e.failedToStartKernelDueToMissingModule=e=>r.l10n.t("The kernel failed to start due to the missing module '{0}'. Consider installing this module.",e),e.failedToStartKernelDueToImportFailure=e=>r.l10n.t("The kernel failed to start as the module '{0}' could not be imported.",e),e.failedToStartKernelDueToImportFailureFromFile=(e,t)=>r.l10n.t("The kernel failed to start as '{0}' could not be imported from '{1}'.",e,t),e.failedToStartKernelDueToUnknownDllLoadFailure=r.l10n.t("The kernel failed to start as a dll could not be loaded."),e.failedToStartKernelDueToDllLoadFailure=e=>r.l10n.t("The kernel failed to start as the dll '{0}' could not be loaded.",e),e.failedToStartKernelDueToWin32APIFailure=r.l10n.t("The kernel failed to start due to an error with the Win32api module. Consider (re) installing this module."),e.failedToStartKernelDueToPyZmqFailure=r.l10n.t({message:"The kernel failed to start due to an error with the 'pyzmq' module. Consider re-installing this module.",comment:['Do not translate the string "pyzmq" as that is a Python module.']}),e.failedToStartKernelDueToOldIPython=r.l10n.t("The kernel failed to start due to an outdated version of IPython. Consider updating this module to the latest version."),e.failedToStartKernelDueToOldIPyKernel=r.l10n.t("The kernel failed to start due to an outdated version of IPyKernel. Consider updating this module to the latest version."),e.failedToStartKernelDueToMissingPythonEnv=e=>r.l10n.t("The kernel failed to start as the Python Environment '{0}' is no longer available. Consider selecting another kernel or refreshing the list of Python Environments.",e),e.matplotlibWidgetInsteadOfOther=r.l10n.t("'%matplotlib' widget works best inside of VS Code"),e.matplotlibWidgetCodeActionTitle=r.l10n.t("More info"),e.allowExtensionToUseJupyterKernelApi=(e,t)=>r.l10n.t("Do you want to give the extension '{0}' access to the Jupyter Kernels? Clicking '{1}' would allow this extension to execute code against the Jupyter Kernels.",e,t),e.thanksForUsingJupyterKernelApiPleaseRegisterWithUs=e=>r.l10n.t("Thank you for trying the Jupyter API. Please file an issue on our repo to allow the extension {0} to use this API in production. This would prevent us from breaking your extension when updating the API (as it is still a work in progress).",e),e.activatingPythonEnvironment=e=>r.l10n.t("Activating Python Environment '{0}'",e),e.runningKernelStartupHooksFor=e=>r.l10n.t("Running Kernel startup hooks in '{0}'",e),e.cellAtFormat=(e,t)=>r.l10n.t("{0} Cell {1}",e,t),e.jupyterServerConsoleOutputChannel=r.l10n.t("Jupyter Server Console"),e.kernelConsoleOutputChannel=e=>r.l10n.t("{0} Kernel Console Output",e),e.webNotSupported=r.l10n.t("Operation not supported in web version of Jupyter Extension."),e.failedToInstallPythonExtension=r.l10n.t("Failed to install the Python Extension."),e.filesPossiblyOverridingPythonModulesMayHavePreventedKernelFromStarting=e=>r.l10n.t("Some of the following files found in the working directory may have prevented the Kernel from starting. Consider renaming them.",e),e.listOfFilesWithLinksThatMightNeedToBeRenamed=e=>r.l10n.t("File(s): {0} might need to be renamed.",e),e.failedToGetVersionOfPandas=r.l10n.t("Failed to get version of Pandas to use the Data Viewer."),e.failedToInstallPandas=r.l10n.t("Failed to install Pandas to use the Data Viewer."),e.localKernelSpecs=r.l10n.t("Jupyter Kernel..."),e.localPythonEnvironments=r.l10n.t("Python Environments..."),e.quickPickTitleForSelectionOfJupyterServer=r.l10n.t("Select a Jupyter Server"),e.UserJupyterServerUrlProviderDisplayName=r.l10n.t("Existing Jupyter Server..."),e.UserJupyterServerUrlProviderDetail=r.l10n.t("Connect to an existing Jupyter Server"),e.kernelPickerSelectKernelTitle=r.l10n.t("Select Kernel"),e.kernelPickerSelectLocalKernelSpecTitle=r.l10n.t("Select a Jupyter Kernel"),e.quickPickSelectPythonEnvironmentTitle=r.l10n.t("Select a Python Environment"),e.kernelPickerSelectKernelFromRemoteTitle=e=>r.l10n.t("Select a Kernel from {0}",e),e.kernelPickerSelectKernelFromRemoteTitleWithoutName=r.l10n.t("Select a Jupyter Kernel"),e.installPythonExtensionViaKernelPickerTitle=r.l10n.t("Install Python Extension"),e.installPythonExtensionViaKernelPickerToolTip=r.l10n.t("Python Extension is required to detect and use Python environments for the execution of code cells."),e.installPythonQuickPickTitle=r.l10n.t("Install Python"),e.installPythonQuickPickToolTip=r.l10n.t("Python Environments not detected. Upon installation reload VS Code or refresh the list of Kernels."),e.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickLabel=r.l10n.t({message:"$(error) Unable to connect to the remote server",comment:"Do not translate the string $(error) as that is a VS Code icon."}),e.failedToFetchKernelSpecsRemoteErrorMessageForQuickPickDetail=r.l10n.t("Ensure the server is running and reachable.")}(p||(t.DataScience=p={})),function(e){e.collapseSingle=r.l10n.t("Collapse"),e.expandSingle=r.l10n.t("Expand"),e.noRowsInDataViewer=r.l10n.t("No rows match current filter"),e.sliceIndexError=r.l10n.t({message:"Index {0} out of range for axis {1} with {2} elements",comment:["Do not translate the strings {0}, {1} and {2} as they are variable names and will be replaced later"]}),e.sliceMismatchedAxesError=r.l10n.t({message:"Expected {0} axes, got {1} in slice expression",comment:["Do not translate the strings {0} and {2} as they are variable names and will be replaced later"]}),e.fetchingDataViewer=r.l10n.t("Fetching data ..."),e.dataViewerHideFilters=r.l10n.t("Hide filters"),e.dataViewerShowFilters=r.l10n.t("Show filters"),e.refreshDataViewer=r.l10n.t("Refresh data viewer"),e.sliceSummaryTitle=r.l10n.t("SLICING"),e.sliceData=r.l10n.t("Slice Data"),e.sliceSubmitButton=r.l10n.t("Apply"),e.sliceDropdownAxisLabel=r.l10n.t("Axis"),e.sliceDropdownIndexLabel=r.l10n.t("Index"),e.variableExplorerNameColumn=r.l10n.t("Name"),e.variableExplorerTypeColumn=r.l10n.t("Type"),e.variableExplorerCountColumn=r.l10n.t("Size"),e.variableExplorerValueColumn=r.l10n.t("Value"),e.collapseVariableExplorerLabel=r.l10n.t("Variables"),e.variableLoadingValue=r.l10n.t("Loading..."),e.showDataExplorerTooltip=r.l10n.t("Show variable snapshot in data viewer"),e.noRowsInVariableExplorer=r.l10n.t("No variables defined"),e.loadingRowsInVariableExplorer=r.l10n.t("Loading variables"),e.previousPlot=r.l10n.t("Previous"),e.nextPlot=r.l10n.t("Next"),e.panPlot=r.l10n.t("Pan"),e.zoomInPlot=r.l10n.t("Zoom in"),e.zoomOutPlot=r.l10n.t("Zoom out"),e.exportPlot=r.l10n.t("Export to different formats"),e.deletePlot=r.l10n.t("Remove"),e.selectedImageListLabel=r.l10n.t("Selected Image"),e.selectedImageLabel=r.l10n.t("Image"),e.errorOutputExceedsLinkToOpenFormatString=r.l10n.t({message:"Output exceeds the <a href={0}>size limit</a>. Open the full output data <a href={1}>in a text editor</a>",comment:['Do not translate the the Hyperlink text "<a href={0}>size limit</a>" and "<a href={1}>in a text editor</a>". However the text inside those tags can be translated']})}(f||(t.WebViews=f={})),function(e){e.SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE=r.l10n.t({message:"The setting 'python.formatting.formatOnSave' is deprecated, please use 'editor.formatOnSave'.",comment:['Do not translate the string "python.formatting.formatOnSave" as that is a setting in VS Code','Do not translate the string "editor.formatOnSave" as that is a setting in VS Code']}),e.SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE=r.l10n.t({message:"The setting 'python.linting.lintOnTextChange' is deprecated, please enable 'python.linting.lintOnSave' and 'files.autoSave'.",comment:['Do not translate the string "python.linting.lintOnTextChange" as that is a setting in VS Code','Do not translate the string "python.linting.lintOnSave" as that is a setting in VS Code']}),e.SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES=r.l10n.t({message:"The setting 'python.autoComplete.preloadModules' is deprecated, please consider using Pylance Language Server ('python.languageServer' setting).",comment:['Do not translate the string "python.autoComplete.preloadModules" as that is a setting in VS Code','Do not translate the string "python.languageServer" as that is a setting in VS Code']})}(g||(t.Deprecated=g={})),function(e){e.noCondaOrPipInstaller=r.l10n.t("There is no Conda or Pip installer available in the selected environment."),e.noPipInstaller=r.l10n.t("There is no Pip installer available in the selected environment."),e.searchForHelp=r.l10n.t("Search for help")}(m||(t.Installer=m={})),function(e){e.installingModule=e=>r.l10n.t("Installing {0}",e)}(v||(t.Products=v={}))},58681:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areObjectsWithUrisTheSame=t.isWeb=t.isNotebookCell=t.isUri=t.isResource=t.tracing=t.swallowExceptions=t.noop=void 0;const r=n(15925),i=n(43138),o=n(11386);function s(){}function a(e){if(!e)return!1;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}function c(e,t){return a(t)?t.toString():t}t.noop=s,t.swallowExceptions=function(e){try{const t=e();(0,i.isPromise)(t)&&t.catch(s)}catch{}},t.tracing=function(e,t,n){const r=new o.StopWatch;try{n&&e(void 0);const o=t();return(0,i.isPromise)(o)?o.then((t=>(e({elapsed:r.elapsedTime,returnValue:t}),t))).catch((t=>{e({elapsed:r.elapsedTime,err:t})})):e({elapsed:r.elapsedTime,returnValue:o}),o}catch(t){throw e({elapsed:r.elapsedTime,err:t}),t}},t.isResource=function(e){if(!e)return!0;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme},t.isUri=a,t.isNotebookCell=function(e){const t=a(e)?e:e.uri;return t.scheme.includes(r.NotebookCellScheme)||t.path.endsWith(".interactive")},t.isWeb=function(){return"web"==="web".toString()},t.areObjectsWithUrisTheSame=function(e,t){return e===t||!(e&&!t)&&JSON.stringify(e,c)===JSON.stringify(t,c)}},19450:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiStepInputFactory=t.IMultiStepInputFactory=t.MultiStepInput=t.InputFlowAction=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(20397),l=n(43138),u=n(58681);class d extends Error{}t.InputFlowAction=d,d.back=new d("back"),d.cancel=new d("cancel"),d.resume=new d("resume");class h{constructor(e){this.shell=e,this.steps=[]}run(e,t){return this.stepThrough(e,t)}async showQuickPick(e){return this.showLazyLoadQuickPick(e).selection}showLazyLoadQuickPick({title:e,step:t,totalSteps:n,items:r,activeItem:i,placeholder:o,buttons:a,shouldResume:h,matchOnDescription:p,matchOnDetail:f,acceptFilterBoxTextAsSelection:g,startBusy:m,stopBusy:v,validate:y,onDidTriggerItemButton:b,onDidTriggerButton:w,supportBackInFirstStep:S,onDidChangeItems:C,ignoreFocusOut:_}){const P=[],E=(0,l.createDeferred)(),k=this.shell.createQuickPick();return k.title=e,k.step=t,k.totalSteps=n,k.placeholder=o,k.ignoreFocusOut=_??!0,k.items=r,v&&(k.busy=m??!1,v((()=>{k.enabled&&(k.busy=!1)}),this,P)),C&&(k.keepScrollPosition=!0,C((e=>{k.items=e}),this,P)),b&&k.onDidTriggerItemButton((e=>b(e)),void 0,P),k.matchOnDescription=p||!1,k.matchOnDetail=f||!1,k.activeItems=i?[i]:[],k.buttons=[...this.steps.length>1||S?[s.QuickInputButtons.Back]:[],...a||[]],P.push(k.onDidTriggerButton((e=>{e===s.QuickInputButtons.Back?E.reject(d.back):w?w(e):E.resolve(e)})),k.onDidChangeSelection((async e=>{const t=e.length?e[0].label:"";let n=!!t;if(t&&y&&e.length){k.enabled=!1,k.busy=!0;const t=await y(e[0]);t&&(n=!1,await this.shell.showErrorMessage(t,{modal:!0})),k.enabled=!0,k.busy=!1}n&&E.resolve(e[0])})),k.onDidHide((()=>{(async()=>{E.reject(h&&await h()?d.resume:d.cancel)})().catch(E.reject)}))),g&&P.push(k.onDidAccept((async()=>{if(!k.busy){const e=y?await y(k):void 0;e?(k.enabled=!1,k.busy=!0,await this.shell.showErrorMessage(e),k.enabled=!0,k.busy=!1):E.resolve(k.value)}}))),this.current&&this.current.dispose(),this.current=k,this.current.show(),E.promise.finally((()=>(0,c.dispose)(P))).catch(u.noop),{quickPick:k,selection:E.promise}}async showInputBox({title:e,step:t,totalSteps:n,value:r,prompt:i,validate:o,password:a,buttons:c,shouldResume:l,validationMessage:u}){const h=[];try{return await new Promise(((p,f)=>{const g=this.shell.createInputBox();g.title=e,g.step=t,g.totalSteps=n,g.password=!!a,g.value=r||"",g.prompt=i,g.validationMessage=u||"",g.ignoreFocusOut=!0,g.validationMessage=u||"",g.buttons=[...this.steps.length>1?[s.QuickInputButtons.Back]:[],...c||[]],h.push(g.onDidTriggerButton((e=>{e===s.QuickInputButtons.Back?f(d.back):p(e)})),g.onDidAccept((async()=>{const e=g.value;g.enabled=!1,g.busy=!0;const t=await o(e);t?(g.validationMessage=t,g.show()):(g.validationMessage="",p(e)),g.enabled=!0,g.busy=!1})),g.onDidChangeValue((async()=>{g.validationMessage=""})),g.onDidHide((()=>{(async()=>{g.busy||f(l&&await l()?d.resume:d.cancel)})().catch(f)}))),this.current&&this.current.dispose(),this.current=g,this.current.show()}))}finally{h.forEach((e=>e.dispose()))}}async stepThrough(e,t){let n=e;for(;n;){this.steps.push(n),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{n=await n(this,t)}catch(e){if(e===d.back)this.steps.pop(),n=this.steps.pop();else if(e===d.resume)n=this.steps.pop();else{if(e!==d.cancel)throw e;n=void 0}if(!n)return e}}this.current&&this.current.dispose()}}t.MultiStepInput=h,t.IMultiStepInputFactory=Symbol("IMultiStepInputFactory");let p=class{constructor(e){this.shell=e}create(){return new h(this.shell)}};t.MultiStepInputFactory=p,t.MultiStepInputFactory=p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell))],p)},13730:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openAndShowNotebook=void 0;const r=n(66828);t.openAndShowNotebook=async function(e){const t=await r.workspace.openNotebookDocument(e);await r.window.showNotebookDocument(t)}},72728:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.untildify=t.getOSType=t.OSType=void 0,function(e){e.Unknown="Unknown",e.Windows="Windows",e.OSX="OSX",e.Linux="Linux"}(n||(t.OSType=n={})),t.getOSType=function(e="web"){return/^win/.test(e)?n.Windows:/^darwin/.test(e)?n.OSX:/^linux/.test(e)?n.Linux:n.Unknown},t.untildify=function(e,t){return e.replace(/^~(?=$|\/|\\)/,t)}},74075:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMonitor=void 0;const r=n(66828),i=n(58681);t.PromiseMonitor=class{constructor(){this.promises=new Set,this._onStateChange=new r.EventEmitter,this.onStateChange=this._onStateChange.event}get isComplete(){return 0===this.promises.size}dispose(){this._onStateChange.dispose()}push(e){this.promises.add(e),this._onStateChange.fire(),e.finally((()=>{this.promises.delete(e),this.isComplete&&this._onStateChange.fire()})).catch(i.noop)}}},58323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripAnsi=t.buildDataViewerFilterRegex=t.verboseRegExp=void 0,t.verboseRegExp=function(e,t){return e=(e=e.replace(/(^| {2})# .*$/gm,"")).replace(/\s+?/g,""),RegExp(e,t)};const r=/[\.\+\?\^\$\{\}\(\)\|\[\]\\]/;t.buildDataViewerFilterRegex=function(e){let t="";return e.startsWith("=")?e=`^${e.substr(1).trim()}$`:r.test(e)||(e=`^.*${e}.*$`,t="i"),new RegExp(e,t)},t.stripAnsi=function(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);let t=n(14277);return t.default&&(t=t.default),e.replace(t(),"")}},81014:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeDataViews=t.serializeDataViews=void 0,t.serializeDataViews=function(e){if(!e||!Array.isArray(e)||0===e.length)return;const t=[];for(let n=0;n<e.length;n+=1){const r=e[n];if("buffer"in r&&"byteOffset"in r){const e=Array.apply(null,new Uint8Array(r.buffer));t.push({...r,byteLength:r.byteLength,byteOffset:r.byteOffset,buffer:e})}else t.push([...new Uint8Array(r)])}return t},t.deserializeDataViews=function(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(let n=0;n<e.length;n+=1){const r=e[n];if("buffer"in r&&"byteOffset"in r){const e=new Uint8Array(r.buffer).buffer,n=new DataView(e,r.byteOffset,r.byteLength);t.push(n)}else{const e=new Uint8Array(r).buffer;t.push(e)}}return t}},11386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWatch=void 0,t.StopWatch=class{constructor(){this.started=(new Date).getTime()}get elapsedTime(){return(new Date).getTime()-this.started}reset(){this.started=(new Date).getTime()}}},98708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=t.isObject=t.isString=t.isArray=void 0;const n="number";t.isArray=function(e){return Array.isArray?Array.isArray(e):!(!e||typeof e.length!==n||e.constructor!==Array)},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)},t.isNumber=function(e){return(typeof e===n||e instanceof Number)&&!isNaN(e)}},26264:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractSystemVariables=void 0;const s=o(n(98708));t.AbstractSystemVariables=class{resolve(e){return s.isString(e)?this.__resolveString(e):s.isArray(e)?this.__resolveArray(e):s.isObject(e)?this.__resolveLiteral(e):e}resolveAny(e){return s.isString(e)?this.__resolveString(e):s.isArray(e)?this.__resolveAnyArray(e):s.isObject(e)?this.__resolveAnyLiteral(e):e}__resolveString(e){return e.replace(/\$\{(.*?)\}/g,((e,t)=>{const n=this[t];return s.isString(n)?n:e&&(e.indexOf("env.")>0||e.indexOf("env:")>0)?"":e}))}__resolveLiteral(e){const t=Object.create(null);return Object.keys(e).forEach((n=>{const r=e[n];t[n]=this.resolve(r)})),t}__resolveAnyLiteral(e){const t=Object.create(null);return Object.keys(e).forEach((n=>{const r=e[n];t[n]=this.resolveAny(r)})),t}__resolveArray(e){return e.map((e=>this.__resolveString(e)))}__resolveAnyArray(e){return e.map((e=>this.resolveAny(e)))}}},471:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemVariables=void 0;const r=n(66828),i=n(26264);class o extends i.AbstractSystemVariables{constructor(e,t,n,i){super();const o=n&&e?n.getWorkspaceFolder(e):void 0;this._workspaceFolder=o?o.uri.path:t||"",this._filePath=e?e.path:void 0,i&&i.activeTextEditor&&(this._lineNumber=i.activeTextEditor.selection.anchor.line+1,this._selectedText=i.activeTextEditor.document.getText(new r.Range(i.activeTextEditor.selection.start,i.activeTextEditor.selection.end)))}get cwd(){return this.workspaceFolder}get workspaceRoot(){return this._workspaceFolder}get workspaceFolder(){return this._workspaceFolder}get file(){return this._filePath}get lineNumber(){return this._lineNumber}get selectedText(){return this._selectedText}}t.SystemVariables=o},91083:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBuiltInJupyterProvider=t.UserJupyterServerPickerProviderId=t.TestingKernelPickerProviderId=t.Exiting=t.isPreReleaseVersion=t.MillisecondsInADay=t.HiddenFileFormatString=void 0,t.HiddenFileFormatString="_HiddenFile_{0}.py",t.MillisecondsInADay=864e5,t.isPreReleaseVersion=function(){try{return"true"}catch{return"true"}},t.Exiting={isExiting:!1},t.TestingKernelPickerProviderId="_builtin.JupyterServerSelectorForTesting",t.UserJupyterServerPickerProviderId="_builtin.jupyterServerUrlProvider",t.isBuiltInJupyterProvider=function(e){return e===t.TestingKernelPickerProviderId||e===t.UserJupyterServerPickerProviderId}},29629:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createOutputWithErrorMessageForDisplay=t.analyzeKernelErrors=t.KernelFailureReason=t.getLastFrameFromPythonTraceback=t.getLastTwoLinesFromPythonTracebackWithErrorMessage=t.getErrorMessageFromPythonTraceback=t.getTelemetrySafeErrorMessageFromPythonTraceback=t.ErrorUtils=void 0;const s=n(66828),a=n(35412),c=n(25251),l=n(30002),u=n(37853),d=o(n(52859)),h=n(20397),p=n(65864);function f(e=""){if(!e)return;const t=e.trim().split("\n").map((e=>e.trim())).filter((e=>e.trim().length)).reverse();return 0!==t.length&&t[0].includes("Error")?[t.length>1?t[1]:"",t[0]]:void 0}var g;function m(e){const t=(e=e.replace(/"/g,"'")).match(/'[^\\']*(\\'[^\\']*)*'/g),n=e.match(/\((.*?)\)/g);let r,i;return t&&t[0].length>2&&(r=t[0],r=r.substring(1,r.length-1)),n&&n[0].length>2&&(i=n[0],i=i.substring(1,i.length-1)),r?{moduleName:r,fileName:i}:void 0}t.ErrorUtils=class{static outputHasModuleNotInstalledError(e,t){return!(!t||!(t.indexOf(`No module named ${e}`)>0||t.indexOf(`No module named '${e}'`)>0))}},t.getTelemetrySafeErrorMessageFromPythonTraceback=function(e=""){if(!e)return;const t=`${e.trim()}: `.split("\n").filter((e=>e.trim().length)).reverse();if(0===t.length)return;const n=t[0],r=((n.match(/\S+Error: /g)?n:void 0)||"").split(":");return r.length&&r[0].endsWith("Error")?r[0]:void 0},t.getErrorMessageFromPythonTraceback=function(e=""){const t=f(e);return t?t[1]:void 0},t.getLastTwoLinesFromPythonTracebackWithErrorMessage=f,t.getLastFrameFromPythonTraceback=function(e){if(!e)return;const t=(Array.isArray(e)?e[0]:e).split("\n").map((e=>e.trim().toLowerCase())).filter((e=>e.length)).reverse().find((e=>e.startsWith("file ")&&e.includes(", line ")&&e.includes(".py")&&e.includes(".py")));if(!t)return;const n=(t.substring(0,t.lastIndexOf(".py"))+".py").replace(/\\/g,"/").split("/"),r=n.indexOf("site-packages");let i=r>=0&&n.length>r+1?n[r+1]:"";const o=n.reverse();return o.length<2?void 0:{fileName:o[0],folderName:o[1],packageName:i}},function(e){e.importWin32apiFailure="importWin32apiFailure",e.zmqModuleFailure="zmqModuleFailure",e.oldIPythonFailure="oldIPythonFailure",e.oldIPyKernelFailure="oldIPyKernelFailure",e.overridingBuiltinModules="overridingBuiltinModules",e.importFailure="importFailure",e.moduleNotFoundFailure="moduleNotFound",e.dllLoadFailure="dllLoadFailure",e.jupyterStartFailure="jupyterStartFailure",e.jupyterStartFailureOutdatedTraitlets="jupyterStartFailureOutdatedTraitlets",e.pythonEnvironmentMissing="pythonEnvironmentMissing",e.sessionDisposed="sessionDisposed"}(g||(t.KernelFailureReason=g={})),t.analyzeKernelErrors=function(e,t,n,r="",i=[]){const o=t instanceof u.BaseError?t.stdErr||t.stack||"":t.toString(),v=f(o),y=o.toLowerCase();if(t instanceof p.SessionDisposedError)return{reason:g.sessionDisposed,message:c.DataScience.sessionDisposed,moreInfoLink:"https://aka.ms/kernelDisposedCannotRunCell",telemetrySafeTags:["deadSession"]};if(y.includes("ImportError: No module named 'win32api'".toLowerCase()))return{reason:g.importWin32apiFailure,message:c.DataScience.failedToStartKernelDueToWin32APIFailure,moreInfoLink:"https://aka.ms/kernelFailuresWin32Api",telemetrySafeTags:["win32api"]};if(y.includes("ImportError: DLL load failed".toLowerCase())&&y.includes("win32api"))return{reason:g.importWin32apiFailure,message:c.DataScience.failedToStartKernelDueToWin32APIFailure,moreInfoLink:"https://aka.ms/kernelFailuresWin32Api",telemetrySafeTags:["dll.load.failed","win32api"]};if(y.includes("ImportError: DLL load failed".toLowerCase())){const e=v&&v[0].toLowerCase().startsWith("import")?v[0].substring(6).trim():void 0;return{reason:g.dllLoadFailure,moduleName:e,message:e?c.DataScience.failedToStartKernelDueToDllLoadFailure(e):c.DataScience.failedToStartKernelDueToUnknownDllLoadFailure,moreInfoLink:"https://aka.ms/kernelFailuresDllLoad",telemetrySafeTags:["dll.load.failed"]}}if(y.includes("AssertionError: Couldn't find Class NSProcessInfo".toLowerCase()))return{reason:g.oldIPythonFailure,message:c.DataScience.failedToStartKernelDueToOldIPython,moreInfoLink:"https://aka.ms/kernelFailuresOldIPython",telemetrySafeTags:["oldipython"]};if(y.includes("NotImplementedError".toLowerCase())&&y.includes("asyncio".toLowerCase())&&y.includes("events.py".toLowerCase()))return{reason:g.oldIPyKernelFailure,message:c.DataScience.failedToStartKernelDueToOldIPyKernel,moreInfoLink:"https://aka.ms/kernelFailuresOldIPyKernel",telemetrySafeTags:["oldipykernel"]};{const e=[];if(y.includes("ImportError: cannot import name".toLowerCase())&&y.includes("from partially initialized module".toLowerCase())&&y.includes("zmq.backend.cython".toLowerCase())&&e.push("zmq.backend.cython"),y.includes("zmq".toLowerCase())&&y.includes("cython".toLowerCase())&&y.includes("__init__.py".toLowerCase())&&e.push("zmq.cython"),y.includes("zmq.error.ZMQError")&&e.push("zmq.error"),e.length)return{reason:g.zmqModuleFailure,message:c.DataScience.failedToStartKernelDueToPyZmqFailure,moreInfoLink:"https://aka.ms/kernelFailuresPyzmq",telemetrySafeTags:e}}if(v&&v[1].toLowerCase().startsWith("importerror")){const t=m(v[1]);if(t&&r){const n=function(e,t,n,r){if(r&&0!==n.length&&t&&!t.toLowerCase().startsWith(r)&&n.some((e=>t.toLowerCase().startsWith(e.uri.fsPath.toLowerCase()))))return{reason:g.overridingBuiltinModules,fileName:t,moduleName:e,message:c.DataScience.fileSeemsToBeInterferingWithKernelStartup((0,a.getDisplayPath)(s.Uri.file(t),n||[])),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}}(t.moduleName,t.fileName,e,r);return n||{reason:g.importFailure,moduleName:t.moduleName,fileName:t.fileName,message:t.fileName?c.DataScience.failedToStartKernelDueToImportFailureFromFile(t.moduleName,t.fileName):c.DataScience.failedToStartKernelDueToImportFailure(t.moduleName),moreInfoLink:t.fileName?"https://aka.ms/kernelFailuresModuleImportErrFromFile":"https://aka.ms/kernelFailuresModuleImportErr",telemetrySafeTags:["import.error"]}}}const b="No module named".toLowerCase(),w="is not a package".toLowerCase();if(y.includes(b)&&!w){const e=(0,h.splitLines)(o).map((e=>e.trim())).filter((e=>e.length)).find((e=>e.toLowerCase().includes(b))),t=e?e.substring(e.toLowerCase().indexOf(b)+b.length).trim():"";if(e)return{reason:g.moduleNotFoundFailure,moduleName:t,message:c.DataScience.failedToStartKernelDueToMissingModule(t),moreInfoLink:"https://aka.ms/kernelFailuresMissingModule",telemetrySafeTags:["module.notfound.error"]}}else{if(y.includes(b)&&w){const e=(0,h.splitLines)(o).map((e=>e.trim())).filter((e=>e.length)).find((e=>e.toLowerCase().includes(b)));let t=e?e.substring(e.toLowerCase().indexOf(b)+b.length).trim():"",n="",r="";t.split("'").length>2&&(n=t.split("'").slice(-2)[0]||"",n=n?`${n}.py`:"",r=n||"",t=t.split("'")[1]||t);const s=i.filter((e=>"__init__.py"===d.basename(e).toLowerCase())).map((e=>d.basename(d.dirname(e))));return t&&n&&t!==n&&i.some((e=>d.basename(e).toLowerCase()===n.toLowerCase()))?{reason:g.overridingBuiltinModules,fileName:n,moduleName:t,message:c.DataScience.fileSeemsToBeInterferingWithKernelStartup(n),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}:t&&s&&t!==r&&s.some((e=>e.toLowerCase()===r.toLowerCase()))?{reason:g.overridingBuiltinModules,folderName:r,moduleName:t,message:c.DataScience.moduleSeemsToBeInterferingWithKernelStartup(r),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}:{reason:g.moduleNotFoundFailure,moduleName:t,message:c.DataScience.failedToStartKernelDueToMissingModule(t),moreInfoLink:"https://aka.ms/kernelFailuresMissingModule",telemetrySafeTags:["module.notfound.error"]}}if(t instanceof u.BaseError&&"invalidkernel"===t.category&&i.length){const e=d.basename(i[0]);return{reason:g.overridingBuiltinModules,fileName:e,moduleName:d.basename(i[0],".py"),message:c.DataScience.fileSeemsToBeInterferingWithKernelStartup(e),moreInfoLink:"https://aka.ms/kernelFailuresOverridingBuiltInModules",telemetrySafeTags:["import.error","override.modules"]}}if(v&&v[1].toLowerCase().startsWith("ModuleNotFoundError".toLowerCase())){const e=m(v[1]);if(e)return{reason:g.moduleNotFoundFailure,moduleName:e.moduleName,message:c.DataScience.failedToStartKernelDueToMissingModule(e.moduleName),moreInfoLink:"https://aka.ms/kernelFailuresMissingModule",telemetrySafeTags:["module.notfound.error"]}}}if(t instanceof l.JupyterConnectError){let e=(0,h.splitLines)(o).map((e=>e.trim())).reverse().find((e=>e.toLowerCase().includes("error: ")));const r="AttributeError: 'Namespace' object has no attribute '_flags'",i=["jupyter.startup.failure"];let s,a=g.jupyterStartFailure,l=(0,h.splitLines)(t.message,{removeEmptyEntries:!0,trim:!0}).reverse().find((e=>e.toLowerCase().includes("error: ")));if(l=l||(0,h.splitLines)(t.stdErr||"",{removeEmptyEntries:!0,trim:!0}).reverse().find((e=>e.toLowerCase().includes("error: "))),y.includes(r.toLowerCase())?(a=g.jupyterStartFailureOutdatedTraitlets,e=c.DataScience.failedToStartJupyterDueToOutdatedTraitlets(n||"",l||""),i.push("outdated.traitlets"),s="https://aka.ms/kernelFailuresJupyterTrailtletsOutdated"):(e=l?c.DataScience.failedToStartJupyterWithErrorInfo(n||"",l):c.DataScience.failedToStartJupyter(n||""),s=void 0),e)return{reason:a,message:e,pythonError:l,moreInfoLink:s,telemetrySafeTags:i}}},t.createOutputWithErrorMessageForDisplay=function(e){if(!e)return;const t=/\[([^\[\]]*)\]\((.*?)\)/gm;let n;for(;null!==(n=t.exec(e));)3===n.length&&(e=e.replace(n[0],`<a href='${n[2]}'>${n[1]}</a>`));const r=(0,h.splitLines)(e,{removeEmptyEntries:!1,trim:!1}).map((e=>`[1;31m${e}`)).join("\n");return new s.NotebookCellOutput([s.NotebookCellOutputItem.error({message:"",name:"",stack:r})])}},93988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorTags=void 0;const r=n(29629),i=[function(e,t=[]){e.includes("ChildProcess.exithandler".toLowerCase())&&t.push("childproc.exit")},function(e,t=[]){e.includes("KernelRestarter: restart failed".toLowerCase())&&t.push("KernelRestarter.failed")}];t.getErrorTags=function(e){const t=[];let n=Array.isArray(e)?e[0].toLowerCase():e.toLowerCase();i.forEach((e=>e(n,t)));const o=(0,r.analyzeKernelErrors)([],n,void 0);return o?.telemetrySafeTags.length&&t.push(...o.telemetrySafeTags),Array.from(new Set(t)).join(",")}},12189:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseStack=t.populateTelemetryWithErrorInfo=void 0;const s=n(83300),a=o(n(77911)),c=n(96434),l=n(93988),u=n(29629),d=n(37853);function h(e){if(e.stack&&Array.isArray(e.stack)){const t={...e,stack:e.stack.join("\n")};return a.parse.call(a,t)}return a.parse.call(a,e)}function p(e){const t=[];return"string"==typeof e.getTypeName()&&e.getTypeName().length>0&&t.push(e.getTypeName()),"string"==typeof e.getMethodName()&&e.getMethodName().length>0&&t.push(e.getMethodName()),"string"==typeof e.getFunctionName()&&e.getFunctionName().length>0&&(2===t.length&&t.join(".")===e.getFunctionName()||t.push(e.getFunctionName())),t.join(".")}t.populateTelemetryWithErrorInfo=async function(e,t){e.failed=!0,e.failureCategory=e.failureCategory||(0,d.getErrorCategory)(t);const n=!s.FetchError&&"TypeError"===t?.name&&"Failed to fetch"===t?.message,r=n?TypeError:s.FetchError,i=(n||void 0!==s.FetchError)&&function(e,t){return t?e instanceof t||e instanceof d.WrappedError&&e.originalException instanceof t:(console.error("Error type is not defined",e),!1)}(t,r);"unknown"===e.failureCategory&&i&&(e.failureCategory="fetcherror"),e.stackTrace=function(e){let t="";for(const n of h(e)){const e=n.getFileName();if(e){const r=n.getLineNumber(),i=n.getColumnNumber();t+=`\n\tat ${p(n)} ${e}:${r}:${i}`}else t+="\n\tat <anonymous>"}return t.trim().replace(/\\/g,"/")}(t),"string"==typeof t&&(e.failureSubCategory="errorisstring");const o=t.stdErr?t.stdErr:t.stack||"";if(!o)return;e.failureSubCategory=e.failureSubCategory||(0,l.getErrorTags)(o);const a=(0,u.getLastFrameFromPythonTraceback)(o);a&&([e.pythonErrorFile,e.pythonErrorFolder,e.pythonErrorPackage]=await Promise.all([Promise.resolve(e.pythonErrorFile||(0,c.getTelemetrySafeHashedString)(a.fileName)),Promise.resolve(e.pythonErrorFolder||(0,c.getTelemetrySafeHashedString)(a.folderName)),Promise.resolve(e.pythonErrorPackage||(0,c.getTelemetrySafeHashedString)(a.packageName))]))},t.parseStack=h},58659:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveCellResultError=void 0;class n extends Error{constructor(e){super("Cell failed to execute"),this.cell=e}}t.InteractiveCellResultError=n},30002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterConnectError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e,t,n){super("jupyterconnection",e+(t?`\n${t}`:"")),this.interpreter=n}}t.JupyterConnectError=i},89112:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterDataRateLimitError=void 0;const r=n(25251),i=n(37853);class o extends i.BaseError{constructor(){super("unknown",r.DataScience.jupyterDataRateExceeded)}}t.JupyterDataRateLimitError=o},44501:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterExpiredCertsError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e){super("jupyterexpiredcert",e)}}t.JupyterExpiredCertsError=i},41779:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterInstallError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e){super("jupyterinstall",e)}}t.JupyterInstallError=i},79079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterNotebookNotInstalled=void 0;const r=n(37853);class i extends r.BaseError{constructor(e,t,n){super("jupyternotebooknotinstalled",e+(t?`\n${t}`:"")),this.interpreter=n}}t.JupyterNotebookNotInstalled=i},84079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSelfCertsError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e){super("jupyterselfcert",e)}static isSelfCertsError(e){return e.message.indexOf("reason: self signed certificate")>=0}}t.JupyterSelfCertsError=i},50689:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterSelfCertsExpiredError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e){super("jupyterselfexpiredcert",e)}static isSelfCertsExpiredError(e){return e.message.indexOf("reason: certificate has expired")>=0}}t.JupyterSelfCertsExpiredError=i},95739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalJupyterServerConnectionError=void 0;const r=n(25251),i=n(37853);class o extends i.BaseError{constructor(e){super("localjupyterserverconnection",r.DataScience.jupyterNotebookFailure(e.message||e.toString())),this.originalError=e}}t.LocalJupyterServerConnectionError=o},8646:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PackageNotInstalledWindowsLongPathNotEnabledError=void 0;const r=n(37853);class i extends r.BaseError{constructor(e,t,n){super("windowsLongPathNotEnabled",n),this.product=e,this.interpreter=t,this.originalMessage=n}}t.PackageNotInstalledWindowsLongPathNotEnabledError=i},37716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExtensionActicationFailedError=void 0;const r=n(37853);class i extends r.WrappedError{constructor(e){super("Python Extension failed to activate",e,"pythonExtension")}}t.PythonExtensionActicationFailedError=i},6101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExtensionApiNotExportedError=void 0;const r=n(37853);class i extends r.BaseError{constructor(){super("pythonExtension","Python Extension API not exported")}}t.PythonExtensionApiNotExportedError=i},54990:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteJupyterServerConnectionError=void 0;const r=n(25251),i=n(37853);class o extends i.BaseError{constructor(e,t,n){super("remotejupyterserverconnection",r.DataScience.remoteJupyterConnectionFailedWithServerWithError(s(e),n.message||n.toString())),this.url=e,this.serverProviderHandle=t,this.originalError=n,this.baseUrl=s(e)}}function s(e){const t=new URL(e);return`${t.protocol}//${t.host}/`}t.RemoteJupyterServerConnectionError=o},65864:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionDisposedError=void 0;const r=n(25251),i=n(37853);class o extends i.BaseError{constructor(){super("sessionDisposed",r.DataScience.sessionDisposed)}}t.SessionDisposedError=o},37853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCategory=t.WrappedError=t.BaseError=void 0;class n extends Error{constructor(e,t){super(t),this.category=e,this.isJupyterError=!0}}t.BaseError=n;class r extends n{constructor(e,t,n){super(n||i(t),e),this.originalException=t,t&&(this.stack=`${new Error("").stack}\n\n${t.stack}`)}static from(e,t){return t instanceof n?t:new r(e,t)}static unwrap(e){return e?(e instanceof r&&e.originalException&&e.originalException instanceof n&&(e=e.originalException),e):e}}function i(e){return e&&e instanceof n?e.category:"unknown"}t.WrappedError=r,t.getErrorCategory=i},84570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterService=void 0,t.IInterpreterService=Symbol("IInterpreterService")},87143:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataFrameScriptGenerator=void 0;const a=n(26594),c=n(83599),l=n(42080),u=n(52859),d=s(n(66518)),h="_VSCODE_getDataFrame",p=d.default`
                            try:
                                del _VSCODE_getDataFrame
                            except:
                                pass
                            `;let f=r=class{constructor(e,t){this.fs=e,this.context=t}async generateCodeToGetDataFrameInfo(e){const t=await this.getContentsOfDataFrameScript(),n=e.isDebugging?"True":"False",r=`${h}("info", ${n}, ${e.variableName})`;return e.isDebugging?{initializeCode:t,code:r,cleanupCode:p}:{code:`${t}\n\n${r}\n\n${p}`}}async generateCodeToGetDataFrameRows(e){const t=await this.getContentsOfDataFrameScript(),n=e.isDebugging?"True":"False",r=`${h}("rows", ${n}, ${e.variableName}, ${e.startIndex}, ${e.endIndex})`;return e.isDebugging?{initializeCode:t,code:r,cleanupCode:p}:{code:`${t}\n\n${r}\n\n${p}`}}async getContentsOfDataFrameScript(){if(r.contentsOfDataFrameScript)return r.contentsOfDataFrameScript;const e=(0,u.joinPath)(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers","dataframes","vscodeDataFrame.py"),t=await this.fs.readFile(e);return r.contentsOfDataFrameScript=t,t}};t.DataFrameScriptGenerator=f,t.DataFrameScriptGenerator=f=r=i([(0,a.injectable)(),o(0,(0,a.inject)(c.IFileSystem)),o(1,(0,a.inject)(l.IExtensionContext))],f)},79250:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvironmentFilter=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(20397),l=n(42080),u=n(9959),d=n(15925),h=n(35412),p=n(11642);let f=class{get onDidChange(){return this._onDidChange.event}constructor(e,t,n){this.workspace=e,this.webExtension=n,this.disposables=[],this._onDidChange=new s.EventEmitter,t.push(this),this.webExtension||this.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("jupyter.kernels.excludePythonEnvironments")&&this._onDidChange.fire()}),this,this.disposables)}dispose(){this._onDidChange.dispose(),(0,c.dispose)(this.disposables)}isPythonEnvironmentExcluded(e){if(this.webExtension)return!1;const t=this.getExcludedPythonEnvironments(),n="uri"in e?e.envPath:e.environment?.folderUri,r="uri"in e?e.uri:e.executable.uri;if(!r&&!n)return!1;const i=t.some((e=>{const t=(0,h.getDisplayPath)(e.trim()).toLowerCase().replace(/\\/g,"/");if(0===(e=e.trim().toLowerCase().replace(/\\/g,"/")).length||0===t.length)return!1;const i=(0,h.getDisplayPath)(r).toLowerCase().replace(/\\/g,"/"),o=r?r.fsPath.toLowerCase().replace(/\\/g,"/"):"";if(e===i||t===i||e===o||t===o)return!0;const s=(0,h.getDisplayPath)(n||"").toLowerCase().replace(/\\/g,"/"),a=(0,h.getDisplayPath)(n||"").toLowerCase().replace(/\\/g,"/");return e===s||t===s||e===a||t===a}));return i&&((0,u.sendTelemetryEvent)(d.Telemetry.JupyterKernelHiddenViaFilter),(0,p.traceVerbose)(`Python Env hidden via filter: ${(0,h.getDisplayPath)(r)}`)),i}getExcludedPythonEnvironments(){if(!this.workspace.workspaceFolders||0===this.workspace.workspaceFolders.length)return this.workspace.getConfiguration("jupyter",void 0).get("kernels.excludePythonEnvironments",[]);const e=[];return this.workspace.workspaceFolders.forEach((t=>{e.push(...this.workspace.getConfiguration("jupyter",t.uri).get("kernels.excludePythonEnvironments",[]))})),e}};t.PythonEnvironmentFilter=f,t.PythonEnvironmentFilter=f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IWorkspaceService)),i(1,(0,o.inject)(l.IDisposableRegistry)),i(2,(0,o.inject)(l.IsWebExtension))],f)},22252:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvFilterSettingMigration=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(58681);let l=class{constructor(e){this.workspace=e}activate(){this.migrateFilters().catch(c.noop)}async migrateFilters(){const e=Array.isArray(this.workspace.workspaceFolders)?this.workspace.workspaceFolders:[];await this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",void 0),s.ConfigurationTarget.Global),0===e.length?await this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",void 0),s.ConfigurationTarget.Global):1===e.length?await this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",e[0].uri),s.ConfigurationTarget.WorkspaceFolder):(await this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",void 0),s.ConfigurationTarget.Workspace),await Promise.all(e.map((e=>this.migrateWorkspaceFilters(this.workspace.getConfiguration("jupyter",e.uri),s.ConfigurationTarget.WorkspaceFolder)))))}async migrateWorkspaceFilters(e,t){const n=e.inspect("kernels.filter");let r=[];switch(t){case s.ConfigurationTarget.Global:r=n?.globalValue||[];break;case s.ConfigurationTarget.Workspace:r=n?.workspaceValue||[];break;default:r=n?.workspaceFolderValue||[]}const i=r.filter((e=>"pythonEnvironment"===e.type)).map((e=>e.path));r.length&&await e.update("kernels.filter",void 0,t),i.length&&await e.update("kernels.excludePythonEnvironments",Array.from(new Set(i)),t)}};t.PythonEnvFilterSettingMigration=l,t.PythonEnvFilterSettingMigration=l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IWorkspaceService))],l)},39526:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonFilterUICommandDeprecation=void 0;const o=n(26594),s=n(10053),a=n(42080),c=n(58681);let l=class{constructor(e,t){this.commandManager=e,this.disposables=t}activate(){this.disposables.push(this.commandManager.registerCommand("jupyter.filterKernels",(()=>this.commandManager.executeCommand("workbench.action.openSettings","jupyter.kernels.excludePythonEnvironments").then(c.noop,c.noop)),this))}};t.PythonFilterUICommandDeprecation=l,t.PythonFilterUICommandDeprecation=l=r([(0,o.injectable)(),i(0,(0,o.inject)(s.ICommandManager)),i(1,(0,o.inject)(a.IDisposableRegistry))],l)},39796:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCondaEnvironmentWithoutPython=t.getEnvironmentType=t.getPythonEnvironmentName=t.getPythonEnvDisplayName=void 0;const r=n(47891),i=n(96434),o=n(52859);function s(e){let t=e.envName;return e.envPath&&e.envType===r.EnvironmentType.Conda&&!e.envName&&(t=(0,o.basename)(e.envPath)),t}t.getPythonEnvDisplayName=function(e){if("executable"in e){const t=[];"number"==typeof e.version?.major&&(t.push(e.version.major.toString()),"number"==typeof e.version.minor&&(t.push(e.version.minor.toString()),"number"==typeof e.version.micro&&t.push(e.version.micro.toString())));const n=t.length?t.join("."):"",r=e.environment?(0,o.basename)(e.environment?.folderUri):"",i=n?`Python ${n}`:"Python";return l(e)&&r?r:r?`${r} (${i})`:i}const t=((0,i.getTelemetrySafeVersion)(e.version?.raw||"")||"").trim(),n=e.envType===r.EnvironmentType.Conda&&!0===e.isCondaEnvWithoutPython,a=t.trim()?`Python ${t}`:"Python",c=s(e);if(n&&c)return c;const u=[];return c&&u.push(c),e.envType&&e.envType!==r.EnvironmentType.Unknown&&u.push(e.envType),[a,u.length?`(${u.join(": ")})`:""].join(" ").trim()},t.getPythonEnvironmentName=s;const a=[r.EnvironmentType.Unknown,r.EnvironmentType.Conda,r.EnvironmentType.Pipenv,r.EnvironmentType.Poetry,r.EnvironmentType.Pyenv,r.EnvironmentType.Venv,r.EnvironmentType.VirtualEnv,r.EnvironmentType.VirtualEnvWrapper];function c(e){if("Conda"===e.environment?.type)return r.EnvironmentType.Conda;const t=[["Conda",r.EnvironmentType.Conda],["Pyenv",r.EnvironmentType.Pyenv],["Pipenv",r.EnvironmentType.Pipenv],["Poetry",r.EnvironmentType.Poetry],["VirtualEnvWrapper",r.EnvironmentType.VirtualEnvWrapper],["VirtualEnv",r.EnvironmentType.VirtualEnv],["Venv",r.EnvironmentType.Venv]];for(const[n,r]of t)if(e.tools.includes(n))return r;for(const t of a)if(e.tools.some((e=>e.toLowerCase()===t.toLowerCase())))return t;return r.EnvironmentType.Unknown}function l(e){return c(e)===r.EnvironmentType.Conda&&!e.executable.uri}t.getEnvironmentType=c,t.isCondaEnvironmentWithoutPython=l},75090:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isModulePresentInEnvironmentCache=t.clearInstalledIntoInterpreterMemento=t.trackPackageInstalledIntoInterpreter=void 0;const r=n(11602),i=n(58681),o=n(46031);t.trackPackageInstalledIntoInterpreter=async function(e,t,n){if((0,i.isResource)(n))return;const s=`${await(0,o.getInterpreterHash)(n)}#${r.ProductNames.get(t)}`;await e.update(s,!0)},t.clearInstalledIntoInterpreterMemento=async function(e,t,n){const i=`${await(0,o.getInterpreterHash)({uri:n})}#${r.ProductNames.get(t)}`;await e.update(i,void 0)},t.isModulePresentInEnvironmentCache=async function(e,t,n){const i=`${await(0,o.getInterpreterHash)(n)}#${r.ProductNames.get(t)}`;return e.get(i,!1)}},11602:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductNames=void 0;const r=n(530);t.ProductNames=new Map,t.ProductNames.set(r.Product.jupyter,"jupyter"),t.ProductNames.set(r.Product.notebook,"notebook"),t.ProductNames.set(r.Product.ipykernel,"ipykernel"),t.ProductNames.set(r.Product.nbconvert,"nbconvert"),t.ProductNames.set(r.Product.kernelspec,"kernelspec"),t.ProductNames.set(r.Product.pandas,"pandas"),t.ProductNames.set(r.Product.pip,"pip"),t.ProductNames.set(r.Product.ensurepip,"ensurepip")},530:(e,t)=>{"use strict";var n,r,i,o,s,a,c;Object.defineProperty(t,"__esModule",{value:!0}),t.IInstaller=t.ModuleInstallFlags=t.IProductPathService=t.IProductService=t.IInstallationChannelManager=t.IPythonInstallation=t.IModuleInstaller=t.ProductType=t.ModuleInstallerType=t.ModuleNamePurpose=t.ProductInstallStatus=t.Product=t.InstallerResponse=void 0,function(e){e[e.Installed=0]="Installed",e[e.Disabled=1]="Disabled",e[e.Ignore=2]="Ignore",e[e.Cancelled=3]="Cancelled"}(n||(t.InstallerResponse=n={})),function(e){e[e.jupyter=18]="jupyter",e[e.ipykernel=19]="ipykernel",e[e.notebook=20]="notebook",e[e.kernelspec=21]="kernelspec",e[e.nbconvert=22]="nbconvert",e[e.pandas=23]="pandas",e[e.pip=27]="pip",e[e.ensurepip=28]="ensurepip"}(r||(t.Product=r={})),function(e){e[e.Installed=0]="Installed",e[e.NotInstalled=1]="NotInstalled",e[e.NeedsUpgrade=2]="NeedsUpgrade"}(i||(t.ProductInstallStatus=i={})),function(e){e[e.install=1]="install",e[e.run=2]="run"}(o||(t.ModuleNamePurpose=o={})),function(e){e.Unknown="Unknown",e.Conda="Conda",e.Pip="Pip",e.Poetry="Poetry",e.Pipenv="Pipenv"}(s||(t.ModuleInstallerType=s={})),function(e){e.Linter="Linter",e.Formatter="Formatter",e.TestFramework="TestFramework",e.RefactoringLibrary="RefactoringLibrary",e.DataScience="DataScience"}(a||(t.ProductType=a={})),t.IModuleInstaller=Symbol("IModuleInstaller"),t.IPythonInstallation=Symbol("IPythonInstallation"),t.IInstallationChannelManager=Symbol("IInstallationChannelManager"),t.IProductService=Symbol("IProductService"),t.IProductPathService=Symbol("IProductPathService"),function(e){e[e.None=0]="None",e[e.upgrade=1]="upgrade",e[e.updateDependencies=2]="updateDependencies",e[e.reInstall=4]="reInstall",e[e.installPipIfRequired=8]="installPipIfRequired"}(c||(t.ModuleInstallFlags=c={})),t.IInstaller=Symbol("IInstaller")},22672:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translateProductToModule=void 0;const r=n(530);t.translateProductToModule=function(e){switch(e){case r.Product.jupyter:return"jupyter";case r.Product.notebook:return"notebook";case r.Product.pandas:return"pandas";case r.Product.ipykernel:return"ipykernel";case r.Product.nbconvert:return"nbconvert";case r.Product.kernelspec:return"kernelspec";case r.Product.pip:return"pip";case r.Product.ensurepip:return"ensurepip";default:throw new Error(`Product ${e} cannot be installed as a Python Module.`)}}},18596:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52064),i=n(79250),o=n(22252),s=n(39526);t.registerTypes=function(e){e.addSingleton(r.IExtensionSyncActivationService,o.PythonEnvFilterSettingMigration),e.addSingleton(r.IExtensionSyncActivationService,s.PythonFilterUICommandDeprecation),e.addSingleton(i.PythonEnvironmentFilter,i.PythonEnvironmentFilter)}},58301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWorkspaceInterpreterTracker=t.IInterpreterPackages=t.IReservedPythonNamedProvider=void 0,t.IReservedPythonNamedProvider=Symbol("IReservedPythonNamedProvider"),t.IInterpreterPackages=Symbol("IInterpreterPackages"),t.IWorkspaceInterpreterTracker=Symbol("IWorkspaceInterpreterTracker")},89926:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VariableScriptGenerator=void 0;const a=n(26594),c=n(83599),l=n(42080),u=n(52859),d=s(n(66518)),h="_VSCODE_getVariable",p=d.default`
                            try:
                                del _VSCODE_getVariable
                            except:
                                pass
                            `;let f=r=class{constructor(e,t){this.fs=e,this.context=t}async generateCodeToGetVariableInfo(e){const t=await this.getContentsOfScript(),n=e.isDebugging?"True":"False",r=`${h}("info", ${n}, ${e.variableName})`;return e.isDebugging?{initializeCode:t,code:r,cleanupCode:p}:{code:`${t}\n\n${r}\n\n${p}`}}async generateCodeToGetVariableProperties(e){const t=await this.getContentsOfScript(),n=e.isDebugging?"True":"False",r=`${h}("properties", ${n}, ${e.variableName}, ${e.stringifiedAttributeNameList})`;return e.isDebugging?{initializeCode:t,code:r,cleanupCode:p}:{code:`${t}\n\n${r}\n\n${p}`}}async generateCodeToGetVariableTypes(e){const t=`${await this.getContentsOfScript()}\n\n_VSCODE_rwho_ls = %who_ls\n`,n=e.isDebugging?"True":"False",r=d.default`
        try:
            del _VSCODE_rwho_ls
        except:
            pass
        `,i=`${h}("types", ${n}, _VSCODE_rwho_ls)`;return e.isDebugging?{initializeCode:t,code:i,cleanupCode:`${p}\n${r}`}:{code:`${t}${i}\n\n${p}\n${r}`}}async getContentsOfScript(){if(r.contentsOfScript)return r.contentsOfScript;const e=(0,u.joinPath)(this.context.extensionUri,"pythonFiles","vscode_datascience_helpers","getVariableInfo","vscodeGetVariableInfo.py"),t=await this.fs.readFile(e);return r.contentsOfScript=t,t}};t.VariableScriptGenerator=f,t.VariableScriptGenerator=f=r=i([(0,a.injectable)(),o(0,(0,a.inject)(c.IFileSystem)),o(1,(0,a.inject)(l.IExtensionContext))],f)},17835:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceInterpreterTracker=void 0;const s=n(26594),a=n(58301);let c=r=class{constructor(e){this.workspaceInterpreterTracker=e,r.isActiveWorkspaceInterpreter=this.isActiveWorkspaceInterpreterImpl.bind(this)}activate(){this.workspaceInterpreterTracker?.activate()}isActiveWorkspaceInterpreterImpl(e,t){return this.workspaceInterpreterTracker?.isActiveWorkspaceInterpreter(e,t)??!1}};t.WorkspaceInterpreterTracker=c,c.isActiveWorkspaceInterpreter=()=>!1,t.WorkspaceInterpreterTracker=c=r=i([(0,s.injectable)(),o(0,(0,s.inject)(a.IWorkspaceInterpreterTracker)),o(0,(0,s.optional)())],c)},5337:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceContainer=void 0;const o=n(17187),s=n(26594),a=n(11642);try{(0,s.decorate)((0,s.injectable)(),o.EventEmitter)}catch(e){(0,a.traceWarning)("Failed to decorate EventEmitter for DI (possibly already decorated by another Extension)",e)}let c=r=class{static get instance(){return r._instance}constructor(e){this.container=e,r._instance=this}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch{}}};t.ServiceContainer=c,t.ServiceContainer=c=r=i([(0,s.injectable)()],c)},39667:(e,t,n)=>{"use strict";void 0===Reflect.metadata&&n(28660)},33796:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const i=n(26594),o=n(85446);let s=class{getContainer(){return this.container}constructor(e){this.container=e}add(e,t,n,r){n?this.container.bind(e).to(t).whenTargetNamed(n):this.container.bind(e).to(t),r&&r.forEach((t=>{this.addBinding(e,t)}))}addFactory(e,t){this.container.bind(e).toFactory(t)}addBinding(e,t){this.container.bind(t).toService(e)}addSingleton(e,t,n,r){n?this.container.bind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.bind(e).to(t).inSingletonScope(),r&&r.forEach((t=>{this.addBinding(e,t)}))}addSingletonInstance(e,t,n){n?this.container.bind(e).toConstantValue(t).whenTargetNamed(n):this.container.bind(e).toConstantValue(t)}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch{}}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}rebind(e,t,n){n?this.container.rebind(e).to(t).whenTargetNamed(n):this.container.rebind(e).to(t)}rebindSingleton(e,t,n){n?this.container.rebind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.rebind(e).to(t).inSingletonScope()}rebindInstance(e,t,n){n?this.container.rebind(e).toConstantValue(t).whenTargetNamed(n):this.container.rebind(e).toConstantValue(t)}dispose(){this.container.unbindAll(),this.container.unload()}};t.ServiceManager=s,r([(0,o.testOnlyMethod)()],s.prototype,"getContainer",null),t.ServiceManager=s=r([(0,i.injectable)()],s)},41778:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IServiceContainer=t.IServiceManager=void 0,t.IServiceManager=Symbol("IServiceManager"),t.IServiceContainer=Symbol("IServiceContainer")},91057:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=void 0;const r=n(17693),i=n(35960);function o(e,t,...n){const o=0===[...n].length?i(t):i(t,...n);return e?`${e} ${(0,r.getTimeForLogging)()}: ${o}`:o}t.ConsoleLogger=class{constructor(e){this.prefix=e}traceLog(e,...t){console.log(i(`${this.prefix||""} ${e}`,...t))}traceError(e,...t){console.error(o("error",`${this.prefix||""} ${e}`,...t))}traceWarn(e,...t){console.warn(o("warn",`${this.prefix||""} ${e}`,...t))}traceInfo(e,...t){console.info(o("info",`${this.prefix||""} ${e}`,...t))}traceVerbose(e,...t){console.log(o("verbose",`${this.prefix||""} ${e}`,...t))}}},11642:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logTo=t.tracing=t.createTracingDecorator=t.ignoreLogging=t.logValue=t.traceDecoratorWarn=t.traceDecoratorInfo=t.traceDecoratorError=t.traceDecoratorVerbose=t.traceInfoIfCI=t.traceVerbose=t.traceInfo=t.traceWarning=t.traceError=t.traceLog=t.setHomeDirectory=t.setLoggingLevel=t.registerLogger=void 0;const r=n(15925),i=n(99203),o=n(85446),s=n(58681),a=n(17693),c=n(20397),l=n(35412);let u="";const d=i.TraceOptions.Arguments|i.TraceOptions.ReturnValue;let h=[];t.registerLogger=function(e){return h.push(e),{dispose:()=>{h=h.filter((t=>t!==e))}}};const p=new Map([["error",i.LogLevel.Error],["warn",i.LogLevel.Warn],["info",i.LogLevel.Info],["debug",i.LogLevel.Debug],["none",i.LogLevel.Off],["off",i.LogLevel.Off],[void 0,i.LogLevel.Error]]);let f=i.LogLevel.Debug;function g(...e){return f<=i.LogLevel.Trace?e:e.map((e=>{if(!(e instanceof Error))return e;if(!("isJupyterError"in e))return e;const t=[`${e.name}: ${e.message}`.trim()];if("kernelConnectionMetadata"in e&&e.kernelConnectionMetadata&&"object"==typeof e.kernelConnectionMetadata&&"id"in e.kernelConnectionMetadata&&(t.push(`Kernel Id = ${e.kernelConnectionMetadata.id}`),"interpreter"in e.kernelConnectionMetadata&&e.kernelConnectionMetadata.interpreter&&"object"==typeof e.kernelConnectionMetadata.interpreter&&"id"in e.kernelConnectionMetadata.interpreter&&"string"==typeof e.kernelConnectionMetadata.interpreter.id&&t.push(`Interpreter Id = ${(0,l.getDisplayPath)(e.kernelConnectionMetadata.interpreter.id)}`)),e.stack){const n=(0,c.splitLines)(e.stack),r=n.find((e=>0===e.indexOf("at ")));1===n.length||(1===n.length?t.push(n[0]):n.length>1&&r?.length?t.push(r):t.push(n[0]))}const n=["stack","message","name","kernelConnectionMetadata","category","exitCode","isJupyterError"];return Object.keys(e).filter((e=>-1===n.indexOf(e))).forEach((n=>t.push(`${n} = ${String(e[n]).trim()}`))),t.filter((e=>e.trim().length)).map(((e,t)=>0===t?e:`    > ${e}`)).join("\n")}))}function m(e,...t){f<=i.LogLevel.Error&&(t=g(...t),h.forEach((n=>n.traceError(e,...t))))}function v(e,...t){f<=i.LogLevel.Warn&&(t=g(...t),h.forEach((n=>n.traceWarn(e,...t))))}function y(e,...t){f<=i.LogLevel.Info&&h.forEach((n=>n.traceInfo(e,...t)))}function b(e,...t){f<=i.LogLevel.Trace&&h.forEach((n=>n.traceVerbose(e,...t)))}t.setLoggingLevel=function(e){f="number"==typeof e?e:p.get(e)??i.LogLevel.Error},t.setHomeDirectory=function(e){u=e.toLowerCase()},t.traceLog=function(e,...t){h.forEach((n=>n.traceLog(e,...t)))},t.traceError=m,t.traceWarning=v,t.traceInfo=y,t.traceVerbose=b,t.traceInfoIfCI=function(e,...t){r.isCI&&y(e,...t)},t.traceDecoratorVerbose=function(e,t=d){return S({message:e,opts:t,level:i.LogLevel.Trace})},t.traceDecoratorError=function(e){return S({message:e,opts:d,level:i.LogLevel.Error})},t.traceDecoratorInfo=function(e){return S({message:e,opts:d,level:i.LogLevel.Info})},t.traceDecoratorWarn=function(e){return S({message:e,opts:d,level:i.LogLevel.Warn})};const w=new WeakMap;function S(e){return(0,o.trace)(((t,n)=>_(e,n,t)),(e.opts&i.TraceOptions.BeforeCall)>0)}function C(e){const t=u?e.toLowerCase().indexOf(u):-1;return-1===t?e:`~${e.substring(t+u.length)}`}function _(e,t,n){const r=function(e,t,n){n=function(e){let{kind:t,name:n,args:r}=e;return t&&""!==t||(t="Function"),n&&""!==n||(n="<anon>"),r||(r=[]),{kind:t,name:n,args:r,methodName:e.methodName||"",target:e.target||void 0}}(n);const r=[e.message];return r.push(`${n.kind} name = ${n.name}`.trim()),t?(r.push(`completed in ${t.elapsed}ms`),r.push(`has a ${t.returnValue?"truthy":"falsy"} return value`)):r[r.length-1]=`${r[r.length-1]} (started execution)`,(e.opts&i.TraceOptions.Arguments)===i.TraceOptions.Arguments&&(e.level===i.LogLevel.Trace?r.push((0,a.argsToLogString)(n.args.map(((e,t)=>n?function(e,t,n,r){if(function(e){if(!e)return!1;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}(n))return C(n.path);if(!n)return n;const i=w.get(e)?.get(t),o=i?.find((e=>e.parameterIndex===r));if(!o)return"string"==typeof n?C(n):n;if("ignore"in o&&o.ignore)return"";let s=n;return"propertyOfParameterToLog"in o&&o.propertyOfParameterToLog&&(s=n[o.propertyOfParameterToLog]),"string"==typeof s?C(s):s}(n.target,n.methodName,e,t):e)))):r.push((0,a.argsToLogString)(n.args))),t&&(e.opts&i.TraceOptions.ReturnValue)===i.TraceOptions.ReturnValue&&r.push((0,a.returnValueToLogString)(t.returnValue)),r.join(", ")}(e,t,n);t?void 0===t.err?e.level&&e.level===i.LogLevel.Error||(e.level?P(e.level,r):P(i.LogLevel.Info,r)):P(i.LogLevel.Error,r,t.err):e.level&&e.level!==i.LogLevel.Error&&P(e.level,r)}function P(e,t,...n){switch(e){case i.LogLevel.Error:m(t,...n);break;case i.LogLevel.Warn:v(t,...n);break;case i.LogLevel.Info:y(t,...n);break;case i.LogLevel.Debug:case i.LogLevel.Trace:b(t,...n)}}t.logValue=function(e){return(t,n,r)=>{w.has(t)||w.set(t,new Map);let i=w.get(t);i||w.set(t,i=new Map),i.has(n)||i.set(n,[]),i.get(n).push({parameterIndex:r,propertyOfParameterToLog:e})}},t.ignoreLogging=function(){return(e,t,n)=>{w.has(e)||w.set(e,new Map);let r=w.get(e);r||w.set(e,r=new Map),r.has(t)||r.set(t,[]),r.get(t).push({parameterIndex:n,ignore:!0})}},t.createTracingDecorator=S,t.tracing=function(e,t,n){return(0,s.tracing)((t=>_(e,t,n)),t,(e.opts&i.TraceOptions.BeforeCall)>0)},t.logTo=P},75409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputChannelLogger=void 0;const r=n(17693),i=n(35960);t.OutputChannelLogger=class{constructor(e,t,n){this.channel=e,this.homeReplaceRegEx=t,this.userNameReplaceRegEx=n}format(e,t,...n){let o=e?`${(0,r.getTimeForLogging)()} [${e}] ${i(t,...n)}`:i(t,...n);return this.homeReplaceRegEx&&(o=o.replace(this.homeReplaceRegEx,"~")),this.userNameReplaceRegEx&&(o=o.replace(this.userNameReplaceRegEx,"<username>")),o}traceLog(e,...t){this.channel.appendLine(this.format("",e,...t))}traceError(e,...t){this.channel.appendLine(this.format("error",e,...t))}traceWarn(e,...t){this.channel.appendLine(this.format("warn",e,...t))}traceInfo(e,...t){this.channel.appendLine(this.format("info",e,...t))}traceVerbose(e,...t){this.channel.appendLine(this.format("debug",e,...t))}}},28413:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputCommandListener=void 0;const o=n(26594),s=n(15925),a=n(42080);let c=class{constructor(e,t){this.jupyterOutput=e,this.disposableRegistry=t}register(e){this.disposableRegistry.push(e.registerCommand(s.Commands.ViewJupyterOutput,this.viewJupyterOutput,this))}viewJupyterOutput(){this.jupyterOutput.show(!0)}};t.OutputCommandListener=c,t.OutputCommandListener=c=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IOutputChannel)),i(0,(0,o.named)(s.STANDARD_OUTPUT_CHANNEL)),i(1,(0,o.inject)(a.IDisposableRegistry))],c)},99203:(e,t)=>{"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleForegroundColors=t.TraceOptions=t.LogLevel=void 0,function(e){e[e.Error=40]="Error",e[e.Warn=30]="Warn",e[e.Info=20]="Info",e[e.Debug=10]="Debug",e[e.Trace=5]="Trace",e[e.Off=100]="Off"}(n||(t.LogLevel=n={})),function(e){e[e.None=0]="None",e[e.Arguments=1]="Arguments",e[e.ReturnValue=2]="ReturnValue",e[e.BeforeCall=4]="BeforeCall"}(r||(t.TraceOptions=r={})),function(e){e.Green="[32m",e.Red="[31m"}(i||(t.ConsoleForegroundColors=i={}))},17693:(e,t)=>{"use strict";function n(e,t){if(Array.isArray(e))return e.map((e=>n(e,t))).join(", ");if(void 0===e)return"undefined";if(null===e)return"null";try{return e&&e.path?`<Uri:${e.path}>`:JSON.stringify(e)}catch{return`<${t} cannot be serialized for logging>`}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeForLogging=t.returnValueToLogString=t.argsToLogString=void 0,t.argsToLogString=function(e){if(!e)return"";try{return e.map(((e,t)=>`Arg ${t+1}: ${n(e,"argument")}`)).join(", ")}catch{return""}},t.returnValueToLogString=function(e){return`Return Value: ${n(e,"Return value")}`},t.getTimeForLogging=function(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}.${String(e.getMilliseconds()).padStart(3,"0")}`}},74064:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportAction=t.disposeRegisteredReporters=t.registerReporter=void 0;const r=n(11642),i=new Set;function o(e){try{i.forEach((t=>t.report(e)))}catch(e){(0,r.traceError)("Failed to report progress",e)}}t.registerReporter=function(e){i.add(e)},t.disposeRegisteredReporters=function(){i.clear()},t.reportAction=function(e){return function(t,n,r){const i=r.value;r.value=async function(...t){return o({action:e,phase:"started"}),i.apply(this,t).finally((()=>{o({action:e,phase:"completed"})}))}}}},72584:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelProgressReporter=void 0;const s=n(26594),a=n(66828),c=n(6491),l=n(20397),u=n(42080),d=n(43138),h=n(58681),p=n(11642),f=n(52859),g=n(83964);let m=r=class{constructor(e){this.kernelResourceProgressReporter=new Map,e.push(this),r.instance=this}activate(){}dispose(){(0,l.dispose)(Array.from(r.disposables))}static createProgressReporter(e,t,n){if(!r.instance)return new a.Disposable(h.noop);const i=e?(0,f.getComparisonKey)(e):"";return r.instance.kernelResourceProgressReporter.has(i)?r.reportProgress(e,t):r.createProgressReporterInternal(i,t,n)}static wrapAndReportProgress(e,t,n){const i=e?(0,f.getComparisonKey)(e):"";if(!r.instance)return n();const o=r.reportProgressInternal(i,t);return n().finally((()=>o?.dispose()))}static reportProgress(e,t){const n=(0,g.getUserMessageForAction)(t)||t,i=e?(0,f.getComparisonKey)(e):"";return n?r.reportProgressInternal(i,n||""):new a.Disposable((()=>h.noop))}static reportProgressInternal(e,t){if(!r.instance)return new a.Disposable(h.noop);let n=r.instance.kernelResourceProgressReporter.get(e);if(n||(n={title:t,pendingProgress:[],progressList:[],dispose:h.noop},r.instance.kernelResourceProgressReporter.set(e,n)),n.reporter)n.progressList.push(t),n.reporter.report({message:t});else{if(n.progressList.includes(t))return new a.Disposable(h.noop);n.pendingProgress.push(t)}return{dispose:()=>{try{if(!n)return;const i=n.progressList.findIndex((e=>e===t));if(i>=0&&n.progressList.splice(i),n.progressList.length>0){const e=n.progressList[n.progressList.length-1];n.reporter&&n.reporter.report({message:e===n.title&&n.reporter?"":e})}else r.instance.kernelResourceProgressReporter.delete(e),n.dispose()}catch(t){(0,p.traceError)(`Failed to dispose Progress reporter for ${e}`,t)}}}}static createProgressReporterInternal(e,t,n){const i=(0,d.createDeferred)(),o=new a.Disposable((()=>i.resolve())),s=r.instance.kernelResourceProgressReporter.get(e)||{title:t,pendingProgress:[],progressList:[],tokenSources:[],dispose:()=>{o.dispose()}};let l=!1;const u=()=>{l||(l=!0,a.window.withProgress({location:a.ProgressLocation.Notification,title:t},(async(n,s)=>{const a=r.instance.kernelResourceProgressReporter.get(e);if(a){for(a.reporter=n;a.pendingProgress.length>0;){const e=a.pendingProgress.shift();e===t?a.progressList.push(e):e!==t&&e&&(a.progressList.push(e),n.report({message:e}))}await(0,c.raceCancellation)(s,i.promise),r.instance.kernelResourceProgressReporter.get(e)===a&&r.instance.kernelResourceProgressReporter.delete(e),r.disposables.delete(o)}})).then(h.noop,h.noop))};return r.instance.kernelResourceProgressReporter.set(e,{...s,dispose:()=>o.dispose(),show:u}),r.disposables.add(o),s.pendingProgress.push(t),n||u(),{dispose:()=>o.dispose(),show:u}}};t.KernelProgressReporter=m,m.disposables=new Set,t.KernelProgressReporter=m=r=i([(0,s.injectable)(),o(0,(0,s.inject)(u.IDisposableRegistry))],m)},83964:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserMessageForAction=void 0;const r=n(25251),i=n(40453),o={[i.ReportableAction.JupyterSessionWaitForIdleSession]:r.DataScience.waitingForJupyterSessionToBeIdle,[i.ReportableAction.KernelsGetKernelForRemoteConnection]:r.DataScience.gettingListOfKernelsForRemoteConnection,[i.ReportableAction.KernelsGetKernelSpecs]:r.DataScience.gettingListOfKernelSpecs,[i.ReportableAction.KernelsRegisterKernel]:r.DataScience.registeringKernel,[i.ReportableAction.NotebookConnect]:r.DataScience.connectingToJupyter,[i.ReportableAction.NotebookStart]:r.DataScience.startingJupyterNotebook,[i.ReportableAction.InstallingMissingDependencies]:r.DataScience.installingMissingDependencies,[i.ReportableAction.ExportNotebookToPython]:r.DataScience.exportNotebookToPython,[i.ReportableAction.PerformingExport]:r.DataScience.performingExport};t.getUserMessageForAction=function(e){return o[e]}},70835:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressReporter=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(43138),l=n(58681),u=n(74064),d=n(83964);let h=class{get currentAction(){return 0===this.currentActions.length?void 0:this.currentActions[this.currentActions.length-1]}constructor(e){this.appShell=e,this.progressReporters=[],this.actionPhases=new Map,this.currentActions=[],(0,u.registerReporter)(this)}createProgressIndicator(e,t=!1){const n=new s.CancellationTokenSource,r=(0,c.createDeferred)(),i={location:s.ProgressLocation.Notification,cancellable:t,title:e};return this.appShell.withProgress(i,(async(e,t)=>{t.onCancellationRequested((()=>{t.isCancellationRequested&&n.cancel(),r.resolve()})),n.token.onCancellationRequested((()=>{r.resolve()})),this.progressReporters.push(e),await r.promise})).then(l.noop,l.noop),{token:n.token,dispose:()=>r.resolve()}}report(e){if(0!==this.progressReporters.length&&(this.actionPhases.set(e.action,e.phase),"started"===e.phase&&this.currentActions.push(e.action),this.currentAction)){for(;this.actionPhases.get(this.currentAction)&&"started"!==this.actionPhases.get(this.currentAction);)this.actionPhases.delete(this.currentAction),this.currentActions.pop();this.updateProgressMessage()}}updateProgressMessage(){if(!this.currentAction||0===this.progressReporters.length)return;const e=(0,d.getUserMessageForAction)(this.currentAction);e&&this.progressReporters.forEach((t=>t.report({message:e})))}};t.ProgressReporter=h,t.ProgressReporter=h=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IApplicationShell))],h)},40453:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReportableAction=void 0,function(e){e.KernelsGetKernelForRemoteConnection="KernelsGetKernelForRemoteConnection",e.KernelsRegisterKernel="KernelsRegisterKernel",e.KernelsGetKernelSpecs="KernelsGetKernelSpecs",e.NotebookStart="NotebookStart",e.NotebookConnect="NotebookConnect",e.JupyterSessionWaitForIdleSession="JupyterSessionWaitForIdleSession",e.InstallingMissingDependencies="InstallingMissingDependencies",e.ExportNotebookToPython="ExportNotebookToPython",e.PerformingExport="PerformingExport"}(n||(t.ReportableAction=n={}))},47891:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentType=void 0,function(e){e.Unknown="Unknown",e.Conda="Conda",e.VirtualEnv="VirtualEnv",e.Pipenv="PipEnv",e.Pyenv="Pyenv",e.Venv="Venv",e.Poetry="Poetry",e.VirtualEnvWrapper="VirtualEnvWrapper"}(n||(t.EnvironmentType=n={}))},46031:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getNormalizedInterpreterPath=t.areInterpreterPathsSame=t.getInterpreterHash=void 0;const s=n(66828),a=o(n(52859)),c=n(72728),l=n(35412),u=n(96434);function d(e=s.Uri.file(""),t=(0,c.getOSType)(),n=!1){let r=(0,l.getFilePath)(e);return n&&(r=r.toLowerCase()),r.endsWith("/bin/python")&&[c.OSType.Linux,c.OSType.OSX].includes(t)&&r.endsWith("/bin/python")&&r.split("/").length>4?s.Uri.file(r.replace("/bin/python","/python")):s.Uri.file(r)}t.getInterpreterHash=function(e){const t=d(e.uri);return(0,u.getTelemetrySafeHashedString)(t.path)},t.areInterpreterPathsSame=function(e=s.Uri.file(""),t=s.Uri.file(""),n=(0,c.getOSType)(),r=!1){const i=d(e,n,n==c.OSType.Windows||r),o=d(t,n,n==c.OSType.Windows||r);return i===o||a.isEqual(i,o,!0)},t.getNormalizedInterpreterPath=d},11311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(88814),i=n(42959),o=n(8917),s=n(10053),a=n(89316),c=n(50968),l=n(54952),u=n(42080),d=n(18596),h=n(70835),p=n(78163),f=n(52064),g=n(28413),m=n(83599),v=n(67646),y=n(72584),b=n(80208),w=n(22670),S=n(17835);t.registerTypes=function(e){e.addSingleton(m.IFileSystem,v.FileSystem),e.addSingleton(s.ICommandManager,o.CommandManager),e.addSingleton(s.IWorkspaceService,p.WorkspaceService),e.addSingleton(s.IApplicationShell,i.ApplicationShell),e.addSingleton(s.IApplicationEnvironment,r.ApplicationEnvironment),e.addSingleton(u.IConfigurationService,a.ConfigurationService),e.addSingleton(u.IDataScienceCommandListener,g.OutputCommandListener),e.addSingleton(h.ProgressReporter,h.ProgressReporter),(0,l.registerTypes)(e),(0,c.registerTypes)(e),(0,d.registerTypes)(e),e.addSingleton(f.IExtensionSyncActivationService,y.KernelProgressReporter),e.addSingleton(f.IExtensionSyncActivationService,S.WorkspaceInterpreterTracker),e.add(s.IWebviewViewProvider,w.WebviewViewProvider),e.add(s.IWebviewPanelProvider,b.WebviewPanelProvider)}},2161:(e,t)=>{"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.SliceOperationSource=t.CheckboxState=t.EventName=void 0,function(e){e.EXTENSION_LOAD="EXTENSION.LOAD",e.ENVFILE_VARIABLE_SUBSTITUTION="ENVFILE_VARIABLE_SUBSTITUTION",e.ENVFILE_WORKSPACE="ENVFILE_WORKSPACE",e.HASHED_PACKAGE_NAME="HASHED_PACKAGE_NAME",e.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST_EX",e.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR_EX",e.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS_EX"}(n||(t.EventName=n={})),function(e){e.Checked="checked",e.Unchecked="unchecked"}(r||(t.CheckboxState=r={})),function(e){e.Dropdown="dropdown",e.TextBox="textbox",e.Checkbox="checkbox"}(i||(t.SliceOperationSource=i={}))},96434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTelemetrySafeHashedString=t.getTelemetrySafeVersion=void 0;const r=n(46729),i=n(11642);t.getTelemetrySafeVersion=function(e){try{const[t,n,r]=`${e.trim()}...`.split(".").map((e=>parseInt(e,10)));if(isNaN(t))return;return isNaN(n)?t.toString():isNaN(r)?`${t}.${n}`:`${t}.${n}.${r}`}catch(t){(0,i.traceError)(`Failed to parse version ${e}`,t)}},t.getTelemetrySafeHashedString=async function(e){return(0,r.computeHash)(e,"SHA-256")}},68125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedPropertyMapping=t.captureUsageTelemetry=t.capturePerfTelemetry=t.sendTelemetryEvent=t.getTelemetryReporter=t._resetSharedProperties=t.setSharedProperty=t.isTelemetryDisabled=t.Telemetry=t.JupyterCommands=void 0;const r=n(15925),i=n(11642),o=n(11386),s=n(58681),a=n(12189);var c=n(15925);Object.defineProperty(t,"JupyterCommands",{enumerable:!0,get:function(){return c.JupyterCommands}}),Object.defineProperty(t,"Telemetry",{enumerable:!0,get:function(){return c.Telemetry}}),t.isTelemetryDisabled=function(e){return!1===e.getConfiguration("telemetry").inspect("enableTelemetry").globalValue};const l={};let u;function d(){if(u)return u;const e=n(80217).Z;return u=new e(r.AppinsightsKey)}function h(e,t){let n={};return Object.getOwnPropertyNames(t).forEach((r=>{if(void 0!==t[r]&&null!==t[r])try{n[r]="string"==typeof t[r]?t[r]:"object"==typeof t[r]?"object":t[r].toString()}catch(t){(0,i.traceError)(`Failed to serialize ${r} for ${e}`,t)}})),n}function p(e,t,i,o){!(0,r.isTestExecution)()&&function(){try{return void 0!==n(66828)&&void 0!==d()}catch{return!1}}()&&function(e,t,n,r){const i=d();let o={},c=e;r?(o={},Object.assign(o,l),Object.assign(o,n||{}),(0,a.populateTelemetryWithErrorInfo)(o,r).then((()=>{o=h(c,o),i.sendTelemetryEvent(c,o,t)})).catch(s.noop)):(n&&(o=h(c,n)),Object.assign(o,l),i.sendTelemetryEvent(c,o,t))}(e,t,i,o)}t.setSharedProperty=function(e,t){const n=e;(0,r.isUnitTestExecution)()&&n.startsWith("ds_")||(void 0===t?delete l[n]:l[n]=t)},t._resetSharedProperties=function(){for(const e of Object.keys(l))delete l[e]},t.getTelemetryReporter=d,t.sendTelemetryEvent=p;const f=new Set;t.capturePerfTelemetry=function(e,t){return function(n,r,i){const s=i.value;return i.value=function(...n){const r=t||{},i=new o.StopWatch,a=`${e.toString()}${JSON.stringify(r)}`,c=!f.has(a);f.add(a);const l=s.apply(this,n);return l&&"function"==typeof l.then&&"function"==typeof l.catch?l.then((t=>{const n={...r};return c&&(n.firstTime=c),p(e,i?{duration:i?.elapsedTime}:void 0,n),t})).catch((t=>{const n={...r};n.failed=!0,p(e,i?{duration:i?.elapsedTime}:{},n,t)})):p(e,i?{duration:i?.elapsedTime}:void 0,r),l},i}},t.captureUsageTelemetry=function(e,t){return function(n,r,i){const o=i.value;return i.value=function(...n){return p(e,void 0,t),o.apply(this,n)},i}},t.SharedPropertyMapping=class{}},80772:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendErrorTelemetry=t.sendStartupTelemetry=void 0;const r=n(10053),i=n(15925),o=n(11642),s=n(68125),a=n(2161);async function c(e,t){const n=e.get(r.IWorkspaceService),i=n.hasWorkspaceFolders?n.workspaceFolders.length:0;t.workspaceFolderCount=i}t.sendStartupTelemetry=async function(e,t,n,r){if(!(0,i.isTestExecution)())try{await e,t.totalActivateTime=n.elapsedTime,await c(r,t),(0,s.sendTelemetryEvent)(a.EventName.EXTENSION_LOAD,t)}catch(e){(0,o.traceError)("sendStartupTelemetry() failed.",e)}},t.sendErrorTelemetry=async function(e,t,n){try{let r={};if(n)try{await c(n,t)}catch(e){(0,o.traceError)("getActivationTelemetryProps() failed.",e)}(0,s.sendTelemetryEvent)(a.EventName.EXTENSION_LOAD,t,r,e)}catch(e){(0,o.traceError)("sendErrorTelemetry() failed.",e)}}},10499:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getContextualPropsForTelemetry=t.deleteTrackedInformation=t.updatePythonPackages=t.initializeGlobals=t.pythonEnvironmentsByHash=t.trackedInfo=void 0;const i=r(n(50361)),o=n(96434),s=n(43138),a=n(86563),c=n(52859),l=n(11642);let u;function d(e,n){if(!e.pythonEnvironmentPath)return;const r=(0,s.createDeferred)();(async function(e){if(!u)return(0,l.traceError)("Python package provider is not initialized."),"{}";let n;if(n="interpreter"in e?e.interpreter:t.pythonEnvironmentsByHash.get(e.interpreterHash),!n)return"{}";const r=await u(n);return r&&0!==r.size?JSON.stringify(Object.fromEntries(r)):"{}"})({interpreterHash:e.pythonEnvironmentPath}).then((t=>{e.pythonEnvironmentPackages=t||e.pythonEnvironmentPackages,n&&(n.pythonEnvironmentPackages=t||n.pythonEnvironmentPackages)})).catch((()=>{})).finally((()=>{r.resolve()}))}t.trackedInfo=new Map,t.pythonEnvironmentsByHash=new Map,t.initializeGlobals=function(e){u=e},t.updatePythonPackages=d,t.deleteTrackedInformation=function(e){t.trackedInfo.delete((0,c.getComparisonKey)(e))},t.getContextualPropsForTelemetry=async function(e){if(!e)return{};const n=t.trackedInfo.get((0,c.getComparisonKey)(e)),r=(0,a.getResourceType)(e);if(!n&&r)return{resourceType:r,resourceHash:e?await(0,o.getTelemetrySafeHashedString)(e.toString()):void 0};if(!n)return{};const s=(0,i.default)(n[0]);return d(n[0],s),s}},78357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeExecutionHelperBase=void 0;const r=n(66828),i=n(10053),o=n(15925),s=n(58681);t.CodeExecutionHelperBase=class{constructor(e){this.documentManager=e.get(i.IDocumentManager),this.applicationShell=e.get(i.IApplicationShell)}async normalizeLines(e,t){throw Error("Not Implemented")}async getFileToExecute(){const e=this.documentManager.activeTextEditor;if(e)if(e.document.isUntitled)this.applicationShell.showErrorMessage("The active file needs to be saved before it can be run").then(s.noop,s.noop);else{if(e.document.languageId===o.PYTHON_LANGUAGE)return e.document.isDirty&&await e.document.save(),e.document.uri;this.applicationShell.showErrorMessage("The active file is not a Python source file").then(s.noop,s.noop)}else this.applicationShell.showErrorMessage("No open file to run in terminal").then(s.noop,s.noop)}getSelectedTextToExecute(e){if(!e)return;const t=e.selection;let n;return n=t.isEmpty?e.document.lineAt(t.start.line).text:t.isSingleLine?this.getSingleLineSelectionText(e):this.getMultiLineSelectionText(e),n}async saveFileIfDirty(e){const t=this.documentManager.textDocuments.filter((t=>t.uri.path===e.path));1===t.length&&t[0].isDirty&&await t[0].save()}getSingleLineSelectionText(e){const t=e.selection,n=new r.Range(t.start,t.end),i=e.document.getText(n),o=e.document.lineAt(t.start.line).text;return i.trim()===o.trim()?o:i}getMultiLineSelectionText(e){const t=e.selection,n=new r.Range(t.start,t.end),i=e.document.getText(n),o=new r.Range(new r.Position(t.start.line,0),new r.Position(t.end.line,e.document.lineAt(t.end.line).text.length)),s=e.document.getText(o);if(i.trim()===s.trim())return s;const a=e.document.lineAt(t.start.line).text,c=new r.Range(t.start,new r.Position(t.start.line,a.length)),l=e.document.getText(c);return l.trimLeft()===a.trimLeft()?a+i.substr(l.length):i}}},83176:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeExecutionHelper=void 0;const o=n(26594),s=n(41778),a=n(78357);let c=class extends a.CodeExecutionHelperBase{constructor(e){super(e)}};t.CodeExecutionHelper=c,t.CodeExecutionHelper=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],c)},12234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(83176),i=n(89275);t.registerTypes=function(e){e.addSingleton(i.ICodeExecutionHelper,r.CodeExecutionHelper)}},89275:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICodeExecutionHelper=void 0,t.ICodeExecutionHelper=Symbol("ICodeExecutionHelper")},11959:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCachedComputed=t.Cache=void 0;const r=n(66828);t.Cache=class{constructor(e){this.task=e,this.result=null}get(){if(this.result)return this.result;const e=new r.CancellationTokenSource,t=this.task(e.token);return this.result={promise:t,dispose:()=>{this.result=null,e.cancel(),e.dispose()}},this.result}},t.LRUCachedComputed=class{constructor(e){this.computeFn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.computeFn(e)),this.lastCache}}},3499:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWindowsDriveLetter=t.isEqualOrParent=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;const r=n(15948),i=n(13715);function o(e){return 47===e||92===e}function s(e){return e.replace(/[\\/]/g,r.posix.sep)}function a(e){return e>=65&&e<=90||e>=97&&e<=122}t.isPathSeparator=o,t.toSlashes=s,t.toPosixPath=function(e){return-1===e.indexOf("/")&&(e=s(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e},t.getRoot=function(e,t=r.posix.sep){if(!e)return"";const n=e.length,i=e.charCodeAt(0);if(o(i)){if(o(e.charCodeAt(1))&&!o(e.charCodeAt(2))){let r=3;const i=r;for(;r<n&&!o(e.charCodeAt(r));r++);if(i!==r&&!o(e.charCodeAt(r+1)))for(r+=1;r<n;r++)if(o(e.charCodeAt(r)))return e.slice(0,r+1).replace(/[\\/]/g,t)}return t}if(a(i)&&58===e.charCodeAt(1))return o(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(-1!==s)for(s+=3;s<n;s++)if(o(e.charCodeAt(s)))return e.slice(0,s+1);return""},t.isEqualOrParent=function(e,t,n,o=r.sep){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(n){if(!(0,i.startsWithIgnoreCase)(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===o&&n--,e.charAt(n)===o}return t.charAt(t.length-1)!==o&&(t+=o),0===e.indexOf(t)},t.isWindowsDriveLetter=a},56297:(e,t,n)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceSet=t.ResourceMap=t.UriIterator=t.PathIterator=t.ConfigKeysIterator=t.StringIterator=void 0;const o=n(13715);t.StringIterator=class{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}},t.ConfigKeysIterator=class{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(46===this._value.charCodeAt(this._to)){if(!e)break;this._from++}else e=!1;return this}cmp(e){return this._caseSensitive?(0,o.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,o.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}};class s{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const e=this._value.charCodeAt(t);if(!(47===e||this._splitOnBackslash&&92===e))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?(0,o.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,o.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}t.PathIterator=s,t.UriIterator=class{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new s(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return(0,o.compareIgnoreCase)(e,this._value.scheme);if(2===this._states[this._stateIdx])return(0,o.compareIgnoreCase)(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return(0,o.compare)(e,this._value.query);if(5===this._states[this._stateIdx])return(0,o.compare)(e,this._value.fragment);throw new Error}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}};class a{constructor(e,t){this.uri=e,this.value=t}}class c{constructor(e,t){this[r]="ResourceMap",e instanceof c?(this.map=new Map(e.map),this.toKey=t??c.defaultToKey):(this.map=new Map,this.toKey=e??c.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new a(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){void 0!==t&&(e=e.bind(t));for(let[t,n]of this.map)e(n.value,n.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(r=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}t.ResourceMap=c,c.defaultToKey=e=>e.toString();class l{constructor(e,t){this[i]="ResourceSet",e&&"function"!=typeof e?(this._map=new c(t),e.forEach(this.add,this)):this._map=new c(e)}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach(((n,r)=>e.call(t,r,r,this)))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(i=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}t.ResourceSet=l},15948:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.delimiter=t.sep=t.toNamespacedPath=t.parse=t.format=t.extname=t.basename=t.dirname=t.relative=t.resolve=t.join=t.isAbsolute=t.normalize=t.posix=t.win32=void 0;const s=o(n(92527)),a=46,c=47,l=92,u=58;class d extends Error{constructor(e,t,n){let r;"string"==typeof t&&0===t.indexOf("not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be";const i=-1!==e.indexOf(".")?"property":"argument";let o=`The "${e}" ${i} ${r} of type ${t}`;o+=". Received type "+typeof n,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function h(e,t){if("string"!=typeof e)throw new d(t,"string",e)}function p(e){return e===c||e===l}function f(e){return e===c}function g(e){return e>=65&&e<=90||e>=97&&e<=122}function m(e,t,n,r){let i="",o=0,s=-1,l=0,u=0;for(let d=0;d<=e.length;++d){if(d<e.length)u=e.charCodeAt(d);else{if(r(u))break;u=c}if(r(u)){if(s===d-1||1===l);else if(2===l){if(i.length<2||2!==o||i.charCodeAt(i.length-1)!==a||i.charCodeAt(i.length-2)!==a){if(i.length>2){const e=i.lastIndexOf(n);-1===e?(i="",o=0):(i=i.slice(0,e),o=i.length-1-i.lastIndexOf(n)),s=d,l=0;continue}if(0!==i.length){i="",o=0,s=d,l=0;continue}}t&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${e.slice(s+1,d)}`:i=e.slice(s+1,d),o=d-s-1;s=d,l=0}else u===a&&-1!==l?++l:l=-1}return i}function v(e,t){if(null===t||"object"!=typeof t)throw new d("pathObject","Object",t);const n=t.dir||t.root,r=t.base||`${t.name||""}${t.ext||""}`;return n?n===t.root?`${n}${r}`:`${n}${e}${r}`:r}t.win32={resolve(...e){let t="",n="",r=!1;for(let i=e.length-1;i>=-1;i--){let o;if(i>=0){if(o=e[i],h(o,"path"),0===o.length)continue}else 0===t.length?o=s.cwd():(o=s.env[`=${t}`]||s.cwd(),(void 0===o||o.slice(0,2).toLowerCase()!==t.toLowerCase()&&o.charCodeAt(2)===l)&&(o=`${t}\\`));const a=o.length;let c=0,d="",f=!1;const m=o.charCodeAt(0);if(1===a)p(m)&&(c=1,f=!0);else if(p(m))if(f=!0,p(o.charCodeAt(1))){let e=2,t=e;for(;e<a&&!p(o.charCodeAt(e));)e++;if(e<a&&e!==t){const n=o.slice(t,e);for(t=e;e<a&&p(o.charCodeAt(e));)e++;if(e<a&&e!==t){for(t=e;e<a&&!p(o.charCodeAt(e));)e++;e!==a&&e===t||(d=`\\\\${n}\\${o.slice(t,e)}`,c=e)}}}else c=1;else g(m)&&o.charCodeAt(1)===u&&(d=o.slice(0,2),c=2,a>2&&p(o.charCodeAt(2))&&(f=!0,c=3));if(d.length>0)if(t.length>0){if(d.toLowerCase()!==t.toLowerCase())continue}else t=d;if(r){if(t.length>0)break}else if(n=`${o.slice(c)}\\${n}`,r=f,f&&t.length>0)break}return n=m(n,!r,"\\",p),r?`${t}\\${n}`:`${t}${n}`||"."},normalize(e){h(e,"path");const t=e.length;if(0===t)return".";let n,r=0,i=!1;const o=e.charCodeAt(0);if(1===t)return f(o)?"\\":e;if(p(o))if(i=!0,p(e.charCodeAt(1))){let i=2,o=i;for(;i<t&&!p(e.charCodeAt(i));)i++;if(i<t&&i!==o){const s=e.slice(o,i);for(o=i;i<t&&p(e.charCodeAt(i));)i++;if(i<t&&i!==o){for(o=i;i<t&&!p(e.charCodeAt(i));)i++;if(i===t)return`\\\\${s}\\${e.slice(o)}\\`;i!==o&&(n=`\\\\${s}\\${e.slice(o,i)}`,r=i)}}}else r=1;else g(o)&&e.charCodeAt(1)===u&&(n=e.slice(0,2),r=2,t>2&&p(e.charCodeAt(2))&&(i=!0,r=3));let s=r<t?m(e.slice(r),!i,"\\",p):"";return 0!==s.length||i||(s="."),s.length>0&&p(e.charCodeAt(t-1))&&(s+="\\"),void 0===n?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(e){h(e,"path");const t=e.length;if(0===t)return!1;const n=e.charCodeAt(0);return p(n)||t>2&&g(n)&&e.charCodeAt(1)===u&&p(e.charCodeAt(2))},join(...e){if(0===e.length)return".";let n,r;for(let t=0;t<e.length;++t){const i=e[t];h(i,"path"),i.length>0&&(void 0===n?n=r=i:n+=`\\${i}`)}if(void 0===n)return".";let i=!0,o=0;if("string"==typeof r&&p(r.charCodeAt(0))){++o;const e=r.length;e>1&&p(r.charCodeAt(1))&&(++o,e>2&&(p(r.charCodeAt(2))?++o:i=!1))}if(i){for(;o<n.length&&p(n.charCodeAt(o));)o++;o>=2&&(n=`\\${n.slice(o)}`)}return t.win32.normalize(n)},relative(e,n){if(h(e,"from"),h(n,"to"),e===n)return"";const r=t.win32.resolve(e),i=t.win32.resolve(n);if(r===i)return"";if((e=r.toLowerCase())===(n=i.toLowerCase()))return"";let o=0;for(;o<e.length&&e.charCodeAt(o)===l;)o++;let s=e.length;for(;s-1>o&&e.charCodeAt(s-1)===l;)s--;const a=s-o;let c=0;for(;c<n.length&&n.charCodeAt(c)===l;)c++;let u=n.length;for(;u-1>c&&n.charCodeAt(u-1)===l;)u--;const d=u-c,p=a<d?a:d;let f=-1,g=0;for(;g<p;g++){const t=e.charCodeAt(o+g);if(t!==n.charCodeAt(c+g))break;t===l&&(f=g)}if(g!==p){if(-1===f)return i}else{if(d>p){if(n.charCodeAt(c+g)===l)return i.slice(c+g+1);if(2===g)return i.slice(c+g)}a>p&&(e.charCodeAt(o+g)===l?f=g:2===g&&(f=3)),-1===f&&(f=0)}let m="";for(g=o+f+1;g<=s;++g)g!==s&&e.charCodeAt(g)!==l||(m+=0===m.length?"..":"\\..");return c+=f,m.length>0?`${m}${i.slice(c,u)}`:(i.charCodeAt(c)===l&&++c,i.slice(c,u))},toNamespacedPath(e){if("string"!=typeof e)return e;if(0===e.length)return"";const n=t.win32.resolve(e);if(n.length<=2)return e;if(n.charCodeAt(0)===l){if(n.charCodeAt(1)===l){const e=n.charCodeAt(2);if(63!==e&&e!==a)return`\\\\?\\UNC\\${n.slice(2)}`}}else if(g(n.charCodeAt(0))&&n.charCodeAt(1)===u&&n.charCodeAt(2)===l)return`\\\\?\\${n}`;return e},dirname(e){h(e,"path");const t=e.length;if(0===t)return".";let n=-1,r=0;const i=e.charCodeAt(0);if(1===t)return p(i)?e:".";if(p(i)){if(n=r=1,p(e.charCodeAt(1))){let i=2,o=i;for(;i<t&&!p(e.charCodeAt(i));)i++;if(i<t&&i!==o){for(o=i;i<t&&p(e.charCodeAt(i));)i++;if(i<t&&i!==o){for(o=i;i<t&&!p(e.charCodeAt(i));)i++;if(i===t)return e;i!==o&&(n=r=i+1)}}}}else g(i)&&e.charCodeAt(1)===u&&(n=t>2&&p(e.charCodeAt(2))?3:2,r=n);let o=-1,s=!0;for(let n=t-1;n>=r;--n)if(p(e.charCodeAt(n))){if(!s){o=n;break}}else s=!1;if(-1===o){if(-1===n)return".";o=n}return e.slice(0,o)},basename(e,t){void 0!==t&&h(t,"ext"),h(e,"path");let n,r=0,i=-1,o=!0;if(e.length>=2&&g(e.charCodeAt(0))&&e.charCodeAt(1)===u&&(r=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,a=-1;for(n=e.length-1;n>=r;--n){const c=e.charCodeAt(n);if(p(c)){if(!o){r=n+1;break}}else-1===a&&(o=!1,a=n+1),s>=0&&(c===t.charCodeAt(s)?-1==--s&&(i=n):(s=-1,i=a))}return r===i?i=a:-1===i&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=r;--n)if(p(e.charCodeAt(n))){if(!o){r=n+1;break}}else-1===i&&(o=!1,i=n+1);return-1===i?"":e.slice(r,i)},extname(e){h(e,"path");let t=0,n=-1,r=0,i=-1,o=!0,s=0;e.length>=2&&e.charCodeAt(1)===u&&g(e.charCodeAt(0))&&(t=r=2);for(let c=e.length-1;c>=t;--c){const t=e.charCodeAt(c);if(p(t)){if(!o){r=c+1;break}}else-1===i&&(o=!1,i=c+1),t===a?-1===n?n=c:1!==s&&(s=1):-1!==n&&(s=-1)}return-1===n||-1===i||0===s||1===s&&n===i-1&&n===r+1?"":e.slice(n,i)},format:v.bind(null,"\\"),parse(e){h(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const n=e.length;let r=0,i=e.charCodeAt(0);if(1===n)return p(i)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(p(i)){if(r=1,p(e.charCodeAt(1))){let t=2,i=t;for(;t<n&&!p(e.charCodeAt(t));)t++;if(t<n&&t!==i){for(i=t;t<n&&p(e.charCodeAt(t));)t++;if(t<n&&t!==i){for(i=t;t<n&&!p(e.charCodeAt(t));)t++;t===n?r=t:t!==i&&(r=t+1)}}}}else if(g(i)&&e.charCodeAt(1)===u){if(n<=2)return t.root=t.dir=e,t;if(r=2,p(e.charCodeAt(2))){if(3===n)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let o=-1,s=r,c=-1,l=!0,d=e.length-1,f=0;for(;d>=r;--d)if(i=e.charCodeAt(d),p(i)){if(!l){s=d+1;break}}else-1===c&&(l=!1,c=d+1),i===a?-1===o?o=d:1!==f&&(f=1):-1!==o&&(f=-1);return-1!==c&&(-1===o||0===f||1===f&&o===c-1&&o===s+1?t.base=t.name=e.slice(s,c):(t.name=e.slice(s,o),t.base=e.slice(s,c),t.ext=e.slice(o,c))),t.dir=s>0&&s!==r?e.slice(0,s-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},t.posix={resolve(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const i=r>=0?e[r]:s.cwd();h(i,"path"),0!==i.length&&(t=`${i}/${t}`,n=i.charCodeAt(0)===c)}return t=m(t,!n,"/",f),n?`/${t}`:t.length>0?t:"."},normalize(e){if(h(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===c,n=e.charCodeAt(e.length-1)===c;return 0===(e=m(e,!t,"/",f)).length?t?"/":n?"./":".":(n&&(e+="/"),t?`/${e}`:e)},isAbsolute:e=>(h(e,"path"),e.length>0&&e.charCodeAt(0)===c),join(...e){if(0===e.length)return".";let n;for(let t=0;t<e.length;++t){const r=e[t];h(r,"path"),r.length>0&&(void 0===n?n=r:n+=`/${r}`)}return void 0===n?".":t.posix.normalize(n)},relative(e,n){if(h(e,"from"),h(n,"to"),e===n)return"";if((e=t.posix.resolve(e))===(n=t.posix.resolve(n)))return"";const r=e.length,i=r-1,o=n.length-1,s=i<o?i:o;let a=-1,l=0;for(;l<s;l++){const t=e.charCodeAt(1+l);if(t!==n.charCodeAt(1+l))break;t===c&&(a=l)}if(l===s)if(o>s){if(n.charCodeAt(1+l)===c)return n.slice(1+l+1);if(0===l)return n.slice(1+l)}else i>s&&(e.charCodeAt(1+l)===c?a=l:0===l&&(a=0));let u="";for(l=1+a+1;l<=r;++l)l!==r&&e.charCodeAt(l)!==c||(u+=0===u.length?"..":"/..");return`${u}${n.slice(1+a)}`},toNamespacedPath:e=>e,dirname(e){if(h(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===c;let n=-1,r=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===c){if(!r){n=t;break}}else r=!1;return-1===n?t?"/":".":t&&1===n?"//":e.slice(0,n)},basename(e,t){void 0!==t&&h(t,"ext"),h(e,"path");let n,r=0,i=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const l=e.charCodeAt(n);if(l===c){if(!o){r=n+1;break}}else-1===a&&(o=!1,a=n+1),s>=0&&(l===t.charCodeAt(s)?-1==--s&&(i=n):(s=-1,i=a))}return r===i?i=a:-1===i&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===c){if(!o){r=n+1;break}}else-1===i&&(o=!1,i=n+1);return-1===i?"":e.slice(r,i)},extname(e){h(e,"path");let t=-1,n=0,r=-1,i=!0,o=0;for(let s=e.length-1;s>=0;--s){const l=e.charCodeAt(s);if(l!==c)-1===r&&(i=!1,r=s+1),l===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)},format:v.bind(null,"/"),parse(e){h(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const n=e.charCodeAt(0)===c;let r;n?(t.root="/",r=1):r=0;let i=-1,o=0,s=-1,l=!0,u=e.length-1,d=0;for(;u>=r;--u){const t=e.charCodeAt(u);if(t!==c)-1===s&&(l=!1,s=u+1),t===a?-1===i?i=u:1!==d&&(d=1):-1!==i&&(d=-1);else if(!l){o=u+1;break}}if(-1!==s){const r=0===o&&n?1:o;-1===i||0===d||1===d&&i===s-1&&i===o+1?t.base=t.name=e.slice(r,s):(t.name=e.slice(r,i),t.base=e.slice(r,s),t.ext=e.slice(i,s))}return o>0?t.dir=e.slice(0,o-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null},t.posix.win32=t.win32.win32=t.win32,t.posix.posix=t.win32.posix=t.posix,t.normalize="win32"===s.platform?t.win32.normalize:t.posix.normalize,t.isAbsolute="win32"===s.platform?t.win32.isAbsolute:t.posix.isAbsolute,t.join="win32"===s.platform?t.win32.join:t.posix.join,t.resolve="win32"===s.platform?t.win32.resolve:t.posix.resolve,t.relative="win32"===s.platform?t.win32.relative:t.posix.relative,t.dirname="win32"===s.platform?t.win32.dirname:t.posix.dirname,t.basename="win32"===s.platform?t.win32.basename:t.posix.basename,t.extname="win32"===s.platform?t.win32.extname:t.posix.extname,t.format="win32"===s.platform?t.win32.format:t.posix.format,t.parse="win32"===s.platform?t.win32.parse:t.posix.parse,t.toNamespacedPath="win32"===s.platform?t.win32.toNamespacedPath:t.posix.toNamespacedPath,t.sep="win32"===s.platform?t.win32.sep:t.posix.sep,t.delimiter="win32"===s.platform?t.win32.delimiter:t.posix.delimiter},76300:(e,t,n)=>{"use strict";var r=n(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.isAndroid=t.isEdge=t.isSafari=t.isFirefox=t.isChrome=t.isLittleEndian=t.OS=t.setTimeout0=t.translationsConfigFile=t.locale=t.Language=t.language=t.userAgent=t.platform=t.isCI=t.isIOS=t.isWebWorker=t.isWeb=t.isElectron=t.isNative=t.isLinuxSnap=t.isLinux=t.isMacintosh=t.isWindows=t.PlatformToString=t.isElectronSandboxed=t.globals=void 0;const i="en";let o,s,a,c,l=!1,u=!1,d=!1,h=!1,p=!1,f=!1,g=!1,m=!1,v=!1,y=i;t.globals="object"==typeof self?self:"object"==typeof n.g?n.g:{},c=void 0!==t.globals.vscode&&void 0!==t.globals.vscode.process?t.globals.vscode.process:r;const b="string"==typeof c?.versions?.electron,w=b&&"renderer"===c?.type;if(t.isElectronSandboxed=w&&c?.sandboxed,"object"!=typeof navigator||w)if("object"==typeof c){l="win32"===c.platform,u="darwin"===c.platform,d="linux"===c.platform,h=d&&!!c.env.SNAP&&!!c.env.SNAP_REVISION,g=b,v=!!c.env.CI||!!c.env.BUILD_ARTIFACTSTAGINGDIRECTORY,o=i,y=i;const e=c.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];o=t.locale,y=n||i,s=t._translationsConfigFile}catch(e){}p=!0}else console.error("Unable to resolve platform.");else a=navigator.userAgent,l=a.indexOf("Windows")>=0,u=a.indexOf("Macintosh")>=0,m=(a.indexOf("Macintosh")>=0||a.indexOf("iPad")>=0||a.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,d=a.indexOf("Linux")>=0,f=!0,o=navigator.language,y=o;t.PlatformToString=function(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}};let S=0;var C;u?S=1:l?S=3:d&&(S=2),t.isWindows=l,t.isMacintosh=u,t.isLinux=d,t.isLinuxSnap=h,t.isNative=p,t.isElectron=g,t.isWeb=f,t.isWebWorker=f&&"function"==typeof t.globals.importScripts,t.isIOS=m,t.isCI=v,t.platform=S,t.userAgent=a,t.language=y,function(e){e.value=function(){return t.language},e.isDefaultVariant=function(){return 2===t.language.length?"en"===t.language:t.language.length>=3&&"e"===t.language[0]&&"n"===t.language[1]&&"-"===t.language[2]},e.isDefault=function(){return"en"===t.language}}(C||(t.Language=C={})),t.locale=o,t.translationsConfigFile=s,t.setTimeout0=(()=>{if("function"==typeof t.globals.postMessage&&!t.globals.importScripts){let e=[];t.globals.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void r.callback()}}));let n=0;return r=>{const i=++n;e.push({id:i,callback:r}),t.globals.postMessage({vscodeScheduleAsyncWork:i},"*")}}return e=>setTimeout(e)})(),t.OS=u||m?2:l?1:3;let _=!0,P=!1;t.isLittleEndian=function(){if(!P){P=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2;const t=new Uint16Array(e.buffer);_=513===t[0]}return _},t.isChrome=!!(t.userAgent&&t.userAgent.indexOf("Chrome")>=0),t.isFirefox=!!(t.userAgent&&t.userAgent.indexOf("Firefox")>=0),t.isSafari=!!(!t.isChrome&&t.userAgent&&t.userAgent.indexOf("Safari")>=0),t.isEdge=!!(t.userAgent&&t.userAgent.indexOf("Edg/")>=0),t.isAndroid=!!(t.userAgent&&t.userAgent.indexOf("Android")>=0)},92527:(e,t,n)=>{"use strict";var r=n(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.arch=t.platform=t.env=t.cwd=void 0;const i=n(76300);let o;if(void 0!==i.globals.vscode&&void 0!==i.globals.vscode.process){const e=i.globals.vscode.process;o={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd:()=>e.cwd()}}else o={get platform(){return"web"},get arch(){return r.arch},get env(){return r.env},cwd:()=>r.env.VSCODE_CWD||r.cwd()};t.cwd=o.cwd,t.env=o.env,t.platform=o.platform,t.arch=o.arch},52859:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DataUri=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;const s=n(66828),a=o(n(3499)),c=o(n(15948)),l=n(76300),u=n(13715),d=n(25982);function h(e){return l.isWeb?e?.path||"":e?.fsPath||""}t.originalFSPath=h;class p{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:(0,u.compare)(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t||!(!e||!t)&&this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,n,r=!1,i=(l.isWindows?"\\":"/")){if(e.scheme===n.scheme){if(e.scheme===d.Schemas.file)return a.isEqualOrParent(h(e),h(n),this._ignorePathCasing(e),i)&&e.query===n.query&&(r||e.fragment===n.fragment);if((0,t.isEqualAuthority)(e.authority,n.authority))return a.isEqualOrParent(e.path,n.path,this._ignorePathCasing(e),"/")&&e.query===n.query&&(r||e.fragment===n.fragment)}return!1}joinPath(e,...t){return s.Uri.joinPath(e,...t)}basenameOrAuthority(e){return(0,t.basename)(e)||e.authority}basename(e,t){return c.posix.basename(e.path,t)}extname(e){return c.posix.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===d.Schemas.file?t=s.Uri.file(c.dirname(h(e))).path:(t=c.posix.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===d.Schemas.file?s.Uri.file(c.normalize(h(e))).path:c.posix.normalize(e.path),e.with({path:t})}relativePath(e,n){if(e.scheme!==n.scheme||!(0,t.isEqualAuthority)(e.authority,n.authority))return;if(e.scheme===d.Schemas.file){const t=c.relative(h(e),h(n));return l.isWindows?a.toSlashes(t):t}let r=e.path||"/",i=n.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const t=Math.min(r.length,i.length);e<t&&(r.charCodeAt(e)===i.charCodeAt(e)||r.charAt(e).toLowerCase()===i.charAt(e).toLowerCase());e++);r=i.substr(0,e)+r.substr(e)}return c.posix.relative(r,i)}resolvePath(e,t){if(e.scheme===d.Schemas.file){const n=s.Uri.file(c.resolve(h(e),t));return e.with({authority:n.authority,path:n.path})}return t=a.toPosixPath(t),e.with({path:c.posix.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&(0,u.equalsIgnoreCase)(e,t)}hasTrailingPathSeparator(e,t=c.sep){if(e.scheme===d.Schemas.file){const n=h(e);return n.length>a.getRoot(n).length&&n[n.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,n=c.sep){return(0,t.hasTrailingPathSeparator)(e,n)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,n=c.sep){let r=!1;if(e.scheme===d.Schemas.file){const t=h(e);r=void 0!==t&&t.length===a.getRoot(t).length&&t[t.length-1]===n}else{n="/";const t=e.path;r=1===t.length&&47===t.charCodeAt(t.length-1)}return r||(0,t.hasTrailingPathSeparator)(e,n)?e:e.with({path:e.path+"/"})}}var f;t.ExtUri=p,t.extUri=new p((()=>!1)),t.extUriBiasedIgnorePathCase=new p((e=>e.scheme!==d.Schemas.file||!l.isLinux)),t.extUriIgnorePathCase=new p((e=>!0)),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri),function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach((e=>{const[t,r]=e.split(":");t&&r&&n.set(t,r)}));const r=t.path.substring(0,t.path.indexOf(";"));return r&&n.set(e.META_DATA_MIME,r),n}}(f||(t.DataUri=f={}))},13715:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.InvisibleCharacters=t.AmbiguousCharacters=t.startsWithIgnoreCase=t.equalsIgnoreCase=t.isLowerAsciiLetter=t.compareSubstringIgnoreCase=t.compareIgnoreCase=t.compareSubstring=t.compare=void 0;const i=n(11959),o=n(62624);function s(e,t,n=0,r=e.length,i=0,o=t.length){for(;n<r&&i<o;n++,i++){let r=e.charCodeAt(n),o=t.charCodeAt(i);if(r<o)return-1;if(r>o)return 1}const s=r-n,a=o-i;return s<a?-1:s>a?1:0}function a(e,t,n=0,r=e.length,i=0,o=t.length){for(;n<r&&i<o;n++,i++){let a=e.charCodeAt(n),l=t.charCodeAt(i);if(a===l)continue;if(a>=128||l>=128)return s(e.toLowerCase(),t.toLowerCase(),n,r,i,o);c(a)&&(a-=32),c(l)&&(l-=32);const u=a-l;if(0!==u)return u}const a=r-n,l=o-i;return a<l?-1:a>l?1:0}function c(e){return e>=97&&e<=122}t.compare=function(e,t){return e<t?-1:e>t?1:0},t.compareSubstring=s,t.compareIgnoreCase=function(e,t){return a(e,t,0,e.length,0,t.length)},t.compareSubstringIgnoreCase=a,t.isLowerAsciiLetter=c,t.equalsIgnoreCase=function(e,t){return e.length===t.length&&0===a(e,t)},t.startsWithIgnoreCase=function(e,t){const n=t.length;return!(t.length>e.length)&&0===a(e,t,0,n)};class l{static getInstance(e){return r.cache.get(Array.from(e))}static getLocales(){return r._locales.getValue()}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}t.AmbiguousCharacters=l,r=l,l.ambiguousCharacterData=new o.Lazy((()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))),l.cache=new i.LRUCachedComputed((e=>{function t(e){const t=new Map;for(let n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t}function n(e,t){if(!e)return t;const n=new Map;for(const[r,i]of e)t.has(r)&&n.set(r,i);return n}const i=r.ambiguousCharacterData.getValue();let o,s=e.filter((e=>!e.startsWith("_")&&e in i));0===s.length&&(s=["_default"]);for(const e of s)o=n(o,t(i[e]));const a=function(e,t){const n=new Map(e);for(const[e,r]of t)n.set(e,r);return n}(t(i._common),o);return new r(a)})),l._locales=new o.Lazy((()=>Object.keys(r.ambiguousCharacterData.getValue()).filter((e=>!e.startsWith("_")))));class u{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(u.getRawData())),this._data}static isInvisibleCharacter(e){return u.getData().has(e)}static get codePoints(){return u.getData()}}t.InvisibleCharacters=u,u._data=void 0},25982:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Schemas=void 0,function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebook="vscode-notebook",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeInteractive="vscode-interactive",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls"}(n||(t.Schemas=n={}))},42173:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Webview=void 0;const s=n(66828),a=n(11642),c=n(15925),l=o(n(25251));t.Webview=class{get loadFailed(){return this.loadFailedEmitter.event}constructor(e,t,n,r=[]){this.fs=e,this.disposableRegistry=t,this.options=n,this.loadFailedEmitter=new s.EventEmitter;const i={enableScripts:!0,localResourceRoots:[this.options.rootPath,this.options.cwd,...r]};n.webviewHost?(this.webviewHost=n.webviewHost,this.webviewHost.webview.options=i):this.webviewHost=this.createWebview(i),this.loadPromise=this.load()}asWebviewUri(e){if(!this.webviewHost?.webview)throw new Error("WebView not initialized, too early to get a Uri");return this.webviewHost.webview.asWebviewUri(e)}postMessage(e){this.webviewHost?.webview&&this.webviewHost?.webview.postMessage(e)}async generateLocalReactHtml(){if(!this.webviewHost?.webview)throw new Error("WebView not initialized, too early to get a Uri");const e=this.webviewHost.webview.asWebviewUri(this.options.cwd).toString(),t=this.options.scripts.map((e=>this.webviewHost.webview.asWebviewUri(e))),n=this.webviewHost.webview.asWebviewUri(this.options.rootPath).toString();return`<!doctype html>\n        <html lang="en">\n            <head>\n                <meta charset="utf-8">\n                <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">\n                <meta http-equiv="Content-Security-Policy" content="img-src 'self' data: https: http: blob: ${this.webviewHost.webview.cspSource}; default-src 'unsafe-inline' 'unsafe-eval' data: https: http: blob: ${this.webviewHost.webview.cspSource};">\n                <meta name="theme-color" content="#000000">\n                <meta name="theme" content="${c.Identifiers.GeneratedThemeName}"/>\n                <title>VS Code Python React UI</title>\n                <base href="${e}${e.endsWith("/")?"":"/"}"/>\n                </head>\n            <body>\n                <noscript>You need to enable JavaScript to run this app.</noscript>\n                <div id="root"></div>\n                <script type="text/javascript">\n                    // Public path that will be used by webpack.\n                    window.__PVSC_Public_Path = "${n}/";\n                    function resolvePath(relativePath) {\n                        if (relativePath && relativePath[0] == '.' && relativePath[1] != '.') {\n                            return "${e}" + relativePath.substring(1);\n                        }\n\n                        return "${e}" + relativePath;\n                    }\n                    function forceTestMiddleware() {\n                        return false;\n                    }\n                <\/script>\n                ${t.map((e=>`<script type="text/javascript" src="${e}"><\/script>`)).join("\n")}\n            </body>\n        </html>`}async load(){try{this.webviewHost?.webview&&((await Promise.all(this.options.scripts.map((e=>this.fs.exists(e))))).every((e=>!0===e))?(this.webviewHost.webview.html=await this.generateLocalReactHtml(),this.postLoad(this.webviewHost)):this.webviewHost.webview.html=l.DataScience.badWebPanelFormatString(this.options.scripts.join(", ")))}catch(e){(0,a.traceError)(`Error Loading WebviewPanel: ${e}`),this.loadFailedEmitter.fire()}}}},92660:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewHost=void 0;const a=n(66828),c=n(15925),l=n(11642),u=n(43138),d=n(85446),h=s(n(25251)),p=n(30682),f=n(72728),g=n(58681);class m{get onDidDispose(){return this._onDidDisposeWebviewPanel.event}constructor(e,t,n,r){this.configService=e,this.workspaceService=t,this.rootPath=n,this.scripts=r,this.disposed=!1,this.themeIsDarkPromise=(0,u.createDeferred)(),this.webviewInit=(0,u.createDeferred)(),this._disposables=[],this.onMessageListeners=[],this._onDidDisposeWebviewPanel=new a.EventEmitter,this.onDataScienceSettingsChanged=async()=>{const e=JSON.stringify(await this.generateDataScienceExtraSettings());this.postMessageInternal(p.SharedMessages.UpdateSettings,e).catch(g.noop)},this.onWebViewLoadFailed=async()=>{this.dispose()},this.onPossibleSettingsChange=async e=>{if(e.affectsConfiguration("workbench.colorTheme")||e.affectsConfiguration("editor.fontSize")||e.affectsConfiguration("editor.fontFamily")||e.affectsConfiguration("editor.cursorStyle")||e.affectsConfiguration("editor.cursorBlinking")||e.affectsConfiguration("editor.autoClosingBrackets")||e.affectsConfiguration("editor.autoClosingQuotes")||e.affectsConfiguration("editor.autoSurround")||e.affectsConfiguration("editor.autoIndent")||e.affectsConfiguration("editor.scrollBeyondLastLine")||e.affectsConfiguration("editor.fontLigatures")||e.affectsConfiguration("editor.scrollbar.verticalScrollbarSize")||e.affectsConfiguration("editor.scrollbar.horizontalScrollbarSize")||e.affectsConfiguration("files.autoSave")||e.affectsConfiguration("files.autoSaveDelay")||e.affectsConfiguration("jupyter.widgetScriptSources")){const e=await this.generateDataScienceExtraSettings();if(e){const t=JSON.stringify(e);this.postMessageInternal(p.SharedMessages.UpdateSettings,t).catch(g.noop)}}},this._disposables.push(this.workspaceService.onDidChangeConfiguration(this.onPossibleSettingsChange,this)),this._disposables.push(this.configService.getSettings(void 0).onDidChange(this.onDataScienceSettingsChanged.bind(this)))}dispose(){this.disposed||(this.disposed=!0,this._disposables.forEach((e=>e.dispose()))),this.webviewInit=void 0,this._onDidDisposeWebviewPanel.fire()}getHTMLById(e){if(this.activeHTMLRequest)throw new Error("getHTMLById request already in progress");return this.activeHTMLRequest=(0,u.createDeferred)(),this.postMessageInternal(p.InteractiveWindowMessages.GetHTMLByIdRequest,e).catch(g.noop),this.activeHTMLRequest.promise}addMessageListener(e){this.onMessageListeners.push(e)}removeMessageListener(e){const t=this.onMessageListeners.indexOf(e);t>=0&&this.onMessageListeners.splice(t,1)}asWebviewUri(e){if(!this.webview)throw new Error("asWebViewUri called too early");return this.webview?.asWebviewUri(e)}postMessage(e,t){return this.postMessageInternal(e.toString(),t)}onMessage(e,t){switch(e){case p.SharedMessages.Started:this.webViewRendered();break;case p.InteractiveWindowMessages.GetHTMLByIdResponse:this.activeHTMLRequest&&(this.activeHTMLRequest.resolve(t),this.activeHTMLRequest=void 0)}this.onMessageListeners.forEach((n=>{n(e,t)}))}async loadWebview(e,t){if(this.disposed=!1,this.webviewInit=this.webviewInit||(0,u.createDeferred)(),(0,l.traceInfo)("Loading webview. View is "+(this.webview?"set":"notset")),void 0===this.webview){const n=await this.generateDataScienceExtraSettings();(0,l.traceInfo)("Loading web view...");const r=this.workspaceService.getWorkspaceFolder(e)?.uri;this.webview=await this.provideWebview(e,n,r,t),this._disposables.push(this.webview.loadFailed(this.onWebViewLoadFailed,this)),(0,l.traceInfo)("Webview panel created.")}this.onDataScienceSettingsChanged().catch(g.noop),this.sendLocStrings().catch(g.noop)}async generateDataScienceExtraSettings(){const e=this.owningResource,t=this.workspaceService.getConfiguration("editor"),n=this.workspaceService.getConfiguration("workbench"),r=n?n.get("colorTheme",c.DefaultTheme):c.DefaultTheme,i=a.extensions.getExtension(c.PythonExtension);return{...JSON.parse(JSON.stringify(this.configService.getSettings(e))),extraSettings:{editor:{cursor:this.getValue(t,"cursorStyle","line"),cursorBlink:this.getValue(t,"cursorBlinking","blink"),autoClosingBrackets:this.getValue(t,"autoClosingBrackets","languageDefined"),autoClosingQuotes:this.getValue(t,"autoClosingQuotes","languageDefined"),autoSurround:this.getValue(t,"autoSurround","languageDefined"),autoIndent:this.getValue(t,"autoIndent",!1),fontLigatures:this.getValue(t,"fontLigatures",!1),scrollBeyondLastLine:this.getValue(t,"scrollBeyondLastLine",!0),verticalScrollbarSize:this.getValue(t,"scrollbar.verticalScrollbarSize",14),horizontalScrollbarSize:this.getValue(t,"scrollbar.horizontalScrollbarSize",10),fontSize:this.getValue(t,"fontSize",14),fontFamily:this.getValue(t,"fontFamily","Consolas, 'Courier New', monospace")},theme:r,hasPythonExtension:void 0!==i,isWeb:(0,f.getOSType)()===f.OSType.Unknown}}}async sendLocStrings(){const e={collapseSingle:h.WebViews.collapseSingle,expandSingle:h.WebViews.expandSingle,openExportFileYes:h.DataScience.openExportFileYes,openExportFileNo:h.DataScience.openExportFileNo,noRowsInDataViewer:h.WebViews.noRowsInDataViewer,sliceIndexError:h.WebViews.sliceIndexError,sliceMismatchedAxesError:h.WebViews.sliceMismatchedAxesError,filterRowsTooltip:h.WebViews.sliceMismatchedAxesError,fetchingDataViewer:h.WebViews.fetchingDataViewer,dataViewerHideFilters:h.WebViews.dataViewerHideFilters,dataViewerShowFilters:h.WebViews.dataViewerShowFilters,refreshDataViewer:h.WebViews.refreshDataViewer,clearFilters:h.WebViews.refreshDataViewer,sliceSummaryTitle:h.WebViews.sliceSummaryTitle,sliceData:h.WebViews.sliceData,sliceSubmitButton:h.WebViews.sliceSubmitButton,sliceDropdownAxisLabel:h.WebViews.sliceDropdownAxisLabel,sliceDropdownIndexLabel:h.WebViews.sliceDropdownIndexLabel,variableExplorerNameColumn:h.WebViews.variableExplorerNameColumn,variableExplorerTypeColumn:h.WebViews.variableExplorerTypeColumn,variableExplorerCountColumn:h.WebViews.variableExplorerCountColumn,variableExplorerValueColumn:h.WebViews.variableExplorerValueColumn,collapseVariableExplorerLabel:h.WebViews.collapseVariableExplorerLabel,variableLoadingValue:h.WebViews.variableLoadingValue,showDataExplorerTooltip:h.WebViews.showDataExplorerTooltip,noRowsInVariableExplorer:h.WebViews.noRowsInVariableExplorer,loadingRowsInVariableExplorer:h.WebViews.loadingRowsInVariableExplorer,previousPlot:h.WebViews.previousPlot,nextPlot:h.WebViews.nextPlot,panPlot:h.WebViews.panPlot,zoomInPlot:h.WebViews.zoomInPlot,zoomOutPlot:h.WebViews.zoomOutPlot,exportPlot:h.WebViews.exportPlot,deletePlot:h.WebViews.deletePlot,selectedImageListLabel:h.WebViews.selectedImageListLabel,selectedImageLabel:h.WebViews.selectedImageLabel};this.postMessageInternal(p.SharedMessages.LocInit,JSON.stringify(e)).catch(g.noop)}async postMessageInternal(e,t){this.webviewInit&&(await this.webviewInit.promise,this.webview?.postMessage({type:e.toString(),payload:t}))}webViewRendered(){this.webviewInit&&!this.webviewInit.resolved&&(this.webviewInit.resolve(),(0,l.traceInfo)("Web view react rendered")),this.sendLocStrings().catch(g.noop),this.onDataScienceSettingsChanged().catch(g.noop)}getValue(e,t,n){return e?e.get(t,n):n}}t.WebviewHost=m,o([(0,d.testOnlyMethod)()],m.prototype,"getHTMLById",null),o([(0,d.testOnlyMethod)()],m.prototype,"addMessageListener",null),o([(0,d.testOnlyMethod)()],m.prototype,"removeMessageListener",null)},78086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewPanelHost=void 0;const r=n(92660);class i extends r.WebviewHost{get isDisposed(){return this.disposed}get webPanel(){if(this.webview)return this.webview}constructor(e,t,n,r,i,o,s,a){super(e,n,i,o),this.configService=e,this.provider=t,this.workspaceService=n,this._title=s,this.viewColumn=a,this.viewState={visible:!1,active:!1},this.webPanelViewStateChanged=e=>{const t=e.isVisible(),n=e.isActive(),r={visible:t,active:n},i={visible:this.viewState.visible,active:this.viewState.active};this.viewState.visible=t,this.viewState.active=n,this.onViewStateChanged({current:r,previous:i})},this.messageListener=r(this.onMessage.bind(this),this.webPanelViewStateChanged.bind(this),this.dispose.bind(this))}async show(e){this.isDisposed||this.webPanel&&await this.webPanel.show(e)}dispose(){this.isDisposed||this.webPanel&&this.webPanel.close(),super.dispose()}get title(){return this._title}setTitle(e){this._title=e,!this.isDisposed&&this.webPanel&&this.webPanel.setTitle(e)}onViewStateChanged(e){}async provideWebview(e,t,n,r){return this.provider.create({viewColumn:this.viewColumn,listener:this.messageListener,title:this.title,rootPath:this.rootPath,scripts:this.scripts,settings:t,cwd:e,webviewHost:r,additionalPaths:n?[n]:[]})}}t.WebviewPanelHost=i},80208:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewPanelProvider=void 0;const c=n(26594),l=n(66828),u=n(83599),d=n(42080),h=n(58681),p=s(n(15948)),f=n(42173);class g extends f.Webview{get panel(){return this.webviewHost}get panelOptions(){return this.options}constructor(e,t,n,r=[]){super(e,t,n,r)}async show(e){await this.loadPromise,this.panel&&(e?this.panel.visible||this.panel.reveal(this.panel.viewColumn,e):this.panel.active||this.panel.reveal(this.panel.viewColumn,e))}close(){this.panel&&this.panel.dispose()}get viewColumn(){return this.panel?.viewColumn}isVisible(){return!!this.panel&&this.panel.visible}isActive(){return!!this.panel&&this.panel.active}setTitle(e){this.panelOptions.title=e,this.panel&&(this.panel.title=e)}createWebview(e){return l.window.createWebviewPanel(this.panelOptions.title.toLowerCase().replace(" ",""),this.panelOptions.title,{viewColumn:this.panelOptions.viewColumn,preserveFocus:!0},{retainContextWhenHidden:!0,enableFindWidget:!0,...e})}postLoad(e){this.disposableRegistry.push(e.onDidDispose((()=>{this.webviewHost=void 0,this.panelOptions.listener.dispose().catch(h.noop)}))),this.disposableRegistry.push(e.webview.onDidReceiveMessage((e=>{this.panelOptions.listener.onMessage(e.type,e.payload)}))),this.disposableRegistry.push(e.onDidChangeViewState((e=>{this.panelOptions.listener.onChangeViewState(this)}))),this.panelOptions.listener.onChangeViewState(this)}}let m=class{constructor(e,t,n){this.disposableRegistry=e,this.fs=t,this.context=n}async create(e){const t=[l.Uri.file(p.join(this.context.extensionPath,"temp"))];return Array.isArray(e.additionalPaths)&&t.push(...e.additionalPaths),new g(this.fs,this.disposableRegistry,e,t)}};t.WebviewPanelProvider=m,t.WebviewPanelProvider=m=o([(0,c.injectable)(),a(0,(0,c.inject)(d.IDisposableRegistry)),a(1,(0,c.inject)(u.IFileSystem)),a(2,(0,c.inject)(d.IExtensionContext))],m)},87486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewViewHost=void 0;const r=n(92660);class i extends r.WebviewHost{get isDisposed(){return this.disposed}get webviewView(){return this.webview&&this.webview}constructor(e,t,n,r,i,o){super(e,t,i,o),this.configService=e,this.workspaceService=t,this.provider=r,this.messageListener=n(this.onMessage.bind(this),this.dispose.bind(this))}async provideWebview(e,t,n,r){if(!r)throw new Error("WebviewViews must be passed an initial VS Code Webview");return this.provider.create({additionalPaths:n?[n]:[],rootPath:this.rootPath,cwd:e,listener:this.messageListener,scripts:this.scripts,settings:t,webviewHost:r})}}t.WebviewViewHost=i},22670:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewViewProvider=void 0;const o=n(26594),s=n(66828),a=n(83599),c=n(42080),l=n(58681),u=n(42173);class d extends u.Webview{get visible(){return!!this.webviewHost&&this.webviewHost.visible}get onDidChangeVisibility(){return this._onDidChangeVisibility.event}constructor(e,t,n,r=[]){super(e,t,n,r),this.panelOptions=n,this._onDidChangeVisibility=new s.EventEmitter}createWebview(e){throw new Error("Webview Views must be passed in an initial view")}postLoad(e){this.disposableRegistry.push(e.onDidDispose((()=>{this.webviewHost=void 0,this.panelOptions.listener.dispose().catch(l.noop)}))),this.disposableRegistry.push(e.webview.onDidReceiveMessage((e=>{this.panelOptions.listener.onMessage(e.type,e.payload)}))),this.disposableRegistry.push(e.onDidChangeVisibility((()=>{this._onDidChangeVisibility.fire()}))),this._onDidChangeVisibility.fire()}}let h=class{constructor(e,t){this.disposableRegistry=e,this.fs=t}async create(e){return new d(this.fs,this.disposableRegistry,e)}};t.WebviewViewProvider=h,t.WebviewViewProvider=h=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(a.IFileSystem))],h)},46498:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionActivationManager=void 0;const o=n(26594),s=n(52064),a=n(11642);let c=class{constructor(e){this.syncActivationServices=e}activate(){this.syncActivationServices.map((e=>{try{e.activate()}catch(t){(0,a.traceError)(`Error in activating extension, failed in ${e.constructor.name}`,t)}}))}};t.ExtensionActivationManager=c,t.ExtensionActivationManager=c=r([(0,o.injectable)(),i(0,(0,o.optional)()),i(0,(0,o.multiInject)(s.IExtensionSyncActivationService))],c)},73381:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalActivation=void 0;const o=n(26594),s=n(10053),a=n(15925),c=n(29444),l=n(42080),u=n(58681),d=n(15925),h=n(99216),p=n(94523);let f=class{constructor(e,t,n,r,i,o){this.commandManager=e,this.disposableRegistry=t,this.configuration=n,this.documentManager=r,this.rawSupported=i,this.commandListeners=o,this.isDisposed=!1,this.startTime=Date.now(),this.onSettingsChanged=()=>{const e=this.configuration.getSettings(void 0).sendSelectionToInteractiveWindow;new c.ContextKey(d.EditorContexts.OwnsSelection,this.commandManager).set(e).catch(u.noop)}}get activationStartTime(){return this.startTime}activate(){this.onSettingsChanged(),this.changeHandler=this.configuration.getSettings(void 0).onDidChange(this.onSettingsChanged.bind(this)),this.disposableRegistry.push(this),this.disposableRegistry.push(this.documentManager.onDidChangeActiveTextEditor((()=>this.onChangedActiveTextEditor()))),this.onChangedActiveTextEditor(),this.computeZmqAvailable(),this.commandListeners&&this.commandListeners.forEach((e=>e.register(this.commandManager)))}async dispose(){this.changeHandler&&(this.changeHandler.dispose(),this.changeHandler=void 0)}computeZmqAvailable(){new c.ContextKey(d.EditorContexts.ZmqAvailable,this.commandManager).set(!!this.rawSupported&&this.rawSupported.isSupported).then(u.noop,u.noop)}onChangedActiveTextEditor(){const e=new c.ContextKey(d.EditorContexts.HasCodeCells,this.commandManager),t=this.documentManager.activeTextEditor;t&&t.document.languageId===a.PYTHON_LANGUAGE?e.set((0,p.hasCells)(t.document,this.configuration.getSettings())).catch(u.noop):e.set(!1).catch(u.noop)}};t.GlobalActivation=f,t.GlobalActivation=f=r([(0,o.injectable)(),i(0,(0,o.inject)(s.ICommandManager)),i(1,(0,o.inject)(l.IDisposableRegistry)),i(2,(0,o.inject)(l.IConfigurationService)),i(3,(0,o.inject)(s.IDocumentManager)),i(4,(0,o.inject)(h.IRawNotebookSupportedService)),i(4,(0,o.optional)()),i(5,(0,o.multiInject)(l.IDataScienceCommandListener))],f)},4494:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EagerlyActivateJupyterUriProviders=void 0;const o=n(26594),s=n(42080),a=n(58681);let c=class{constructor(e){this.extensions=e}activate(){this.eagerlyActivateOtherExtensions().catch(a.noop)}async eagerlyActivateOtherExtensions(){await Promise.all(this.extensions.all.filter((e=>e.packageJSON?.contributes?.pythonRemoteServerProvider)).map((e=>e.isActive?Promise.resolve():e.activate().then(a.noop,a.noop))))}};t.EagerlyActivateJupyterUriProviders=c,t.EagerlyActivateJupyterUriProviders=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IExtensions))],c)},34383:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildApi=t.IExportedKernelServiceFactory=void 0;const r=n(66828),i=n(77806),o=n(94433),s=n(90391),a=n(77886),c=n(15925),l=n(42080),u=n(11642),d=n(50867),h=n(9959),p=n(58681),f=n(94062),g=n(20397);function m(e,t){e.determineExtensionFromCallStack().then((e=>{(0,h.sendTelemetryEvent)(c.Telemetry.JupyterApiUsage,void 0,{clientExtId:e.extensionId,pemUsed:t})})).catch(p.noop)}t.IExportedKernelServiceFactory=Symbol("IExportedKernelServiceFactory"),t.buildApi=function(e,n,h,v){let y=!1;const b=h.get(l.IExtensions),w={ready:e.catch((e=>((0,u.traceError)("Failure during activation.",e),Promise.reject(e)))),registerPythonApi:e=>{y||(y=!0,h.get(a.IPythonApiProvider).setApi(e))},async showDataViewer(e,t){m(b,"showDataViewer");const n=h.get(s.IDataViewerFactory);await n.create(e,t)},registerRemoteServerProvider(e){m(b,"registerRemoteServerProvider");const t=h.get(o.IJupyterUriProviderRegistration);let n=p.noop;return(async()=>{const r=h.get(l.IExtensions),i=e.id.startsWith("_builtin")?c.JVSC_EXTENSION_ID:(await r.determineExtensionFromCallStack()).extensionId,o=t.registerProvider(e,i);n=()=>o.dispose()})().catch(p.noop),{dispose:()=>{n()}}},getKernelService:async()=>(m(b,"getKernelService"),h.get(t.IExportedKernelServiceFactory).getService()),getSuggestedController:async(e,t,n)=>{(0,u.traceError)("The API getSuggestedController is being deprecated."),v.extensionMode!==r.ExtensionMode.Development&&v.extensionMode!==r.ExtensionMode.Test?m(b,"getSuggestedController"):r.window.showErrorMessage("The Jupyter API getSuggestedController is being deprecated.").then(p.noop,p.noop)},addRemoteJupyterServer:async(e,t)=>{m(b,"addRemoteJupyterServer"),await new Promise((async n=>{const r=h.get(i.JupyterServerSelector),o=h.get(d.IControllerRegistration),s=function(e,t){return new Promise((n=>{t.onDidChange((t=>{for(let r of t.added)(0,f.isRemoteConnection)(r.connection)&&r.connection.serverProviderHandle.id===e.id&&r.connection.serverProviderHandle.handle===e.handle&&n()}))}))}({id:e,handle:t},o),a=(await b.determineExtensionFromCallStack()).extensionId;await r.addJupyterServer({id:e,handle:t,extensionId:a}),await s,n()}))},openNotebook:async(e,t)=>{m(b,"openNotebook");const n=h.get(d.IControllerRegistration),i=n.all.find((e=>e.id===t))?.id;if(!i)throw new Error(`Kernel ${t} not found.`);const o=r.window.activeNotebookEditor?.notebook?.uri?.toString()===e.toString()?r.window.activeNotebookEditor:await r.window.showNotebookDocument(await r.workspace.openNotebookDocument(e));return await r.commands.executeCommand("notebook.selectKernel",{notebookEditor:o,id:i,extension:c.JVSC_EXTENSION_ID}),o.notebook},createJupyterServerCollection:(e,t)=>{let n,r,i;t=(0,g.stripCodicons)(t);let s,a=!1;const c={dispose:()=>{a=!0,s?.dispose()},get onDidChangeProvider(){return()=>({dispose:p.noop})},extensionId:"",get id(){return e},set label(e){t=(0,g.stripCodicons)(e),t=e,s&&(s.label=e)},get label(){return t},set documentation(e){n=e,s&&(s.documentation=e)},get documentation(){return n},set commandProvider(e){i=e,s&&(s.commandProvider=e)},get commandProvider(){return i},set serverProvider(e){r=e,s&&(s.serverProvider=e)},get serverProvider(){return r}};let l="";return(async()=>{m(b,"createJupyterServerCollection"),l=(await b.determineExtensionFromCallStack()).extensionId;const c=h.get(o.IJupyterServerProviderRegistry);s=c.createJupyterServerCollection(l,e,t),s.label=t,s.documentation=n,s.commandProvider=i,s.serverProvider=r,a&&s.dispose()})().catch((n=>(0,u.traceError)(`Failed to create Jupyter Server Collection for ${e}:${t} & extension ${l}`,n))),c}};return((0,c.isTestExecution)()||v.extensionMode===r.ExtensionMode.Development||v.extensionMode===r.ExtensionMode.Test)&&(w.serviceContainer=h,w.serviceManager=n),w}},81827:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApiAccessService=t.PublishersAllowedWithPrompts=t.TrustedExtensionPublishers=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(15925),l=n(42080),u=n(43138),d=n(25251),h=n(9959),p=n(11642),f=n(58681),g="JUPYTER_API_ACCESS_INFORMATION";t.TrustedExtensionPublishers=new Set([c.JVSC_EXTENSION_ID.split(".")[0],"rchiodo","donjayamanne","SynapseVSCode"]),t.PublishersAllowedWithPrompts=new Set(["rchiodo","nuant"]);let m=class{constructor(e,t,n,r,i){this.globalState=e,this.appShell=t,this.context=n,this.env=r,this.extensions=i,this.extensionAccess=new Map,this.promiseChain=new u.PromiseChain}async getAccessInformation(e){const n=e.extensionId&&e.extensionId!==c.unknownExtensionId&&e.extensionId.split(".")[0]||"";if(this.context.extensionMode===s.ExtensionMode.Test||!n||"insiders"===this.env.channel){if(!t.TrustedExtensionPublishers.has(n)&&!t.PublishersAllowedWithPrompts.has(n)){(0,p.traceWarning)(`Publisher ${n} is allowed to access the Kernel API with a message.`);const t=this.extensions.getExtension(e.extensionId)?.packageJSON?.displayName||"",r=t&&e.extensionId?`${t} (${e.extensionId})`:e.extensionId||n;this.appShell.showErrorMessage(d.DataScience.thanksForUsingJupyterKernelApiPleaseRegisterWithUs(r)).then(f.noop,f.noop)}if(!t.PublishersAllowedWithPrompts.has(n)||!n||this.context.extensionMode===s.ExtensionMode.Test)return{extensionId:e.extensionId,accessAllowed:!0}}if(t.TrustedExtensionPublishers.has(n))return{extensionId:e.extensionId,accessAllowed:!0};if(!t.PublishersAllowedWithPrompts.has(n))return this.appShell.showErrorMessage(`Please contact the Jupyter Extension to get access to the Kernel API. Publisher ${n}`).then(f.noop,f.noop),(0,p.traceError)(`Publisher ${n} is not allowed to access the Kernel API.`),{extensionId:e.extensionId,accessAllowed:!1};const r=this.globalState.get(g),i=r?.find((t=>t.extensionId===e.extensionId));if(i)return(0,h.sendTelemetryEvent)(c.Telemetry.JupyterKernelApiAccess,void 0,{extensionId:e.extensionId,allowed:i.allowed}),{extensionId:e.extensionId,accessAllowed:"yes"===i.allowed};if(this.extensionAccess.get(e.extensionId))return this.extensionAccess.get(e.extensionId);const o=(async()=>{const t=d.DataScience.allowExtensionToUseJupyterKernelApi(`${e.displayName} (${e.extensionId})`,d.Common.bannerLabelYes),n=await this.appShell.showInformationMessage(t,{modal:!0},d.Common.bannerLabelYes,d.Common.bannerLabelNo)===d.Common.bannerLabelYes;return this.promiseChain.chainFinally((async()=>{let t=[...this.globalState.get(g,[])];return t=t.filter((t=>t.extensionId!==e.extensionId)),t.push({allowed:n?"yes":"no",extensionId:e.extensionId}),this.globalState.update(g,t)})).then(f.noop,f.noop),(0,h.sendTelemetryEvent)(c.Telemetry.JupyterKernelApiAccess,void 0,{extensionId:e.extensionId,allowed:n?"yes":"no"}),{extensionId:e.extensionId,accessAllowed:n}})();return this.extensionAccess.set(e.extensionId,o),o}};t.ApiAccessService=m,t.ApiAccessService=m=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IMemento)),i(0,(0,o.named)(l.GLOBAL_MEMENTO)),i(1,(0,o.inject)(a.IApplicationShell)),i(2,(0,o.inject)(l.IExtensionContext)),i(3,(0,o.inject)(a.IApplicationEnvironment)),i(4,(0,o.inject)(l.IExtensions))],m)},49612:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterKernelServiceFactory=void 0;const s=n(26594),a=n(66828),c=n(35908),l=n(94062),u=n(20397),d=n(11642),h=n(42080),p=n(43138),f=n(9959),g=n(81827),m=n(15925),v=n(46799),y=n(88960),b=n(41778),w=n(50867);let S=class{constructor(e,t,n,r,i,o,s,a){this.kernelProvider=e,this.kernelFinder=t,this.thirdPartyKernelProvider=n,this.disposables=r,this.controllerRegistration=i,this.apiAccess=o,this.extensions=s,this.serviceContainer=a,this.chainedApiAccess=new p.PromiseChain,this.extensionApi=new Map}async getService(){const e=await this.extensions.determineExtensionFromCallStack(),t=await this.chainedApiAccess.chainFinally((()=>this.apiAccess.getAccessInformation(e)));if(!t.accessAllowed)return;if(this.extensionApi.get(t.extensionId))return this.extensionApi.get(t.extensionId);const n=new C(t.extensionId,this.kernelProvider,this.kernelFinder,this.thirdPartyKernelProvider,this.disposables,this.controllerRegistration,this.serviceContainer);return this.extensionApi.set(t.extensionId,n),n}};t.JupyterKernelServiceFactory=S,t.JupyterKernelServiceFactory=S=i([(0,s.injectable)(),o(0,(0,s.inject)(l.IKernelProvider)),o(1,(0,s.inject)(l.IKernelFinder)),o(2,(0,s.inject)(l.IThirdPartyKernelProvider)),o(3,(0,s.inject)(h.IDisposableRegistry)),o(4,(0,s.inject)(w.IControllerRegistration)),o(5,(0,s.inject)(g.ApiAccessService)),o(6,(0,s.inject)(h.IExtensions)),o(7,(0,s.inject)(b.IServiceContainer))],S);let C=r=class{get onDidChangeKernelSpecifications(){return(0,f.sendTelemetryEvent)(m.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"onDidChangeKernelSpecifications"}),(0,d.traceVerbose)(`API called from ${this.callingExtensionId}`),this._onDidChangeKernelSpecifications.event}get onDidChangeKernels(){return(0,f.sendTelemetryEvent)(m.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"onDidChangeKernels"}),this._onDidChangeKernels.event}get status(){return this._status}get onDidChangeStatus(){return this._onDidChangeStatus.event}constructor(e,t,n,r,i,o,s){this.callingExtensionId=e,this.kernelProvider=t,this.kernelFinder=n,this.thirdPartyKernelProvider=r,this.disposables=i,this.controllerRegistration=o,this.serviceContainer=s,this._onDidChangeKernelSpecifications=new a.EventEmitter,this._onDidChangeKernels=new a.EventEmitter,this.translatedConnections=new WeakMap,this._onDidChangeStatus=new a.EventEmitter,this._status=this.kernelFinder.status,this.kernelFinder.onDidChangeStatus((()=>{this._status=this.kernelFinder.status,this._onDidChangeStatus.fire()}),this,i),this.kernelProvider.onDidDisposeKernel((e=>{(0,d.traceInfoIfCI)(`Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} disposed`),this._onDidChangeKernels.fire()}),this,i),this.kernelProvider.onDidStartKernel((e=>{(0,d.traceInfoIfCI)(`Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} started`),this._onDidChangeKernels.fire()}),this,i),this.thirdPartyKernelProvider.onDidDisposeKernel((e=>{(0,d.traceInfoIfCI)(`Third party Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} disposed`),this._onDidChangeKernels.fire()}),this,i),this.thirdPartyKernelProvider.onDidStartKernel((e=>{(0,d.traceInfoIfCI)(`Third party Kernel ${e.kernelConnectionMetadata.id}, ${e.kernelConnectionMetadata.interpreter?.uri.toString()} started`),this._onDidChangeKernels.fire()}),this,i),this.controllerRegistration.onDidChange((()=>this._onDidChangeKernelSpecifications.fire()),this,i)}async getKernelSpecifications(){return(0,f.sendTelemetryEvent)(m.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"getKernelSpecifications"}),this.kernelFinder.kernels.map((e=>this.translateKernelConnectionMetadataToExportedType(e)))}getActiveKernels(){(0,f.sendTelemetryEvent)(m.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"getActiveKernels"});const e=[],t=new Set;return this.kernelProvider.kernels.filter((e=>e.startedAtLeastOnce||"connectToLiveRemoteKernel"===e.kernelConnectionMetadata.kind)).forEach((n=>{const r=this.kernelProvider.get(n.notebook);r&&r.session?.kernel?.id&&t.add(r.session.kernel.id),e.push({metadata:this.translateKernelConnectionMetadataToExportedType(n.kernelConnectionMetadata),uri:n.uri,id:n.id})})),this.thirdPartyKernelProvider.kernels.filter((e=>e.startedAtLeastOnce||"connectToLiveRemoteKernel"===e.kernelConnectionMetadata.kind)).forEach((n=>{const r=this.thirdPartyKernelProvider.get(n.uri);r&&r.session?.kernel?.id&&t.add(r.session.kernel.id),e.push({metadata:this.translateKernelConnectionMetadataToExportedType(n.kernelConnectionMetadata),uri:n.uri,id:n.id})})),this.controllerRegistration.registered.forEach((n=>{n.controller.notebookType===m.JupyterNotebookView&&"connectToLiveRemoteKernel"===n.connection.kind&&n.connection.kernelModel.id&&!t.has(n.connection.kernelModel.id)&&e.push({metadata:n.connection,uri:void 0,id:n.id})})),e}getKernel(e){(0,f.sendTelemetryEvent)(m.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"getKernel"});const t=this.thirdPartyKernelProvider.get(e)??this.kernelProvider.get(e);if(t?.session?.kernel){const e=this.wrapKernelConnection(t);return{metadata:this.translateKernelConnectionMetadataToExportedType(t.kernelConnectionMetadata),connection:e}}}async startKernel(e,t){return(0,f.sendTelemetryEvent)(m.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"startKernel"}),this.startOrConnect(e,t)}async connect(e,t){return(0,f.sendTelemetryEvent)(m.Telemetry.JupyterKernelApiUsage,void 0,{extensionId:this.callingExtensionId,pemUsed:"connect"}),this.startOrConnect(e,t)}async startOrConnect(e,t){const n=this.kernelFinder.kernels.find((t=>t.id===e.id));if(!n)throw new Error("Not found");const i=await v.KernelConnector.connectToKernel(n,this.serviceContainer,{resource:t},new y.DisplayOptions(!1),this.disposables,"3rdPartyExtension");let o=r.wrappedKernelConnections.get(i);if(o)return o;if(!i?.session?.kernel)throw new Error("Not found");return this.wrapKernelConnection(i)}wrapKernelConnection(e){if(r.wrappedKernelConnections.get(e))return r.wrappedKernelConnections.get(e);const t={connection:new c.KernelConnectionWrapper(e,this.disposables),kernelSocket:new _(e)};return r.wrappedKernelConnections.set(e,t),t}translateKernelConnectionMetadataToExportedType(e){if(!this.translatedConnections.has(e)){const t=Object.freeze(l.BaseKernelConnectionMetadata.fromJSON(e.toJSON()));this.translatedConnections.set(e,t)}return this.translatedConnections.get(e)}};C.wrappedKernelConnections=new WeakMap,C=r=i([o(1,(0,s.inject)(l.IKernelProvider)),o(2,(0,s.inject)(l.IKernelFinder)),o(3,(0,s.inject)(l.IThirdPartyKernelProvider)),o(4,(0,s.inject)(h.IDisposableRegistry)),o(5,(0,s.inject)(w.IControllerRegistration)),o(6,(0,s.inject)(b.IServiceContainer))],C);class _{get ready(){return!!this.socket}get onDidChange(){return this._onDidSocketChange.event}constructor(e){this.disposables=[],this.receiveHooks=new Set,this.sendHooks=new Set,this._onDidSocketChange=new a.EventEmitter;const t=e.kernelSocket.subscribe((e=>{this.removeHooks(),this.socket=e?.socket,this.addHooks(),this._onDidSocketChange.fire()}));this.disposables.push(new a.Disposable((()=>t.unsubscribe())))}dispose(){(0,u.dispose)(this.disposables)}sendToRealKernel(e,t){this.socket?.sendToRealKernel(e,t)}addReceiveHook(e){this.receiveHooks.add(e)}removeReceiveHook(e){this.receiveHooks.delete(e)}addSendHook(e){this.sendHooks.add(e)}removeSendHook(e){this.sendHooks.delete(e)}removeHooks(){this.socket&&(this.receiveHooks.forEach((e=>this.socket?.removeReceiveHook(e))),this.sendHooks.forEach((e=>this.socket?.removeSendHook(e))))}addHooks(){this.socket&&(this.receiveHooks.forEach((e=>this.socket?.addReceiveHook(e))),this.sendHooks.forEach((e=>this.socket?.addSendHook(e))))}}},35908:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnectionWrapper=void 0;const r=n(58681),i=n(23429);class o extends i.BaseKernelConnectionWrapper{get possibleKernelConnection(){return this.kernel.session?.kernel===this._kernelConnection?this._kernelConnection:(this.stopHandlingKernelMessages(this._kernelConnection),this.kernel.session?.kernel?(this.startHandleKernelMessages(this.kernel.session.kernel),this._kernelConnection):void 0)}constructor(e,t){super(e.session.kernel,t),this.kernel=e;const n=()=>{this.statusChanged.emit(e.status),"dead"!==e.status||e.disposed||e.disposing||this.connectionStatusChanged.emit("disconnected")};e.onDisposed((()=>{n(),this.disposed.emit()}),this,t),e.onStarted(n,this,t),e.onRestarted(n,this,t),e.onStatusChanged(n,this,t),this.startHandleKernelMessages(e.session.kernel)}async shutdown(){"startUsingRemoteKernelSpec"!==this.kernel.kernelConnectionMetadata.kind&&"connectToLiveRemoteKernel"!==this.kernel.kernelConnectionMetadata.kind||await(this.kernel.session?.shutdown()),await this.kernel.dispose()}dispose(){this.kernel.dispose().catch(r.noop)}async interrupt(){if(this.stopHandlingKernelMessages(this.possibleKernelConnection),await this.kernel.interrupt(),!this.kernel.session?.kernel)throw new Error("Restart failed");this.startHandleKernelMessages(this.kernel.session.kernel)}async restart(){if(this.possibleKernelConnection&&this.stopHandlingKernelMessages(this.possibleKernelConnection),await this.kernel.restart(),!this.kernel.session?.kernel)throw new Error("Restart failed");this.startHandleKernelMessages(this.kernel.session.kernel)}startHandleKernelMessages(e){this._kernelConnection=e,super.startHandleKernelMessages(e)}}t.KernelConnectionWrapper=o},89498:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelStartupHooksForJupyterProviders=void 0;const o=n(26594),s=n(94062),a=n(42080),c=n(94433),l=n(11642),u=n(66828),d=n(46875),h=n(15925),p=n(9959),f=n(6491),g=n(72584),m=n(25251);let v=class{constructor(e,t,n,r,i){this.kernelProvider=e,this.disposables=t,this.jupyterUrisRegistration=n,this.extensions=r,this.serverProviders=i}activate(){this.kernelProvider.onDidCreateKernel((e=>this.addOnStartHooks(e)),this,this.disposables)}addOnStartHooks(e){const t=e.kernelConnectionMetadata;(0,s.isRemoteConnection)(t)&&t.serverProviderHandle.extensionId!==h.JVSC_EXTENSION_ID&&"startUsingRemoteKernelSpec"===t.kind&&e.addHook("didStart",(async(n,r)=>{if(!n)return;const i=this.serverProviders.jupyterCollections.find((e=>e.extensionId===t.serverProviderHandle.extensionId&&e.id===t.serverProviderHandle.id));if(!i)return void(0,l.traceError)(`Unable to find Jupyter Server Provider for ${t.id} with provider ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id}`);if(!i.serverProvider?.onStartKernel)return;const o=i.serverProvider.onStartKernel.bind(i.serverProvider),s=this.jupyterUrisRegistration.providers.find((e=>e.extensionId===t.serverProviderHandle.extensionId&&e.id===t.serverProviderHandle.id));if(!s)return void(0,l.traceError)(`Unable to find Provider for ${t.id} with provider ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id}`);const a=s.servers;if(!a)return void(0,l.traceError)(`Unable to find servers for kernel ${t.id} with provider ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id}`);const c=a.find((e=>e.id===t.serverProviderHandle.handle));if(!c)return void(0,l.traceError)(`Unable to find server for kernel ${t.id} with provider ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id} and handle ${t.serverProviderHandle.id}}`);const v=Date.now();try{const t=this.extensions.getExtension(s.extensionId),i=m.DataScience.runningKernelStartupHooksFor(t?.packageJSON?.displayName||s.extensionId);await g.KernelProgressReporter.wrapAndReportProgress(e.resourceUri,i,(()=>(0,f.raceCancellation)(r,o({uri:e.uri,server:c,session:n},r))))}catch(e){if(e instanceof u.CancellationError)return;(0,l.traceWarning)(`Startup hook for ${t.serverProviderHandle.extensionId}$${t.serverProviderHandle.id} failed`,e)}finally{const e=Date.now()-v;(0,p.sendTelemetryEvent)(h.Telemetry.JupyterKernelStartupHook,{duration:e},{extensionId:t.serverProviderHandle.extensionId,providerId:t.serverProviderHandle.id}),e>1e3&&(0,l.traceVerbose)(`Kernel Startup hook for ${(0,d.generateIdFromRemoteProvider)(t.serverProviderHandle)} took ${e}ms`)}}),this,this.disposables)}};t.KernelStartupHooksForJupyterProviders=v,t.KernelStartupHooksForJupyterProviders=v=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IKernelProvider)),i(1,(0,o.inject)(a.IDisposableRegistry)),i(2,(0,o.inject)(c.IJupyterUriProviderRegistration)),i(3,(0,o.inject)(a.IExtensions)),i(4,(0,o.inject)(c.IJupyterServerProviderRegistry))],v)},20159:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExposeUsedAzMLServerHandles=void 0;const o=n(10053),s=n(94433),a=n(26594);let c=class{constructor(e,t){this.commands=e,this.uriStorage=t}activate(){this.commands.registerCommand("jupyter.getUsedAzMLServerHandles",(async()=>{const e=[];return(await this.uriStorage.getAll()).forEach((t=>{t.provider.extensionId.toLowerCase()==="ms-toolsai.vscode-ai".toLowerCase()&&e.push(t.provider)})),e}))}};t.ExposeUsedAzMLServerHandles=c,t.ExposeUsedAzMLServerHandles=c=r([(0,a.injectable)(),i(0,(0,a.inject)(o.ICommandManager)),i(1,(0,a.inject)(s.IJupyterServerUriStorage))],c)},6623:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRegistry=void 0;const o=n(26594),s=n(42080),a=n(10053),c=n(15925),l=n(66828);let u=class{constructor(e,t,n){this.disposables=e,this.workspace=t,this.commandManager=n}activate(){this.registerCommandsIfTrusted()}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommandsIfTrusted(){this.workspace.isTrusted&&this.registerCommand(c.Commands.ContinueEditSessionInCodespace,this.continueEditSessionInCodespace)}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}async continueEditSessionInCodespace(){await l.commands.executeCommand("_workbench.editSessions.actions.continueEditSession.github.codespaces.continueEditSessionInCodespaceWithJupyterServer")}};t.CommandRegistry=u,t.CommandRegistry=u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDisposableRegistry)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(a.ICommandManager))],u)},4188:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveEditorContextService=void 0;const o=n(26594),s=n(94062),a=n(10053),c=n(15925),l=n(29444),u=n(42080),d=n(58681),h=n(15925),p=n(135),f=n(86563),g=n(98729),m=n(50867),v=n(94433);let y=class{constructor(e,t,n,r,i,o,s,a){this.interactiveProvider=e,this.docManager=t,this.commandManager=n,this.vscNotebook=i,this.kernelProvider=o,this.controllers=s,this.jupyterUriProviderRegistration=a,this.disposables=[],this.isPythonFileActive=!1,r.push(this),this.nativeContext=new l.ContextKey(c.EditorContexts.IsNativeActive,this.commandManager),this.canRestartNotebookKernelContext=new l.ContextKey(c.EditorContexts.CanRestartNotebookKernel,this.commandManager),this.canInterruptNotebookKernelContext=new l.ContextKey(c.EditorContexts.CanInterruptNotebookKernel,this.commandManager),this.canRestartInteractiveWindowKernelContext=new l.ContextKey(c.EditorContexts.CanRestartInteractiveWindowKernel,this.commandManager),this.canInterruptInteractiveWindowKernelContext=new l.ContextKey(c.EditorContexts.CanInterruptInteractiveWindowKernel,this.commandManager),this.interactiveContext=new l.ContextKey(c.EditorContexts.IsInteractiveActive,this.commandManager),this.interactiveOrNativeContext=new l.ContextKey(c.EditorContexts.IsInteractiveOrNativeActive,this.commandManager),this.pythonOrNativeContext=new l.ContextKey(c.EditorContexts.IsPythonOrNativeActive,this.commandManager),this.pythonOrInteractiveContext=new l.ContextKey(c.EditorContexts.IsPythonOrInteractiveActive,this.commandManager),this.pythonOrInteractiveOrNativeContext=new l.ContextKey(c.EditorContexts.IsPythonOrInteractiveOrNativeActive,this.commandManager),this.hasNativeNotebookCells=new l.ContextKey(c.EditorContexts.HaveNativeCells,this.commandManager),this.isPythonNotebook=new l.ContextKey(c.EditorContexts.IsPythonNotebook,this.commandManager),this.isJupyterKernelSelected=new l.ContextKey(c.EditorContexts.IsJupyterKernelSelected,this.commandManager),this.hasNativeNotebookOrInteractiveWindowOpen=new l.ContextKey(c.EditorContexts.HasNativeNotebookOrInteractiveWindowOpen,this.commandManager),this.kernelSourceContext=new l.ContextKey(c.EditorContexts.KernelSource,this.commandManager)}dispose(){this.disposables.forEach((e=>e.dispose()))}activate(){this.docManager.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,this.disposables),this.kernelProvider.onKernelStatusChanged(this.onDidKernelStatusChange,this,this.disposables),this.interactiveProvider&&(this.interactiveProvider.onDidChangeActiveInteractiveWindow(this.onDidChangeActiveInteractiveWindow,this,this.disposables),this.interactiveProvider.activeWindow&&this.onDidChangeActiveInteractiveWindow()),this.vscNotebook.activeNotebookEditor&&this.onDidChangeActiveNotebookEditor(this.vscNotebook.activeNotebookEditor),this.vscNotebook.onDidChangeActiveNotebookEditor(this.onDidChangeActiveNotebookEditor,this,this.disposables),this.docManager.activeTextEditor?.document.languageId===c.PYTHON_LANGUAGE&&this.onDidChangeActiveTextEditor(this.docManager.activeTextEditor),this.vscNotebook.onDidChangeNotebookEditorSelection(this.updateNativeNotebookInteractiveWindowOpenContext,this,this.disposables),this.vscNotebook.onDidOpenNotebookDocument(this.updateNativeNotebookInteractiveWindowOpenContext,this,this.disposables),this.vscNotebook.onDidCloseNotebookDocument(this.updateNativeNotebookInteractiveWindowOpenContext,this,this.disposables),this.controllers.onControllerSelectionChanged((()=>this.updateSelectedKernelContext()),this,this.disposables),this.updateSelectedKernelContext()}updateNativeNotebookCellContext(){const e=(this.vscNotebook.activeNotebookEditor?.notebook.cellCount||0)>0;this.hasNativeNotebookCells.set(e).catch(d.noop)}onDidChangeActiveInteractiveWindow(e){this.interactiveContext.set(!!e).catch(d.noop),this.updateNativeNotebookInteractiveWindowOpenContext(),this.updateMergedContexts(),this.updateContextOfActiveInteractiveWindowKernel()}onDidChangeActiveNotebookEditor(e){const t=!!e&&e.notebook.notebookType===h.JupyterNotebookView;this.nativeContext.set(t).catch(d.noop),this.isPythonNotebook.set(!(!e||!t)&&(0,g.isPythonNotebook)((0,f.getNotebookMetadata)(e.notebook))).catch(d.noop),this.updateContextOfActiveNotebookKernel(e),this.updateContextOfActiveInteractiveWindowKernel(),this.updateNativeNotebookInteractiveWindowOpenContext(),this.updateNativeNotebookCellContext(),this.updateMergedContexts()}updateNativeNotebookInteractiveWindowOpenContext(){this.hasNativeNotebookOrInteractiveWindowOpen.set(this.vscNotebook.notebookDocuments.some((e=>e.notebookType===h.JupyterNotebookView||e.notebookType===h.InteractiveWindowView))).catch(d.noop)}updateContextOfActiveNotebookKernel(e){const t=e&&e.notebook.notebookType===h.JupyterNotebookView?this.kernelProvider.get(e.notebook):void 0;if(t){const e="unknown"!==t.status;this.canRestartNotebookKernelContext.set(!!e).catch(d.noop);const n="busy"===t.status;this.canInterruptNotebookKernelContext.set(!!n).catch(d.noop)}else this.canRestartNotebookKernelContext.set(!1).catch(d.noop),this.canInterruptNotebookKernelContext.set(!1).catch(d.noop);this.updateKernelSourceContext(t).catch(d.noop),this.updateSelectedKernelContext()}async updateKernelSourceContext(e){if(!e||!(0,s.isRemoteConnection)(e.kernelConnectionMetadata))return void this.kernelSourceContext.set("").catch(d.noop);const t=e.kernelConnectionMetadata,n=await this.jupyterUriProviderRegistration.getProvider(t.serverProviderHandle.extensionId,t.serverProviderHandle.id).catch(d.noop);n?this.kernelSourceContext.set(n.id).catch(d.noop):this.kernelSourceContext.set("").catch(d.noop)}updateSelectedKernelContext(){const e=this.vscNotebook.activeNotebookEditor?.notebook||this.interactiveProvider?.getActiveOrAssociatedInteractiveWindow()?.notebookDocument;e&&(0,f.isJupyterNotebook)(e)&&this.controllers.getSelected(e)?this.isJupyterKernelSelected.set(!0).catch(d.noop):this.isJupyterKernelSelected.set(!1).catch(d.noop)}updateContextOfActiveInteractiveWindowKernel(){const e=this.interactiveProvider?.getActiveOrAssociatedInteractiveWindow()?.notebookDocument,t=e?this.kernelProvider.get(e):void 0;if(t){const e="unknown"!==t.status;this.canRestartInteractiveWindowKernelContext.set(!!e).catch(d.noop);const n="busy"===t.status;this.canInterruptInteractiveWindowKernelContext.set(!!n).catch(d.noop)}else this.canRestartInteractiveWindowKernelContext.set(!1).catch(d.noop),this.canInterruptInteractiveWindowKernelContext.set(!1).catch(d.noop);this.updateSelectedKernelContext()}onDidKernelStatusChange({kernel:e}){const t=e.notebook;t.notebookType===h.InteractiveWindowView?this.updateContextOfActiveInteractiveWindowKernel():t.notebookType===h.JupyterNotebookView&&t===this.vscNotebook.activeNotebookEditor?.notebook&&this.updateContextOfActiveNotebookKernel(this.vscNotebook.activeNotebookEditor)}onDidChangeActiveTextEditor(e){this.isPythonFileActive=e?.document.languageId===c.PYTHON_LANGUAGE&&!(0,d.isNotebookCell)(e.document.uri),this.updateNativeNotebookCellContext(),this.updateMergedContexts(),this.updateContextOfActiveInteractiveWindowKernel()}updateMergedContexts(){this.interactiveOrNativeContext.set(!0===this.nativeContext.value||!0===this.interactiveContext.value).catch(d.noop),this.pythonOrNativeContext.set(!0===this.nativeContext.value||!0===this.isPythonFileActive).catch(d.noop),this.pythonOrInteractiveContext.set(!0===this.interactiveContext.value||!0===this.isPythonFileActive).catch(d.noop),this.pythonOrInteractiveOrNativeContext.set(!0===this.nativeContext.value||!0===this.interactiveContext.value&&!0===this.isPythonFileActive).catch(d.noop)}};t.ActiveEditorContextService=y,t.ActiveEditorContextService=y=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IInteractiveWindowProvider)),i(0,(0,o.optional)()),i(1,(0,o.inject)(a.IDocumentManager)),i(2,(0,o.inject)(a.ICommandManager)),i(3,(0,o.inject)(u.IDisposableRegistry)),i(4,(0,o.inject)(a.IVSCodeNotebook)),i(5,(0,o.inject)(s.IKernelProvider)),i(6,(0,o.inject)(m.IControllerRegistration)),i(7,(0,o.inject)(v.IJupyterUriProviderRegistration))],y)},42750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClearCacheCommand=void 0;const r=n(66828),i=n(58681),o=n(15925),s=n(11642),a=n(97480);t.addClearCacheCommand=function(e,t){t&&r.commands.registerCommand("dataScience.ClearCache",(async()=>{const t=[];for(const n of e.globalState.keys())t.push(e.globalState.update(n,void 0).then(i.noop,i.noop));for(const n of e.workspaceState.keys())t.push(e.workspaceState.update(n,void 0).then(i.noop,i.noop));t.push(r.commands.executeCommand(o.Commands.ClearSavedJupyterUris).then(i.noop,i.noop)),await Promise.all(t).catch(i.noop),await Promise.all([r.workspace.fs.delete(r.Uri.joinPath(e.globalStorageUri,"lastExecutedRemoteCell.json")).then(i.noop,i.noop),r.workspace.fs.delete(r.Uri.joinPath(e.globalStorageUri,"remoteServersMRUList.json")).then(i.noop,i.noop),r.workspace.fs.delete(r.Uri.joinPath(e.globalStorageUri,a.RemoteKernelSpecCacheFileName)).then(i.noop,i.noop)]),(0,s.traceInfo)("Cache cleared")}))}},22913:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getJupyterOutputChannel=void 0;const s=n(66828),a=o(n(25251)),c=n(11642),l=n(20397);function u(...e){1===e.length?(0,c.traceVerbose)((0,l.splitLines)(e[0]).map(((e,t)=>0===t?e:`    ${e}`)).join("\n")):(0,c.traceVerbose)(...e)}t.getJupyterOutputChannel=function(e){const t=s.window.createOutputChannel(a.DataScience.jupyterServerConsoleOutputChannel,"log");e.push(t);const n={get(e,n){const r=e[n];if("function"==typeof r){if("append"===n)return(...e)=>{t.append(...e),u(...e)};if("appendLine"===n)return(...e)=>{t.appendLine(...e),u(...e)}}return r}};return new Proxy(t,n)}},71263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(42750);t.registerTypes=function(e,t){(0,r.addClearCacheCommand)(e,t)}},29591:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandRegistry=void 0;const o=n(26594),s=n(135),a=n(10053),c=n(83599),l=n(42080),u=n(62440),d=n(72716),h=n(50867),p=n(94062),f=n(97555),g=n(70798);let m=class{constructor(e,t,n,r,i,o,s,a,c,l,u){this.disposables=e,this.workspace=t,this.commandManager=n,this.fileConverter=r,this.applicationShell=i,this.fs=o,this.notebooks=s,this.interactiveProvider=a,this.controllerSelection=c,this.kernelFinder=l,this.jupyterConnection=u,this.exportCommand=new d.ExportCommands(this.commandManager,this.fileConverter,this.applicationShell,this.fs,this.notebooks,this.interactiveProvider,c,new f.PreferredKernelConnectionService(u),l),this.workspace.isTrusted||this.workspace.onDidGrantWorkspaceTrust(this.registerCommandsIfTrusted,this,this.disposables)}activate(){this.registerCommandsIfTrusted()}registerCommandsIfTrusted(){this.workspace.isTrusted&&this.exportCommand?.register()}};t.CommandRegistry=m,t.CommandRegistry=m=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IDisposableRegistry)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(a.ICommandManager)),i(3,(0,o.inject)(u.IFileConverter)),i(4,(0,o.inject)(a.IApplicationShell)),i(5,(0,o.inject)(c.IFileSystem)),i(6,(0,o.inject)(a.IVSCodeNotebook)),i(7,(0,o.inject)(s.IInteractiveWindowProvider)),i(7,(0,o.optional)()),i(8,(0,o.inject)(h.IControllerRegistration)),i(9,(0,o.inject)(p.IKernelFinder)),i(10,(0,o.inject)(g.JupyterConnection))],m)},72716:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportCommands=void 0;const s=n(66828),a=o(n(25251)),c=n(11642),l=n(25251),u=n(58681),d=n(9959),h=n(15925),p=n(62440),f=n(86563),g=n(98729),m=n(38994);t.ExportCommands=class{constructor(e,t,n,r,i,o,s,a,c){this.commandManager=e,this.fileConverter=t,this.applicationShell=n,this.fs=r,this.notebooks=i,this.interactiveProvider=o,this.controllerRegistration=s,this.preferredKernel=a,this.kernelFinder=c,this.disposables=[]}register(){this.registerCommand(h.Commands.ExportAsPythonScript,((e,t)=>this.export(e,p.ExportFormat.python,void 0,t))),this.registerCommand(h.Commands.ExportToHTML,((e,t,n)=>this.export(e,p.ExportFormat.html,t,n))),this.registerCommand(h.Commands.ExportToPDF,((e,t,n)=>this.export(e,p.ExportFormat.pdf,t,n))),this.registerCommand(h.Commands.Export,((e,t,n)=>this.export(e,void 0,t,n))),this.registerCommand(h.Commands.NativeNotebookExport,(e=>this.nativeNotebookExport(e)))}dispose(){this.disposables.forEach((e=>e.dispose()))}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}async nativeNotebookExport(e){const t=(0,u.isUri)(e)?e:e?.notebookEditor?.notebookUri,n=t?this.notebooks.notebookDocuments.find((e=>this.fs.arePathsSame(e.uri,t))):this.notebooks.activeNotebookEditor?.notebook;if(n){let e;const t=this.kernelFinder.registered.find((e=>e.kind===m.ContributedKernelFinderKind.LocalPythonEnvironment)),r=new s.CancellationTokenSource;try{e=t?await this.preferredKernel.findPreferredLocalKernelSpecConnection(n,t,r.token).then((e=>e?.interpreter)):void 0}finally{r.dispose()}const i=this.controllerRegistration.getSelected(n)?.connection.interpreter||e;return this.export(n,void 0,void 0,i)}return this.export(void 0,void 0,void 0,void 0)}async export(e,t,n,r){if(!e){if(!(e=this.notebooks.activeNotebookEditor?.notebook||this.interactiveProvider?.getActiveOrAssociatedInteractiveWindow()?.notebookDocument))return void(0,c.traceInfo)("Export called without a valid exportable document active");r=r||this.controllerRegistration.getSelected(e)?.connection.interpreter,t&&(0,d.sendTelemetryEvent)(h.Telemetry.ExportNotebookAsCommand,void 0,{format:t})}if(t)await this.fileConverter.export(t,e,n,r);else{const t=await this.showExportQuickPickMenu(e,n,r).then((e=>e));void 0!==t?t.handler():(0,d.sendTelemetryEvent)(h.Telemetry.ClickedExportNotebookAsQuickPick)}}getExportQuickPickItems(e,t,n){const r=[];return(n||e.metadata&&(0,g.isPythonNotebook)((0,f.getNotebookMetadata)(e)))&&r.push({label:l.DataScience.exportPythonQuickPickLabel,picked:!0,handler:()=>{(0,d.sendTelemetryEvent)(h.Telemetry.ClickedExportNotebookAsQuickPick,void 0,{format:p.ExportFormat.python}),this.commandManager.executeCommand(h.Commands.ExportAsPythonScript,e,n).then(u.noop,u.noop)}}),r.push({label:l.DataScience.exportHTMLQuickPickLabel,picked:!1,handler:()=>{(0,d.sendTelemetryEvent)(h.Telemetry.ClickedExportNotebookAsQuickPick,void 0,{format:p.ExportFormat.html}),this.commandManager.executeCommand(h.Commands.ExportToHTML,e,t,n).then(u.noop,u.noop)}},{label:l.DataScience.exportPDFQuickPickLabel,picked:!1,handler:()=>{(0,d.sendTelemetryEvent)(h.Telemetry.ClickedExportNotebookAsQuickPick,void 0,{format:p.ExportFormat.pdf}),this.commandManager.executeCommand(h.Commands.ExportToPDF,e,t,n).then(u.noop,u.noop)}}),r}async showExportQuickPickMenu(e,t,n){const r=this.getExportQuickPickItems(e,t,n),i={ignoreFocusOut:!1,matchOnDescription:!0,matchOnDetail:!0,placeHolder:a.DataScience.exportAsQuickPickPlaceholder};return this.applicationShell.showQuickPick(r,i)}}},85303:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImportTracker=t.IImportTracker=void 0;const o=n(26594),s=n(66828),a=n(9959),c=n(10053),l=n(15925),u=n(20397),d=n(42080),h=n(58681),p=n(2161),f=n(96434),g=n(86563),m=n(56297),v=n(9959),y=/^\s*(from (?<fromImport>\w+)(?:\.\w+)* import \w+(?:, \w+)*(?: as \w+)?|import (?<importImport>\w+(?:, \w+)*)(?: as \w+)?)$/,b=(0,l.isTestExecution)();t.IImportTracker=Symbol("IImportTracker");let w=class{get isTelemetryDisabled(){return(0,v.isTelemetryDisabled)(this.workspace)}constructor(e,t,n){this.vscNotebook=e,this.workspace=n,this.pendingChecks=new m.ResourceMap,this.disposables=[],this.sentMatches=new Set,t.push(this),this.vscNotebook.onDidOpenNotebookDocument((e=>this.onOpenedOrClosedNotebookDocument(e,"onOpenCloseOrSave")),this.disposables),this.vscNotebook.onDidCloseNotebookDocument((e=>this.onOpenedOrClosedNotebookDocument(e,"onOpenCloseOrSave")),this.disposables),this.vscNotebook.onDidSaveNotebookDocument((e=>this.onOpenedOrClosedNotebookDocument(e,"onOpenCloseOrSave")),this.disposables),this.vscNotebook.onDidChangeNotebookCellExecutionState((e=>{e.state!=s.NotebookCellExecutionState.Pending||this.isTelemetryDisabled||this.checkNotebookCell(e.cell,"onExecution").catch(h.noop)}),this,t)}dispose(){(0,u.dispose)(this.disposables),this.pendingChecks.clear()}activate(){this.vscNotebook.notebookDocuments.forEach((e=>this.checkNotebookDocument(e,"onOpenCloseOrSave")))}getDocumentLines(e){const t=[];for(let n=0;n<Math.min(1e3,e.lineCount);n++){const r=e.lineAt(n);r.isEmptyOrWhitespace||t.push(r.text.trim())}return t}onOpenedOrClosedNotebookDocument(e,t){(0,g.isJupyterNotebook)(e)&&!this.isTelemetryDisabled&&this.scheduleCheck(e.uri,this.checkNotebookDocument.bind(this,e,t))}scheduleCheck(e,t){const n=this.pendingChecks.get(e);n&&(clearTimeout(n),this.pendingChecks.delete(e)),b?t():this.pendingChecks.set(e,setTimeout(t,5e3))}async checkNotebookDocument(e,t){(0,g.isJupyterNotebook)(e)&&!this.isTelemetryDisabled&&await Promise.all(e.getCells().map((async e=>this.checkNotebookCell(e,t))))}async checkNotebookCell(e,t){if((0,g.isJupyterNotebook)(e.notebook)&&e.kind===s.NotebookCellKind.Code&&e.document.languageId===l.PYTHON_LANGUAGE)try{const n=e.notebook.notebookType===l.JupyterNotebookView?"notebook":"interactive";await this.sendTelemetryForImports(this.getDocumentLines(e.document),n,t)}catch(e){if(!l.isCI)throw e}}lookForImports(e){const t=[];try{for(const n of e){if(!n.includes("import")&&!n.includes("from"))continue;const e=n?y.exec(n):null;null!==e&&void 0!==e.groups&&(void 0!==e.groups.fromImport?t.push(e.groups.fromImport):void 0!==e.groups.importImport&&t.push(...e.groups.importImport.split(",").map((e=>e.trim()))))}}catch(e){(0,h.noop)()}return t}async sendTelemetryForImports(e,t,n){await Promise.all(this.lookForImports(e).map((async e=>{const r=`${e}_${t||""}_${n}`;if(this.sentMatches.has(r))return;this.sentMatches.add(r);const i=await(0,f.getTelemetrySafeHashedString)(e);(0,a.sendTelemetryEvent)(p.EventName.HASHED_PACKAGE_NAME,void 0,{hashedNamev2:i,resourceType:t,when:n})})))}};t.ImportTracker=w,t.ImportTracker=w=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IVSCodeNotebook)),i(1,(0,o.inject)(d.IDisposableRegistry)),i(2,(0,o.inject)(c.IWorkspaceService))],w)},27011:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterExporter=void 0;const o=n(26594),s=n(66828),a=n(49691),c=n(10053),l=n(11642),u=n(83599),d=n(42080),h=n(86563),p=n(25251),f=n(15925),g=n(94433),m=n(13730),v=n(58681),y=n(90541);let b=class{constructor(e,t,n,r,i){this.jupyterServerHelper=e,this.configService=t,this.fileSystem=n,this.applicationShell=r,this.errorHandler=i,this.pruneCells=(e,t)=>e.map((e=>this.pruneCell(e,t))),this.pruneCell=(e,t)=>{const n=(0,h.pruneCell)({...e.data});return n.source=this.pruneSource(e.data.source,t),n},this.pruneSource=(e,t)=>{if(Array.isArray(e)&&e.length>0){if(t.isCell(e[0]))return e.slice(1)}else{const n=e.toString().split("\n").map((e=>`${e}\n`));if(n.length>0&&t.isCell(n[0]))return n.slice(1)}return e},this.extractPythonMainVersion=async()=>{if(!this.jupyterServerHelper)return 3;const e=await this.jupyterServerHelper.getUsableJupyterPython();return e&&e.version?e.version.major:3}}dispose(){}async exportToFile(e,t,n=!0){const r=await this.translateToNotebook(e);try{const e=JSON.stringify(r,void 0,1);if(await this.fileSystem.writeFile(s.Uri.file(t),e),!n)return;const i=p.DataScience.exportOpenQuestion1;this.applicationShell.showInformationMessage(p.DataScience.exportDialogComplete(t),i).then((async e=>{try{e===i&&await(0,m.openAndShowNotebook)(s.Uri.file(t))}catch(e){await this.errorHandler.handleError(e)}}),v.noop)}catch(e){(0,l.traceError)("Error in exporting notebook file"),this.applicationShell.showInformationMessage(p.DataScience.exportDialogFailed(e)).then(v.noop,v.noop)}}async translateToNotebook(e,t){const n=await this.extractPythonMainVersion(),r={language_info:{codemirror_mode:{name:"ipython",version:n},file_extension:".py",mimetype:"text/x-python",name:"python",nbconvert_exporter:"python",pygments_lexer:`ipython${n}`,version:n},kernelspec:t},i=new a.CellMatcher(this.configService.getSettings());return{cells:this.pruneCells(e,i),nbformat:f.defaultNotebookFormat.major,nbformat_minor:f.defaultNotebookFormat.minor,metadata:r}}};t.JupyterExporter=b,t.JupyterExporter=b=r([(0,o.injectable)(),i(0,(0,o.inject)(g.IJupyterServerHelper)),i(0,(0,o.optional)()),i(1,(0,o.inject)(d.IConfigurationService)),i(2,(0,o.inject)(u.IFileSystem)),i(3,(0,o.inject)(c.IApplicationShell)),i(4,(0,o.inject)(y.IDataScienceErrorHandler))],b)},73584:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.mapJupyterKind=void 0,function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.Snippet=25]="Snippet"}(n||(n={})),t.mapJupyterKind=new Map([["method",n.Method],["function",n.Function],["constructor",n.Constructor],["field",n.Field],["variable",n.Variable],["class",n.Class],["struct",n.Struct],["interface",n.Interface],["module",n.Module],["property",n.Property],["event",n.Event],["operator",n.Operator],["unit",n.Unit],["value",n.Value],["constant",n.Constant],["enum",n.Enum],["enumMember",n.EnumMember],["keyword",n.Keyword],["text",n.Text],["color",n.Color],["file",n.File],["reference",n.Reference],["customcolor",n.Customcolor],["folder",n.Folder],["typeParameter",n.TypeParameter],["snippet",n.Snippet],["<unknown>",n.Field]])},43793:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookCellBangInstallDiagnosticsProvider=void 0;const o=n(26594),s=n(66828),a=n(10053),c=n(15925),l=n(20397),u=n(42080),d=n(25251),h=n(15925),p=n(86563),f=d.DataScience.percentPipCondaInstallInsteadOfBang("pip"),g=d.DataScience.percentPipCondaInstallInsteadOfBang("conda"),m=d.DataScience.matplotlibWidgetInsteadOfOther,v="Jupyter";let y=class{constructor(e,t,n){this.notebooks=e,this.documents=n,this.disposables=[],this.notebooksProcessed=new WeakMap,this.cellsToProcess=new Set,this.problems=s.languages.createDiagnosticCollection(v),this.disposables.push(this.problems),t.push(this)}dispose(){(0,l.dispose)(this.disposables),this.problems.dispose()}activate(){this.disposables.push(s.languages.registerCodeActionsProvider(c.PYTHON_LANGUAGE,this)),this.disposables.push(s.languages.registerHoverProvider(c.PYTHON_LANGUAGE,this)),this.documents.onDidChangeTextDocument((e=>{const t=(0,p.getAssociatedJupyterNotebook)(e.document);if(!t)return;const n=t.getCells().find((t=>t.document===e.document));n&&this.analyzeNotebookCell(n)}),this,this.disposables),this.notebooks.onDidCloseNotebookDocument((e=>{this.problems.delete(e.uri);const t=this.notebooksProcessed.get(e);this.notebooksProcessed.delete(e),t&&t.forEach(((e,t)=>this.problems.delete(s.Uri.parse(t))))}),this,this.disposables),this.notebooks.onDidOpenNotebookDocument((e=>this.analyzeNotebook(e)),this,this.disposables),s.workspace.onDidChangeNotebookDocument((e=>{const t=this.notebooksProcessed.get(e.notebook);e.contentChanges.forEach((e=>{e.removedCells.forEach((e=>{t?.delete(e.document.uri.toString())})),e.addedCells.forEach((e=>this.queueCellForProcessing(e)))})),e.cellChanges.forEach((e=>this.queueCellForProcessing(e.cell)))}),this,this.disposables),this.notebooks.notebookDocuments.map((e=>this.analyzeNotebook(e)))}provideHover(e,t,n){const r=(0,p.getAssociatedJupyterNotebook)(e);if(r?.notebookType!==h.JupyterNotebookView)return;const i=this.problems.get(e.uri);if(!i)return;const o=i.find((e=>e.message===f||e.message===g));if(!o||!o.range.contains(t))return;const a=o.message===f?"pip":"conda";return new s.Hover(d.DataScience.pipCondaInstallHoverWarning(a,"https://aka.ms/jupyterCellMagicBangInstall"),o.range)}provideCodeActions(e,t,n,r){if(!(0,p.getAssociatedJupyterNotebook)(e))return[];const i=[];return n.diagnostics.forEach((t=>{switch(t.message){case f:i.push(this.createReplaceCodeAction(e,"pip",t));break;case g:i.push(this.createReplaceCodeAction(e,"conda",t));break;case m:i.push(this.createGotoWikiAction(e,s.Uri.parse("https://aka.ms/vscodejupytermatplotlibwidget"),t))}})),i}createReplaceCodeAction(e,t,n){const r=new s.CodeAction(d.DataScience.replacePipCondaInstallCodeAction(t),s.CodeActionKind.QuickFix);r.isPreferred=!0,r.diagnostics=[n];const i=new s.WorkspaceEdit;return i.replace(e.uri,new s.Range(n.range.start,new s.Position(n.range.start.line,n.range.start.character+1)),"%"),r.edit=i,r}createGotoWikiAction(e,t,n){const r=new s.CodeAction(d.DataScience.matplotlibWidgetCodeActionTitle,s.CodeActionKind.QuickFix);return r.isPreferred=!0,r.diagnostics=[n],r.command={title:d.DataScience.matplotlibWidgetCodeActionTitle,command:"vscode.open",arguments:[t]},r}analyzeNotebook(e){e.notebookType===h.JupyterNotebookView&&e.getCells().forEach(((e,t)=>t<100?this.queueCellForProcessing(e):void 0))}queueCellForProcessing(e){this.cellsToProcess.add(e),this.analyzeNotebookCells()}analyzeNotebookCells(){if(0===this.cellsToProcess.size)return;const e=this.cellsToProcess.values().next().value;this.cellsToProcess.delete(e),this.analyzeNotebookCell(e),setTimeout((()=>this.analyzeNotebookCells()),0)}analyzeNotebookCell(e){if(e.kind!==s.NotebookCellKind.Code||e.document.languageId!==c.PYTHON_LANGUAGE||e.notebook.isClosed||e.document.isClosed)return;if(this.notebooksProcessed.get(e.notebook)?.get(e.document.uri.toString())===e.document.version)return;this.problems.delete(e.document.uri);const t=this.notebooksProcessed.get(e.notebook)||new Map;t.set(e.document.uri.toString(),e.document.version),this.notebooksProcessed.set(e.notebook,t);for(let t=0;t<Math.min(e.document.lineCount,50);t++){const n=e.document.lineAt(t),r=n.text;if(r.trim().startsWith("!pip install")){const t=r.indexOf("!"),i=r.indexOf("l"),o=new s.Range(n.lineNumber,t,n.lineNumber,i+2);this.problems.set(e.document.uri,[{message:f,range:o,severity:s.DiagnosticSeverity.Error,source:v}])}else if(r.trim().startsWith("!conda install")){const t=r.indexOf("!"),i=r.indexOf("l"),o=new s.Range(n.lineNumber,t,n.lineNumber,i+2);this.problems.set(e.document.uri,[{message:g,range:o,severity:s.DiagnosticSeverity.Error,source:v}])}else if(r.trim().startsWith("%matplotlib")&&!r.trim().endsWith("widget")&&!r.trim().endsWith("inline")){const t=r.indexOf("%"),i=r.length,o=new s.Range(n.lineNumber,t,n.lineNumber,i);this.problems.set(e.document.uri,[{message:m,range:o,severity:s.DiagnosticSeverity.Warning,source:v}])}}}};t.NotebookCellBangInstallDiagnosticsProvider=y,t.NotebookCellBangInstallDiagnosticsProvider=y=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IVSCodeNotebook)),i(1,(0,o.inject)(u.IDisposableRegistry)),i(2,(0,o.inject)(a.IDocumentManager))],y)},97800:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.filterCompletions=t.generateSortString=t.PythonKernelCompletionProvider=t.setIntellisenseTimeout=void 0;const o=n(26594),s=n(66828),a=n(6491),c=n(11642),l=n(35412),u=n(42080),d=n(58681),h=n(11386),p=n(94062),f=n(85249),g=n(73584),m=n(15925),v=n(86563),y=n(43138);let b=m.Settings.IntellisenseTimeout;t.setIntellisenseTimeout=function(e){b=e};let w=class{constructor(e,t,n,r,i){this.kernelProvider=e,this.notebookEditorProvider=t,this.notebookCompletionProvider=n,this.allowStringFilter=!1;const o=r.getSettings().pythonCompletionTriggerCharacters;this.allowStringFilter=null!=o&&(o.includes("'")||o.includes('"')),s.workspace.onDidChangeConfiguration((e=>{if(e.affectsConfiguration("jupyter.pythonCompletionTriggerCharacters")){const e=r.getSettings().pythonCompletionTriggerCharacters;this.allowStringFilter=null!=e&&(e.includes("'")||e.includes('"'))}}),this,i)}async provideCompletionItems(e,t,n,r){if(!(0,d.isNotebookCell)(e))return[];const i=this.notebookEditorProvider.findAssociatedNotebookDocument(e.uri);if(!i)return(0,c.traceError)(`Notebook not found for Cell ${(0,l.getDisplayPath)(e.uri)}`),[];const o=this.kernelProvider.get(i);if(!o||!o.session||!o.session.kernel)return(0,c.traceVerbose)(`Live Notebook not available for ${(0,l.getDisplayPath)(i.uri)}`),[];(0,c.traceInfoIfCI)(`Notebook completion request for ${e.getText()}, ${e.offsetAt(t)}`);const[a,u]=await Promise.all([(0,y.raceTimeout)(b,this.getJupyterCompletion(o.session,e.getText(),e.offsetAt(t),n)),(0,y.raceTimeout)(b,this.getPylanceCompletions(e,t,r,n))]);if(!a)return(0,c.traceInfoIfCI)("Notebook completions not found."),[];(0,c.traceInfoIfCI)(`Completions found, filtering the list: ${JSON.stringify(a)}.`);let h=[];const p=a.metadata?a.metadata._jupyter_types_experimental:[];return h=Array.isArray(p)&&p.length>=a.matches.length&&p.every((e=>"number"==typeof e.start&&"number"==typeof e.end&&"string"==typeof e.text))?p.map(((t,n)=>({label:t.text,itemText:t.text,range:new s.Range(e.positionAt(t.start),e.positionAt(t.end)),kind:t.type?g.mapJupyterKind.get(t.type):s.CompletionItemKind.Field,sortText:S(n)}))):a.matches.map(((e,t)=>({label:e,itemText:e,sortText:S(t)}))),C(r.triggerCharacter,this.allowStringFilter,h,u,e,t)}async getJupyterCompletion(e,t,n,r){const i=new h.StopWatch;if(!e.kernel)return{matches:[],cursor:{start:0,end:0},metadata:{}};if("busy"===e.status&&!(0,m.isTestExecution)())return{matches:[],cursor:{start:0,end:0},metadata:{}};const o=await(0,a.raceCancellation)(r,e.kernel.requestComplete({code:t,cursor_pos:n}));return(0,c.traceInfoIfCI)(`Got jupyter notebook completions. Is cancel? ${r?.isCancellationRequested}: ${o?JSON.stringify(o):"empty"}`),(0,c.traceVerbose)(`Jupyter completion time: ${i.elapsedTime}`),o&&o.content&&"matches"in o.content?{matches:o.content.matches,cursor:{start:o.content.cursor_start,end:o.content.cursor_end},metadata:o.content.metadata}:{matches:[],cursor:{start:0,end:0},metadata:{}}}async getPylanceCompletions(e,t,n,r){const i=(0,v.getAssociatedJupyterNotebook)(e);if(i&&this.notebookCompletionProvider)return this.notebookCompletionProvider.getCompletions(i,e,t,n,r)}};function S(e){return e>=300?"ZZZZZZZ":e<=25?`A${String.fromCharCode(65+e)}`:`${String.fromCharCode(65+Math.ceil(e/25))}${String.fromCharCode(65+e%25)}`}function C(e,t,n,r,i,o){let a=n;const l=0===o.character?void 0:new s.Range(o.line,o.character-1,o.line,o.character),u="."===(l?i.getText(l):void 0),d=i.getWordRangeAtPosition(u||"."===e?new s.Position(o.line,o.character-1):o),h=d&&l?d.union(l):void 0,p=i.lineAt(o.line).text,f=h?i.getText(h):p,g=f.endsWith(".")||u,m=t&&("'"==e||'"'==e||function(e,t){const n=e.indexOf('"'),r=e.indexOf("'"),i=e.lastIndexOf('"'),o=e.lastIndexOf("'"),s=n>=0?n:r,a=i>=0?i:o;return s>=0&&t.character>s&&t.character<=a}(p,o));if((0,c.traceInfoIfCI)(`Jupyter completions filtering applied: ${m} on ${p}`),a=a.map(((e,t)=>{if(e.itemText.startsWith("%")||e.itemText.startsWith("!"))return{...e,sortText:`ZZZ${e.sortText}`};if(m)return e;const n=f?e.itemText.indexOf(f):-1;let r,i,o;if(f&&g&&e.itemText.includes(f)){r=e.itemText.substring(e.itemText.indexOf(f)+(g?f.length:0)),i=e.itemText.substring(e.itemText.indexOf(f)+f.length);const t=("string"==typeof e.label?e.label.length:e.label.label.length)-i.length;o=e.range&&"start"in e.range?new s.Range(new s.Position(e.range.start.line,e.range.start.character+t),e.range.end):e.range}if(!i&&n>0){r=e.itemText.substring(e.itemText.indexOf(f)+(g?f.length:0)),i=e.itemText.substring(e.itemText.indexOf(f)+f.length);const t=("string"==typeof e.label?e.label.length:e.label.label.length)-i.length;o=e.range&&"start"in e.range?new s.Range(new s.Position(e.range.start.line,e.range.start.character+t),e.range.end):e.range}return r&&i&&o&&(e.label=r,e.itemText=i,e.insertText=i,e.filterText=g?`.${i}`:i,e.range=o,e.sortText=S(t)),e})),a=m?a.map((e=>e.itemText.endsWith("/")?{...e,command:{command:"editor.action.triggerSuggest",title:""}}:(e.itemText.includes(" ")&&(e.itemText=e.itemText.replace(/\\ /g," "),"string"==typeof e.label?e.label=e.label.replace(/\\ /g," "):e.label.label=e.label.label.replace(/\\ /g," ")),e))):a.filter((e=>!e.itemText.includes(".")&&!e.itemText.endsWith("/"))),r){const e=new Set(r.map((e=>e.label.toString())));a=a.filter((t=>!e.has(t.itemText)))}return(0,c.traceInfoIfCI)(`Jupyter completions for ${f} at pos ${o.line}:${o.character} with trigger: ${e}\n   ${n.map((e=>e.label)).join(",")}`),(0,c.traceInfoIfCI)(`Jupyter results for ${f} at pos ${o.line}:${o.character} with trigger: ${e}\n   ${a.map((e=>e.label)).join(",")}`),a}t.PythonKernelCompletionProvider=w,t.PythonKernelCompletionProvider=w=r([(0,o.injectable)(),i(0,(0,o.inject)(p.IKernelProvider)),i(1,(0,o.inject)(f.INotebookEditorProvider)),i(2,(0,o.inject)(f.INotebookCompletionProvider)),i(2,(0,o.optional)()),i(3,(0,o.inject)(u.IConfigurationService)),i(4,(0,o.inject)(u.IDisposableRegistry))],w),t.generateSortString=S,t.filterCompletions=C},73974:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonKernelCompletionProviderRegistration=void 0;const o=n(26594),s=n(66828),a=n(15925),c=n(42080),l=n(97800),u=[".","%"];let d=class{constructor(e,t,n){this.disposables=e,this.config=t,this.completionProvider=n}activate(){let e=this.config.getSettings().pythonCompletionTriggerCharacters?.split("")||u;(e.includes('"')||e.includes("'"))&&(e=[...e,"/"]),this.registerCompletionItemProvider(e)}registerCompletionItemProvider(e){const t=s.languages.registerCompletionItemProvider(a.NOTEBOOK_SELECTOR,this.completionProvider,...e);this.disposables.push(t)}};t.PythonKernelCompletionProviderRegistration=d,t.PythonKernelCompletionProviderRegistration=d=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(c.IConfigurationService)),i(2,(0,o.inject)(l.PythonKernelCompletionProvider))],d)},65108:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52064),i=n(43793),o=n(97800),s=n(73974);t.registerTypes=function(e,t){e.addSingleton(r.IExtensionSyncActivationService,i.NotebookCellBangInstallDiagnosticsProvider),e.addSingleton(o.PythonKernelCompletionProvider,o.PythonKernelCompletionProvider),e.addSingleton(r.IExtensionSyncActivationService,s.PythonKernelCompletionProviderRegistration)}},66646:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExtensionRestartNotification=void 0;const c=n(26594),l=s(n(25251)),u=n(77886),d=n(10053),h=n(42080),p=n(58681),f=n(94062);let g=class{constructor(e,t,n,r){this.extensionChecker=e,this.disposables=t,this.applicationShell=n,this.kernelProvider=r}activate(){this.extensionChecker.onPythonExtensionInstallationStatusChanged(this.onPythonExtensionInstallationStatusChanged,this,this.disposables)}async onPythonExtensionInstallationStatusChanged(e){"installed"===e&&this.anyKernelsAreActive()&&this.applicationShell.showInformationMessage(l.DataScience.pythonExtensionInstalled,l.Common.ok).then(p.noop,p.noop)}anyKernelsAreActive(){return this.kernelProvider.kernels.length>0}};t.PythonExtensionRestartNotification=g,t.PythonExtensionRestartNotification=g=o([(0,c.injectable)(),a(0,(0,c.inject)(u.IPythonExtensionChecker)),a(1,(0,c.inject)(h.IDisposableRegistry)),a(2,(0,c.inject)(d.IApplicationShell)),a(3,(0,c.inject)(f.IKernelProvider))],g)},63521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52064),i=n(29591),o=n(4188),s=n(73381),a=n(94433),c=n(27011),l=n(49612),u=n(34383),d=n(81827),h=n(46498),p=n(71263),f=n(65108),g=n(66646),m=n(85303),v=n(89072),y=n(49587),b=n(6623),w=n(4494),S=n(89498),C=n(20159);t.registerTypes=function(e,t,n){t.addSingleton(r.IExtensionSyncActivationService,s.GlobalActivation),t.addSingleton(r.IExtensionSyncActivationService,o.ActiveEditorContextService),t.addSingleton(r.IExtensionSyncActivationService,i.CommandRegistry),t.addSingleton(r.IExtensionSyncActivationService,m.ImportTracker),t.addSingleton(r.IExtensionSyncActivationService,w.EagerlyActivateJupyterUriProviders),t.addSingleton(r.IExtensionSyncActivationService,y.JupyterServerSelectorCommand),t.add(r.IExtensionActivationManager,h.ExtensionActivationManager),t.add(a.INotebookExporter,c.JupyterExporter),t.addSingleton(u.IExportedKernelServiceFactory,l.JupyterKernelServiceFactory),t.addSingleton(d.ApiAccessService,d.ApiAccessService),t.addSingleton(r.IExtensionSyncActivationService,g.PythonExtensionRestartNotification),(0,f.registerTypes)(t,n),(0,p.registerTypes)(e,n),t.addSingleton(r.IExtensionSyncActivationService,v.UserJupyterServerUrlProvider),t.addSingleton(r.IExtensionSyncActivationService,b.CommandRegistry),t.addSingleton(r.IExtensionSyncActivationService,S.KernelStartupHooksForJupyterProviders),t.addSingleton(r.IExtensionSyncActivationService,C.ExposeUsedAzMLServerHandles)}},48901:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterHubPasswordConnect=void 0;const r=n(66828),i=n(25251),o=n(58681),s=n(11642),a=n(9959),c=n(20397);function l(e){let t=e;return"/"!==t[t.length-1]&&(t=`${t}/`),t}t.JupyterHubPasswordConnect=class{constructor(e,t,n,r,i,o,s,a){this.appShell=e,this.multiStepFactory=t,this.asyncDisposableRegistry=n,this.configService=r,this.agentCreator=i,this.requestCreator=o,this.serverUriStorage=s,this.disposables=a,this.savedConnectInfo=new Map,this.serverUriStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables)}async getPasswordConnectionInfo(e){if(!e.url||e.url.length<1)throw new Error("Invalid URL");if(!await this.isJupyterHub(e.url))throw new Error("Not a Jupyter Hub Url");const t=l(e.url),n=e.disposables||[],r=!Array.isArray(e.disposables);let i=this.savedConnectInfo.get(e.handle);return i||(i=this.getJupyterHubConnectionInfo(t,e.validationErrorMessage).then((n=>((!n||n.requiresPassword&&1===Object.keys(n).length)&&((0,s.traceWarning)(`Password for ${t} was invalid.`),this.savedConnectInfo.delete(e.handle)),n))),i.catch((()=>this.savedConnectInfo.delete(e.handle))),i.finally((()=>{r&&(0,c.dispose)(n)})).catch(o.noop),this.savedConnectInfo.set(e.handle,i)),i}async isJupyterHub(e){try{return!!e.toLowerCase().includes("/user/")||200===(await this.makeRequest(new URL("hub/api",l(e)).toString(),{method:"get",redirect:"manual",headers:{Connection:"keep-alive"}})).status}catch(e){return(0,s.traceVerbose)(`Error in detecting whether url is isJupyterHub: ${e}`),!1}}async getJupyterHubConnectionInfo(e,t){try{const n=await this.getUserNameAndPassword(t);if(n.username||n.password){let t=await this.getJupyterHubConnectionInfoFromLogin(e,n.username,n.password);if(t){const e=0===Object.keys(t||{}).length,n=e?"emptyResponseFromLogin":"gotResponseFromLogin";(0,a.sendTelemetryEvent)(a.Telemetry.CheckPasswordJupyterHub,void 0,{failed:e,info:n})}else{(0,a.sendTelemetryEvent)(a.Telemetry.CheckPasswordJupyterHub,void 0,{failed:!0,info:"emptyResponseFromLogin"}),t=await this.getJupyterHubConnectionInfoFromApi(e,n.username,n.password);const r=0===Object.keys(t||{}).length,i=r?"emptyResponseFromApi":"gotResponseFromApi";(0,a.sendTelemetryEvent)(a.Telemetry.CheckPasswordJupyterHub,void 0,{failed:r,info:i})}return t}return(0,a.sendTelemetryEvent)(a.Telemetry.CheckPasswordJupyterHub,void 0,{failed:!1,info:"passwordNotRequired"}),{requiresPassword:!1}}catch(e){throw(0,a.sendTelemetryEvent)(a.Telemetry.CheckPasswordJupyterHub,void 0,{failed:!0,info:"failure"}),e}}async getJupyterHubConnectionInfoFromLogin(e,t,n){const r=new URL(e),i=`${r.protocol}//${r.host}`,s=new URLSearchParams;s.append("username",t||""),s.append("password",n||"");let a=await this.makeRequest(`${i}/hub/login?next=`,{method:"POST",headers:{Connection:"keep-alive",Referer:`${i}/hub/login`,"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},body:s.toString(),redirect:"manual"});if(a&&302===a.status){const e=[...this.getCookies(a).entries()].reduce(((e,t)=>`${e};${t[0]}=${t[1]}`),"");if(a=await this.makeRequest(`${i}/hub/api/users/${t}/tokens`,{method:"POST",headers:{Connection:"keep-alive",Cookie:e,Referer:`${i}/hub/login`}}),a.ok&&200===a.status){const n=await a.json();if(n&&n.token&&n.id)return await this.makeRequest(`${i}/hub/api/users/${t}/server`,{method:"POST",headers:{Connection:"keep-alive",Cookie:e,Referer:`${i}/hub/login`}}),this.asyncDisposableRegistry.push({dispose:async()=>{this.makeRequest(`${i}/hub/api/users/${t}/tokens/${n.id}`,{method:"DELETE",headers:{Connection:"keep-alive",Cookie:e,Referer:`${i}/hub/login`}}).catch(o.noop)}}),{requestHeaders:{},remappedBaseUrl:`${i}/user/${t}`,remappedToken:n.token,requiresPassword:!0}}}}async getJupyterHubConnectionInfoFromApi(e,t,n){const r=new URL(e),i=`${r.protocol}//${r.host}`,o=await this.makeRequest(`${i}/hub/api/authorizations/token`,{method:"POST",headers:{Connection:"keep-alive","content-type":"application/json;charset=UTF-8"},body:`{ "username": "${t||""}", "password": "${n||""}"  }`,redirect:"manual"});if(o.ok&&200===o.status){const e=await o.json();if(e&&e.user&&e.user.server&&e.token)return{requestHeaders:{},remappedBaseUrl:`${i}${e.user.server}`,remappedToken:e.token,requiresPassword:!0}}return{requiresPassword:!1}}addAllowUnauthorized(e,t,n){if(e.startsWith("https")&&t&&this.agentCreator){const e=this.agentCreator.createHttpRequestAgent();return{...n,agent:e}}return n}async getUserNameAndPassword(e){const t=this.multiStepFactory.create(),n={username:"",password:"",validationMessage:e};return await t.run(this.getUserNameMultiStep.bind(this),n),n}async getUserNameMultiStep(e,t){if(t.username=await e.showInputBox({title:i.DataScience.jupyterSelectUserAndPasswordTitle,prompt:i.DataScience.jupyterSelectUserPrompt,validate:this.validateUserNameOrPassword,validationMessage:t.validationMessage,value:""}),t.username)return this.getPasswordMultiStep.bind(this)}async validateUserNameOrPassword(e){}async getPasswordMultiStep(e,t){t.password=await e.showInputBox({title:i.DataScience.jupyterSelectUserAndPasswordTitle,prompt:i.DataScience.jupyterSelectPasswordPrompt,validate:this.validateUserNameOrPassword,value:"",password:!0})}async makeRequest(e,t){const n=this.configService.getSettings(void 0).allowUnauthorizedRemoteConnection;try{return await this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!!n,t))}catch(n){if(n.message.indexOf("reason: self signed certificate")>=0){const o=i.DataScience.jupyterSelfCertEnable,s=i.DataScience.jupyterSelfCertClose,c=await this.appShell.showErrorMessage(i.DataScience.jupyterSelfCertFail(n.message),{modal:!0},o,s);if(c===o)return(0,a.sendTelemetryEvent)(a.Telemetry.SelfCertsMessageEnabled),await this.configService.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,r.ConfigurationTarget.Workspace),this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!0,t));c===s&&(0,a.sendTelemetryEvent)(a.Telemetry.SelfCertsMessageClose)}throw n}}getCookies(e){const t=new Map,n=(e.headers.raw?e.headers.raw():e.headers)["set-cookie"];return n&&n.forEach((e=>{const n=e.substring(0,e.indexOf("=")),r=e.substring(e.indexOf("=")+1);t.set(n,r)})),t}onDidRemoveServers(e){e.forEach((e=>{e.id.startsWith("_builtin")&&this.savedConnectInfo.delete(e.handle)}))}}},55188:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTrailingSlash=t.JupyterPasswordConnect=void 0;const r=n(66828),i=n(25251),o=n(58681),s=n(19450),a=n(11642),c=n(9959),l=n(20397);function u(e){let t=e;return"/"!==t[t.length-1]&&(t=`${t}/`),t}t.JupyterPasswordConnect=class{constructor(e,t,n,r,i,o){this.appShell=e,this.configService=t,this.agentCreator=n,this.requestCreator=r,this.serverUriStorage=i,this.disposables=o,this.savedConnectInfo=new Map,this.serverUriStorage.onDidRemove(this.onDidRemoveServers,this,this.disposables)}getPasswordConnectionInfo(e){if(!e.url||e.url.length<1)throw new Error("Invalid URL");const t=u(e.url),n=e.disposables||[],r=!Array.isArray(e.disposables);let i=this.savedConnectInfo.get(e.handle);return i||(i=this.getJupyterConnectionInfo({url:t,isTokenEmpty:e.isTokenEmpty,disposables:n,validationErrorMessage:e.validationErrorMessage}).then((n=>((!n||n.requiresPassword&&1===Object.keys(n).length)&&((0,a.traceWarning)(`Password for ${t} was invalid.`),this.savedConnectInfo.delete(e.handle)),n))),i.catch((()=>this.savedConnectInfo.delete(e.handle))),i.finally((()=>{r&&(0,l.dispose)(n)})).catch(o.noop),this.savedConnectInfo.set(e.handle,i)),i}async getJupyterConnectionInfo(e){let t,n,o,a;const l=await this.needPassword(e.url);if(!l&&!e.isTokenEmpty)return{requiresPassword:l};if(l&&e.isTokenEmpty){const t=this.appShell.createInputBox();e.disposables.push(t),t.title=i.DataScience.jupyterSelectPasswordTitle,t.placeholder=i.DataScience.jupyterSelectPasswordPrompt,t.ignoreFocusOut=!0,t.password=!0,t.validationMessage=e.validationErrorMessage||"",t.show(),t.buttons=[r.QuickInputButtons.Back],a=await new Promise(((n,i)=>{t.onDidTriggerButton((e=>{e===r.QuickInputButtons.Back&&i(s.InputFlowAction.back)}),this,e.disposables),t.onDidChangeValue((()=>t.validationMessage=""),this,e.disposables),t.onDidAccept((()=>n(t.value)),this,e.disposables),t.onDidHide((()=>i(s.InputFlowAction.cancel)),this,e.disposables)}))}if(void 0===typeof a&&!a&&e.isTokenEmpty)throw new r.CancellationError;if(!a&&!e.isTokenEmpty)return{requiresPassword:l};if(t=await this.getXSRFToken(e.url,""),t){const r=await this.getSessionCookie(e.url,t,a||"");n=r.sessionCookieName,o=r.sessionCookieValue}else n="authservice_session",o=a,t=await this.getXSRFToken(e.url,`${n}=${o}`);return t&&n&&(o||e.isTokenEmpty)?((0,c.sendTelemetryEvent)(c.Telemetry.GetPasswordSuccess),{requestHeaders:{Cookie:`_xsrf=${t}; ${n}=${o||""}`,"X-XSRFToken":t},requiresPassword:l}):((0,c.sendTelemetryEvent)(c.Telemetry.GetPasswordFailure),{requiresPassword:l})}addAllowUnauthorized(e,t,n){if(e.startsWith("https")&&t&&this.agentCreator){const e=this.agentCreator.createHttpRequestAgent();return{...n,agent:e}}return n}async getXSRFToken(e,t){let n,r,i=new URL("login?",u(e)).toString();""!=t?(i=new URL("tree",u(e)).toString(),r={Connection:"keep-alive",Cookie:t}):r={Connection:"keep-alive"};const o=await this.makeRequest(i,{method:"get",redirect:"manual",headers:r});if(void 0!==o&&o.ok){const e=this.getCookies(o);e.has("_xsrf")&&(n=e.get("_xsrf")?.split(";")[0])}return n}async needPassword(e){return 200!==(await this.makeRequest(new URL("tree?",u(e)).toString(),{method:"get",redirect:"manual",headers:{Connection:"keep-alive"}})).status}async makeRequest(e,t){const n=this.configService.getSettings(void 0).allowUnauthorizedRemoteConnection;try{return await this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!!n,t))}catch(n){if(n.message.indexOf("reason: self signed certificate")>=0){const o=i.DataScience.jupyterSelfCertEnable,s=i.DataScience.jupyterSelfCertClose,a=await this.appShell.showErrorMessage(i.DataScience.jupyterSelfCertFail(n.message),{modal:!0},o,s);if(a===o)return(0,c.sendTelemetryEvent)(c.Telemetry.SelfCertsMessageEnabled),await this.configService.updateSetting("allowUnauthorizedRemoteConnection",!0,void 0,r.ConfigurationTarget.Workspace),this.requestCreator.getFetchMethod()(e,this.addAllowUnauthorized(e,!0,t));a===s&&(0,c.sendTelemetryEvent)(c.Telemetry.SelfCertsMessageClose)}throw n}}async getSessionCookie(e,t,n){let r,i;const o=new URLSearchParams;o.append("_xsrf",t),o.append("password",n);const s=await this.makeRequest(new URL("login?",u(e)).toString(),{method:"post",headers:{Cookie:`_xsrf=${t}`,Connection:"keep-alive","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},body:o.toString(),redirect:"manual"});if(302===s.status){const e=this.getCookies(s);e.size>0&&(r=e.entries().next().value[0],i=e.entries().next().value[1])}return{sessionCookieName:r,sessionCookieValue:i}}getCookies(e){const t=new Map,n=(e.headers.raw?e.headers.raw():e.headers)["set-cookie"];return n&&n.forEach((e=>{const n=e.substring(0,e.indexOf("=")),r=e.substring(e.indexOf("=")+1);t.set(n,r)})),t}onDidRemoveServers(e){e.forEach((e=>{e.id.startsWith("_builtin")&&this.savedConnectInfo.delete(e.handle)}))}},t.addTrailingSlash=u},49587:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterServerSelectorCommand=void 0;const o=n(26594),s=n(66828),a=n(15925),c=n(11642),l=n(77806),u=n(94433),d=n(46729),h=n(86563);let p=class extends h.Disposables{constructor(e,t){super(),this.serverSelector=e,this.uriProviderRegistration=t,this.handleMappings=new Map,this._onDidChangeHandles=new s.EventEmitter,this.extensionId=a.JVSC_EXTENSION_ID,this.id=a.TestingKernelPickerProviderId,this.displayName="Jupyter Server for Testing",this.onDidChangeHandles=this._onDidChangeHandles.event}activate(){this.disposables.push(this.uriProviderRegistration.registerProvider(this,a.JVSC_EXTENSION_ID)),this.disposables.push(s.commands.registerCommand("jupyter.selectjupyteruri",this.selectJupyterUri,this))}async getServerUri(e){if(!this.handleMappings.has(e))throw new Error(`Invalid handle ${e}`);return this.handleMappings.get(e).server}async getHandles(){return Array.from(this.handleMappings.keys())}async selectJupyterUri(e){(0,c.traceInfo)(`Setting Jupyter Server URI to remote: ${e}`);const t=e.toString(!0),n=new URL(t),r=`${n.protocol}//${n.host}${"/lab"===n.pathname?"":n.pathname}`,i=n.searchParams.get("token")??"",o=await(0,d.computeHash)(e.toString(!0),"SHA-1"),s={baseUrl:r,displayName:this.displayName,token:i};this.handleMappings.set(o,{uri:e,server:s}),await this.serverSelector.addJupyterServer({id:this.id,handle:o,extensionId:a.JVSC_EXTENSION_ID}),this._onDidChangeHandles.fire()}};t.JupyterServerSelectorCommand=p,t.JupyterServerSelectorCommand=p=r([(0,o.injectable)(),i(0,(0,o.inject)(l.JupyterServerSelector)),i(1,(0,o.inject)(u.IJupyterUriProviderRegistration))],p)},89072:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NewStorage=t.OldStorage=t.parseUri=t.SecureConnectionValidator=t.UserJupyterServerDisplayName=t.UserJupyterServerUriInput=t.UserJupyterServerUrlProvider=t.UserJupyterServerUriListMementoKey=t.UserJupyterServerUriListKeyV2=t.UserJupyterServerUriListKey=void 0;const s=n(26594),a=o(n(71171)),c=n(66828),l=n(70798),u=n(94433),d=n(10053),h=n(15925),p=n(42080),f=n(25251),g=n(58681),m=n(11642),v=n(55188),y=n(19450),b=n(84079),w=n(50689),S=n(43138),C=n(83599),_=n(97480),P=n(20397),E=n(86563),k=n(48901),I=n(9959),D=n(96434),T=n(46875);t.UserJupyterServerUriListKey="user-jupyter-server-uri-list",t.UserJupyterServerUriListKeyV2="user-jupyter-server-uri-list-version2",t.UserJupyterServerUriListMementoKey="_builtin.jupyterServerUrlProvider.uriList";let x=class extends E.Disposables{constructor(e,t,n,r,i,o,s,a,l,u,d,p,g,m,y,b,w){super(),this.jupyterConnection=r,this.isWebExtension=i,this.encryptedStorage=o,this.serverUriStorage=s,this.globalMemento=a,this.commandManager=p,this.context=y,this.fs=b,this.jupyterServerProviderRegistry=w,this.id=h.UserJupyterServerPickerProviderId,this.extensionId=h.JVSC_EXTENSION_ID,this.documentation=c.Uri.parse("https://aka.ms/vscodeJuptyerExtKernelPickerExistingServer"),this.displayName=f.DataScience.UserJupyterServerUrlProviderDisplayName,this.detail=f.DataScience.UserJupyterServerUrlProviderDetail,this._onDidChangeHandles=this._register(new c.EventEmitter),this.onDidChangeHandles=this._onDidChangeHandles.event,this._onDidChangeServers=this._register(new c.EventEmitter),this.onDidChangeServers=this._onDidChangeServers.event,l.push(this),this.oldStorage=new j(o,a),this.newStorage=new K(o),this.secureConnectionValidator=new A(t,a),this.jupyterServerUriInput=new O(e,t),this.jupyterServerUriDisplayName=new M(t),this.jupyterPasswordConnect=new v.JupyterPasswordConnect(t,n,g,m,s,l),this.jupyterHubPasswordConnect=new k.JupyterHubPasswordConnect(t,u,d,n,g,m,s,l)}activate(){const e=this.jupyterServerProviderRegistry.createJupyterServerCollection(h.JVSC_EXTENSION_ID,this.id,this.displayName);this.disposables.push(e),e.commandProvider=this,e.serverProvider=this,e.documentation=this.documentation,this.onDidChangeHandles((()=>this._onDidChangeServers.fire()),this,this.disposables),this.disposables.push(this.commandManager.registerCommand("dataScience.ClearUserProviderJupyterServerCache",(async()=>{await Promise.all([this.oldStorage.clear().catch(g.noop),this.newStorage.clear().catch(g.noop),this.fs.delete(c.Uri.joinPath(this.context.globalStorageUri,_.RemoteKernelSpecCacheFileName)).catch(g.noop)]),this._onDidChangeHandles.fire()}))),this.initializeServers().catch(g.noop)}async resolveJupyterServer(e,t){const n=await this.getServerUri(e.id);return{...e,connectionInformation:{id:e.id,label:e.label,baseUrl:c.Uri.parse(n.baseUrl),token:n.token,headers:n.authorizationHeader,mappedRemoteNotebookDir:n.mappedRemoteNotebookDir?c.Uri.file(n.mappedRemoteNotebookDir):void 0,webSocketProtocols:n.webSocketProtocols}}}async handleCommand(e,t){const n=new c.CancellationTokenSource;this.disposables.push(n),this.disposables.push(new c.Disposable((()=>n.cancel())));try{const t="url"in e?e.url:void 0,r=await this.captureRemoteJupyterUrl(n.token,t);if(!r||r===y.InputFlowAction.cancel)throw new c.CancellationError;if(r&&r instanceof y.InputFlowAction)return;const i=(await this.provideJupyterServers(n.token)).find((e=>e.id===r));if(!i)throw new Error(`Server ${r} not found`);return i}catch(e){if(e instanceof c.CancellationError)throw e;return void(0,m.traceError)("Failed to select a Jupyter Server",e)}finally{n.cancel(),n.dispose()}}async provideCommands(e,t){let n="";try{e=(e||"").trim(),["http:","https:"].includes(new URL(e.trim()).protocol.toLowerCase())&&(n=e)}catch{}return n?[{label:f.DataScience.connectToToTheJupyterServer(n),url:n}]:[{label:f.DataScience.jupyterSelectUriCommandLabel}]}async provideJupyterServers(e){return await this.initializeServers(),(await this.newStorage.getServers(!1)).map((e=>({id:e.handle,label:e.serverInfo.displayName})))}async removeJupyterServer(e){await this.initializeServers(),await this.newStorage.remove(e.id),this._onDidChangeHandles.fire()}migrateOldServers(){return this.migratedOldServers||(this.migratedOldServers=this.oldStorage.getServers().then((async e=>{await this.newStorage.migrate(e,this.serverUriStorage);const t=this.globalMemento.get(h.Settings.JupyterServerUriList);if(!Array.isArray(t)||0===t.length)return;const n=await this.encryptedStorage.retrieve(h.Settings.JupyterServerRemoteLaunchService,h.Settings.JupyterServerRemoteLaunchUriListKey);if(!n)return;const r=[],i=n.split(h.Settings.JupyterServerRemoteLaunchUriSeparator);i.slice(0,Math.min(i.length,t.length)).forEach(((n,i)=>{try{const o=n.split(h.Settings.JupyterServerRemoteLaunchNameSeparator),s=o[0];if(s===h.Settings.JupyterServerLocalLaunch)return;if(s.startsWith(h.Identifiers.REMOTE_URI))return;const c=N(s,o[1]||s);if(c&&e.every((e=>e.uri!==s))){const e=(0,a.default)();r.push({time:t[i].time,handle:e,uri:s,serverInfo:c})}}catch{}})),r.length>0&&await Promise.all(r.map((async e=>{try{await this.addNewServer(e),await this.serverUriStorage.add({id:this.id,handle:e.handle,extensionId:h.JVSC_EXTENSION_ID},{time:e.time})}catch{}})))})).catch(g.noop)),this.migratedOldServers}initializeServers(){if(this._cachedServerInfoInitialized)return this._cachedServerInfoInitialized;const e=(0,S.createDeferred)();return this._cachedServerInfoInitialized=e.promise,(async()=>{const t="NewUserUriMigrationCompleted";this.globalMemento.get(t)!==c.env.machineId&&(await Promise.all([this.migrateOldServers().catch(g.noop),this.newStorage.migrationDone]),await this.globalMemento.update(t,c.env.machineId)),this.newStorage.getServers(!1).catch(g.noop),e.resolve()})().then((()=>e.resolve()),(t=>e.reject(t))).catch(g.noop),this._cachedServerInfoInitialized}async captureRemoteJupyterUrl(e,t=""){await this.initializeServers();const n=[];let r,i={baseUrl:"",displayName:"",token:""},o="",s=!1,l=!1,u="Get Url",d="Get Url",p=t,g=!1;if(t){const e=this.jupyterServerUriInput.parseUserUriAndGetValidationError(t);"string"==typeof e.validationError?(o=e.validationError,u="Get Url"):(g=!0,i=e.jupyterServerUri,u="Check Passwords")}try{let v=!1;for(;;)try{if(r=(0,a.default)(),"Get Url"===u){g=!1,u="Check Passwords",d=void 0;const e=o;o="";const r=await this.jupyterServerUriInput.getUrlFromUser(p||t,e,n);i=r.jupyterServerUri,p=r.url}if(e.isCancellationRequested)return y.InputFlowAction.cancel;const S=[];if("Check Passwords"===u){u="Check Insecure Connections",d=g&&t?void 0:"Get Url";try{const e=o;o="",v=await this.jupyterHubPasswordConnect.isJupyterHub(i.baseUrl);const t=v?await this.jupyterHubPasswordConnect.getPasswordConnectionInfo({url:i.baseUrl,handle:r,displayName:i.displayName,validationErrorMessage:e,disposables:S}):await this.jupyterPasswordConnect.getPasswordConnectionInfo({url:i.baseUrl,isTokenEmpty:0===i.token.length,handle:r,validationErrorMessage:e,disposables:S});s=t.requiresPassword,i.authorizationHeader=t.requestHeaders}catch(e){if(e instanceof c.CancellationError||e==y.InputFlowAction.back||e==y.InputFlowAction.cancel)throw e;if(b.JupyterSelfCertsError.isSelfCertsError(e));else if(!w.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(e)){R(r,i.baseUrl,v,"ConnectionFailure");const t=/(https?:\/\/[^\s]+)/g,n=(e.message||e.toString()).replace(t,(e=>`[${e}](${e})`));o=(this.isWebExtension?f.DataScience.remoteJupyterConnectionFailedWithoutServerWithErrorWeb:f.DataScience.remoteJupyterConnectionFailedWithoutServerWithError)(n),u="Get Url";continue}}finally{this.disposables.push(...S)}}if(e.isCancellationRequested)return y.InputFlowAction.cancel;if("Check Insecure Connections"===u&&(u="Verify Connection",d=s&&0===i.token.length?"Check Passwords":"Get Url","Get Url"===d&&(d=g&&t?void 0:"Get Url"),!s&&0===i.token.length&&"http:"===new URL(i.baseUrl).protocol.toLowerCase())&&(l=!0,(0,P.dispose)(S),!await this.secureConnectionValidator.promptToUseInsecureConnections()))return R(r,i.baseUrl,v,"InsecureHTTP"),y.InputFlowAction.cancel;if(e.isCancellationRequested)return y.InputFlowAction.cancel;if("Verify Connection"===u)try{u="Get Display Name",await this.jupyterConnection.validateRemoteUri({id:this.id,handle:r,extensionId:h.JVSC_EXTENSION_ID},i,!0)}catch(e){if((0,m.traceWarning)("Uri verification error",e),e instanceof c.CancellationError||e==y.InputFlowAction.back||e==y.InputFlowAction.cancel)throw e;if(b.JupyterSelfCertsError.isSelfCertsError(e)){o=f.DataScience.jupyterSelfCertFailErrorMessageOnly,u="Get Url",R(r,i.baseUrl,v,"SelfCert");continue}if(w.JupyterSelfCertsExpiredError.isSelfCertsExpiredError(e)){o=f.DataScience.jupyterSelfCertExpiredErrorMessageOnly,u="Get Url",R(r,i.baseUrl,v,"ExpiredCert");continue}if(s&&0===i.token.length){o=f.DataScience.passwordFailure,u="Check Passwords",R(r,i.baseUrl,v,"AuthFailure");continue}{R(r,i.baseUrl,v,"ConnectionFailure");const t=/(https?:\/\/[^\s]+)/g,n=(e.message||e.toString()).replace(t,(e=>`[${e}](${e})`));o=(this.isWebExtension,f.DataScience.remoteJupyterConnectionFailedWithoutServerWithErrorWeb)(n),u="Get Url";continue}}finally{(0,P.dispose)(S)}if(e.isCancellationRequested)return y.InputFlowAction.cancel;if("Get Display Name"===u){(0,P.dispose)(S),d=l?"Check Insecure Connections":s&&0===i.token.length?"Check Passwords":"Get Url","Get Url"===d&&(d=g&&t?void 0:"Get Url"),i.displayName=await this.jupyterServerUriDisplayName.getDisplayName(r,i.displayName||new URL(i.baseUrl).hostname);break}}catch(e){if(e instanceof c.CancellationError||e===y.InputFlowAction.cancel)return y.InputFlowAction.cancel;if(e===y.InputFlowAction.back){if(!d)return y.InputFlowAction.back;u=d;continue}throw e}return e.isCancellationRequested?y.InputFlowAction.cancel:(await this.addNewServer({handle:r,uri:p,serverInfo:i}),R(r,i.baseUrl,v),r)}catch(e){if(e instanceof c.CancellationError)return y.InputFlowAction.cancel;throw e}finally{(0,P.dispose)(n)}}async addNewServer(e){await this.newStorage.add(e),this._onDidChangeHandles.fire()}async getServerUri(e){const t=(await this.newStorage.getServers(!1)).find((t=>t.handle===e));if(!t)throw new Error("Server not found");const n=t.serverInfo,r=this.jupyterServerUriDisplayName.displayNamesOfHandles.get(e);r&&(n.displayName=r);const i=await this.jupyterHubPasswordConnect.isJupyterHub(n.baseUrl),o=i?await this.jupyterHubPasswordConnect.getPasswordConnectionInfo({url:n.baseUrl,handle:e,displayName:n.displayName}):await this.jupyterPasswordConnect.getPasswordConnectionInfo({url:n.baseUrl,isTokenEmpty:0===n.token.length,handle:e}),s=Object.assign({},n,{authorizationHeader:o.requestHeaders||n.authorizationHeader});return i&&o.remappedBaseUrl&&(s.baseUrl=o.remappedBaseUrl),i&&o.remappedToken&&(s.token=o.remappedToken),s}};t.UserJupyterServerUrlProvider=x,t.UserJupyterServerUrlProvider=x=r([(0,s.injectable)(),i(0,(0,s.inject)(d.IClipboard)),i(1,(0,s.inject)(d.IApplicationShell)),i(2,(0,s.inject)(p.IConfigurationService)),i(3,(0,s.inject)(l.JupyterConnection)),i(4,(0,s.inject)(p.IsWebExtension)),i(5,(0,s.inject)(d.IEncryptedStorage)),i(6,(0,s.inject)(u.IJupyterServerUriStorage)),i(7,(0,s.inject)(p.IMemento)),i(7,(0,s.named)(p.GLOBAL_MEMENTO)),i(8,(0,s.inject)(p.IDisposableRegistry)),i(9,(0,s.inject)(y.IMultiStepInputFactory)),i(10,(0,s.inject)(p.IAsyncDisposableRegistry)),i(11,(0,s.inject)(d.ICommandManager)),i(12,(0,s.inject)(u.IJupyterRequestAgentCreator)),i(12,(0,s.optional)()),i(13,(0,s.inject)(u.IJupyterRequestCreator)),i(14,(0,s.inject)(p.IExtensionContext)),i(15,(0,s.inject)(C.IFileSystem)),i(16,(0,s.inject)(u.IJupyterServerProviderRegistry))],x);let O=class{constructor(e,t){this.clipboard=e,this.applicationShell=t}async getUrlFromUser(e,t="",n){if(!e)try{const t=await this.clipboard.readText().catch((()=>"")),n=c.Uri.parse(t.trim(),!0);e=t&&n&&n.scheme.toLowerCase().startsWith("http")?t:""}catch{}const r=this.applicationShell.createInputBox();n.push(r),r.title=f.DataScience.jupyterSelectUriInputTitle,r.placeholder=f.DataScience.jupyterSelectUriInputPlaceholder,r.value=e,r.validationMessage=t,r.buttons=[c.QuickInputButtons.Back],r.ignoreFocusOut=!0,r.show();const i=(0,S.createDeferred)();return r.onDidChangeValue((()=>r.validationMessage=""),this,n),r.onDidHide((()=>i.reject(y.InputFlowAction.cancel)),this,n),r.onDidTriggerButton((e=>{e===c.QuickInputButtons.Back&&i.reject(y.InputFlowAction.back)}),this,n),r.onDidAccept((async()=>{const e=this.parseUserUriAndGetValidationError(r.value);"string"!=typeof e.validationError?i.resolve(e):r.validationMessage=e.validationError})),i.promise}parseUserUriAndGetValidationError(e){const t=e.trim().replace(/\/(lab|tree)(\??)$/,""),n=N(t,"");return n?t.toLowerCase().startsWith("http:")||t.toLowerCase().startsWith("https:")?{jupyterServerUri:n,url:t,validationError:void 0}:{validationError:f.DataScience.jupyterSelectURIMustBeHttpOrHttps}:{validationError:f.DataScience.jupyterSelectURIInvalidURI}}};function R(e,t,n,r){t=t.trim().toLowerCase();const i=(0,T.generateIdFromRemoteProvider)({handle:e,extensionId:h.JVSC_EXTENSION_ID,id:h.UserJupyterServerPickerProviderId});Promise.all([(0,D.getTelemetrySafeHashedString)(t.toLowerCase()),(0,D.getTelemetrySafeHashedString)(i.toLowerCase())]).then((([e,i])=>{(0,I.sendTelemetryEvent)(h.Telemetry.EnterRemoteJupyterUrl,void 0,{serverIdHash:i,failed:!!r,baseUrlHash:e,isJupyterHub:n,isLocalHost:["localhost","127.0.0.1","::1"].includes(new URL(t).hostname),reason:r})})).catch((e=>(0,m.traceError)(`Failed to hash remote url ${t}`,e)))}t.UserJupyterServerUriInput=O,t.UserJupyterServerUriInput=O=r([i(0,(0,s.inject)(d.IClipboard)),i(1,(0,s.inject)(d.IApplicationShell))],O);let M=class{constructor(e){this.applicationShell=e,this.displayNamesOfHandles=new Map}async getDisplayName(e,t){const n=[];try{const r=this.applicationShell.createInputBox();n.push(r),r.ignoreFocusOut=!0,r.title=f.DataScience.jupyterRenameServer,r.value=t,r.placeholder=f.DataScience.jupyterServerUriDisplayNameInputPlaceholder,r.buttons=[c.QuickInputButtons.Back],r.show();const i=(0,S.createDeferred)();return n.push(r.onDidHide((()=>i.reject(y.InputFlowAction.cancel)))),r.onDidTriggerButton((e=>{e===c.QuickInputButtons.Back&&i.reject(y.InputFlowAction.back)}),this,n),r.onDidAccept((()=>{const n=r.value.trim()||t;this.displayNamesOfHandles.set(e,n),i.resolve(n)}),this,n),await i.promise}finally{(0,P.dispose)(n)}}};t.UserJupyterServerDisplayName=M,t.UserJupyterServerDisplayName=M=r([i(0,(0,s.inject)(d.IApplicationShell))],M);let A=class{constructor(e,t){this.applicationShell=e,this.globalMemento=t}async promptToUseInsecureConnections(){if(this.globalMemento.get("DataScienceAllowInsecureConnections",!1))return!0;const e=[],t=(0,S.createDeferred)();try{const n=this.applicationShell.createQuickPick();e.push(n),n.canSelectMany=!1,n.ignoreFocusOut=!0,n.title=f.DataScience.insecureSessionMessage,n.buttons=[c.QuickInputButtons.Back],n.items=[{label:f.Common.bannerLabelYes},{label:f.Common.bannerLabelNo}],n.show(),e.push(n.onDidHide((()=>t.reject(y.InputFlowAction.cancel)))),n.onDidTriggerButton((e=>{e===c.QuickInputButtons.Back&&t.reject(y.InputFlowAction.back)}),this,e),n.onDidAccept((()=>t.resolve(n.selectedItems.some((e=>e.label===f.Common.bannerLabelYes)))),this,e)}finally{(0,P.dispose)(e)}return t.promise}};function N(e,t){if(!e.startsWith(h.Identifiers.REMOTE_URI))try{const n=new URL(e);return{baseUrl:`${n.protocol}//${n.host}${"/lab"===n.pathname||"/tree"===n.pathname?"":n.pathname}`,token:n.searchParams.get("token")||"",displayName:t||n.hostname}}catch(t){return void(0,m.traceError)(`Failed to parse URI ${e}`,t)}}t.SecureConnectionValidator=A,t.SecureConnectionValidator=A=r([i(0,(0,s.inject)(d.IApplicationShell)),i(1,(0,s.inject)(p.IMemento)),i(1,(0,s.named)(p.GLOBAL_MEMENTO))],A),t.parseUri=N;let j=class{constructor(e,t){this.encryptedStorage=e,this.globalMemento=t}async getServers(){const e=this.globalMemento.get(t.UserJupyterServerUriListMementoKey),n=await this.encryptedStorage.retrieve(h.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKey);if(!n||!e||0===e.length)return[];const r=n.split(h.Settings.JupyterServerRemoteLaunchUriSeparator);if(0===r.length||r.length!==e.length)return(0,m.traceError)("Invalid server list, unable to retrieve server info"),[];const i=[];for(let t=0;t<r.length;t+=1){if(r[t].startsWith(h.Identifiers.REMOTE_URI))continue;const n=N(r[t]);n?i.push({handle:e[t].handle,uri:r[t],serverInfo:n}):(0,m.traceError)("Unable to parse server info",r[t])}return i}async clear(){await this.encryptedStorage.store(h.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKey,"").catch(g.noop),await this.globalMemento.update(t.UserJupyterServerUriListMementoKey,[]).then(g.noop,g.noop)}};function F(e){return e.map((e=>({handle:e.handle,uri:e.uri,displayName:e.serverInfo.displayName})))}function L(e){const t=[];return e.forEach((e=>{const n=N(e.uri,e.displayName);n&&t.push({handle:e.handle,uri:e.uri,serverInfo:n})})),t}t.OldStorage=j,t.OldStorage=j=r([i(0,(0,s.inject)(d.IEncryptedStorage)),i(1,(0,s.inject)(p.IMemento)),i(1,(0,s.named)(p.GLOBAL_MEMENTO))],j);let K=class{get migrationDone(){return this._migrationDone.promise}constructor(e){this.encryptedStorage=e,this.updatePromise=Promise.resolve(),this._migrationDone=(0,S.createDeferred)()}async migrate(e,n){const r=await this.encryptedStorage.retrieve(h.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKeyV2);if("string"==typeof r){let e=[],t=!1;try{const n=JSON.parse(r||"[]");t=n.some((e=>e.displayName)),e=L(n)}catch{return}return t||await this.migrateDisplayNames(e,n),this._migrationDone.resolve()}this.encryptedStorage.store(h.Settings.JupyterServerRemoteLaunchService,"user-jupyter-server-uri-list-v2",void 0).catch(g.noop),await this.migrateDisplayNames(e,n),await this.encryptedStorage.store(h.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKeyV2,JSON.stringify(e)),this._migrationDone.resolve()}async migrateDisplayNames(e,n){if(0===e.length)return;const r=await n.getAll().catch((e=>((0,m.traceError)("Failed to get all servers from storage",e),[]))),i=new Map(r.filter((e=>e.provider.extensionId===h.JVSC_EXTENSION_ID&&e.provider.id===h.UserJupyterServerPickerProviderId)).map((e=>[e.provider.handle,e.displayName])));e.forEach((e=>{e.serverInfo.displayName=i.get(e.handle)||e.uri})),await this.encryptedStorage.store(h.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKeyV2,JSON.stringify(F(e)))}async getServers(e){if(this.servers&&!e)return this.servers;const n=await this.encryptedStorage.retrieve(h.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKeyV2);if(!n||"[]"===n)return[];try{return this.servers=L(JSON.parse(n))}catch{return[]}}async add(e){this.servers&&(this.servers=this.servers.filter((t=>t.handle!==e.handle)).concat(e)),await(this.updatePromise=this.updatePromise.then((async()=>{const n=(await this.getServers(!0)).concat(e);this.servers=n,await this.encryptedStorage.store(h.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKeyV2,JSON.stringify(F(n)))})).catch(g.noop))}async remove(e){this.servers&&(this.servers=this.servers.filter((t=>t.handle!==e))),await(this.updatePromise=this.updatePromise.then((async()=>{const n=(await this.getServers(!0)).filter((t=>t.handle!==e));return this.servers=n,this.encryptedStorage.store(h.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKeyV2,JSON.stringify(F(n)))})).catch(g.noop))}async clear(){this.servers=[],await(this.updatePromise=this.updatePromise.then((async()=>{this.servers=[],await this.encryptedStorage.store(h.Settings.JupyterServerRemoteLaunchService,t.UserJupyterServerUriListKeyV2,void 0)})).catch(g.noop))}};t.NewStorage=K,t.NewStorage=K=r([i(0,(0,s.inject)(d.IEncryptedStorage))],K)},9959:function(e,t,n){"use strict";var r,i,o,s,a,c,l,u,d,h,p,f,g,m,v,y,b,w,S,C,_,P,E,k,I,D,T,x,O,R,M,A,N,j,F,L,K,U,W,V,H,B,q,J,$,G,z,Y,Q,X,Z,ee,te,ne,re,ie,oe,se,ae,ce,le,ue,de,he,pe,fe,ge,me,ve,ye,be,we,Se,Ce,_e,Pe,Ee,ke,Ie,De,Te,xe,Oe,Re,Me,Ae,Ne,je,Fe,Le,Ke,Ue,We,Ve,He,Be,qe,Je,$e,Ge,ze,Ye,Qe,Xe,Ze,et,tt,nt,rt,it,ot,st,at,ct,lt,ut,dt,ht,pt,ft,gt,mt,vt,yt,bt,wt,St,Ct,_t,Pt,Et,kt,It,Dt,Tt,xt,Ot,Rt,Mt,At,Nt,jt,Ft,Lt,Kt,Ut,Wt,Vt,Ht,Bt,qt,Jt,$t,Gt,zt,Yt,Qt=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Xt=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||Qt(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.IEventNamePropertyMapping=t.CommonPropertyAndMeasureTypeNames=t.CommonProperties=void 0;const Zt=n(15925),en=n(2161),tn=n(3445);Xt(n(68125),t),t.CommonProperties={duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isamlcompute:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Whether this is an AML compute instance. Common to all events."},isInsiderExtension:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Whether this is the Insider version of the Jupyter extension or not. Common to all events."},isPythonExtensionInstalled:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Whether Python extension is installed or not. Common to all events."},rawKernelSupported:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Whether the raw kernel is supported or not. Common to all events."}},t.CommonPropertyAndMeasureTypeNames=["ResourceSpecificTelemetryProperties","DurationMeasurement","ResourceTypeTelemetryProperty","TelemetryErrorProperties"],t.IEventNamePropertyMapping=class{constructor(){this[r]={owner:"donjayamanne",feature:"N/A",source:"N/A",measures:{totalActivateTime:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},workspaceFolderCount:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[i]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[o]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[s]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{hashedNamev2:{classification:"SystemMetaData",purpose:"FeatureInsight"},when:{classification:"SystemMetaData",purpose:"FeatureInsight"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[a]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{firstTime:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[c]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{mimeType:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},when:{classification:"SystemMetaData",purpose:"FeatureInsight"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[l]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{envType:{classification:"SystemMetaData",purpose:"FeatureInsight"},failed:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},reason:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},source:{classification:"SystemMetaData",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[u]={owner:"IanMatthewHuff",source:"User Action",feature:["DataFrameViewer","VariableViewer"]},this[d]={owner:"IanMatthewHuff",source:"N/A",feature:["DataFrameViewer","VariableViewer"]},this[h]={owner:"IanMatthewHuff",source:"User Action",feature:["DataFrameViewer","VariableViewer"]},this[p]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[f]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[g]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{codeLensUpdateTime:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},maxCellCount:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0}}},this[m]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[v]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[y]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[b]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[w]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[S]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failed:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},reason:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",comment:"Reason for failure to fetch kernel specs"},sessionManagerReady:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},specsManagerReady:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},wasSessionManagerReady:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},wasSpecsManagerReady:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[C]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},serverIdHash:{classification:"SystemMetaData",purpose:"FeatureInsight"},providerExtensionId:{classification:"SystemMetaData",purpose:"FeatureInsight"},baseUrlHash:{classification:"SystemMetaData",purpose:"FeatureInsight"},kernelId:{classification:"SystemMetaData",purpose:"FeatureInsight"},kernelConnectionType:{classification:"SystemMetaData",purpose:"FeatureInsight"},kernelLanguage:{classification:"SystemMetaData",purpose:"FeatureInsight"},envType:{classification:"SystemMetaData",purpose:"FeatureInsight"},isArgv0SameAsInterpreter:{classification:"SystemMetaData",purpose:"FeatureInsight"},argv0:{classification:"SystemMetaData",purpose:"FeatureInsight"},argv:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[_]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{serverIdHash:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},baseUrlHash:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},isLocalHost:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},isJupyterHub:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},reason:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"}}},this[P]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[E]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[k]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[I]={owner:"IanMatthewHuff",feature:["Import-Export","InteractiveWindow"],source:"User Action"},this[D]={owner:"IanMatthewHuff",feature:["Import-Export","InteractiveWindow"],source:"User Action"},this[T]={owner:"IanMatthewHuff",feature:["Import-Export","InteractiveWindow"],source:"User Action",properties:{format:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[x]={owner:"IanMatthewHuff",feature:["Import-Export"],source:"N/A",properties:{format:{classification:"SystemMetaData",purpose:"FeatureInsight"},cancelled:{classification:"SystemMetaData",purpose:"FeatureInsight"},successful:{classification:"SystemMetaData",purpose:"FeatureInsight"},opened:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[O]={owner:"IanMatthewHuff",feature:["Import-Export"],source:"User Action",properties:{scope:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[R]={owner:"IanMatthewHuff",feature:["Import-Export"],source:"User Action",properties:{format:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[M]={owner:"IanMatthewHuff",feature:["Import-Export"],source:"N/A",properties:{format:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[A]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[N]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[j]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{failed:{classification:"SystemMetaData",purpose:"FeatureInsight"},info:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[F]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[L]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[K]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[U]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[W]={owner:"donjayamanne",feature:"N/A",source:"N/A",measures:{nbformat:{classification:"PublicNonPersonalData",isMeasurement:!0,purpose:"FeatureInsight"},nbformat_minor:{classification:"PublicNonPersonalData",isMeasurement:!0,purpose:"FeatureInsight"}}},this[V]={owner:"IanMatthewHuff",feature:["PlotViewer"],source:"User Action"},this[H]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[B]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[q]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[J]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[$]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[G]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[z]={owner:"amunger",feature:["InteractiveWindow"],source:"User Action"},this[Y]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A"},this[Q]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A"},this[X]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Z]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ee]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[te]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ne]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[re]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ie]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[oe]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[se]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ae]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ce]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[le]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ue]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[de]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[he]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[pe]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[fe]={owner:"donjayamanne",feature:"N/A",source:"N/A"},this[ge]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[me]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[ve]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"]},this[ye]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[be]={owner:"IanMatthewHuff",feature:["KernelPicker"],source:"User Action",properties:{action:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[we]={owner:"donjayamanne",feature:["KernelPicker"],source:"User Action",properties:{action:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Se]={owner:"donjayamanne",feature:["KernelPicker"],source:"User Action",properties:{action:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Ce]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{action:{classification:"SystemMetaData",purpose:"FeatureInsight"},isModulePresent:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},moduleName:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},pythonEnvType:{classification:"SystemMetaData",purpose:"FeatureInsight"},resourceHash:{classification:"SystemMetaData",purpose:"FeatureInsight"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[_e]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A"},this[Pe]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"User Action",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Ee]={owner:"IanMatthewHuff",source:"N/A",feature:["DataFrameViewer"],measures:{rows:{classification:"PublicNonPersonalData",purpose:"FeatureInsight",isMeasurement:!0},columns:{classification:"PublicNonPersonalData",purpose:"FeatureInsight",isMeasurement:!0}}},this[ke]={owner:"IanMatthewHuff",source:"N/A",feature:["DataFrameViewer"],measures:{rowsTimer:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}}},this[Ie]={owner:"IanMatthewHuff",feature:["DataFrameViewer","VariableViewer"],source:"N/A"},this[De]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"User Action"},this[Te]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{failedWithoutBackingFile:{classification:"SystemMetaData",purpose:"FeatureInsight"},failedWithBackingFile:{classification:"SystemMetaData",purpose:"FeatureInsight"},localHost:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[xe]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{failed:{classification:"SystemMetaData",purpose:"FeatureInsight"},fallbackTried:{classification:"SystemMetaData",purpose:"FeatureInsight"},alpine:{classification:"SystemMetaData",purpose:"FeatureInsight"},zmqarch:{classification:"SystemMetaData",purpose:"FeatureInsight"},libc:{classification:"SystemMetaData",purpose:"FeatureInsight"},armv:{classification:"SystemMetaData",purpose:"FeatureInsight"},distro_id:{classification:"SystemMetaData",purpose:"FeatureInsight"},distro_version_id:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Oe]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{failed:{classification:"SystemMetaData",purpose:"FeatureInsight"},fallbackTried:{classification:"SystemMetaData",purpose:"FeatureInsight"},alpine:{classification:"SystemMetaData",purpose:"FeatureInsight"},zmqarch:{classification:"SystemMetaData",purpose:"FeatureInsight"},libc:{classification:"SystemMetaData",purpose:"FeatureInsight"},armv:{classification:"SystemMetaData",purpose:"FeatureInsight"},distro_id:{classification:"SystemMetaData",purpose:"FeatureInsight"},distro_version_id:{classification:"SystemMetaData",purpose:"FeatureInsight"},errorMessage:{classification:"CallstackOrException",purpose:"FeatureInsight"},fallbackErrorMessage:{classification:"CallstackOrException",purpose:"FeatureInsight"},zmqBinaries:{classification:"CallstackOrException",purpose:"FeatureInsight"}}},this[Re]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Me]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A",measures:{variableCount:{classification:"PublicNonPersonalData",purpose:"FeatureInsight",isMeasurement:!0}}},this[Ae]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{kind:{classification:"SystemMetaData",purpose:"FeatureInsight"},language:{classification:"SystemMetaData",purpose:"FeatureInsight"},usesShell:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Ne]={owner:"donjayamanne",feature:"N/A",source:"N/A",tags:["KernelStartup"],properties:{failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[je]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{kernelConnectionType:{classification:"SystemMetaData",purpose:"FeatureInsight"},pythonPathDefined:{classification:"SystemMetaData",purpose:"FeatureInsight"},pythonEnvFound:{classification:"SystemMetaData",purpose:"FeatureInsight"},language:{classification:"SystemMetaData",purpose:"FeatureInsight"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},argv0:{classification:"SystemMetaData",purpose:"FeatureInsight"},isCreatedByUs:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Fe]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A"},this[Le]={owner:"amunger",feature:["InteractiveWindow"],source:"N/A",properties:{hasKernel:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"If the kernel was known at the time of creation"},hasOwner:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"If the window was created for a text file"},mode:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Creation mode: multiple, perfile or single"},restored:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Was the window restored from a previous session"}},measures:{windowCount:{classification:"SystemMetaData",purpose:"FeatureInsight",comment:"Number of active interactive windows the user has open",isMeasurement:!0}}},this[Ke]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{cdnSearched:{classification:"SystemMetaData",purpose:"FeatureInsight"},hashedName:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},source:{classification:"SystemMetaData",purpose:"FeatureInsight"},moduleName:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},modelName:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},moduleVersion:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[Ue]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{type:{classification:"SystemMetaData",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[We]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A"},this[Ve]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{moduleHash:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},moduleVersion:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[He]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{timedout:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},isOnline:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},moduleHash:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},moduleVersion:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[Be]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{moduleHash:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},moduleVersion:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[qe]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A"},this[Je]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{selection:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[$e]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",measures:{totalOverheadInMs:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},numberOfMessagesWaitedOn:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},averageWaitTime:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},numberOfRegisteredHooks:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0}}},this[Ge]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A"},this[ze]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],tags:["Widgets"],source:"N/A",properties:{msg_type:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"}}},this[Ye]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",tags:["KernelStartup"],measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0},attempts:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0}},properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},timedout:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}}},this[Qe]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",tags:["KernelStartup"],measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Xe]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"User Action",tags:["Cell Execution"],properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"}}},this[Ze]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"User Action",tags:["Cell Execution"],properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"}}},this[et]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",tags:["KernelStartup"],properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"}}},this[tt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[nt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"User Action",properties:{result:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[rt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"User Action",properties:{resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[it]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"User Action",properties:{resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},failed:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},failureSubCategory:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFile:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorFolder:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonErrorPackage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},stackTrace:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},envMissingReason:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},isEmptyCondaEnv:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},pythonEnvType:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},fileExists:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}}},this[ot]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{reason:{classification:"SystemMetaData",isMeasurement:!0,purpose:"PerformanceAndHealth"}}},this[st]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{exitReason:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}},measures:{exitCode:{classification:"CallstackOrException",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[at]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{isRequestToShutdownRestartSession:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},stacktrace:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[ct]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{stacktrace:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[lt]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[ut]={owner:"donjayamanne",feature:["KernelPicker"],source:"N/A",measures:{kernelSpecCount:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0},kernelInterpreterCount:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0},kernelLiveCount:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0},localKernelSpecCount:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0},remoteKernelSpecCount:{classification:"SystemMetaData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[dt]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{outputType:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"}}},this[ht]={owner:"IanMatthewHuff",feature:["InteractiveWindow"],tags:["IntelliSense"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}},properties:{isResultNull:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[pt]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[ft]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A"},this[gt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[mt]={owner:"IanMatthewHuff",feature:["PlotViewer"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[vt]={owner:"amunger",feature:"N/A",source:"N/A",properties:{command:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[yt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"User Action",properties:{newState:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[bt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A",measures:{numberOfDimensions:{classification:"SystemMetaData",purpose:"FeatureInsight",isMeasurement:!0}}},this[wt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"User Action",properties:{source:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[St]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{failed:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},reason:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},dependenciesInstalled:{classification:"SystemMetaData",purpose:"FeatureInsight"},envType:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Ct]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{extensionId:{classification:"SystemMetaData",purpose:"FeatureInsight"},action:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[_t]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[Pt]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[Et]={owner:"roblourens",feature:["Debugger"],properties:{status:{classification:"SystemMetaData",purpose:"FeatureInsight"}},source:"N/A"},this[kt]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[It]={owner:"roblourens",feature:["Debugger"],source:"N/A"},this[Dt]={owner:"roblourens",feature:["Debugger"],source:"N/A"},this[Tt]={owner:"roblourens",feature:["Debugger"],source:"User Action"},this[xt]={owner:"roblourens",feature:["Debugger"],source:"N/A"},this[Ot]={owner:"roblourens",feature:["Debugger"],source:"N/A",properties:{reason:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Rt]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{extensionId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},result:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[Mt]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{extensionId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},pemUsed:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[At]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{clientExtId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},pemUsed:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[Nt]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{providerId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},extensionId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},pemUsed:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}}},this[jt]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{extensionId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},allowed:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[Ft]={owner:"donjayamanne",feature:"N/A",source:"N/A",properties:{extensionId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},providerId:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"}},measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Lt]={owner:"IanMatthewHuff",feature:["VariableViewer"],source:"N/A"},this[Kt]={owner:"roblourens",feature:["InteractiveWindow","Debugger"],source:"N/A"},this[Ut]={owner:"donjayamanne",feature:["Notebook","InteractiveWindow"],source:"N/A",properties:{actionSource:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},disableUI:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},userExecutedCell:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceHash:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth"},pythonEnvironmentVersion:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPath:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},pythonEnvironmentPackages:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSessionId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelLanguage:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelSpecHash:{classification:"EndUserPseudonymizedInformation",purpose:"FeatureInsight"},kernelId:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},kernelConnectionType:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},isUsingActiveInterpreter:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},capturedEnvVars:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},newKernelPicker:{classification:"PublicNonPersonalData",comment:"",purpose:"PerformanceAndHealth"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"},resourceType:{classification:"PublicNonPersonalData",comment:"",purpose:"FeatureInsight"}}},this[Wt]={owner:"donjayamanne",source:"N/A",feature:["KernelPicker"]},this[Vt]={owner:"donjayamanne",source:"User Action",feature:["KernelPicker"]},this[Ht]={owner:"amunger",feature:"N/A",source:"N/A",properties:{testName:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},testResult:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},perfWarmup:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},commitHash:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},timedCheckpoints:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"}}},this[Bt]={owner:"donjayamanne",feature:["KernelPicker"],source:"N/A",measures:{matchedReason:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[qt]={owner:"donjayamanne",feature:"N/A",source:"N/A",measures:{frontEndVersion:{classification:"SystemMetaData",isMeasurement:!0,purpose:"PerformanceAndHealth"}},properties:{detection:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},failed:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},frontEnd:{classification:"PublicNonPersonalData",purpose:"FeatureInsight"},reason:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"}}},this[Jt]={owner:"donjayamanne",feature:["Notebook","Notebook"],tags:["Widgets"],source:"N/A",measures:{requireEntryPointCount:{classification:"SystemMetaData",isMeasurement:!0,purpose:"PerformanceAndHealth"}},properties:{failed:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},failure:{classification:"CallstackOrException",purpose:"PerformanceAndHealth"},patternUsedToRegisterRequireConfig:{classification:"SystemMetaData",purpose:"PerformanceAndHealth"},widgetFolderNameHash:{classification:"SystemMetaData",purpose:"FeatureInsight"}}},this[$t]={owner:"donjayamanne",feature:["Notebook","Notebook"],tags:["Widgets"],source:"N/A",measures:{duration:{classification:"PublicNonPersonalData",purpose:"PerformanceAndHealth",isMeasurement:!0}}},this[Gt]={owner:"donjayamanne",feature:["DataFrameViewer"],source:"N/A"},this[zt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"},this[Yt]={owner:"IanMatthewHuff",feature:["DataFrameViewer"],source:"N/A"}}},r=en.EventName.EXTENSION_LOAD,i=en.EventName.ENVFILE_VARIABLE_SUBSTITUTION,o=en.EventName.ENVFILE_WORKSPACE,s=en.EventName.HASHED_PACKAGE_NAME,a=Zt.Telemetry.ActiveInterpreterListingPerf,c=Zt.Telemetry.CellOutputMimeType,l=Zt.Telemetry.GetActivatedEnvironmentVariables,u=en.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST,d=en.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR,h=en.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS,p=Zt.Telemetry.AddCellBelow,f=Zt.Telemetry.CodeLensAverageAcquisitionTime,g=Zt.Telemetry.DocumentWithCodeCells,m=Zt.Telemetry.DebugContinue,v=Zt.Telemetry.DebugCurrentCell,y=Zt.Telemetry.DebugStepOver,b=Zt.Telemetry.DebugStop,w=Zt.Telemetry.DebugFileInteractive,S=Zt.Telemetry.JupyterKernelSpecEnumeration,C=Zt.Telemetry.KernelSpec,_=Zt.Telemetry.EnterRemoteJupyterUrl,P=Zt.Telemetry.DisableInteractiveShiftEnter,E=Zt.Telemetry.EnableInteractiveShiftEnter,k=Zt.Telemetry.PerceivedJupyterStartupNotebook,I=Zt.Telemetry.ExportPythonFileInteractive,D=Zt.Telemetry.ExportPythonFileAndOutputInteractive,T=Zt.Telemetry.ClickedExportNotebookAsQuickPick,x=Zt.Telemetry.ExportNotebookAs,O=Zt.Telemetry.ImportNotebook,R=Zt.Telemetry.ExportNotebookAsCommand,M=Zt.Telemetry.ExportNotebookAsFailed,A=Zt.Telemetry.GetPasswordFailure,N=Zt.Telemetry.GetPasswordSuccess,j=Zt.Telemetry.CheckPasswordJupyterHub,F=Zt.Telemetry.PandasNotInstalled,L=Zt.Telemetry.PandasTooOld,K=Zt.Telemetry.PandasOK,U=Zt.Telemetry.PandasInstallCanceled,W=Zt.Telemetry.OpenNotebookAll,V=Zt.Telemetry.OpenPlotViewer,H=Zt.Telemetry.RunAllCells,B=Zt.Telemetry.RunSelectionOrLine,q=Zt.Telemetry.RunCurrentCell,J=Zt.Telemetry.RunAllCellsAbove,$=Zt.Telemetry.RunCellAndAllBelow,G=Zt.Telemetry.RunCurrentCellAndAdvance,z=Zt.Telemetry.RunFileInteractive,Y=Zt.Telemetry.RunToLine,Q=Zt.Telemetry.RunFromLine,X=Zt.Telemetry.InsertCellBelowPosition,Z=Zt.Telemetry.InsertCellBelow,ee=Zt.Telemetry.InsertCellAbove,te=Zt.Telemetry.DeleteCells,ne=Zt.Telemetry.SelectCell,re=Zt.Telemetry.SelectCellContents,ie=Zt.Telemetry.ExtendSelectionByCellAbove,oe=Zt.Telemetry.ExtendSelectionByCellBelow,se=Zt.Telemetry.MoveCellsUp,ae=Zt.Telemetry.MoveCellsDown,ce=Zt.Telemetry.ChangeCellToMarkdown,le=Zt.Telemetry.ChangeCellToCode,ue=Zt.Telemetry.GotoNextCellInFile,de=Zt.Telemetry.GotoPrevCellInFile,he=Zt.Telemetry.RunCurrentCellAndAddBelow,pe=Zt.Telemetry.SelfCertsMessageClose,fe=Zt.Telemetry.SelfCertsMessageEnabled,ge=Zt.Telemetry.UserInstalledJupyter,me=Zt.Telemetry.UserInstalledPandas,ve=Zt.Telemetry.UserDidNotInstallJupyter,ye=Zt.Telemetry.UserDidNotInstallPandas,be=Zt.Telemetry.PythonNotInstalled,we=Zt.Telemetry.PythonExtensionNotInstalled,Se=Zt.Telemetry.PythonExtensionInstalledViaKernelPicker,Ce=Zt.Telemetry.PythonModuleInstall,_e=Zt.Telemetry.ShiftEnterBannerShown,Pe=Zt.Telemetry.StartShowDataViewer,Ee=Zt.Telemetry.ShowDataViewer,ke=Zt.Telemetry.ShowDataViewerRowsLoaded,Ie=Zt.Telemetry.FailedShowDataViewer,De=Zt.Telemetry.RefreshDataViewer,Te=Zt.Telemetry.StartedRemoteJupyterSessionWithBackingFile,xe=Zt.Telemetry.ZMQSupport,Oe=Zt.Telemetry.ZMQSupportFailure,Re=Zt.Telemetry.VariableExplorerFetchTime,Me=Zt.Telemetry.VariableExplorerVariableCount,Ae=Zt.Telemetry.KernelSpecLanguage,Ne=Zt.Telemetry.KernelLauncherPerf,je=Zt.Telemetry.AmbiguousGlobalKernelSpec,Fe=Zt.Telemetry.NewFileForInteractiveWindow,Le=Zt.Telemetry.CreateInteractiveWindow,Ke=Zt.Telemetry.HashedIPyWidgetNameUsed,Ue=Zt.Telemetry.DiscoverIPyWidgetNamesPerf,We=Zt.Telemetry.HashedIPyWidgetScriptDiscoveryError,Ve=Zt.Telemetry.IPyWidgetLoadSuccess,He=Zt.Telemetry.IPyWidgetLoadFailure,Be=Zt.Telemetry.IPyWidgetWidgetVersionNotSupportedLoadFailure,qe=Zt.Telemetry.IPyWidgetPromptToUseCDN,Je=Zt.Telemetry.IPyWidgetPromptToUseCDNSelection,$e=Zt.Telemetry.IPyWidgetOverhead,Ge=Zt.Telemetry.IPyWidgetRenderFailure,ze=Zt.Telemetry.IPyWidgetUnhandledMessage,Ye=Zt.Telemetry.RawKernelInfoResponse,Qe=Zt.Telemetry.RawKernelProcessLaunch,Xe=Zt.Telemetry.ExecuteCell,Ze=Zt.Telemetry.ResumeCellExecution,et=Zt.Telemetry.NotebookStart,tt=Zt.Telemetry.SwitchKernel,nt=Zt.Telemetry.NotebookInterrupt,rt=Zt.Telemetry.NotebookRestart,it=Zt.Telemetry.KernelStartFailureDueToMissingEnv,ot=Zt.Telemetry.RawKernelSessionStartNoIpykernel,st=Zt.Telemetry.RawKernelSessionKernelProcessExited,at=Zt.Telemetry.RawKernelSessionShutdown,ct=Zt.Telemetry.RawKernelSessionDisposed,lt=Zt.Telemetry.RunByLineVariableHover,ut=Zt.Telemetry.KernelCount,dt=Zt.Telemetry.VSCNotebookCellTranslationFailed,ht=Zt.Telemetry.InteractiveFileTooltipsPerf,pt=Zt.Telemetry.NativeVariableViewLoaded,ft=Zt.Telemetry.NativeVariableViewMadeVisible,gt=Zt.Telemetry.DataViewerWebviewLoaded,mt=Zt.Telemetry.PlotViewerWebviewLoaded,vt=Zt.Telemetry.CommandExecuted,yt=Zt.Telemetry.DataViewerSliceEnablementStateChanged,bt=Zt.Telemetry.DataViewerDataDimensionality,wt=Zt.Telemetry.DataViewerSliceOperation,St=Zt.Telemetry.CreatePythonEnvironment,Ct=Zt.Telemetry.RecommendExtension,_t=tn.DebuggingTelemetry.clickedOnSetup,Pt=tn.DebuggingTelemetry.closedModal,Et=tn.DebuggingTelemetry.ipykernel6Status,kt=tn.DebuggingTelemetry.clickedRunByLine,It=tn.DebuggingTelemetry.successfullyStartedRunByLine,Dt=tn.DebuggingTelemetry.successfullyStartedIWJupyterDebugger,Tt=tn.DebuggingTelemetry.clickedRunAndDebugCell,xt=tn.DebuggingTelemetry.successfullyStartedRunAndDebugCell,Ot=tn.DebuggingTelemetry.endedSession,Rt=Zt.Telemetry.ExtensionCallerIdentification,Mt=Zt.Telemetry.JupyterKernelApiUsage,At=Zt.Telemetry.JupyterApiUsage,Nt=Zt.Telemetry.JupyterServerProviderResponseApi,jt=Zt.Telemetry.JupyterKernelApiAccess,Ft=Zt.Telemetry.JupyterKernelStartupHook,Lt=Zt.Telemetry.PythonVariableFetchingCodeFailure,Kt=Zt.Telemetry.InteractiveWindowDebugSetupCodeFailure,Ut=Zt.Telemetry.KernelCrash,Wt=Zt.Telemetry.JupyterKernelHiddenViaFilter,Vt=Zt.Telemetry.JupyterKernelFilterUsed,Ht=Zt.Telemetry.RunTest,Bt=Zt.Telemetry.PreferredKernelExactMatch,qt=Zt.Telemetry.JupyterInstalled,Jt=Zt.Telemetry.IPyWidgetExtensionJsInfo,$t=Zt.Telemetry.IPyWidgetNbExtensionCopyTime,Gt=Zt.Telemetry.NoActiveKernelSession,zt=Zt.Telemetry.DataViewerUsingInterpreter,Yt=Zt.Telemetry.DataViewerUsingKernel},81274:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDataViewerDependencyImplementation=void 0;const i=n(25251),o=n(21378),s=n(86563),a=n(9959),c=n(11602),l=n(530),u=n(66828),d=n(11642);class h{constructor(e,t){this.applicationShell=e,this.isCodeSpace=t}async getVersion(e,t){try{const n=await this._getVersion(e,t);return"string"==typeof n?(0,s.parseSemVer)(n):n}catch(e){return void(0,d.traceWarning)(i.DataScience.failedToGetVersionOfPandas,e.message)}}async promptInstall(e,t,n){let r=n?i.DataScience.pandasTooOldForViewingFormat(n,o.pandasMinimumVersionSupportedByVariableViewer):i.DataScience.pandasRequiredForViewing(o.pandasMinimumVersionSupportedByVariableViewer);if((this.isCodeSpace?i.Common.install:await this.applicationShell.showErrorMessage(r,{modal:!0},i.Common.install))!==i.Common.install)throw(0,a.sendTelemetryEvent)(a.Telemetry.UserDidNotInstallPandas),new Error(r);await this._doInstall(e,t)}async checkOrInstall(e){const t=new u.CancellationTokenSource;try{const n=await this.getVersion(e,t.token);if(t.token.isCancellationRequested)return void(0,a.sendTelemetryEvent)(a.Telemetry.PandasInstallCanceled);if(n){if(n.compare(o.pandasMinimumVersionSupportedByVariableViewer)>0)return void(0,a.sendTelemetryEvent)(a.Telemetry.PandasOK);(0,a.sendTelemetryEvent)(a.Telemetry.PandasTooOld);const r=`${n.major}.${n.minor}.${n.build}`;await this.promptInstall(e,t,r)}(0,a.sendTelemetryEvent)(a.Telemetry.PandasNotInstalled),await this.promptInstall(e,t)}finally{t.dispose()}}}t.BaseDataViewerDependencyImplementation=h,r([(0,a.capturePerfTelemetry)(a.Telemetry.PythonModuleInstall,{action:"displayed",moduleName:c.ProductNames.get(l.Product.pandas)})],h.prototype,"promptInstall",null)},21378:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pandasMinimumVersionSupportedByVariableViewer=void 0,t.pandasMinimumVersionSupportedByVariableViewer="0.20.0"},32613:function(e,t,n){"use strict";var r=n(34155),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewer=void 0;const l=n(26594),u=n(66828),d=n(9959),h=n(89112),p=n(19058),f=n(90391),g=n(14783),m=n(2161),v=n(10053),y=n(15925),b=n(11642),w=n(42080),S=a(n(25251)),C=n(11386),_=n(78086),P=n(58681),E=n(52859),k=n(90541),I="JupyterDataViewerPreferredViewColumn";let D=class extends _.WebviewPanelHost{get active(){return!!this.webPanel?.isActive()}get refreshPending(){return this.pendingRowsCount>0}get onDidDisposeDataViewer(){return this._onDidDisposeDataViewer.event}get onDidChangeDataViewerViewState(){return this._onDidChangeDataViewerViewState.event}constructor(e,t,n,r,i,o,s){const a=(0,E.joinPath)(s.extensionUri,"out","webviews","webview-side","viewers");super(t,e,n,((e,t,n)=>new p.DataViewerMessageListener(e,t,n)),a,[(0,E.joinPath)(a,"dataExplorer.js")],S.DataScience.dataExplorerTitle,i.get(I)??u.ViewColumn.One),this.applicationShell=r,this.globalMemento=i,this.errorHandler=o,this.context=s,this.pendingRowsCount=0,this.sentDataViewerSliceDimensionalityTelemetry=!1,this._onDidDisposeDataViewer=new u.EventEmitter,this._onDidChangeDataViewerViewState=new u.EventEmitter,this.onDidDispose(this.dataViewerDisposed,this)}async showData(e,t){if(!this.isDisposed){this.dataProvider=e,await super.loadWebview(u.Uri.file(r.cwd())).catch(b.traceError),super.setTitle(t),await super.show(!0);let n=await this.prepDataFrameInfo();if(n.shape&&n.shape.length>2){this.maybeSendSliceDataDimensionalityTelemetry(n.shape.length);const e=(0,g.preselectedSliceExpression)(n.shape);n=await this.getDataFrameInfo(e)}this.postMessage(f.DataViewerMessages.InitializeData,n).catch(P.noop)}}get kernel(){if(this.dataProvider&&"kernel"in this.dataProvider)return this.dataProvider.kernel}dataViewerDisposed(){this._onDidDisposeDataViewer.fire(this)}async refreshData(){const e=this.currentSliceExpression;this.dataFrameInfoPromise=void 0;let t=await this.getDataFrameInfo(void 0,!0);if(void 0!==e&&void 0!==t.shape)if((0,g.isValidSliceExpression)(e,t.shape))t=await this.getDataFrameInfo(e);else{const e=(0,g.preselectedSliceExpression)(t.shape);t=await this.getDataFrameInfo(e)}(0,b.traceInfo)(`Refreshing data viewer for variable ${t.name}`),this.postMessage(f.DataViewerMessages.InitializeData,t).catch(P.noop)}dispose(){super.dispose(),this.dataProvider&&(this.dataProvider.dispose(),this.dataProvider=void 0)}async onViewStateChanged(e){e.current.active&&e.current.visible&&e.previous.active&&e.current.visible&&await this.globalMemento.update(I,this.webPanel?.viewColumn),this._onDidChangeDataViewerViewState.fire()}get owningResource(){}onMessage(e,t){switch(e){case f.DataViewerMessages.GetAllRowsRequest:this.getAllRows(t).catch(P.noop);break;case f.DataViewerMessages.GetRowsRequest:this.getRowChunk(t).catch(P.noop);break;case f.DataViewerMessages.GetSliceRequest:this.getSlice(t).catch(P.noop);break;case f.DataViewerMessages.RefreshDataViewer:this.refreshData().catch(P.noop),(0,d.sendTelemetryEvent)(y.Telemetry.RefreshDataViewer);break;case f.DataViewerMessages.SliceEnablementStateChanged:(0,d.sendTelemetryEvent)(y.Telemetry.DataViewerSliceEnablementStateChanged,void 0,{newState:t.newState?m.CheckboxState.Checked:m.CheckboxState.Unchecked})}super.onMessage(e,t)}getDataFrameInfo(e,t){return this.dataFrameInfoPromise&&e===this.currentSliceExpression||(this.dataFrameInfoPromise=this.dataProvider?this.dataProvider.getDataFrameInfo(e,t):Promise.resolve({}),this.currentSliceExpression=e),this.dataFrameInfoPromise}async prepDataFrameInfo(){this.rowsTimer=new C.StopWatch;const e=await this.getDataFrameInfo();try{(0,d.sendTelemetryEvent)(y.Telemetry.ShowDataViewer,void 0,{rows:e.rowCount?e.rowCount:0,columns:e.columns?e.columns.length:0}),this.pendingRowsCount=e.rowCount?e.rowCount:0}catch{(0,P.noop)()}return e}async getAllRows(e){return this.wrapRequest((async()=>{if(this.dataProvider){const t=await this.dataProvider.getAllRows(e);return this.pendingRowsCount=0,this.postMessage(f.DataViewerMessages.GetAllRowsResponse,t)}}))}getSlice(e){return this.wrapRequest((async()=>{if(this.dataProvider){const t=await this.getDataFrameInfo(e.slice);return t.shape?.length&&this.maybeSendSliceDataDimensionalityTelemetry(t.shape.length),(0,d.sendTelemetryEvent)(y.Telemetry.DataViewerSliceOperation,void 0,{source:e.source}),this.postMessage(f.DataViewerMessages.InitializeData,t)}}))}getRowChunk(e){return this.wrapRequest((async()=>{if(this.dataProvider){const t=await this.getDataFrameInfo(e.sliceExpression),n=await this.dataProvider.getRows(e.start,Math.min(e.end,t.rowCount?t.rowCount:0),e.sliceExpression);return this.pendingRowsCount=Math.max(0,this.pendingRowsCount-n.length),this.postMessage(f.DataViewerMessages.GetRowsResponse,{rows:n,start:e.start,end:e.end})}}))}async wrapRequest(e){try{return await e()}catch(e){if(e instanceof h.JupyterDataRateLimitError){(0,b.traceError)(e.message);const t=S.DataScience.pythonInteractiveHelpLink;this.applicationShell.showErrorMessage(S.DataScience.jupyterDataRateExceeded,t).then((e=>{e===t&&this.applicationShell.openUrl(y.HelpLinks.JupyterDataRateHelpLink)}),P.noop),this.dispose()}(0,b.traceError)(e),this.errorHandler.handleError(e).then(P.noop,P.noop)}finally{this.sendElapsedTimeTelemetry()}}sendElapsedTimeTelemetry(){this.rowsTimer&&0===this.pendingRowsCount&&(0,d.sendTelemetryEvent)(y.Telemetry.ShowDataViewerRowsLoaded,void 0,{rowsTimer:this.rowsTimer.elapsedTime})}maybeSendSliceDataDimensionalityTelemetry(e){this.sentDataViewerSliceDimensionalityTelemetry||((0,d.sendTelemetryEvent)(y.Telemetry.DataViewerDataDimensionality,{numberOfDimensions:e}),this.sentDataViewerSliceDimensionalityTelemetry=!0)}};t.DataViewer=D,s([(0,d.capturePerfTelemetry)(y.Telemetry.DataViewerWebviewLoaded)],D.prototype,"showData",null),t.DataViewer=D=s([(0,l.injectable)(),c(0,(0,l.inject)(v.IWebviewPanelProvider)),c(1,(0,l.inject)(w.IConfigurationService)),c(2,(0,l.inject)(v.IWorkspaceService)),c(3,(0,l.inject)(v.IApplicationShell)),c(4,(0,l.inject)(w.IMemento)),c(4,(0,l.named)(w.GLOBAL_MEMENTO)),c(5,(0,l.inject)(k.IDataScienceErrorHandler)),c(6,(0,l.inject)(w.IExtensionContext))],D)},724:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerChecker=void 0;const r=n(66828),i=n(25251),o=n(58681),s=n(90391);t.DataViewerChecker=class{constructor(e,t){this.configuration=e,this.applicationShell=t}async isRequestedColumnSizeAllowed(e,t){if(e>s.ColumnWarningSize&&await this.shouldAskForLargeData(t)){const e=i.DataScience.tooManyColumnsMessage,t=i.DataScience.tooManyColumnsYes,n=i.DataScience.tooManyColumnsNo,r=i.DataScience.tooManyColumnsDontAskAgain,o=await this.applicationShell.showWarningMessage(e,t,n,r);return o===r&&await this.disableAskForLargeData(),o===t}return!0}async shouldAskForLargeData(e){const t=e?this.configuration.getSettings(e):this.configuration.getSettings();return t&&!0===t.askForLargeDataFrames}async disableAskForLargeData(e){const t=e?this.configuration.getSettings(e):this.configuration.getSettings();t&&(t.askForLargeDataFrames=!1,this.configuration.updateSetting("askForLargeDataFrames",!1,void 0,r.ConfigurationTarget.Global).catch(o.noop))}}},9571:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerCommandRegistry=void 0;const o=n(26594),s=n(66828),a=n(50068),c=n(7214),l=n(10053),u=n(15925),d=n(83599),h=n(42080),p=n(25251),f=n(58681),g=n(72728),m=n(84570),v=n(11642),y=n(9959),b=n(2161),w=n(90541),S=n(724),C=n(90391);let _=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d,h){this.disposables=e,this.commandManager=t,this.debugService=n,this.jupyterVariableDataProviderFactory=o,this.dataViewerFactory=s,this.variableProvider=a,this.workspace=c,this.errorHandler=l,this.dataViewerDependencyService=u,this.interpreterService=d,this.platformService=h,this.dataViewerChecker=new S.DataViewerChecker(r,i),this.workspace.isTrusted||this.workspace.onDidGrantWorkspaceTrust(this.registerCommandsIfTrusted,this,this.disposables)}activate(){this.registerCommandsIfTrusted()}registerCommandsIfTrusted(){this.workspace.isTrusted&&this.registerCommand(u.Commands.ShowDataViewer,this.onVariablePanelShowDataViewerRequest)}registerCommand(e,t){const n=this.commandManager.registerCommand(e,t,this);this.disposables.push(n)}async onVariablePanelShowDataViewerRequest(e){if((0,y.sendTelemetryEvent)(b.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST),this.debugService?.activeDebugSession&&this.variableProvider&&this.jupyterVariableDataProviderFactory&&this.dataViewerFactory)try{if(this.debugService.activeDebugSession.configuration&&this.dataViewerDependencyService&&this.interpreterService){const e=await this.getDebugAdapterPython(this.debugService.activeDebugSession.configuration);e&&await this.dataViewerDependencyService.checkAndInstallMissingDependencies(e)}const t=(0,a.convertDebugProtocolVariableToIJupyterVariable)(e.variable),n=await this.variableProvider.getFullVariable(t),r=await this.jupyterVariableDataProviderFactory.create(n),i=await r.getDataFrameInfo(),o=i?.columns?.length;if(o&&await this.dataViewerChecker.isRequestedColumnSizeAllowed(o)){const e=`${p.DataScience.dataExplorerTitle} - ${n.name}`;await this.dataViewerFactory.create(r,e),(0,y.sendTelemetryEvent)(b.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS)}}catch(e){(0,y.sendTelemetryEvent)(b.EventName.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR,void 0,void 0,e),(0,v.traceError)(e),this.errorHandler.handleError(e).then(f.noop,f.noop)}}async getDebugAdapterPython(e){if(!this.interpreterService)return void(0,v.traceInfo)("Interpreter Service missing when trying getDebugAdapterPython");let t="";if(void 0!==e.debugAdapterPython?((0,v.traceInfo)("Found debugAdapterPython on Debug Configuration to use"),t=e.debugAdapterPython):e.pythonPath&&((0,v.traceInfo)("Found pythonPath on Debug Configuration to use"),t=e.pythonPath),t){let e=t;return e.startsWith("~")&&this.platformService.homeDir&&(e=(0,g.untildify)(e,this.platformService.homeDir.path)),this.interpreterService.getInterpreterDetails(s.Uri.file(e))}return this.interpreterService.getActiveInterpreter()}};t.DataViewerCommandRegistry=_,t.DataViewerCommandRegistry=_=r([(0,o.injectable)(),i(0,(0,o.inject)(h.IDisposableRegistry)),i(1,(0,o.inject)(l.ICommandManager)),i(2,(0,o.inject)(l.IDebugService)),i(2,(0,o.optional)()),i(3,(0,o.inject)(h.IConfigurationService)),i(4,(0,o.inject)(l.IApplicationShell)),i(5,(0,o.inject)(C.IJupyterVariableDataProviderFactory)),i(5,(0,o.optional)()),i(6,(0,o.inject)(C.IDataViewerFactory)),i(6,(0,o.optional)()),i(7,(0,o.inject)(c.IJupyterVariables)),i(7,(0,o.optional)()),i(7,(0,o.named)(u.Identifiers.DEBUGGER_VARIABLES)),i(8,(0,o.inject)(l.IWorkspaceService)),i(9,(0,o.inject)(w.IDataScienceErrorHandler)),i(10,(0,o.inject)(C.IDataViewerDependencyService)),i(10,(0,o.optional)()),i(11,(0,o.inject)(m.IInterpreterService)),i(11,(0,o.optional)()),i(12,(0,o.inject)(d.IPlatformService))],_)},96663:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerDependencyService=void 0;const o=n(26594),s=n(10053),a=n(42080),c=n(11461);let l=class{constructor(e,t){this.withKernel=new c.KernelDataViewerDependencyImplementation(e,t)}async checkAndInstallMissingDependencies(e){return this.withKernel.checkAndInstallMissingDependencies(e)}};t.DataViewerDependencyService=l,t.DataViewerDependencyService=l=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IApplicationShell)),i(1,(0,o.inject)(a.IsCodeSpace))],l)},48334:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerFactory=void 0;const s=n(26594),a=n(9959),c=n(90391),l=o(n(23279)),u=n(10053),d=n(29444),h=n(42080),p=n(41778),f=n(58681),g=n(15925);let m=class{constructor(e,t,n,r){this.serviceContainer=e,this.disposables=n,this.commandManager=r,this.knownViewers=new Set,this.refreshDataViewer=(0,l.default)((()=>{for(const e of this.knownViewers)e.active&&e.refreshData().then(f.noop,f.noop)}),1e3),t.push(this),this.viewContext=new d.ContextKey(g.EditorContexts.IsDataViewerActive,this.commandManager),this.disposables.push(this.commandManager.registerCommand(g.Commands.RefreshDataViewer,this.refreshDataViewer,this))}async dispose(){for(const e of this.knownViewers)e.dispose()}async create(e,t){let n;const r=this.serviceContainer.get(c.IDataViewer);try{this.knownViewers.add(r),r.onDidDisposeDataViewer(this.updateOpenDataViewers,this,this.disposables),r.onDidChangeDataViewerViewState(this.updateViewStateContext,this,this.disposables),await r.showData(e,t),n=r}finally{n||r.dispose()}return n}get activeViewer(){return[...this.knownViewers.values()].find((e=>e.active))}updateOpenDataViewers(e){this.knownViewers.delete(e)}async updateViewStateContext(){let e=!1;this.knownViewers.forEach((t=>{t.active&&(e=!0)})),await this.viewContext.set(e)}};t.DataViewerFactory=m,r([(0,a.capturePerfTelemetry)(g.Telemetry.StartShowDataViewer)],m.prototype,"create",null),t.DataViewerFactory=m=r([(0,s.injectable)(),i(0,(0,s.inject)(p.IServiceContainer)),i(1,(0,s.inject)(h.IAsyncDisposableRegistry)),i(2,(0,s.inject)(h.IDisposableRegistry)),i(3,(0,s.inject)(u.ICommandManager))],m)},19058:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewerMessageListener=void 0,t.DataViewerMessageListener=class{constructor(e,t,n){this.disposedCallback=n,this.callback=e,this.viewChanged=t}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}onChangeViewState(e){this.viewChanged(e)}}},64752:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterVariableDataProvider=void 0;const s=n(26594),a=n(90391),c=n(7214),l=n(11642),u=n(15925),d=n(35412),h=n(58681);let p=r=class{constructor(e,t){this.variableManager=e,this.dependencyService=t,this.initialized=!1}get kernel(){return this._kernel}static getNormalizedColumns(e){return e.map((e=>{let t;switch(e.type){case"bool":t=a.ColumnType.Bool;break;case"integer":case"int32":case"int64":case"float":case"float32":case"float64":case"number":t=a.ColumnType.Number;break;default:t=a.ColumnType.String}return{key:e.key,type:t}}))}static parseShape(e){try{if(e.startsWith("(")&&e.endsWith(")"))return e.substring(1,e.length-1).split(",").map((e=>parseInt(e)))}catch(t){(0,l.traceError)(`Could not parse IJupyterVariable with malformed shape: ${e}`)}}dispose(){}setDependencies(e,t){this._kernel=t,this.variable=e}async getDataFrameInfo(e,t){let n={};await this.ensureInitialized();let i=this.variable;return i&&((e||t)&&(i=await this.variableManager.getDataFrameInfo(i,this._kernel,e,t)),n={columns:i.columns?r.getNormalizedColumns(i.columns):i.columns,indexColumn:i.indexColumn,rowCount:i.rowCount,dataDimensionality:i.dataDimensionality,shape:r.parseShape(i.shape),sliceExpression:e,type:i.type,maximumRowChunkSize:i.maximumRowChunkSize,name:i.name,fileName:(0,d.getFilePath)(i.fileName)}),t&&(this.variable=i),n}async getAllRows(e){let t=[];return await this.ensureInitialized(),this.variable&&this.variable.rowCount&&(t=(await this.variableManager.getDataFrameRows(this.variable,0,this.variable.rowCount,this._kernel,e)).data),t}async getRows(e,t,n){let r=[];return await this.ensureInitialized(),this.variable&&this.variable.rowCount&&(r=(await this.variableManager.getDataFrameRows(this.variable,e,t,this._kernel,n)).data),r}async ensureInitialized(){!this.initialized&&this.variable&&(this.initialized=!0,this._kernel?.kernelConnectionMetadata&&this.dependencyService&&await this.dependencyService.checkAndInstallMissingDependencies((0,h.isWeb)()?this._kernel:this._kernel?.kernelConnectionMetadata.interpreter||this._kernel),this.variable=await this.variableManager.getDataFrameInfo(this.variable,this._kernel))}};t.JupyterVariableDataProvider=p,t.JupyterVariableDataProvider=p=r=i([(0,s.injectable)(),o(0,(0,s.inject)(c.IJupyterVariables)),o(0,(0,s.named)(u.Identifiers.ALL_VARIABLES)),o(1,(0,s.inject)(a.IDataViewerDependencyService)),o(1,(0,s.optional)())],p)},70997:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterVariableDataProviderFactory=void 0;const o=n(26594),s=n(41778),a=n(90391);let c=class{constructor(e){this.serviceContainer=e}async create(e,t){const n=this.serviceContainer.get(a.IJupyterVariableDataProvider);return n.setDependencies(e,t),n}};t.JupyterVariableDataProviderFactory=c,t.JupyterVariableDataProviderFactory=c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],c)},11461:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelDataViewerDependencyImplementation=t.kernelGetPandasVersion=void 0;const r=n(11642),i=n(25251),o=n(47891),s=n(9959),a=n(98729),c=n(81274),l=n(65864);t.kernelGetPandasVersion="import pandas as _VSCODE_pandas;print(_VSCODE_pandas.__version__);del _VSCODE_pandas";class u extends c.BaseDataViewerDependencyImplementation{async execute(e,t){if(!t.session?.kernel)throw new l.SessionDisposedError;const n=await(0,a.executeSilently)(t.session.kernel,e),o=n.find((e=>"error"===e.output_type));return o&&(0,r.traceWarning)(i.DataScience.failedToGetVersionOfPandas,o.message),n.map((e=>e.text?.toString()))}async _getVersion(e){return(await this.execute(t.kernelGetPandasVersion,e)).map((e=>e?e.toString():void 0)).find((e=>e))}async _doInstall(e){const t=`${function(e){const t=e.kernelConnectionMetadata.interpreter?.envType;return t===o.EnvironmentType.Conda?"%conda":"%pip"}(e)} install pandas`;try{await this.execute(t,e),(0,s.sendTelemetryEvent)(s.Telemetry.UserInstalledPandas)}catch(e){throw(0,s.sendTelemetryEvent)(s.Telemetry.UserInstalledPandas,void 0,void 0,e),new Error(i.DataScience.failedToInstallPandas)}}async checkAndInstallMissingDependencies(e){if((0,s.sendTelemetryEvent)(s.Telemetry.DataViewerUsingKernel),!e.session?.kernel)throw(0,s.sendTelemetryEvent)(s.Telemetry.NoActiveKernelSession),new Error("No no active kernel session.");await this.checkOrInstall(e)}}t.KernelDataViewerDependencyImplementation=u},90391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDataViewerDependencyService=t.IJupyterVariableDataProviderFactory=t.IJupyterVariableDataProvider=t.IDataViewer=t.IDataViewerFactory=t.ColumnType=t.DataViewerMessages=t.DataViewerRowStates=t.ColumnWarningSize=t.MaxStringCompare=t.CellFetchSizeSubsequent=t.CellFetchSizeFirst=t.CellFetchAllLimit=void 0;const r=n(30682);var i,o,s;t.CellFetchAllLimit=1e5,t.CellFetchSizeFirst=1e5,t.CellFetchSizeSubsequent=1e6,t.MaxStringCompare=200,t.ColumnWarningSize=1e3,function(e){e.Fetching="fetching",e.Skipped="skipped"}(i||(t.DataViewerRowStates=i={})),function(e){e.Started=r.SharedMessages.Started,e.UpdateSettings=r.SharedMessages.UpdateSettings,e.InitializeData="init",e.GetAllRowsRequest="get_all_rows_request",e.GetAllRowsResponse="get_all_rows_response",e.GetRowsRequest="get_rows_request",e.GetRowsResponse="get_rows_response",e.CompletedData="complete",e.GetSliceRequest="get_slice_request",e.RefreshDataViewer="refresh_data_viewer",e.SliceEnablementStateChanged="slice_enablement_state_changed"}(o||(t.DataViewerMessages=o={})),function(e){e.String="string",e.Number="number",e.Bool="bool"}(s||(t.ColumnType=s={})),t.IDataViewerFactory=Symbol("IDataViewerFactory"),t.IDataViewer=Symbol("IDataViewer"),t.IJupyterVariableDataProvider=Symbol("IJupyterVariableDataProvider"),t.IJupyterVariableDataProviderFactory=Symbol("IJupyterVariableDataProviderFactory"),t.IDataViewerDependencyService=Symbol("IDataViewerDependencyService")},6243:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPyWidgetRendererComms=void 0;const o=n(26594),s=n(66828),a=n(94062),c=n(50867),l=n(15925),u=n(20397),d=n(58681),h=n(11642);let p=class{constructor(e,t){this.kernelProvider=e,this.controllers=t,this.disposables=[],this.widgetOutputsPerNotebook=new WeakMap}dispose(){(0,u.dispose)(this.disposables)}activate(){const e=s.notebooks.createRendererMessaging("jupyter-ipywidget-renderer");e.onDidReceiveMessage(this.onDidReceiveMessage.bind(this,e),this,this.disposables),this.kernelProvider.onDidStartKernel(this.onDidStartKernel,this,this.disposables)}onDidStartKernel(e){this.hookupKernel(e),e.onStarted((()=>this.hookupKernel(e)),this,this.disposables),e.onRestarted((()=>this.hookupKernel(e)),this,this.disposables)}hookupKernel(e){this.widgetOutputsPerNotebook.delete(e.notebook);const t=e.session?.kernel,r=e.session?.kernel?.iopubMessage;if(!r)return;const i=n(76240),o=(n,r)=>{n===t&&(i.KernelMessage.isDisplayDataMsg(r)||i.KernelMessage.isUpdateDisplayDataMsg(r)||i.KernelMessage.isExecuteReplyMsg(r)||i.KernelMessage.isExecuteResultMsg(r))&&this.trackModelId(e.notebook,r)};r.connect(o),this.disposables.push(new s.Disposable((()=>r.disconnect(o))))}trackModelId(e,t){const n=t.content;if(n.data&&"object"==typeof n.data&&l.WIDGET_MIMETYPE in n.data){const t=n.data[l.WIDGET_MIMETYPE];if(t&&"model_id"in t){const n=this.widgetOutputsPerNotebook.get(e)||new Set;n.add(t.model_id),this.widgetOutputsPerNotebook.set(e,n)}}}onDidReceiveMessage(e,{editor:t,message:n}){n&&"object"==typeof n&&"query-widget-state"===n.command&&this.queryWidgetState(e,t,n),n&&"object"==typeof n&&"ipywidget-renderer-loaded"===n.command&&this.sendWidgetVersionAndState(e,t)}queryWidgetState(e,t,n){const r=this.widgetOutputsPerNotebook.get(t.notebook),i=!!this.controllers.getSelected(t.notebook),o=!!r?.has(n.model_id);e.postMessage({command:"query-widget-state",model_id:n.model_id,hasWidgetState:o,kernelSelected:i},t).then(d.noop,d.noop)}sendWidgetVersionAndState(e,t){const n=this.kernelProvider.get(t.notebook),r=n?.ipywidgetsVersion;n?.ipywidgetsVersion&&(0,h.traceVerbose)(`IPyWidget version in Kernel is ${n?.ipywidgetsVersion}.`);const i=!!this.controllers.getSelected(t.notebook);e.postMessage({command:"ipywidget-renderer-init",version:r,widgetState:void 0,kernelSelected:i},t).then(d.noop,d.noop)}};t.IPyWidgetRendererComms=p,t.IPyWidgetRendererComms=p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IKernelProvider)),i(1,(0,o.inject)(c.IControllerRegistration))],p)},55635:function(e,t,n){"use strict";var r=n(48764).lW,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},c=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlotSaveHandler=t.imageExtensionForMimeType=t.svgMimeType=void 0;const l=n(26594),u=n(66828),d=a(n(15948)),h=n(10053),p=n(11642),f=n(35412),g=n(83599),m=n(25251);t.svgMimeType="image/svg+xml",t.imageExtensionForMimeType={"image/png":"png","image/jpeg":"jpeg","image/gif":"gif",[t.svgMimeType]:"svg"};let v=class{constructor(e,t,n){this.shell=e,this.fs=t,this.workspace=n}async savePlot(e,n,r){if(e.isClosed)return;const i=function(e,t,n){for(const r of e.getCells())for(const e of r.outputs)if(e.id===t&&e.items.find((e=>e.mime===n)))return e}(e,n,r);if(!i)return(0,p.traceError)(`No plot to save ${(0,f.getDisplayPath)(e.uri)}, id: ${n} for ${r}`);if(!(r.toLowerCase()in t.imageExtensionForMimeType))return(0,p.traceError)(`Unsupported MimeType ${(0,f.getDisplayPath)(e.uri)}, id: ${n} for ${r}`);const o=await this.getSaveTarget(i,r);o&&(o.path.toLowerCase().endsWith("pdf")?await this.saveAsPdf(i,o):await this.saveAsImage(i,o))}getSaveTarget(e,n){const r=t.imageExtensionForMimeType[n.toLowerCase()],i={};e.items.find((e=>e.mime.toLowerCase()===t.svgMimeType))&&(i[m.DataScience.pdfFilter]=["pdf"],i[m.DataScience.svgFilter]=["svg"]),"png"===r&&(i[m.DataScience.pngFilter]=["png"]),0===Object.keys(i).length&&(i.Images=[r]);const o=(this.workspace.workspaceFolders?.length||0)>0?this.workspace.workspaceFolders[0].uri:void 0,s=`output.${r}`,a=o?u.Uri.joinPath(o,s):u.Uri.file(s);return this.shell.showSaveDialog({defaultUri:a,saveLabel:m.DataScience.exportPlotTitle,filters:i})}async saveAsImage(e,n){const i=d.extname(n.path).substring(1),o=Object.keys(t.imageExtensionForMimeType).find((e=>t.imageExtensionForMimeType[e]===i)),s=e.items.find((e=>e.mime===o));if(!s)throw new Error(`Unsupported MimeType ${n.toString()}, available mime Types: ${e.items.map((e=>e.mime)).join(", ")}`);await this.fs.writeFile(n,r.from(s.data))}async saveAsPdf(e,t){return(0,p.traceError)("Save as PDF is not yet supported on the web.")}};t.PlotSaveHandler=v,t.PlotSaveHandler=v=s([(0,l.injectable)(),c(0,(0,l.inject)(h.IApplicationShell)),c(1,(0,l.inject)(g.IFileSystem)),c(2,(0,l.inject)(h.IWorkspaceService))],v)},94981:function(e,t,n){"use strict";var r=n(48764).lW,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPngDimensions=t.PlotViewHandler=void 0;const s=n(26594),a=n(11642),c=n(35412),l=n(45047);let u=class{constructor(e){this.plotViewProvider=e}async openPlot(e,t){if(e.isClosed)return;const n=d(e,t,"image/svg+xml");let i;if(n)i=(new TextDecoder).decode(n.data);else{const n=d(e,t,"image/png");if(!n)return(0,a.traceError)(`No SVG or PNG Plot to open ${(0,c.getDisplayPath)(e.uri)}, id: ${t}`);i=function(e){const t=r.from(e.data),n=t.toString("base64"),i=h(t);return`<?xml version="1.0" encoding="utf-8" standalone="no"?>\n<svg height="${i.height}" width="${i.width}" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g>\n        <image xmlns="http://www.w3.org/2000/svg" x="0" y="0" height="100%" width="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="data:image/png;base64,${n}"/>\n    </g>\n</svg>`}(n)}i&&await this.plotViewProvider.showPlot(i)}};function d(e,t,n){for(const r of e.getCells())for(const e of r.outputs)if(e.id===t)return e.items.find((e=>e.mime===n))}function h(e){if(!function(e){return 137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7]&&e.length>29}(e))throw new Error("The buffer is not a valid png");return{width:e.readUInt32BE(16),height:e.readUInt32BE(20)}}t.PlotViewHandler=u,t.PlotViewHandler=u=i([(0,s.injectable)(),o(0,(0,s.inject)(l.IPlotViewerProvider))],u),t.getPngDimensions=h},95185:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RendererCommunication=void 0;const o=n(26594),s=n(66828),a=n(15925),c=n(20397),l=n(58681),u=n(94981),d=n(86522);let h=class{constructor(e,t){this.plotSaveHandler=e,this.plotViewHandler=t,this.disposables=[]}dispose(){(0,c.dispose)(this.disposables)}activate(){this.activateImpl().catch(l.noop)}async activateImpl(){const e=s.extensions.getExtension(a.RendererExtension);e&&(e.isActive||await e.activate(),e.exports.onDidReceiveMessage((({editor:e,message:t})=>{const n=e.notebook||s.window.activeNotebookEditor?.notebook;n&&("saveImageAs"===t.type?this.plotSaveHandler.savePlot(n,t.outputId,t.mimeType).catch(l.noop):"openImageInPlotViewer"===t.type&&this.plotViewHandler.openPlot(n,t.outputId).catch(l.noop))}),this,this.disposables))}};t.RendererCommunication=h,t.RendererCommunication=h=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IPlotSaveHandler)),i(1,(0,o.inject)(u.PlotViewHandler))],h)},86522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPlotSaveHandler=void 0,t.IPlotSaveHandler=Symbol("IPlotSaveHandler")},16798:function(e,t,n){"use strict";var r=n(34155),i=n(48764).lW,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},l=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlotViewer=void 0;const u=n(26594),d=c(n(15948)),h=n(66828),p=n(11642),f=n(48233),g=n(45047),m=n(10053),v=n(42080),y=n(83599),b=c(n(25251)),w=n(78086),S=n(52859),C=n(58681),_=n(9959),P=n(11386);let E=class extends w.WebviewPanelHost{constructor(e,t,n,i,o,s){const a=new P.StopWatch,c=(0,S.joinPath)(s.extensionUri,"out","webviews","webview-side","viewers");super(t,e,n,((e,t,n)=>new f.PlotViewerMessageListener(e,t,n)),c,[(0,S.joinPath)(c,"plotViewer.js")],b.DataScience.plotViewerTitle,h.ViewColumn.One),this.applicationShell=i,this.fs=o,this.context=s,this.closedEvent=new h.EventEmitter,this.removedEvent=new h.EventEmitter,this.addPlot=async e=>{this.isDisposed||(await super.show(!1),this.postMessage(g.PlotViewerMessages.SendPlot,e).catch(C.noop))},super.loadWebview(h.Uri.file(r.cwd())).catch(p.traceError).finally((()=>{(0,_.sendTelemetryEvent)(_.Telemetry.PlotViewerWebviewLoaded,{duration:a.elapsedTime})}))}get closed(){return this.closedEvent.event}get removed(){return this.removedEvent.event}async show(){if(!this.isDisposed)return super.show(!0)}dispose(){super.dispose(),this.removedEvent.dispose(),this.closedEvent&&this.closedEvent.fire(this)}get owningResource(){}onMessage(e,t){switch(e){case g.PlotViewerMessages.CopyPlot:this.copyPlot(t.toString()).catch(C.noop);break;case g.PlotViewerMessages.ExportPlot:this.exportPlot(t).catch(C.noop);break;case g.PlotViewerMessages.RemovePlot:this.removePlot(t)}super.onMessage(e,t)}removePlot(e){this.removedEvent.fire(e)}copyPlot(e){return Promise.resolve()}async exportPlot(e){(0,p.traceInfo)("exporting plot...");const t={};t[b.DataScience.pngFilter]=["png"],t[b.DataScience.svgFilter]=["svg"];const n=await this.applicationShell.showSaveDialog({saveLabel:b.DataScience.exportPlotTitle,filters:t});try{if(n)if(".png"===d.extname(n.path).toLowerCase()){const t=i.from(e.png.replace("data:image/png;base64",""),"base64");await this.fs.writeFile(n,t)}else await this.fs.writeFile(n,e.svg)}catch(e){(0,p.traceError)(e),this.applicationShell.showErrorMessage(b.DataScience.exportImageFailed(e.toString())).then(C.noop,C.noop)}}};t.PlotViewer=E,t.PlotViewer=E=a([(0,u.injectable)(),l(0,(0,u.inject)(m.IWebviewPanelProvider)),l(1,(0,u.inject)(v.IConfigurationService)),l(2,(0,u.inject)(m.IWorkspaceService)),l(3,(0,u.inject)(m.IApplicationShell)),l(4,(0,u.inject)(y.IFileSystem)),l(5,(0,u.inject)(v.IExtensionContext))],E)},48233:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlotViewerMessageListener=void 0,t.PlotViewerMessageListener=class{constructor(e,t,n){this.disposedCallback=n,this.callback=e,this.viewChanged=t}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}onChangeViewState(e){this.viewChanged&&this.viewChanged(e)}}},93704:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlotViewerProvider=void 0;const o=n(26594),s=n(45047),a=n(42080),c=n(41778),l=n(9959);let u=class{constructor(e,t){this.serviceContainer=e,this.imageList=[],this.closedViewer=()=>{this.currentViewer&&(this.currentViewer=void 0),this.currentViewerClosed&&(this.currentViewerClosed.dispose(),this.currentViewerClosed=void 0)},this.removedPlot=e=>{this.imageList.splice(e,1)},t.push(this)}async dispose(){this.currentViewer&&this.currentViewer.dispose()}async showPlot(e){this.imageList.push(e);const t=this.currentViewer?[e]:this.imageList,n=await this.getOrCreate();await Promise.all(t.map(n.addPlot))}async getOrCreate(){return this.currentViewer||(this.currentViewer=this.serviceContainer.get(s.IPlotViewer),this.currentViewerClosed=this.currentViewer.closed(this.closedViewer),this.currentViewer.removed(this.removedPlot),(0,l.sendTelemetryEvent)(l.Telemetry.OpenPlotViewer),await this.currentViewer.show()),this.currentViewer}};t.PlotViewerProvider=u,t.PlotViewerProvider=u=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer)),i(1,(0,o.inject)(a.IAsyncDisposableRegistry))],u)},45047:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPlotViewer=t.IPlotViewerProvider=t.IPlotViewerMapping=t.PlotViewerMessages=void 0;const r=n(30682);var i;!function(e){e.Started=r.SharedMessages.Started,e.UpdateSettings=r.SharedMessages.UpdateSettings,e.SendPlot="send_plot",e.CopyPlot="copy_plot",e.ExportPlot="export_plot",e.RemovePlot="remove_plot"}(i||(t.PlotViewerMessages=i={})),t.IPlotViewerMapping=class{},i.Started,i.UpdateSettings,i.SendPlot,i.CopyPlot,i.ExportPlot,i.RemovePlot,t.IPlotViewerProvider=Symbol("IPlotViewerProvider"),t.IPlotViewer=Symbol("IPlotViewer")},61480:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(52891),i=n(55231),o=n(67726),s=n(64752),a=n(70997),c=n(90391),l=n(9571),u=n(79708),d=n(48334),h=n(32613),p=n(52064),f=n(96663),g=n(45047),m=n(16798),v=n(93704),y=n(55635),b=n(94981),w=n(95185),S=n(86522),C=n(6243);t.registerTypes=function(e){e.addSingleton(p.IExtensionSyncActivationService,w.RendererCommunication),e.addSingleton(p.IExtensionSyncActivationService,l.DataViewerCommandRegistry),e.add(c.IDataViewer,h.DataViewer),e.addSingleton(c.IDataViewerFactory,d.DataViewerFactory),e.addSingleton(c.IDataViewerDependencyService,f.DataViewerDependencyService),e.add(g.IPlotViewer,m.PlotViewer),e.addSingleton(g.IPlotViewerProvider,v.PlotViewerProvider),e.addSingleton(S.IPlotSaveHandler,y.PlotSaveHandler),e.addSingleton(b.PlotViewHandler,b.PlotViewHandler),e.addSingleton(i.INotebookWatcher,u.NotebookWatcher),e.addSingleton(p.IExtensionSyncActivationService,r.VariableViewActivationService),e.addSingleton(p.IExtensionSyncActivationService,C.IPyWidgetRendererComms),e.addSingleton(i.IVariableViewProvider,o.VariableViewProvider),e.add(c.IJupyterVariableDataProvider,s.JupyterVariableDataProvider),e.addSingleton(c.IJupyterVariableDataProviderFactory,a.JupyterVariableDataProviderFactory)}},79708:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookWatcher=void 0;const o=n(26594),s=n(66828),a=n(94062),c=n(135),l=n(10053),u=n(42080),d=n(90391),h=n(15925),p=n(86563);var f;!function(e){e[e.executed=0]="executed",e[e.restarted=1]="restarted"}(f||(f={}));let g=class{get onDidChangeActiveNotebook(){return this._onDidChangeActiveNotebook.event}get onDidFinishExecutingActiveNotebook(){return this._onDidFinisheExecutingActiveNotebook.event}get onDidRestartActiveNotebook(){return this._onDidRestartActiveNotebook.event}get activeKernel(){const e=this.notebooks.activeNotebookEditor?.notebook,t=e?.notebookType==h.JupyterNotebookView?this.kernelProvider.get(e):void 0;if(t)return t;const n=this.getActiveInteractiveWindowDocument(),r=n?this.kernelProvider.get(n):void 0;if(r)return r;const i=this.dataViewerFactory.activeViewer;return i?this.kernelProvider.kernels.find((e=>e===i.kernel)):void 0}get activeNotebookExecutionCount(){const e=this.activeKernel?.notebook;return e?this._executionCountTracker.get(e):void 0}constructor(e,t,n,r,i){this.interactiveWindowProvider=e,this.kernelProvider=t,this.dataViewerFactory=n,this.disposables=r,this.notebooks=i,this._onDidFinisheExecutingActiveNotebook=new s.EventEmitter,this._onDidChangeActiveNotebook=new s.EventEmitter,this._onDidRestartActiveNotebook=new s.EventEmitter,this._executionCountTracker=new WeakMap,this.notebooks.onDidChangeActiveNotebookEditor(this.activeEditorChanged,this,this.disposables),this.notebooks.onDidCloseNotebookDocument(this.notebookEditorClosed,this,this.disposables),this.kernelProvider.onDidRestartKernel((e=>{this.handleRestart({state:f.restarted,notebook:e.notebook})}),this,this.disposables),i.onDidChangeNotebookCellExecutionState(this.onDidChangeNotebookCellExecutionState,this,this.disposables)}getActiveInteractiveWindowDocument(){const e=this.interactiveWindowProvider.getActiveOrAssociatedInteractiveWindow();if(e)return this.notebooks.notebookDocuments.find((t=>t===e?.notebookDocument))}onDidChangeNotebookCellExecutionState(e){(0,p.isJupyterNotebook)(e.cell.notebook)&&e.state===s.NotebookCellExecutionState.Idle&&this.handleExecute({notebook:e.cell.notebook,state:f.executed,cell:e.cell})}handleExecute(e){this.isNonSilentExecution(e)&&(void 0!==e.cell?.executionSummary?.executionOrder&&this._executionCountTracker.set(e.notebook,e.cell.executionSummary?.executionOrder),this.isActiveNotebookEvent(e)&&void 0!==e.cell?.executionSummary?.executionOrder)&&this.activeKernel&&0===this.kernelProvider.getKernelExecution(this.activeKernel).pendingCells.length&&this._onDidFinisheExecutingActiveNotebook.fire({executionCount:e.cell.executionSummary?.executionOrder})}handleRestart(e){this._executionCountTracker.delete(e.notebook),this.isActiveNotebookEvent(e)&&this._onDidRestartActiveNotebook.fire()}notebookEditorClosed(e){this._executionCountTracker.delete(e)}activeEditorChanged(e){const t={};if(e&&(0,p.isJupyterNotebook)(e.notebook)){const n=this._executionCountTracker.get(e.notebook);n&&(t.executionCount=n)}this._onDidChangeActiveNotebook.fire(t)}isNonSilentExecution(e){return!(e.state!==f.executed||!e.cell||!e.cell.executionSummary?.executionOrder)}isActiveNotebookEvent(e){return this.activeKernel?.notebook===e.notebook}};t.NotebookWatcher=g,t.NotebookWatcher=g=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IInteractiveWindowProvider)),i(1,(0,o.inject)(a.IKernelProvider)),i(2,(0,o.inject)(d.IDataViewerFactory)),i(3,(0,o.inject)(u.IDisposableRegistry)),i(4,(0,o.inject)(l.IVSCodeNotebook))],g)},55231:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IVariableViewProvider=t.INotebookWatcher=t.IVariableViewPanelMapping=void 0;const r=n(30682);t.IVariableViewPanelMapping=class{},r.InteractiveWindowMessages.ForceVariableRefresh,r.InteractiveWindowMessages.SettingsUpdated,r.InteractiveWindowMessages.Activate,r.InteractiveWindowMessages.ShowDataViewer,r.InteractiveWindowMessages.GetVariablesRequest,r.InteractiveWindowMessages.GetVariablesResponse,r.InteractiveWindowMessages.VariableExplorerToggle,r.InteractiveWindowMessages.SetVariableExplorerHeight,r.InteractiveWindowMessages.VariableExplorerHeightResponse,r.InteractiveWindowMessages.OpenLink,r.InteractiveWindowMessages.VariablesComplete,r.SharedMessages.UpdateSettings,r.SharedMessages.LocInit,r.InteractiveWindowMessages.FinishCell,r.InteractiveWindowMessages.UpdateVariableViewExecutionCount,r.InteractiveWindowMessages.GetHTMLByIdRequest,r.InteractiveWindowMessages.GetHTMLByIdResponse,r.InteractiveWindowMessages.RestartKernel,t.INotebookWatcher=Symbol("INotebookWatcher"),t.IVariableViewProvider=Symbol("IVariableViewProvider")},56715:function(e,t,n){"use strict";var r=n(34155),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VariableView=void 0;const c=n(66828),l=n(52859),u=n(9959),d=n(70166),h=n(30682),p=n(29444),f=n(11642),g=a(n(25251)),m=n(724),v=n(87486),y=n(85446),b=n(58681);class w extends v.WebviewViewHost{get owningResource(){}constructor(e,t,n,r,i,o,s,a,c,u,h,p){const f=(0,l.joinPath)(r.extensionUri,"out","webviews","webview-side","viewers");super(e,t,((e,t)=>new d.VariableViewMessageListener(e,t)),n,f,[(0,l.joinPath)(f,"variableView.js")]),this.variables=i,this.disposables=o,this.appShell=s,this.jupyterVariableDataProviderFactory=a,this.dataViewerFactory=c,this.notebookWatcher=u,this.commandManager=h,this.documentManager=p,this.notebookWatcher.onDidFinishExecutingActiveNotebook(this.activeNotebookExecuted,this,this.disposables),this.notebookWatcher.onDidChangeActiveNotebook(this.activeNotebookChanged,this,this.disposables),this.notebookWatcher.onDidRestartActiveNotebook(this.activeNotebookRestarted,this,this.disposables),this.variables.refreshRequired(this.sendRefreshMessage,this,this.disposables),this.documentManager.onDidChangeActiveTextEditor(this.activeTextEditorChanged,this,this.disposables),this.dataViewerChecker=new m.DataViewerChecker(e,s)}async load(e){await super.loadWebview(c.Uri.file(r.cwd()),e).catch(f.traceError),this.webviewView&&this.disposables.push(this.webviewView.onDidChangeVisibility((()=>{this.handleVisibilityChanged()}))),this.handleVisibilityChanged()}get title(){return"variableView"}onMessage(e,t){switch(e){case h.InteractiveWindowMessages.GetVariablesRequest:this.handleMessage(e,t,this.requestVariables);break;case h.InteractiveWindowMessages.ShowDataViewer:this.handleMessage(e,t,this.showDataViewer)}super.onMessage(e,t)}handleMessage(e,t,n){const r=t;n.bind(this)(r)}handleVisibilityChanged(){const e=new p.ContextKey("jupyter.variableViewVisible",this.commandManager);let t=!1;this.webviewView&&(t=this.webviewView.visible),e.set(t).catch(b.noop),t&&((0,u.sendTelemetryEvent)(u.Telemetry.NativeVariableViewMadeVisible),void 0!==this.notebookWatcher.activeNotebookExecutionCount?this.postMessage(h.InteractiveWindowMessages.UpdateVariableViewExecutionCount,{executionCount:this.notebookWatcher.activeNotebookExecutionCount}).catch(b.noop):this.postMessage(h.InteractiveWindowMessages.ForceVariableRefresh).catch(b.noop))}async showDataViewer(e){try{if(this.notebookWatcher.activeKernel&&await this.dataViewerChecker.isRequestedColumnSizeAllowed(e.columnSize,this.owningResource)){const t=await this.jupyterVariableDataProviderFactory.create(e.variable,this.notebookWatcher.activeKernel),n=`${g.DataScience.dataExplorerTitle} - ${e.variable.name}`;return await this.dataViewerFactory.create(t,n)}}catch(e){(0,f.traceError)(e),(0,u.sendTelemetryEvent)(u.Telemetry.FailedShowDataViewer),this.appShell.showErrorMessage(g.DataScience.showDataViewerFail).then(b.noop,b.noop)}}async requestVariables(e){const t=this.notebookWatcher.activeKernel;if(t){const n=await this.variables.getVariables(e,t);this.postMessage(h.InteractiveWindowMessages.GetVariablesResponse,n).catch(b.noop),(0,u.sendTelemetryEvent)(u.Telemetry.VariableExplorerVariableCount,{variableCount:n.totalCount})}else{const t={executionCount:e.executionCount,pageStartIndex:-1,pageResponse:[],totalCount:0,refreshCount:e.refreshCount};this.postMessage(h.InteractiveWindowMessages.GetVariablesResponse,t).catch(b.noop)}}async activeNotebookExecuted(e){this.postMessage(h.InteractiveWindowMessages.UpdateVariableViewExecutionCount,{executionCount:e.executionCount}).catch(b.noop)}async activeNotebookChanged(e){e.executionCount?this.postMessage(h.InteractiveWindowMessages.UpdateVariableViewExecutionCount,{executionCount:e.executionCount}).catch(b.noop):this.postMessage(h.InteractiveWindowMessages.UpdateVariableViewExecutionCount,{executionCount:0}).catch(b.noop),this.postMessage(h.InteractiveWindowMessages.ForceVariableRefresh).catch(b.noop)}activeTextEditorChanged(){this.postMessage(h.InteractiveWindowMessages.ForceVariableRefresh).catch(b.noop)}async activeNotebookRestarted(){this.postMessage(h.InteractiveWindowMessages.RestartKernel).catch(b.noop)}async sendRefreshMessage(){this.postMessage(h.InteractiveWindowMessages.ForceVariableRefresh).catch(b.noop)}}t.VariableView=w,s([(0,u.capturePerfTelemetry)(u.Telemetry.NativeVariableViewLoaded)],w.prototype,"load",null),s([(0,y.swallowExceptions)()],w.prototype,"showDataViewer",null),s([(0,y.swallowExceptions)()],w.prototype,"requestVariables",null)},52891:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VariableViewActivationService=void 0;const o=n(26594),s=n(66828),a=n(42080),c=n(55231);let l=class{constructor(e,t){this.extensionContext=e,this.variableViewProvider=t}activate(){this.extensionContext.subscriptions.push(s.window.registerWebviewViewProvider(this.variableViewProvider.viewType,this.variableViewProvider,{webviewOptions:{retainContextWhenHidden:!1}}))}};t.VariableViewActivationService=l,t.VariableViewActivationService=l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IExtensionContext)),i(1,(0,o.inject)(c.IVariableViewProvider))],l)},70166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableViewMessageListener=void 0,t.VariableViewMessageListener=class{constructor(e,t){this.disposedCallback=t,this.callback=e}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}}},67726:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VariableViewProvider=void 0;const o=n(26594),s=n(7214),a=n(10053),c=n(15925),l=n(42080),u=n(43138),d=n(90391),h=n(55231),p=n(56715);let f=class{get activeVariableView(){if(!(0,c.isTestExecution)())throw new Error("activeVariableView only for test code");return this.variableView?Promise.resolve(this.variableView):(this.activeVariableViewPromise=(0,u.createDeferred)(),this.activeVariableViewPromise.promise)}constructor(e,t,n,r,i,o,s,a,c,l,u,d){this.configuration=e,this.workspaceService=t,this.webviewViewProvider=n,this.context=r,this.variables=i,this.disposables=o,this.appShell=s,this.jupyterVariableDataProviderFactory=a,this.dataViewerFactory=c,this.notebookWatcher=l,this.commandManager=u,this.documentManager=d,this.viewType="jupyterViewVariables"}async resolveWebviewView(e,t,n){e.webview.options={enableScripts:!0},this.variableView=new p.VariableView(this.configuration,this.workspaceService,this.webviewViewProvider,this.context,this.variables,this.disposables,this.appShell,this.jupyterVariableDataProviderFactory,this.dataViewerFactory,this.notebookWatcher,this.commandManager,this.documentManager),this.activeVariableViewPromise&&this.activeVariableViewPromise.resolve(this.variableView),await this.variableView.load(e)}};t.VariableViewProvider=f,t.VariableViewProvider=f=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IConfigurationService)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(a.IWebviewViewProvider)),i(3,(0,o.inject)(l.IExtensionContext)),i(4,(0,o.inject)(s.IJupyterVariables)),i(4,(0,o.named)(c.Identifiers.ALL_VARIABLES)),i(5,(0,o.inject)(l.IDisposableRegistry)),i(6,(0,o.inject)(a.IApplicationShell)),i(7,(0,o.inject)(d.IJupyterVariableDataProviderFactory)),i(8,(0,o.inject)(d.IDataViewerFactory)),i(9,(0,o.inject)(h.INotebookWatcher)),i(10,(0,o.inject)(a.ICommandManager)),i(11,(0,o.inject)(a.IDocumentManager))],f)},14783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidSliceExpression=t.validateSliceExpression=t.fullSliceExpression=t.preselectedSliceExpression=t.sliceRegEx=void 0;const r=n(65634);function i(e,n){if(e.startsWith("[")&&e.endsWith("]")){let i;const o=e.substring(1,e.length-1).split(",").map(((e,r)=>{const o=t.sliceRegEx.exec(e);if(o?.groups?.Start&&!o.groups.Stop){const e=parseInt(o.groups.Start),t=n[r];return(e>=0&&e>=t||e<0&&e<-t)&&(i={shapeIndex:r,value:e}),e}}));if(i){const{shapeIndex:e,value:t}=i,o=(0,r.getLocString)("sliceIndexError","Index {0} out of range for axis {1} with {2} elements");return(0,r.format)(o,t.toString(),e.toString(),n[e].toString())}if(o&&o.length!==n.length){const e=(0,r.getLocString)("sliceMismatchedAxesError","Expected {0} axes, got {1} in slice expression");return(0,r.format)(e,n.length.toString(),o.length.toString())}}return""}t.sliceRegEx=/^\s*((?<StartRange>-?\d+:)|(?<StopRange>-?:\d+)|(?:(?<Start>-?\d+)(?::(?<Stop>-?\d+))?(?::(?<Step>-?\d+))?))\s*$/,t.preselectedSliceExpression=function(e){let t=e.length-2;return"["+e.map((()=>t>0?(t-=1,"0"):":")).join(", ")+"]"},t.fullSliceExpression=function(e){return"["+e.map((()=>":")).join(", ")+"]"},t.validateSliceExpression=i,t.isValidSliceExpression=function(e,t){return""===i(e,t)}},65634:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.format=t.storeLocStrings=t.getLocString=void 0,t.getLocString=function(e,t){return n&&n.hasOwnProperty(e)?n[e]:t},t.storeLocStrings=function(e){n=e},t.format=function(e,...t){return e.replace(/{(\d+)}/g,((e,n)=>void 0===t[n]?e:t[n]))}},84564:(e,t,n)=>{"use strict";var r=n(47418),i=n(57129),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(o,"")}var h=[["#","hash"],["?","query"],function(e,t){return g(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function f(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new v(unescape(e.pathname),{});else if("string"===o)for(t in i=new v(e,{}),p)delete i[t];else if("object"===o){for(t in e)t in p||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function g(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=(e=d(e)).replace(s,""),t=t||{};var n,r=l.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],c=0;return o?a?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):a?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===i?c>=2&&(n=n.slice(2)):g(i)?n=r[4]:i?o&&(n=n.slice(2)):c>=2&&g(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||g(i),slashesCount:c,rest:n}}function v(e,t,n){if(e=(e=d(e)).replace(s,""),!(this instanceof v))return new v(e,t,n);var o,a,c,l,p,y,b=h.slice(),w=typeof t,S=this,C=0;for("object"!==w&&"string"!==w&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),o=!(a=m(e||"",t=f(t))).protocol&&!a.slashes,S.slashes=a.slashes||o&&t.slashes,S.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!g(S.protocol)))&&(b[3]=[/(.*)/,"pathname"]);C<b.length;C++)"function"!=typeof(l=b[C])?(c=l[0],y=l[1],c!=c?S[y]=e:"string"==typeof c?~(p="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(S[y]=e.slice(0,p),e=e.slice(p+l[2])):(S[y]=e.slice(p),e=e.slice(0,p))):(p=c.exec(e))&&(S[y]=p[1],e=e.slice(0,p.index)),S[y]=S[y]||o&&l[3]&&t[y]||"",l[4]&&(S[y]=S[y].toLowerCase())):e=l(e,S);n&&(S.query=n(S.query)),o&&t.slashes&&"/"!==S.pathname.charAt(0)&&(""!==S.pathname||""!==t.pathname)&&(S.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(S.pathname,t.pathname)),"/"!==S.pathname.charAt(0)&&g(S.protocol)&&(S.pathname="/"+S.pathname),r(S.port,S.protocol)||(S.host=S.hostname,S.port=""),S.username=S.password="",S.auth&&(~(p=S.auth.indexOf(":"))?(S.username=S.auth.slice(0,p),S.username=encodeURIComponent(decodeURIComponent(S.username)),S.password=S.auth.slice(p+1),S.password=encodeURIComponent(decodeURIComponent(S.password))):S.username=encodeURIComponent(decodeURIComponent(S.auth)),S.auth=S.password?S.username+":"+S.password:S.username),S.origin="file:"!==S.protocol&&g(S.protocol)&&S.host?S.protocol+"//"+S.host:"null",S.href=S.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<h.length;l++){var u=h[l];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&g(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(n.protocol&&n.slashes||g(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&g(n.protocol)&&!r&&"/"!==n.pathname&&(s+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},v.extractProtocol=m,v.location=f,v.trimLeft=d,v.qs=i,e.exports=v},45327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},85217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},71171:(e,t,n)=>{var r=n(85217),i=n(45327);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},81169:(e,t,n)=>{"use strict";e.exports=n(39054)},39054:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0,n(25669).default.install();const o=n(23870);i(n(23870),t);class s extends o.AbstractMessageReader{constructor(e){super(),this._onData=new o.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener("error",(e=>this.fireError(e))),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}}t.BrowserMessageReader=s;class a extends o.AbstractMessageWriter{constructor(e){super(),this.context=e,this.errorCount=0,e.addEventListener("error",(e=>this.fireError(e)))}write(e){try{return this.context.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.BrowserMessageWriter=a,t.createMessageConnection=function(e,t,n,r){return void 0===n&&(n=o.NullLogger),o.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,o.createMessageConnection)(e,t,n,r)}},25669:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(30147),i=n(83911),o=n(27135),s=n(75530);class a extends s.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return a.emptyBuffer}fromString(e,t){return(new TextEncoder).encode(e)}toString(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}a.emptyBuffer=new Uint8Array(0);class c{constructor(e){this.socket=e,this._onData=new o.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then((e=>{this._onData.fire(new Uint8Array(e))}),(()=>{(0,r.default)().console.error("Converting blob to array buffer failed.")}))},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),i.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),i.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),i.Disposable.create((()=>this.socket.removeEventListener("end",e)))}onData(e){return this._onData.event(e)}}class l{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),i.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),i.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),i.Disposable.create((()=>this.socket.removeEventListener("end",e)))}write(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const u=new TextEncoder,d=Object.freeze({messageBuffer:Object.freeze({create:e=>new a(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if("utf-8"!==t.charset)throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(u.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new c(e),asWritableStream:e=>new l(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function h(){return d}!function(e){e.install=function(){r.default.install(d)}}(h||(h={})),t.default=h},23870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFormat=t.TraceValues=t.Trace=t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=void 0;const r=n(20839);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return r.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return r.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return r.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return r.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return r.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return r.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return r.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return r.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return r.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return r.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return r.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return r.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return r.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return r.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return r.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return r.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return r.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return r.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return r.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return r.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return r.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return r.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return r.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return r.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return r.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return r.ParameterStructures}});const i=n(96184);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return i.Touch}});const o=n(83911);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return o.Disposable}});const s=n(27135);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=n(13881);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const c=n(56525);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return c.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return c.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return c.ReadableStreamMessageReader}});const l=n(96654);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});const u=n(61343);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return u.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return u.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return u.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return u.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return u.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return u.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return u.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return u.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return u.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return u.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return u.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return u.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return u.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return u.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return u.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return u.CancellationStrategy}});const d=n(30147);t.RAL=d.default},13881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const r=n(30147),i=n(67574),o=n(27135);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=(0,r.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},61343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const r=n(30147),i=n(67574),o=n(20839),s=n(96184),a=n(27135),c=n(13881);var l,u,d,h,p,f,g,m,v,y,b,w,S,C,_;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(l||(l={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(u=t.ProgressToken||(t.ProgressToken={})),function(e){e.type=new o.NotificationType("$/progress")}(d||(d={})),t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(h||(h={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(p=t.Trace||(t.Trace={})),(_=t.TraceValues||(t.TraceValues={})).Off="off",_.Messages="messages",_.Compact="compact",_.Verbose="verbose",function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(p=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return i.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(f=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTrace")}(g=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTrace")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(v=t.ConnectionErrors||(t.ConnectionErrors={}));class P extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,P.prototype)}}t.ConnectionError=P,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(y=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){const t=e;return t&&i.func(t.createCancellationTokenSource)}}(b=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(l.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(w=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:b.Message,sender:w.Message}),e.is=function(e){const t=e;return t&&b.is(t.receiver)&&w.is(t.sender)}}(S=t.CancellationStrategy||(t.CancellationStrategy={})),(t.ConnectionOptions||(t.ConnectionOptions={})).is=function(e){const t=e;return t&&(S.is(t.cancellationStrategy)||y.is(t.connectionStrategy))},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(C||(C={})),t.createMessageConnection=function(e,n,y,b){const w=void 0!==y?y:t.NullLogger;let _=0,E=0,k=0;const I="2.0";let D;const T=new Map;let x;const O=new Map,R=new Map;let M,A,N=new s.LinkedMap,j=new Map,F=new Set,L=new Map,K=p.Off,U=f.Text,W=C.New;const V=new a.Emitter,H=new a.Emitter,B=new a.Emitter,q=new a.Emitter,J=new a.Emitter,$=b&&b.cancellationStrategy?b.cancellationStrategy:S.Message;function G(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function z(e){}function Y(){return W===C.Listening}function Q(){return W===C.Closed}function X(){return W===C.Disposed}function Z(){W!==C.New&&W!==C.Listening||(W=C.Closed,H.fire(void 0))}function ee(){M||0===N.size||(M=(0,r.default)().timer.setImmediate((()=>{M=void 0,function(){if(0===N.size)return;const e=N.shift();try{o.Message.isRequest(e)?function(e){if(X())return;function t(t,r,i){const s={jsonrpc:I,id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,re(s,r,i),n.write(s).catch((()=>w.error("Sending response failed.")))}function r(t,r,i){const o={jsonrpc:I,id:e.id,error:t.toJson()};re(o,r,i),n.write(o).catch((()=>w.error("Sending response failed.")))}!function(e){if(K!==p.Off&&A)if(U===f.Text){let t;K!==p.Verbose&&K!==p.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),A.log(`Received request '${e.method} - (${e.id})'.`,t)}else oe("receive-request",e)}(e);const s=T.get(e.method);let a,c;s&&(a=s.type,c=s.handler);const l=Date.now();if(c||D){const s=e.id??String(Date.now()),u=$.receiver.createCancellationTokenSource(s);null!==e.id&&F.has(e.id)&&u.cancel(),null!==e.id&&L.set(s,u);try{let d;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,l);d=c(u.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);d=c(...e.params,u.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);d=c(e.params,u.token)}else D&&(d=D(e.method,e.params,u.token));const h=d;d?h.then?h.then((n=>{L.delete(s),t(n,e.method,l)}),(t=>{L.delete(s),t instanceof o.ResponseError?r(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)})):(L.delete(s),t(d,e.method,l)):(L.delete(s),function(t,r,i){void 0===t&&(t=null);const o={jsonrpc:I,id:e.id,result:t};re(o,r,i),n.write(o).catch((()=>w.error("Sending response failed.")))}(d,e.method,l))}catch(n){L.delete(s),n instanceof o.ResponseError?t(n,e.method,l):n&&i.string(n.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.Message.isNotification(e)?function(e){if(X())return;let t,n;if(e.method===l.type.method){const t=e.params.id;return F.delete(t),void ie(e)}{const r=O.get(e.method);r&&(n=r.handler,t=r.type)}if(n||x)try{if(ie(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){const r=e.params;e.method===d.type.method&&2===r.length&&u.is(r[0])?n({token:r[0],value:r[1]}):(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&w.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&w.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${r.length} arguments`)),n(...r))}else void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&w.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else x&&x(e.method,e.params)}catch(t){t.message?w.error(`Notification handler '${e.method}' failed with message: ${t.message}`):w.error(`Notification handler '${e.method}' failed unexpectedly.`)}else B.fire(e)}(e):o.Message.isResponse(e)?function(e){if(!X())if(null===e.id)e.error?w.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):w.error("Received response message without id. No further error information provided.");else{const t=e.id,n=j.get(t);if(function(e,t){if(K!==p.Off&&A)if(U===f.Text){let n;if(K!==p.Verbose&&K!==p.Compact||(e.error&&e.error.data?n=`Error data: ${ne(e.error.data)}\n\n`:e.result?n=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";A.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else A.log(`Received response ${e.id} without active response promise.`,n)}else oe("receive-response",e)}(e,n),void 0!==n){j.delete(t);try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?w.error(`Response handler '${n.method}' failed with message: ${e.message}`):w.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void w.error("Received empty message.");w.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(i.string(t.id)||i.number(t.id)){const e=t.id,n=j.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{ee()}}()})))}e.onClose(Z),e.onError((function(e){V.fire([e,void 0,void 0])})),n.onClose(Z),n.onError((function(e){V.fire(e)}));const te=e=>{try{if(o.Message.isNotification(e)&&e.method===l.type.method){const t=e.params.id,r=G(t),i=N.get(r);if(o.Message.isRequest(i)){const o=b?.connectionStrategy,s=o&&o.cancelUndispatched?o.cancelUndispatched(i,z):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return N.delete(r),L.delete(t),s.id=i.id,re(s,e.method,Date.now()),void n.write(s).catch((()=>w.error("Sending response for canceled message failed.")))}const s=L.get(t);if(void 0!==s)return s.cancel(),void ie(e);F.add(t)}!function(e,t){var n;o.Message.isRequest(t)?e.set(G(t.id),t):o.Message.isResponse(t)?e.set(null===(n=t.id)?"res-unknown-"+(++k).toString():"res-"+n.toString(),t):e.set("not-"+(++E).toString(),t)}(N,e)}finally{ee()}};function ne(e){if(null!=e)switch(K){case p.Verbose:return JSON.stringify(e,null,4);case p.Compact:return JSON.stringify(e);default:return}}function re(e,t,n){if(K!==p.Off&&A)if(U===f.Text){let r;K!==p.Verbose&&K!==p.Compact||(e.error&&e.error.data?r=`Error data: ${ne(e.error.data)}\n\n`:e.result?r=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),A.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else oe("send-response",e)}function ie(e){if(K!==p.Off&&A&&e.method!==m.type.method)if(U===f.Text){let t;K!==p.Verbose&&K!==p.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),A.log(`Received notification '${e.method}'.`,t)}else oe("receive-notification",e)}function oe(e,t){if(!A||K===p.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};A.log(n)}function se(){if(Q())throw new P(v.Closed,"Connection is closed.");if(X())throw new P(v.Disposed,"Connection is disposed.")}function ae(e){return void 0===e?null:e}function ce(e){return null===e?void 0:e}function le(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function ue(e,t){switch(e){case o.ParameterStructures.auto:return le(t)?ce(t):[ae(t)];case o.ParameterStructures.byName:if(!le(t))throw new Error("Received parameters by name but param is not an object literal.");return ce(t);case o.ParameterStructures.byPosition:return[ae(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function de(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=ue(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(ae(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const he={sendNotification:(e,...t)=>{let r,s;if(se(),i.string(e)){r=e;const n=t[0];let i=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(i=1,a=n);let c=t.length;const l=c-i;switch(l){case 0:s=void 0;break;case 1:s=ue(a,t[i]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Received ${l} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map((e=>ae(e)))}}else{const n=t;r=e.method,s=de(e,n)}const a={jsonrpc:I,method:r,params:s};return function(e){if(K!==p.Off&&A)if(U===f.Text){let t;K!==p.Verbose&&K!==p.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),A.log(`Sending notification '${e.method}'.`,t)}else oe("send-notification",e)}(a),n.write(a).catch((()=>w.error("Sending notification failed.")))},onNotification:(e,t)=>{let n;return se(),i.func(e)?x=e:t&&(i.string(e)?(n=e,O.set(e,{type:void 0,handler:t})):(n=e.method,O.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==n?O.delete(n):x=void 0}}},onProgress:(e,t,n)=>{if(R.has(t))throw new Error(`Progress handler for token ${t} already registered`);return R.set(t,n),{dispose:()=>{R.delete(t)}}},sendProgress:(e,t,n)=>he.sendNotification(d.type,{token:t,value:n}),onUnhandledProgress:q.event,sendRequest:(e,...t)=>{let r,s,a;if(se(),function(){if(!Y())throw new Error("Call listen() first.")}(),i.string(e)){r=e;const n=t[0],i=t[t.length-1];let l=0,u=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(l=1,u=n);let d=t.length;c.CancellationToken.is(i)&&(d-=1,a=i);const h=d-l;switch(h){case 0:s=void 0;break;case 1:s=ue(u,t[l]);break;default:if(u===o.ParameterStructures.byName)throw new Error(`Received ${h} parameters for 'by Name' request parameter structure.`);s=t.slice(l,d).map((e=>ae(e)))}}else{const n=t;r=e.method,s=de(e,n);const i=e.numberOfParams;a=c.CancellationToken.is(n[i])?n[i]:void 0}const l=_++;let u;return a&&(u=a.onCancellationRequested((()=>{const e=$.sender.sendCancellation(he,l);return void 0===e?(w.log(`Received no promise from cancellation strategy when cancelling id ${l}`),Promise.resolve()):e.catch((()=>{w.log(`Sending cancellation messages for id ${l} failed`)}))}))),new Promise(((e,t)=>{const i={jsonrpc:I,id:l,method:r,params:s};let a={method:r,timerStart:Date.now(),resolve:t=>{e(t),$.sender.cleanup(l),u?.dispose()},reject:e=>{t(e),$.sender.cleanup(l),u?.dispose()}};!function(e){if(K!==p.Off&&A)if(U===f.Text){let t;K!==p.Verbose&&K!==p.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),A.log(`Sending request '${e.method} - (${e.id})'.`,t)}else oe("send-request",e)}(i);try{n.write(i).catch((()=>w.error("Sending request failed.")))}catch(e){a.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&j.set(l,a)}))},onRequest:(e,t)=>{se();let n=null;return h.is(e)?(n=void 0,D=e):i.string(e)?(n=null,void 0!==t&&(n=e,T.set(e,{handler:t,type:void 0}))):void 0!==t&&(n=e.method,T.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==n&&(void 0!==n?T.delete(n):D=void 0)}}},hasPendingResponse:()=>j.size>0,trace:async(e,t,n)=>{let r=!1,o=f.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||f.Text)),K=e,U=o,A=K===p.Off?void 0:t,!r||Q()||X()||await he.sendNotification(g.type,{value:p.toString(e)})},onError:V.event,onClose:H.event,onUnhandledNotification:B.event,onDispose:J.event,end:()=>{n.end()},dispose:()=>{if(X())return;W=C.Disposed,J.fire(void 0);const t=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of j.values())e.reject(t);j=new Map,L=new Map,F=new Set,N=new s.LinkedMap,i.func(n.dispose)&&n.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{se(),function(){if(Y())throw new P(v.AlreadyListening,"Connection is already listening")}(),W=C.Listening,e.listen(te)},inspect:()=>{(0,r.default)().console.log("inspect")}};return he.onNotification(m.type,(e=>{if(K===p.Off||!A)return;const t=K===p.Verbose||K===p.Compact;A.log(e.message,t?e.verbose:void 0)})),he.onNotification(d.type,(e=>{const t=R.get(e.token);t?t(e.value):q.fire(e)})),he}},83911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}}},27135:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const r=n(30147);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class i{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{t.push(n[o].apply(i[o],e))}catch(e){(0,r.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=o,o._noop=function(){}},67574:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))}},96184:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(r=t.Touch||(t.Touch={}));class i{constructor(){this[n]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=r.None){const n=this._map.get(e);if(n)return t!==r.None&&this.touch(n,t),n.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[(n=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=i,t.LRUCache=class extends i{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=r.AsNew){return super.get(e,t)}peek(e){return super.get(e,r.None)}set(e,t){return super.set(e,t,r.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},75530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,r=0;e:for(;t<this._chunks.length;){const i=this._chunks[t];for(n=0;n<i.length;){switch(i[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}r+=i.byteLength,t++}if(4!==e)return;const i=this._read(r+n),o=new Map,s=this.toString(i,"ascii").split("\r\n");if(s.length<2)return o;for(let e=0;e<s.length-2;e++){const t=s[e],n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const r=t.substr(0,n),i=t.substr(n+1).trim();o.set(r,i)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}}},56525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const r=n(30147),i=n(67574),o=n(27135);var s;(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)};class a{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=a,function(e){e.fromOptions=function(e){let t,n;const i=new Map;let o;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(n=e.contentDecoder,i.set(n.name,n)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)i.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(o=e.contentTypeDecoder,s.set(o.name,o)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===o&&(o=(0,r.default)().applicationJson.decoder,s.set(o.name,o)),{charset:t,contentDecoder:n,contentDecoders:i,contentTypeDecoder:o,contentTypeDecoders:s}}}(s||(s={})),t.ReadableStreamMessageReader=class extends a{constructor(e,t){super(),this.readable=e,this.options=s.fromOptions(t),this.buffer=(0,r.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,r.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},96654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const r=n(30147),i=n(67574),o=n(80142),s=n(27135);var a;(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)};class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,r.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,r.default)().applicationJson.encoder}}}(a||(a={})),t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},20839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const r=n(67574);var i,o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(i=t.ErrorCodes||(t.ErrorCodes={}));class s extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class c{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=c,t.RequestType0=class extends c{constructor(e){super(e,0)}},t.RequestType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends c{constructor(e){super(e,2)}},t.RequestType3=class extends c{constructor(e){super(e,3)}},t.RequestType4=class extends c{constructor(e){super(e,4)}},t.RequestType5=class extends c{constructor(e){super(e,5)}},t.RequestType6=class extends c{constructor(e){super(e,6)}},t.RequestType7=class extends c{constructor(e){super(e,7)}},t.RequestType8=class extends c{constructor(e){super(e,8)}},t.RequestType9=class extends c{constructor(e){super(e,9)}},t.NotificationType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends c{constructor(e){super(e,0)}},t.NotificationType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends c{constructor(e){super(e,2)}},t.NotificationType3=class extends c{constructor(e){super(e,3)}},t.NotificationType4=class extends c{constructor(e){super(e,4)}},t.NotificationType5=class extends c{constructor(e){super(e,5)}},t.NotificationType6=class extends c{constructor(e){super(e,6)}},t.NotificationType7=class extends c{constructor(e){super(e,7)}},t.NotificationType8=class extends c{constructor(e){super(e,8)}},t.NotificationType9=class extends c{constructor(e){super(e,9)}},(o=t.Message||(t.Message={})).isRequest=function(e){const t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},o.isNotification=function(e){const t=e;return t&&r.string(t.method)&&void 0===e.id},o.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},30147:(e,t)=>{"use strict";let n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r},80142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const r=n(30147);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,r.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},10152:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const o=n(81169);i(n(81169),t),i(n(51661),t),t.createProtocolConnection=function(e,t,n,r){return(0,o.createMessageConnection)(e,t,n,r)}},51661:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,i(n(39054),t),i(n(91674),t),i(n(66140),t),i(n(10542),t);var o,s=n(73767);Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return s.createProtocolConnection}}),(o=t.LSPErrorCodes||(t.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,o.RequestFailed=-32803,o.ServerCancelled=-32802,o.ContentModified=-32801,o.RequestCancelled=-32800,o.lspReservedErrorRangeEnd=-32800},73767:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const r=n(39054);t.createProtocolConnection=function(e,t,n,i){return r.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,r.createMessageConnection)(e,t,n,i)}},66140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=void 0;const r=n(39054);t.RegistrationType=class{constructor(e){this.method=e}};class i extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=i;class o extends r.RequestType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolRequestType=o;class s extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=s;class a extends r.NotificationType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolNotificationType=a},82918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const r=n(66140);var i,o,s;(s=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",s.type=new r.ProtocolRequestType(s.method),(o=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",o.type=new r.ProtocolRequestType(o.method),(i=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",i.type=new r.ProtocolRequestType(i.method)},79891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const r=n(66140);var i;(i=t.DocumentColorRequest||(t.DocumentColorRequest={})).method="textDocument/documentColor",i.type=new r.ProtocolRequestType(i.method),(t.ColorPresentationRequest||(t.ColorPresentationRequest={})).type=new r.ProtocolRequestType("textDocument/colorPresentation")},85934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;const r=n(66140);(t.ConfigurationRequest||(t.ConfigurationRequest={})).type=new r.ProtocolRequestType("workspace/configuration")},40764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;const r=n(66140);var i;(i=t.DeclarationRequest||(t.DeclarationRequest={})).method="textDocument/declaration",i.type=new r.ProtocolRequestType(i.method)},79824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=void 0;const r=n(39054),i=n(69533),o=n(66140);var s,a,c,l;(t.DiagnosticServerCancellationData||(t.DiagnosticServerCancellationData={})).is=function(e){const t=e;return t&&i.boolean(t.retriggerRequest)},(l=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={})).Full="full",l.Unchanged="unchanged",(c=t.DocumentDiagnosticRequest||(t.DocumentDiagnosticRequest={})).method="textDocument/diagnostic",c.type=new o.ProtocolRequestType(c.method),c.partialResult=new r.ProgressType,(a=t.WorkspaceDiagnosticRequest||(t.WorkspaceDiagnosticRequest={})).method="workspace/diagnostic",a.type=new o.ProtocolRequestType(a.method),a.partialResult=new r.ProgressType,(s=t.DiagnosticRefreshRequest||(t.DiagnosticRefreshRequest={})).method="workspace/diagnostic/refresh",s.type=new o.ProtocolRequestType0(s.method)},37846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const r=n(66140);var i,o,s,a,c,l,u;(u=t.FileOperationPatternKind||(t.FileOperationPatternKind={})).file="file",u.folder="folder",(l=t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})).method="workspace/willCreateFiles",l.type=new r.ProtocolRequestType(l.method),(c=t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})).method="workspace/didCreateFiles",c.type=new r.ProtocolNotificationType(c.method),(a=t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})).method="workspace/willRenameFiles",a.type=new r.ProtocolRequestType(a.method),(s=t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})).method="workspace/didRenameFiles",s.type=new r.ProtocolNotificationType(s.method),(o=t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",o.type=new r.ProtocolNotificationType(o.method),(i=t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",i.type=new r.ProtocolRequestType(i.method)},13394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=void 0;const r=n(66140);var i;(i=t.FoldingRangeRequest||(t.FoldingRangeRequest={})).method="textDocument/foldingRange",i.type=new r.ProtocolRequestType(i.method)},82122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;const r=n(66140);var i;(i=t.ImplementationRequest||(t.ImplementationRequest={})).method="textDocument/implementation",i.type=new r.ProtocolRequestType(i.method)},29999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=void 0;const r=n(66140);var i,o,s;(s=t.InlayHintRequest||(t.InlayHintRequest={})).method="textDocument/inlayHint",s.type=new r.ProtocolRequestType(s.method),(o=t.InlayHintResolveRequest||(t.InlayHintResolveRequest={})).method="inlayHint/resolve",o.type=new r.ProtocolRequestType(o.method),(i=t.InlayHintRefreshRequest||(t.InlayHintRefreshRequest={})).method="workspace/inlayHint/refresh",i.type=new r.ProtocolRequestType0(i.method)},55246:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueRefreshRequest=t.InlineValueRequest=void 0;const r=n(66140);var i,o;(o=t.InlineValueRequest||(t.InlineValueRequest={})).method="textDocument/inlineValue",o.type=new r.ProtocolRequestType(o.method),(i=t.InlineValueRefreshRequest||(t.InlineValueRefreshRequest={})).method="workspace/inlineValue/refresh",i.type=new r.ProtocolRequestType0(i.method)},10542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=void 0;const r=n(66140),i=n(91674),o=n(69533),s=n(82122);Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return s.ImplementationRequest}});const a=n(71589);Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});const c=n(98744);Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return c.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return c.DidChangeWorkspaceFoldersNotification}});const l=n(85934);Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return l.ConfigurationRequest}});const u=n(79891);Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return u.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return u.ColorPresentationRequest}});const d=n(13394);Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return d.FoldingRangeRequest}});const h=n(40764);Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return h.DeclarationRequest}});const p=n(5206);Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return p.SelectionRangeRequest}});const f=n(21862);Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});const g=n(82918);Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return g.CallHierarchyPrepareRequest}});const m=n(39434);Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return m.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return m.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return m.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return m.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return m.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return m.SemanticTokensRegistrationType}});const v=n(75726);Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return v.ShowDocumentRequest}});const y=n(26305);Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return y.LinkedEditingRangeRequest}});const b=n(37846);Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return b.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return b.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return b.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return b.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return b.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return b.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return b.WillDeleteFilesRequest}});const w=n(73443);Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return w.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return w.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return w.MonikerRequest}});const S=n(83693);Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return S.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return S.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return S.TypeHierarchySupertypesRequest}});const C=n(55246);Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return C.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return C.InlineValueRefreshRequest}});const _=n(29999);Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return _.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return _.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return _.InlayHintRefreshRequest}});const P=n(79824);Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return P.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return P.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return P.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return P.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return P.DiagnosticRefreshRequest}});const E=n(47169);var k,I,D,T,x,O,R,M,A,N,j,F,L,K,U,W,V,H,B,q,J,$,G,z,Y,Q,X,Z,ee,te,ne,re,ie,oe,se,ae,ce,le,ue,de,he,pe,fe,ge;Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return E.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return E.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return E.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return E.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return E.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return E.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return E.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return E.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return E.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return E.DidCloseNotebookDocumentNotification}}),function(e){e.is=function(e){const t=e;return o.string(t.language)||o.string(t.scheme)||o.string(t.pattern)}}(k=t.TextDocumentFilter||(t.TextDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebookType)||o.string(t.scheme)||o.string(t.pattern))}}(I=t.NotebookDocumentFilter||(t.NotebookDocumentFilter={})),function(e){e.is=function(e){const t=e;return o.objectLiteral(t)&&(o.string(t.notebook)||I.is(t.notebook))&&(void 0===t.language||o.string(t.language))}}(D=t.NotebookCellTextDocumentFilter||(t.NotebookCellTextDocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!o.string(t)&&!k.is(t)&&!D.is(t))return!1;return!0}}(T=t.DocumentSelector||(t.DocumentSelector={})),(t.RegistrationRequest||(t.RegistrationRequest={})).type=new r.ProtocolRequestType("client/registerCapability"),(t.UnregistrationRequest||(t.UnregistrationRequest={})).type=new r.ProtocolRequestType("client/unregisterCapability"),(ge=t.ResourceOperationKind||(t.ResourceOperationKind={})).Create="create",ge.Rename="rename",ge.Delete="delete",(fe=t.FailureHandlingKind||(t.FailureHandlingKind={})).Abort="abort",fe.Transactional="transactional",fe.TextOnlyTransactional="textOnlyTransactional",fe.Undo="undo",(pe=t.PositionEncodingKind||(t.PositionEncodingKind={})).UTF8="utf-8",pe.UTF16="utf-16",pe.UTF32="utf-32",(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})).hasId=function(e){const t=e;return t&&o.string(t.id)&&t.id.length>0},(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})).is=function(e){const t=e;return t&&(null===t.documentSelector||T.is(t.documentSelector))},(he=t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})).is=function(e){const t=e;return o.objectLiteral(t)&&(void 0===t.workDoneProgress||o.boolean(t.workDoneProgress))},he.hasWorkDoneProgress=function(e){const t=e;return t&&o.boolean(t.workDoneProgress)},(t.InitializeRequest||(t.InitializeRequest={})).type=new r.ProtocolRequestType("initialize"),(t.InitializeErrorCodes||(t.InitializeErrorCodes={})).unknownProtocolVersion=1,(t.InitializedNotification||(t.InitializedNotification={})).type=new r.ProtocolNotificationType("initialized"),(t.ShutdownRequest||(t.ShutdownRequest={})).type=new r.ProtocolRequestType0("shutdown"),(t.ExitNotification||(t.ExitNotification={})).type=new r.ProtocolNotificationType0("exit"),(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})).type=new r.ProtocolNotificationType("workspace/didChangeConfiguration"),(de=t.MessageType||(t.MessageType={})).Error=1,de.Warning=2,de.Info=3,de.Log=4,(t.ShowMessageNotification||(t.ShowMessageNotification={})).type=new r.ProtocolNotificationType("window/showMessage"),(t.ShowMessageRequest||(t.ShowMessageRequest={})).type=new r.ProtocolRequestType("window/showMessageRequest"),(t.LogMessageNotification||(t.LogMessageNotification={})).type=new r.ProtocolNotificationType("window/logMessage"),(t.TelemetryEventNotification||(t.TelemetryEventNotification={})).type=new r.ProtocolNotificationType("telemetry/event"),(ue=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})).None=0,ue.Full=1,ue.Incremental=2,(le=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",le.type=new r.ProtocolNotificationType(le.method),(ce=t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},ce.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(ae=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})).method="textDocument/didChange",ae.type=new r.ProtocolNotificationType(ae.method),(se=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})).method="textDocument/didClose",se.type=new r.ProtocolNotificationType(se.method),(oe=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})).method="textDocument/didSave",oe.type=new r.ProtocolNotificationType(oe.method),(ie=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})).Manual=1,ie.AfterDelay=2,ie.FocusOut=3,(re=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})).method="textDocument/willSave",re.type=new r.ProtocolNotificationType(re.method),(ne=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",ne.type=new r.ProtocolRequestType(ne.method),(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})).type=new r.ProtocolNotificationType("workspace/didChangeWatchedFiles"),(te=t.FileChangeType||(t.FileChangeType={})).Created=1,te.Changed=2,te.Deleted=3,(t.RelativePattern||(t.RelativePattern={})).is=function(e){const t=e;return o.objectLiteral(t)&&(i.URI.is(t.baseUri)||i.WorkspaceFolder.is(t.baseUri))&&o.string(t.pattern)},(ee=t.WatchKind||(t.WatchKind={})).Create=1,ee.Change=2,ee.Delete=4,(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})).type=new r.ProtocolNotificationType("textDocument/publishDiagnostics"),(Z=t.CompletionTriggerKind||(t.CompletionTriggerKind={})).Invoked=1,Z.TriggerCharacter=2,Z.TriggerForIncompleteCompletions=3,(X=t.CompletionRequest||(t.CompletionRequest={})).method="textDocument/completion",X.type=new r.ProtocolRequestType(X.method),(Q=t.CompletionResolveRequest||(t.CompletionResolveRequest={})).method="completionItem/resolve",Q.type=new r.ProtocolRequestType(Q.method),(Y=t.HoverRequest||(t.HoverRequest={})).method="textDocument/hover",Y.type=new r.ProtocolRequestType(Y.method),(z=t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})).Invoked=1,z.TriggerCharacter=2,z.ContentChange=3,(G=t.SignatureHelpRequest||(t.SignatureHelpRequest={})).method="textDocument/signatureHelp",G.type=new r.ProtocolRequestType(G.method),($=t.DefinitionRequest||(t.DefinitionRequest={})).method="textDocument/definition",$.type=new r.ProtocolRequestType($.method),(J=t.ReferencesRequest||(t.ReferencesRequest={})).method="textDocument/references",J.type=new r.ProtocolRequestType(J.method),(q=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})).method="textDocument/documentHighlight",q.type=new r.ProtocolRequestType(q.method),(B=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})).method="textDocument/documentSymbol",B.type=new r.ProtocolRequestType(B.method),(H=t.CodeActionRequest||(t.CodeActionRequest={})).method="textDocument/codeAction",H.type=new r.ProtocolRequestType(H.method),(V=t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})).method="codeAction/resolve",V.type=new r.ProtocolRequestType(V.method),(W=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})).method="workspace/symbol",W.type=new r.ProtocolRequestType(W.method),(U=t.WorkspaceSymbolResolveRequest||(t.WorkspaceSymbolResolveRequest={})).method="workspaceSymbol/resolve",U.type=new r.ProtocolRequestType(U.method),(K=t.CodeLensRequest||(t.CodeLensRequest={})).method="textDocument/codeLens",K.type=new r.ProtocolRequestType(K.method),(L=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})).method="codeLens/resolve",L.type=new r.ProtocolRequestType(L.method),(F=t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",F.type=new r.ProtocolRequestType0(F.method),(j=t.DocumentLinkRequest||(t.DocumentLinkRequest={})).method="textDocument/documentLink",j.type=new r.ProtocolRequestType(j.method),(N=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})).method="documentLink/resolve",N.type=new r.ProtocolRequestType(N.method),(A=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})).method="textDocument/formatting",A.type=new r.ProtocolRequestType(A.method),(M=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",M.type=new r.ProtocolRequestType(M.method),(R=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",R.type=new r.ProtocolRequestType(R.method),(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})).Identifier=1,(O=t.RenameRequest||(t.RenameRequest={})).method="textDocument/rename",O.type=new r.ProtocolRequestType(O.method),(x=t.PrepareRenameRequest||(t.PrepareRenameRequest={})).method="textDocument/prepareRename",x.type=new r.ProtocolRequestType(x.method),(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})).type=new r.ProtocolRequestType("workspace/executeCommand"),(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={})).type=new r.ProtocolRequestType("workspace/applyEdit")},26305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;const r=n(66140);var i;(i=t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",i.type=new r.ProtocolRequestType(i.method)},73443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const r=n(66140);var i,o,s;(s=t.UniquenessLevel||(t.UniquenessLevel={})).document="document",s.project="project",s.group="group",s.scheme="scheme",s.global="global",(o=t.MonikerKind||(t.MonikerKind={})).$import="import",o.$export="export",o.local="local",(i=t.MonikerRequest||(t.MonikerRequest={})).method="textDocument/moniker",i.type=new r.ProtocolRequestType(i.method)},47169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=void 0;const r=n(91674),i=n(69533),o=n(66140);var s,a,c,l,u,d,h,p,f,g;!function(e){e.Markup=1,e.Code=2,e.is=function(e){return 1===e||2===e}}(s=t.NotebookCellKind||(t.NotebookCellKind={})),function(e){e.create=function(e,t){const n={executionOrder:e};return!0!==t&&!1!==t||(n.success=t),n},e.is=function(e){const t=e;return i.objectLiteral(t)&&r.uinteger.is(t.executionOrder)&&(void 0===t.success||i.boolean(t.success))},e.equals=function(e,t){return e===t||null!=e&&null!=t&&e.executionOrder===t.executionOrder&&e.success===t.success}}(a=t.ExecutionSummary||(t.ExecutionSummary={})),function(e){function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(typeof e!=typeof n)return!1;if("object"!=typeof e)return!1;const r=Array.isArray(e),o=Array.isArray(n);if(r!==o)return!1;if(r&&o){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1}if(i.objectLiteral(e)&&i.objectLiteral(n)){const r=Object.keys(e),i=Object.keys(n);if(r.length!==i.length)return!1;if(r.sort(),i.sort(),!t(r,i))return!1;for(let i=0;i<r.length;i++){const o=r[i];if(!t(e[o],n[o]))return!1}}return!0}e.create=function(e,t){return{kind:e,document:t}},e.is=function(e){const t=e;return i.objectLiteral(t)&&s.is(t.kind)&&r.DocumentUri.is(t.document)&&(void 0===t.metadata||i.objectLiteral(t.metadata))},e.diff=function(e,n){const r=new Set;return e.document!==n.document&&r.add("document"),e.kind!==n.kind&&r.add("kind"),e.executionSummary!==n.executionSummary&&r.add("executionSummary"),void 0===e.metadata&&void 0===n.metadata||t(e.metadata,n.metadata)||r.add("metadata"),void 0===e.executionSummary&&void 0===n.executionSummary||a.equals(e.executionSummary,n.executionSummary)||r.add("executionSummary"),r}}(c=t.NotebookCell||(t.NotebookCell={})),(g=t.NotebookDocument||(t.NotebookDocument={})).create=function(e,t,n,r){return{uri:e,notebookType:t,version:n,cells:r}},g.is=function(e){const t=e;return i.objectLiteral(t)&&i.string(t.uri)&&r.integer.is(t.version)&&i.typedArray(t.cells,c.is)},(f=t.NotebookDocumentSyncRegistrationType||(t.NotebookDocumentSyncRegistrationType={})).method="notebookDocument/sync",f.type=new o.RegistrationType(f.method),(p=t.DidOpenNotebookDocumentNotification||(t.DidOpenNotebookDocumentNotification={})).method="notebookDocument/didOpen",p.type=new o.ProtocolNotificationType(p.method),(h=t.NotebookCellArrayChange||(t.NotebookCellArrayChange={})).is=function(e){const t=e;return i.objectLiteral(t)&&r.uinteger.is(t.start)&&r.uinteger.is(t.deleteCount)&&(void 0===t.cells||i.typedArray(t.cells,c.is))},h.create=function(e,t,n){const r={start:e,deleteCount:t};return void 0!==n&&(r.cells=n),r},(d=t.DidChangeNotebookDocumentNotification||(t.DidChangeNotebookDocumentNotification={})).method="notebookDocument/didChange",d.type=new o.ProtocolNotificationType(d.method),(u=t.DidSaveNotebookDocumentNotification||(t.DidSaveNotebookDocumentNotification={})).method="notebookDocument/didSave",u.type=new o.ProtocolNotificationType(u.method),(l=t.DidCloseNotebookDocumentNotification||(t.DidCloseNotebookDocumentNotification={})).method="notebookDocument/didClose",l.type=new o.ProtocolNotificationType(l.method)},21862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const r=n(39054),i=n(66140);var o,s,a;(a=t.WorkDoneProgress||(t.WorkDoneProgress={})).type=new r.ProgressType,a.is=function(e){return e===a.type},(s=t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})).method="window/workDoneProgress/create",s.type=new i.ProtocolRequestType(s.method),(o=t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={})).method="window/workDoneProgress/cancel",o.type=new i.ProtocolNotificationType(o.method)},5206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;const r=n(66140);var i;(i=t.SelectionRangeRequest||(t.SelectionRangeRequest={})).method="textDocument/selectionRange",i.type=new r.ProtocolRequestType(i.method)},39434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=void 0;const r=n(66140);var i,o,s,a,c;(t.TokenFormat||(t.TokenFormat={})).Relative="relative",(c=t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})).method="textDocument/semanticTokens",c.type=new r.RegistrationType(c.method),(a=t.SemanticTokensRequest||(t.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",a.type=new r.ProtocolRequestType(a.method),(s=t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",s.type=new r.ProtocolRequestType(s.method),(o=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",o.type=new r.ProtocolRequestType(o.method),(i=t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",i.type=new r.ProtocolRequestType0(i.method)},75726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;const r=n(66140);var i;(i=t.ShowDocumentRequest||(t.ShowDocumentRequest={})).method="window/showDocument",i.type=new r.ProtocolRequestType(i.method)},71589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;const r=n(66140);var i;(i=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={})).method="textDocument/typeDefinition",i.type=new r.ProtocolRequestType(i.method)},83693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchySubtypesRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchyPrepareRequest=void 0;const r=n(66140);var i,o,s;(s=t.TypeHierarchyPrepareRequest||(t.TypeHierarchyPrepareRequest={})).method="textDocument/prepareTypeHierarchy",s.type=new r.ProtocolRequestType(s.method),(o=t.TypeHierarchySupertypesRequest||(t.TypeHierarchySupertypesRequest={})).method="typeHierarchy/supertypes",o.type=new r.ProtocolRequestType(o.method),(i=t.TypeHierarchySubtypesRequest||(t.TypeHierarchySubtypesRequest={})).method="typeHierarchy/subtypes",i.type=new r.ProtocolRequestType(i.method)},98744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const r=n(66140);(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})).type=new r.ProtocolRequestType0("workspace/workspaceFolders"),(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={})).type=new r.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")},69533:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},91674:(e,t,n)=>{"use strict";var r,i,o,s,a,c,l,u,d,h,p,f,g,m,v,y,b,w,S,C,_,P,E,k,I,D,T,x;n.r(t),n.d(t,{AnnotatedTextEdit:()=>E,ChangeAnnotation:()=>_,ChangeAnnotationIdentifier:()=>P,CodeAction:()=>oe,CodeActionContext:()=>ie,CodeActionKind:()=>ne,CodeActionTriggerKind:()=>re,CodeDescription:()=>b,CodeLens:()=>se,Color:()=>d,ColorInformation:()=>h,ColorPresentation:()=>p,Command:()=>S,CompletionItem:()=>H,CompletionItemKind:()=>F,CompletionItemLabelDetails:()=>V,CompletionItemTag:()=>K,CompletionList:()=>B,CreateFile:()=>I,DeleteFile:()=>T,Diagnostic:()=>w,DiagnosticRelatedInformation:()=>m,DiagnosticSeverity:()=>v,DiagnosticTag:()=>y,DocumentHighlight:()=>Y,DocumentHighlightKind:()=>z,DocumentLink:()=>ce,DocumentSymbol:()=>te,DocumentUri:()=>r,EOL:()=>Ee,FoldingRange:()=>g,FoldingRangeKind:()=>f,FormattingOptions:()=>ae,Hover:()=>J,InlayHint:()=>be,InlayHintKind:()=>ve,InlayHintLabelPart:()=>ye,InlineValueContext:()=>me,InlineValueEvaluatableExpression:()=>ge,InlineValueText:()=>pe,InlineValueVariableLookup:()=>fe,InsertReplaceEdit:()=>U,InsertTextFormat:()=>L,InsertTextMode:()=>W,Location:()=>l,LocationLink:()=>u,MarkedString:()=>q,MarkupContent:()=>j,MarkupKind:()=>N,OptionalVersionedTextDocumentIdentifier:()=>M,ParameterInformation:()=>$,Position:()=>a,Range:()=>c,RenameFile:()=>D,SelectionRange:()=>le,SemanticTokenModifiers:()=>de,SemanticTokenTypes:()=>ue,SemanticTokens:()=>he,SignatureInformation:()=>G,SymbolInformation:()=>Z,SymbolKind:()=>Q,SymbolTag:()=>X,TextDocument:()=>Pe,TextDocumentEdit:()=>k,TextDocumentIdentifier:()=>O,TextDocumentItem:()=>A,TextEdit:()=>C,URI:()=>i,VersionedTextDocumentIdentifier:()=>R,WorkspaceChange:()=>_e,WorkspaceEdit:()=>x,WorkspaceFolder:()=>we,WorkspaceSymbol:()=>ee,integer:()=>o,uinteger:()=>s}),function(e){e.is=function(e){return"string"==typeof e}}(r||(r={})),function(e){e.is=function(e){return"string"==typeof e}}(i||(i={})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(o||(o={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(s||(s={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=s.MAX_VALUE),t===Number.MAX_VALUE&&(t=s.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return ke.objectLiteral(t)&&ke.uinteger(t.line)&&ke.uinteger(t.character)}}(a||(a={})),function(e){e.create=function(e,t,n,r){if(ke.uinteger(e)&&ke.uinteger(t)&&ke.uinteger(n)&&ke.uinteger(r))return{start:a.create(e,t),end:a.create(n,r)};if(a.is(e)&&a.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(n,", ").concat(r,"]"))},e.is=function(e){var t=e;return ke.objectLiteral(t)&&a.is(t.start)&&a.is(t.end)}}(c||(c={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return ke.defined(t)&&c.is(t.range)&&(ke.string(t.uri)||ke.undefined(t.uri))}}(l||(l={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return ke.defined(t)&&c.is(t.targetRange)&&ke.string(t.targetUri)&&c.is(t.targetSelectionRange)&&(c.is(t.originSelectionRange)||ke.undefined(t.originSelectionRange))}}(u||(u={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return ke.objectLiteral(t)&&ke.numberRange(t.red,0,1)&&ke.numberRange(t.green,0,1)&&ke.numberRange(t.blue,0,1)&&ke.numberRange(t.alpha,0,1)}}(d||(d={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return ke.objectLiteral(t)&&c.is(t.range)&&d.is(t.color)}}(h||(h={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return ke.objectLiteral(t)&&ke.string(t.label)&&(ke.undefined(t.textEdit)||C.is(t))&&(ke.undefined(t.additionalTextEdits)||ke.typedArray(t.additionalTextEdits,C.is))}}(p||(p={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(f||(f={})),function(e){e.create=function(e,t,n,r,i,o){var s={startLine:e,endLine:t};return ke.defined(n)&&(s.startCharacter=n),ke.defined(r)&&(s.endCharacter=r),ke.defined(i)&&(s.kind=i),ke.defined(o)&&(s.collapsedText=o),s},e.is=function(e){var t=e;return ke.objectLiteral(t)&&ke.uinteger(t.startLine)&&ke.uinteger(t.startLine)&&(ke.undefined(t.startCharacter)||ke.uinteger(t.startCharacter))&&(ke.undefined(t.endCharacter)||ke.uinteger(t.endCharacter))&&(ke.undefined(t.kind)||ke.string(t.kind))}}(g||(g={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return ke.defined(t)&&l.is(t.location)&&ke.string(t.message)}}(m||(m={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(v||(v={})),function(e){e.Unnecessary=1,e.Deprecated=2}(y||(y={})),function(e){e.is=function(e){var t=e;return ke.objectLiteral(t)&&ke.string(t.href)}}(b||(b={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return ke.defined(n)&&(s.severity=n),ke.defined(r)&&(s.code=r),ke.defined(i)&&(s.source=i),ke.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t,n=e;return ke.defined(n)&&c.is(n.range)&&ke.string(n.message)&&(ke.number(n.severity)||ke.undefined(n.severity))&&(ke.integer(n.code)||ke.string(n.code)||ke.undefined(n.code))&&(ke.undefined(n.codeDescription)||ke.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(ke.string(n.source)||ke.undefined(n.source))&&(ke.undefined(n.relatedInformation)||ke.typedArray(n.relatedInformation,m.is))}}(w||(w={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return ke.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return ke.defined(t)&&ke.string(t.title)&&ke.string(t.command)}}(S||(S={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return ke.objectLiteral(t)&&ke.string(t.newText)&&c.is(t.range)}}(C||(C={})),function(e){e.create=function(e,t,n){var r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},e.is=function(e){var t=e;return ke.objectLiteral(t)&&ke.string(t.label)&&(ke.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(ke.string(t.description)||void 0===t.description)}}(_||(_={})),function(e){e.is=function(e){var t=e;return ke.string(t)}}(P||(P={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return C.is(t)&&(_.is(t.annotationId)||P.is(t.annotationId))}}(E||(E={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return ke.defined(t)&&M.is(t.textDocument)&&Array.isArray(t.edits)}}(k||(k={})),function(e){e.create=function(e,t,n){var r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"create"===t.kind&&ke.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||ke.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ke.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||P.is(t.annotationId))}}(I||(I={})),function(e){e.create=function(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&ke.string(t.oldUri)&&ke.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||ke.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ke.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||P.is(t.annotationId))}}(D||(D={})),function(e){e.create=function(e,t,n){var r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"delete"===t.kind&&ke.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||ke.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||ke.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||P.is(t.annotationId))}}(T||(T={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return ke.string(e.kind)?I.is(e)||D.is(e)||T.is(e):k.is(e)})))}}(x||(x={}));var O,R,M,A,N,j,F,L,K,U,W,V,H,B,q,J,$,G,z,Y,Q,X,Z,ee,te,ne,re,ie,oe,se,ae,ce,le,ue,de,he,pe,fe,ge,me,ve,ye,be,we,Se=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(void 0===n?r=C.insert(e,t):P.is(n)?(i=n,r=E.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=E.insert(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.replace=function(e,t,n){var r,i;if(void 0===n?r=C.replace(e,t):P.is(n)?(i=n,r=E.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=E.replace(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.delete=function(e,t){var n,r;if(void 0===t?n=C.del(e):P.is(t)?(r=t,n=E.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=E.del(e,r)),this.edits.push(n),void 0!==r)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Ce=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(P.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id ".concat(n," is already in use."));if(void 0===t)throw new Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),_e=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Ce(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(k.is(e)){var n=new Se(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new Se(e.changes[n]);t._textEditChanges[n]=r}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(M.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new Se(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new Se(i),this._textEditChanges[e]=r}return r},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Ce,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(_.is(t)||P.is(t)?r=t:n=t,void 0===r?i=I.create(e,n):(o=P.is(r)?r:this._changeAnnotations.manage(r),i=I.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,o,s;if(_.is(n)||P.is(n)?i=n:r=n,void 0===i?o=D.create(e,t,r):(s=P.is(i)?i:this._changeAnnotations.manage(i),o=D.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(_.is(t)||P.is(t)?r=t:n=t,void 0===r?i=T.create(e,n):(o=P.is(r)?r:this._changeAnnotations.manage(r),i=T.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return ke.defined(t)&&ke.string(t.uri)}}(O||(O={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ke.defined(t)&&ke.string(t.uri)&&ke.integer(t.version)}}(R||(R={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ke.defined(t)&&ke.string(t.uri)&&(null===t.version||ke.integer(t.version))}}(M||(M={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return ke.defined(t)&&ke.string(t.uri)&&ke.string(t.languageId)&&ke.integer(t.version)&&ke.string(t.text)}}(A||(A={})),function(e){e.PlainText="plaintext",e.Markdown="markdown",e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(N||(N={})),function(e){e.is=function(e){var t=e;return ke.objectLiteral(e)&&N.is(t.kind)&&ke.string(t.value)}}(j||(j={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(F||(F={})),function(e){e.PlainText=1,e.Snippet=2}(L||(L={})),function(e){e.Deprecated=1}(K||(K={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&ke.string(t.newText)&&c.is(t.insert)&&c.is(t.replace)}}(U||(U={})),function(e){e.asIs=1,e.adjustIndentation=2}(W||(W={})),function(e){e.is=function(e){var t=e;return t&&(ke.string(t.detail)||void 0===t.detail)&&(ke.string(t.description)||void 0===t.description)}}(V||(V={})),function(e){e.create=function(e){return{label:e}}}(H||(H={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(B||(B={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return ke.string(t)||ke.objectLiteral(t)&&ke.string(t.language)&&ke.string(t.value)}}(q||(q={})),function(e){e.is=function(e){var t=e;return!!t&&ke.objectLiteral(t)&&(j.is(t.contents)||q.is(t.contents)||ke.typedArray(t.contents,q.is))&&(void 0===e.range||c.is(e.range))}}(J||(J={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}($||($={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return ke.defined(t)&&(i.documentation=t),ke.defined(n)?i.parameters=n:i.parameters=[],i}}(G||(G={})),function(e){e.Text=1,e.Read=2,e.Write=3}(z||(z={})),function(e){e.create=function(e,t){var n={range:e};return ke.number(t)&&(n.kind=t),n}}(Y||(Y={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(Q||(Q={})),function(e){e.Deprecated=1}(X||(X={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(Z||(Z={})),function(e){e.create=function(e,t,n,r){return void 0!==r?{name:e,kind:t,location:{uri:n,range:r}}:{name:e,kind:t,location:{uri:n}}}}(ee||(ee={})),function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&ke.string(t.name)&&ke.number(t.kind)&&c.is(t.range)&&c.is(t.selectionRange)&&(void 0===t.detail||ke.string(t.detail))&&(void 0===t.deprecated||ke.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(te||(te={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(ne||(ne={})),function(e){e.Invoked=1,e.Automatic=2}(re||(re={})),function(e){e.create=function(e,t,n){var r={diagnostics:e};return null!=t&&(r.only=t),null!=n&&(r.triggerKind=n),r},e.is=function(e){var t=e;return ke.defined(t)&&ke.typedArray(t.diagnostics,w.is)&&(void 0===t.only||ke.typedArray(t.only,ke.string))&&(void 0===t.triggerKind||t.triggerKind===re.Invoked||t.triggerKind===re.Automatic)}}(ie||(ie={})),function(e){e.create=function(e,t,n){var r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):S.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&ke.string(t.title)&&(void 0===t.diagnostics||ke.typedArray(t.diagnostics,w.is))&&(void 0===t.kind||ke.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||S.is(t.command))&&(void 0===t.isPreferred||ke.boolean(t.isPreferred))&&(void 0===t.edit||x.is(t.edit))}}(oe||(oe={})),function(e){e.create=function(e,t){var n={range:e};return ke.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return ke.defined(t)&&c.is(t.range)&&(ke.undefined(t.command)||S.is(t.command))}}(se||(se={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return ke.defined(t)&&ke.uinteger(t.tabSize)&&ke.boolean(t.insertSpaces)}}(ae||(ae={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return ke.defined(t)&&c.is(t.range)&&(ke.undefined(t.target)||ke.string(t.target))}}(ce||(ce={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return ke.objectLiteral(n)&&c.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(le||(le={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(ue||(ue={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(de||(de={})),function(e){e.is=function(e){var t=e;return ke.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(he||(he={})),function(e){e.create=function(e,t){return{range:e,text:t}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&ke.string(t.text)}}(pe||(pe={})),function(e){e.create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&ke.boolean(t.caseSensitiveLookup)&&(ke.string(t.variableName)||void 0===t.variableName)}}(fe||(fe={})),function(e){e.create=function(e,t){return{range:e,expression:t}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&(ke.string(t.expression)||void 0===t.expression)}}(ge||(ge={})),function(e){e.create=function(e,t){return{frameId:e,stoppedLocation:t}},e.is=function(e){var t=e;return ke.defined(t)&&c.is(e.stoppedLocation)}}(me||(me={})),function(e){e.Type=1,e.Parameter=2,e.is=function(e){return 1===e||2===e}}(ve||(ve={})),function(e){e.create=function(e){return{value:e}},e.is=function(e){var t=e;return ke.objectLiteral(t)&&(void 0===t.tooltip||ke.string(t.tooltip)||j.is(t.tooltip))&&(void 0===t.location||l.is(t.location))&&(void 0===t.command||S.is(t.command))}}(ye||(ye={})),function(e){e.create=function(e,t,n){var r={position:e,label:t};return void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return ke.objectLiteral(t)&&a.is(t.position)&&(ke.string(t.label)||ke.typedArray(t.label,ye.is))&&(void 0===t.kind||ve.is(t.kind))&&void 0===t.textEdits||ke.typedArray(t.textEdits,C.is)&&(void 0===t.tooltip||ke.string(t.tooltip)||j.is(t.tooltip))&&(void 0===t.paddingLeft||ke.boolean(t.paddingLeft))&&(void 0===t.paddingRight||ke.boolean(t.paddingRight))}}(be||(be={})),function(e){e.is=function(e){var t=e;return ke.objectLiteral(t)&&i.is(t.uri)&&ke.string(t.name)}}(we||(we={}));var Pe,Ee=["\n","\r\n","\r"];!function(e){function t(e,n){if(e.length<=1)return e;var r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var l=n(i[s],o[a]);e[c++]=l<=0?i[s++]:o[a++]}for(;s<i.length;)e[c++]=i[s++];for(;a<o.length;)e[c++]=o[a++];return e}e.create=function(e,t,n,r){return new Ie(e,t,n,r)},e.is=function(e){var t=e;return!!(ke.defined(t)&&ke.string(t.uri)&&(ke.undefined(t.languageId)||ke.string(t.languageId))&&ke.uinteger(t.lineCount)&&ke.func(t.getText)&&ke.func(t.positionAt)&&ke.func(t.offsetAt))},e.applyEdits=function(e,n){for(var r=e.getText(),i=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=r.length,s=i.length-1;s>=0;s--){var a=i[s],c=e.offsetAt(a.range.start),l=e.offsetAt(a.range.end);if(!(l<=o))throw new Error("Overlapping edit");r=r.substring(0,c)+a.newText+r.substring(l,r.length),o=c}return r}}(Pe||(Pe={}));var ke,Ie=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return a.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return a.create(o,e-t[o])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(ke||(ke={}))},59035:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15654);t.getExperimentationService=r.getExperimentationService,t.getExperimentationServiceAsync=r.getExperimentationServiceAsync;var i=n(22560);t.TargetPopulation=i.TargetPopulation},55708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MementoKeyValueStorage=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,t){return await this.mementoGlobalStorage.get(e)||t}setValue(e,t){this.mementoGlobalStorage.update(e,t)}}},4619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,t){}getTreatmentVariableAsync(e,t){return Promise.resolve(void 0)}}},22560:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(66828);class i{constructor(e,t,n){this.extensionName=e,this.extensionVersion=t,this.targetPopulation=n}static trimVersionSuffix(e){return e.split(/\-[a-zA-Z0-9]+$/)[0]}getFilterValue(e){switch(e){case o.ApplicationVersion:return i.trimVersionSuffix(r.version);case o.Build:return r.env.appName;case o.ClientId:return r.env.machineId;case o.ExtensionName:return this.extensionName;case o.ExtensionVersion:return i.trimVersionSuffix(this.extensionVersion);case o.Language:return r.env.language;case o.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,t=Object.values(o);for(let n of t)e.set(n,this.getFilterValue(n));return e}}var o,s;t.VSCodeFilterProvider=i,function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"}(o=t.Filters||(t.Filters={})),(s=t.TargetPopulation||(t.TargetPopulation={})).Team="team",s.Internal="internal",s.Insiders="insider",s.Public="public"},15654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(22560),i=n(14802),o=n(66828),s=n(55708),a=n(4619);function c(e,t,n,c,l,...u){if(!l)throw new Error("Memento storage was not provided.");const d=o.workspace.getConfiguration("telemetry");if(!(void 0===o.env.isTelemetryEnabled?d.get("enableTelemetry",!0):o.env.isTelemetryEnabled))return new a.default;const h=[new r.VSCodeFilterProvider(e,t,n),...u],p=new s.MementoKeyValueStorage(l);return new i.ExperimentationService({filterProviders:h,telemetry:c,storageKey:"VSCode.ABExp.FeatureData",keyValueStorage:p,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext",telemetryEventName:"query-expfeature",endpoint:"https://default.exp-tas.com/vscode/ab",refetchInterval:18e5})}t.getExperimentationService=c,t.getExperimentationServiceAsync=async function(e,t,n,r,i,...o){const s=c(e,t,n,r,i,...o);return await s.initializePromise,s}},63826:e=>{"use strict";e.exports=require("node:crypto")},66828:e=>{"use strict";e.exports=require("vscode")},21763:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0,__webpack_require__(39667),"undefined"==typeof requestAnimationFrame&&"undefined"==typeof setImmediate&&(self.setImmediate=e=>setTimeout(e),self.clearImmediate=e=>clearTimeout(e)),__webpack_require__(11642);const t={totalActivateTime:0,codeLoadingTime:0,startActivateTime:0,endActivateTime:0,workspaceFolderCount:0},n=new(__webpack_require__(11386).StopWatch),r=__webpack_require__(66828),i=__webpack_require__(34383),o=__webpack_require__(10053),s=__webpack_require__(11642),a=__webpack_require__(42080),c=__webpack_require__(43138),l=__webpack_require__(25251),u=__webpack_require__(41778),d=__webpack_require__(80772),h=__webpack_require__(58681),p=__webpack_require__(11311),f=__webpack_require__(9086),g=__webpack_require__(24411),m=__webpack_require__(95247),v=__webpack_require__(12234),y=__webpack_require__(63521),b=__webpack_require__(61480),w=__webpack_require__(52064),S=__webpack_require__(15925),C=__webpack_require__(22913),_=__webpack_require__(11642),P=__webpack_require__(51389),E=__webpack_require__(5337),k=__webpack_require__(33796),I=__webpack_require__(75409),D=__webpack_require__(91057),T=__webpack_require__(10499);let x;t.codeLoadingTime=n.elapsedTime,e.activate=async function(e){e.subscriptions.push({dispose:()=>S.Exiting.isExiting=!0});try{let s,O,R;return[s,O,R]=await async function(e,t,n){const s=(0,c.createDeferred)();try{!function(e){const t={location:r.ProgressLocation.Window,title:l.Common.loadingExtension};r.window.withProgress(t,(()=>e)).then(h.noop,h.noop)}(s.promise),n.startActivateTime=t.elapsedTime;const[c,d]=function(e){const t=new P.Container({skipBaseClassChecks:!0}),n=new k.ServiceManager(t),r=new E.ServiceContainer(t);return n.addSingletonInstance(u.IServiceContainer,r),n.addSingletonInstance(u.IServiceManager,n),n.addSingletonInstance(a.IDisposableRegistry,e.subscriptions),n.addSingletonInstance(a.IMemento,e.globalState,a.GLOBAL_MEMENTO),n.addSingletonInstance(a.IMemento,e.workspaceState,a.WORKSPACE_MEMENTO),n.addSingletonInstance(a.IExtensionContext,e),[n,r]}(e);x=d,(0,T.initializeGlobals)((()=>Promise.resolve(new Map)));const O=async function(e,t,n){return async function(e,t,n){const i=e.extensionMode===r.ExtensionMode.Development||r.workspace.getConfiguration("jupyter").get("development",!1);t.addSingletonInstance(a.IsDevMode,i),t.addSingletonInstance(a.IsWebExtension,!0),i&&r.commands.executeCommand("setContext","jupyter.development",!0).then(h.noop,h.noop),r.commands.executeCommand("setContext","jupyter.webExtension",!0).then(h.noop,h.noop),function(e,t){const n=r.window.createOutputChannel(l.OutputChannelNames.jupyter,"log");(0,_.registerLogger)(new I.OutputChannelLogger(n)),t.addSingletonInstance(a.IOutputChannel,n,S.STANDARD_OUTPUT_CHANNEL),t.addSingletonInstance(a.IOutputChannel,(0,C.getJupyterOutputChannel)(e.subscriptions),S.JUPYTER_OUTPUT_CHANNEL),t.addSingletonInstance(a.IsCodeSpace,r.env.uiKind==r.UIKind.Web),n.appendLine(`${r.env.appName} (${r.version}, ${r.env.remoteName}, ${r.env.appHost})`),n.appendLine(`Jupyter Extension Version: ${e.extension.packageJSON.version}.`);const i=r.extensions.getExtension(S.PythonExtension);i?n.appendLine(`Python Extension Version: ${i.packageJSON.version}.`):n.appendLine("Python Extension not installed."),r.workspace.workspaceFolders&&0!==r.workspace.workspaceFolders.length?n.appendLine("Opened workspace folder."):n.appendLine("No workspace folder opened.")}(e,t),function(){if((0,S.isTestExecution)()){let e;S.isCI||(e="Jupyter Extension:"),(0,_.registerLogger)(new D.ConsoleLogger(e))}}(),(0,p.registerTypes)(t),(0,g.registerTypes)(t,i),(0,f.registerTypes)(t,i),(0,m.registerTypes)(t),(0,v.registerTypes)(t),(0,y.registerTypes)(e,t,i),(0,b.registerTypes)(t);const s=n.get(a.IExperimentService);await s.activate();const c=t.get(o.IApplicationEnvironment),u=t.get(a.IConfigurationService).getSettings();(0,_.setLoggingLevel)(u.logging.level),u.onDidChange((()=>{(0,_.setLoggingLevel)(u.logging.level)}));n.get(o.ICommandManager).executeCommand("setContext","jupyter.vscode.channel",c.channel).then(h.noop,h.noop),n.get(w.IExtensionActivationManager).activate();const d=n.get(a.IFeaturesManager);d.initialize(),e.subscriptions.push(d)}(e,t,n)}(e,c,d);return n.endActivateTime=t.elapsedTime,s.resolve(),[(0,i.buildApi)(O,c,d,e),O,d]}finally{s.completed||s.reject()}}(e,n,t),(0,d.sendStartupTelemetry)(O,t,n,R).catch(h.noop),await O,s}catch(e){return await async function(e,t){(function(e){try{r.window.showErrorMessage(e).then(h.noop,h.noop)}catch(e){(0,s.traceError)("failed to notify user",e)}})(l.Common.handleExtensionActivationError),console.error("extension activation failed",e),(0,s.traceError)("extension activation failed",e),await(0,d.sendErrorTelemetry)(e,t,x)}(e,t),(0,s.traceError)("Failed to active the Jupyter Extension",e),{ready:Promise.resolve(),registerPythonApi:h.noop,registerRemoteServerProvider:()=>({dispose:h.noop}),showDataViewer:()=>Promise.resolve(),getKernelService:()=>Promise.resolve(void 0),getSuggestedController:()=>Promise.resolve(void 0),addRemoteJupyterServer:()=>Promise.resolve(void 0),openNotebook:()=>Promise.reject(),createJupyterServerCollection:()=>{throw new Error("Not Implemented")}}}},e.deactivate=function(){if(S.Exiting.isExiting=!0,x){const e=x.get(a.IAsyncDisposableRegistry);if(e)return e.dispose()}return Promise.resolve()}})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=extension.web.bundle.js.map